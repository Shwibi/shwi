(this["webpackJsonpunacademy-live"]=this["webpackJsonpunacademy-live"]||[]).push([[7],{0:function(e,t,i){i("j36g"),e.exports=i("tjUo")},"0m7i":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));i("q1tI");var n=i("vOnD"),a=i("17x9"),o=i.n(a),r=i("8ezB"),s=n.d.div.withConfig({displayName:"SideCurtain",componentId:"sc-1pqxqj5-0"})((function(e){return{display:"flex",position:"absolute",alignItems:"flex-start",justifyContent:"flex-end",height:"100vh",width:"25vw",right:e.isOpen?"0":"-25vw",opacity:e.isOpen?1:0,zIndex:e.zIndex,transition:e.isOpen?"opacity 0.1s ease-in-out":"opacity 0.1s ease-in-out 0.25s, right 0s 0.35s",boxSizing:"border-box",background:e.isOverlayVisible?e.theme.BLACK+"80":"transparent",pointerEvents:e.isOverlayVisible?"auto":"none"}})),l=n.d.div.withConfig({displayName:"SideCurtain__SideCurtainContent",componentId:"sc-1pqxqj5-1"})(["width:",";height:100%;background:",";right:",";transition:right 0.25s ease-in-out;",""],(function(e){return e.contentWidth}),(function(e){return e.theme.BODY_BG}),(function(e){var t=e.isOpen,i=e.contentWidth;return t?0:"-".concat(i)}),(function(e){if(!e.isOverlayVisible)return Object(n.c)(["pointer-events:all;box-shadow:0 "," "," ",";transition:right 0.5s ease-in-out;"],r.c.SPACING_4B,r.c.SPACING_8B,(function(e){return e.theme.SHADOW}))}));t.b=s,s.propTypes={onClick:o.a.func,isOverlayVisible:o.a.bool},s.defaultProps={onClick:function(){},isOverlayVisible:!0},l.propTypes={isOverlayVisible:o.a.bool,contentWidth:o.a.string},l.defaultProps={onClick:function(e){e.stopPropagation()},isOverlayVisible:!0,contentWidth:"20vw"}},1:function(e,t){},"2Zw5":function(e,t,i){e.exports=i.p+"static/media/darkRuledThemeBanner.467323c9.svg"},"3PcP":function(e,t,i){e.exports=i.p+"static/media/pause-big.ecb150bf.svg"},"40cp":function(e,t,i){e.exports=i.p+"static/media/logo.38c385cc.svg"},"5wix":function(e,t,i){e.exports=i.p+"static/media/shape-triangle.8e852a3e.svg"},"6HPj":function(e,t,i){"use strict";var n=i("vOnD").d.div.withConfig({displayName:"Flex",componentId:"sc-10dpm2r-0"})((function(e){return{display:"flex",position:e.position,alignItems:e.alignItems,justifyContent:e.justifyContent,flexDirection:e.flexDirection,flex:e.flex,overflow:e.overflow?e.overflow:"initial"}}));t.a=n},"7YYm":function(e,t,i){e.exports=i.p+"static/media/playButtonBig.0fe77ffa.svg"},"8O3G":function(e,t,i){e.exports=i.p+"static/media/connecting-to-class.054e3c30.svg"},"9MmO":function(e,t,i){e.exports=i.p+"static/media/shape-line.202ee716.svg"},"9Zus":function(e,t,i){"use strict";i.r(t);var n=i("J4zp"),a=i.n(n),o=i("q1tI"),r=i.n(o),s=i("/MKj"),l=i("vOnD"),c=i("Ocil"),d=i("0dbe");const p={pause:r.a.createElement(d.ab,{height:"100%",width:"100%"}),play:r.a.createElement(d.bb,{height:"100%",width:"100%"}),forward:r.a.createElement(d.Y,{height:"100%",width:"100%"}),rewind:r.a.createElement(d.cb,{height:"100%",width:"100%"}),mute:r.a.createElement(d.Z,{height:"100%",width:"100%"}),unmute:r.a.createElement(d.db,{height:"100%",width:"100%"})},u=Object(l.e)(["from{opacity:1;-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1);}100%{opacity:0;-webkit-transform:scale3d(1.2,1.2,1.2);transform:scale3d(1.2,1.2,1.2);}"]),h=l.d.div.withConfig({displayName:"MicroInteraction__Wrapper",componentId:"sc-14eiq3h-0"})(["height:88px;width:88px;position:absolute;border-radius:50%;transform:scale3d(1,1,1);left:calc(50% - 44px);top:calc(50% - 44px);opacity:1;",";"],e=>{if(!e.show)return Object(l.c)(["animation:"," 0.4s ease-in-out;animation-fill-mode:forwards;"],u)});t.default=e=>{const t=Object(s.d)(),i=Object(s.e)(e=>e.getIn(["videoPlayControls","isLivePaused"])),n=Object(s.e)(e=>e.getIn(["videoPlayControls","isVideoPaused"])),l=Object(s.e)(e=>e.getIn(["videoPlayControls","isLiveDVR"])),d=Object(s.e)(e=>e.getIn(["app","isReplay"])),u=Object(s.e)(e=>e.getIn(["videoPlayControls","isMuted"])),m=Object(s.e)(e=>e.getIn(["videoPlayControls","hasUserInteracted"])),g=Object(s.e)(e=>e.getIn(["videoPlayControls","isRewindedByLeftArrow"])),f=Object(s.e)(e=>e.getIn(["videoPlayControls","isForwardedByRightArrow"])),E=Object(o.useRef)(null),b=Object(o.useRef)(null),C=Object(o.useRef)(!1),v=l||d?n:i,S=Object(o.useState)(!1),I=a()(S,2),y=I[0],_=I[1],O=()=>{_(!0),b.current=setTimeout(()=>{b.current&&clearInterval(b.current),_(!1),f&&t(Object(c.h)(!1)),g&&t(Object(c.m)(!1))},50)};Object(o.useEffect)(()=>{m&&(C.current=!0)},[m]),Object(o.useEffect)(()=>{E.current=u?p.mute:p.unmute,O()},[u]),Object(o.useEffect)(()=>{E.current=v?p.pause:p.play,O()},[v]),Object(o.useEffect)(()=>{f&&(E.current=p.forward,O())},[f]),Object(o.useEffect)(()=>{g&&(E.current=p.rewind,O())},[g]);return C.current?r.a.createElement(h,{show:y&&m},E.current):r.a.createElement(r.a.Fragment,null)}},"9dHv":function(e,t,i){e.exports=i.p+"static/media/statsMessages.856aad98.svg"},CZkf:function(e,t,i){e.exports=i.p+"static/media/close-grey.28b667ee.svg"},ChkN:function(e,t,i){e.exports=i.p+"static/media/classPause.95e9da09.svg"},DE6I:function(e,t,i){e.exports=i.p+"static/media/darkThemeBanner.f801bae7.svg"},DdGD:function(e,t,i){e.exports=i.p+"static/media/activeRate.6640ab9b.svg"},E4fE:function(e,t,i){"use strict";var n=i("q1tI"),a=i.n(n),o=i("/MKj"),r=i("17x9"),s=i.n(r),l=i("WlAH"),c=i("vOnD"),d=i("8ezB"),p=i("v4fW"),u=c.d.div.withConfig({displayName:"Pen__Wrapper",componentId:"sc-1fjccj4-0"})(["margin-right:",";"],d.c.SPACING_2B),h=a.a.memo((function(e){var t=e.setDrawingMode,i=e.shortcutText,n=Object(o.e)((function(e){return e.getIn(["drawingBoardControls","drawingMode"])})),r=Object(o.e)((function(e){return e.getIn(["drawingBoardControls","markerColor"])})),s=Object(o.e)((function(e){return e.getIn(["drawingBoardControls","isEducatorSlideViewActive"])})),c=n===l.v.MARKER;return a.a.createElement(u,null,a.a.createElement(p.a,{type:"marker",text:l.u.PEN,isSelected:c,selectedColor:r,onClick:function(){c||t(l.v.MARKER)},varWidth:!0,shortcutText:i,disabled:s}))}));h.propTypes={setDrawingMode:s.a.func.isRequired},t.a=h},EMv4:function(e,t,i){"use strict";var n=i("q1tI"),a=i.n(n),o=i("/MKj"),r=i("vOnD"),s=i("8ezB"),l=i("Pj12"),c=i("aV5g"),d=i("17x9"),p=i.n(d),u=i("0dbe"),h=i("o2ye"),m=i("C7CA");const g=r.d.div.withConfig({displayName:"SlideNavigator__SlideNavigatorContainer",componentId:"fksv05-0"})(["display:flex;align-items:center;margin:"," ",";"],s.c.SPACING_0B,s.c.SPACING_2B),f=r.d.div.withConfig({displayName:"SlideNavigator__ChevronImgContainer",componentId:"fksv05-1"})(["height:",";width:",";display:flex;justify-content:center;align-items:center;cursor:pointer;border:"," solid;border-radius:",";border-color:",";background-color:",";opacity:",";pointer-events:",";"],({isTestEvaluationMode:e})=>e?s.c.SPACING_8B:s.c.SPACING_6B,({isTestEvaluationMode:e})=>e?s.c.SPACING_8B:s.c.SPACING_6B,s.c.SPACING_1,s.c.SPACING_2B,e=>e.theme.BORDER,e=>e.theme.BG_MAIN,({disabled:e})=>e?.5:1,({disabled:e})=>e?"none":"initial"),E=r.d.div.withConfig({displayName:"SlideNavigator__TestEvalSlideIndexContainer",componentId:"fksv05-2"})(["height:",";display:flex;justify-content:center;margin:"," ",";align-items:center;border:"," solid;border-radius:",";border-color:",";background-color:",";padding:"," ",";"],s.c.SPACING_8B,s.c.SPACING_0B,s.c.SPACING_1B,s.c.SPACING_1,s.c.SPACING_2B,e=>e.theme.BORDER,e=>e.theme.BG_MAIN,s.c.SPACING_0B,s.c.SPACING_2B),b=r.d.div.withConfig({displayName:"SlideNavigator__SlideNumberContainer",componentId:"fksv05-3"})(["display:flex;margin:"," ",";cursor:",";height:18px;align-items:center;"],s.c.SPACING_0B,s.c.SPACING_2B,({disableCenterClick:e})=>e?"default":"pointer"),C=r.d.div.withConfig({displayName:"SlideNavigator__ActiveSlideContainer",componentId:"fksv05-4"})(["font-weight:",";font-size:",";line-height:",";color:",";width:",";user-select:none;"],s.d.SEMIBOLD,s.d.SMALL,s.d.LINE_HEIGHT,e=>e.theme.TEXT_PRIMARY,s.c.SPACING_5B),v=Object(r.d)(C).withConfig({displayName:"SlideNavigator__TotalSlidesContainer",componentId:"fksv05-5"})(["color:",";"],e=>e.theme.TEXT_TERTIARY),S=Object(r.d)(v).withConfig({displayName:"SlideNavigator__SlideNumberSeparatorContainer",componentId:"fksv05-6"})(["margin:"," ",";width:",";"],s.c.SPACING_0B,s.c.SPACING_1B,s.c.SPACING_6),I=Object(r.d)(v).withConfig({displayName:"SlideNavigator__TotalSlideContainerWithBorder",componentId:"fksv05-7"})(["height:100%;width:initial;min-width:12px;border-bottom:1px solid ",";align-items:center;justify-content:center;display:flex;"],e=>e.theme.TEXT_TERTIARY),y=r.d.div.withConfig({displayName:"SlideNavigator__SlideOverlayImage",componentId:"fksv05-8"})(["display:flex;justify-content:center;align-items:center;height:",";width:",";margin-right:",";"],s.c.SPACING_3B,s.c.SPACING_3B,s.c.SPACING_1B),_=a.a.memo(({activeSlide:e,totalSlides:t,isEducatorSlideViewActive:i,onChangeSlide:r,isTestEvaluationMode:s=!1,disableCenterClick:d=!1})=>{const p=Object(o.d)(),v=Object(o.e)(e=>e.getIn(["drawingBoardControls","educatorSlideViewSelectedSlide"])),_=Object(o.e)(e=>e.getIn(["poll","isCreatePollPopoverOpen"])),O=Object(m.a)();Object(n.useEffect)(()=>(document.addEventListener("keydown",w),()=>{document.removeEventListener("keydown",w)}),[e,t,O,i,s,_]);const w=e=>{if(!e.ctrlKey&&!e.metaKey&&!O&&!i&&!_)switch(e.key){case"ArrowLeft":A();break;case"ArrowRight":P();break;case"ArrowUp":s&&A();break;case"ArrowDown":s&&P()}},T=()=>{i?(v!==e&&r(v),p(Object(l.f)(!1,v))):p(Object(l.f)(!0,e))},A=()=>{0!==e&&r(e-1)},P=()=>{e!==t-1&&r(e+1)},x=e=>{const i=e-1;i<0||i>=t||r(i)},R=e=>{p(Object(c.a)(!0))},D=e=>{p(Object(c.a)(!1))},N=()=>s?a.a.createElement(E,null,a.a.createElement(h.a,{onChange:x,value:e+1,min:1,max:t,onFocus:R,onBlur:D}),a.a.createElement(S,null,"/"),a.a.createElement(C,null,t)):a.a.createElement(n.Fragment,null,a.a.createElement(C,null,(i&&v?v:e)+1),a.a.createElement(S,null,"/"),a.a.createElement(I,null,t));return a.a.createElement(g,null,a.a.createElement(f,{isTestEvaluationMode:s,onClick:A,disabled:i},a.a.createElement(u.p,{size:s?20:16,orientation:s?"up":"left"})),a.a.createElement(b,{disableCenterClick:d,onClick:d?null:T},(()=>{if(!s)return a.a.createElement(y,null,a.a.createElement(u.Ob,null))})(),N()),a.a.createElement(f,{isTestEvaluationMode:s,onClick:P,disabled:i},a.a.createElement(u.p,{size:s?20:16,orientation:s?"down":"right"})))});_.propTypes={activeSlide:p.a.number,totalSlides:p.a.number,isEducatorSlideViewActive:p.a.bool,isTestEvaluationMode:p.a.bool},_.defaultProps={activeSlide:0,totalSlides:1,isTestEvaluationMode:!1},t.a=_},FCfd:function(e,t,i){e.exports=i.p+"static/media/chat-guidelines-icon.35bdf0ce.svg"},FKhi:function(e,t,i){"use strict";var n=i("q1tI"),a=i.n(n),o=i("vOnD"),r=i("8ezB"),s=i("/MKj"),l=o.d.div.withConfig({displayName:"ChoicePill__Wrapper",componentId:"pjbi2u-0"})(["height:100%;max-width:",";min-width:50px;padding:"," ",";flex:1;border-radius:",";background-color:",";display:flex;position:relative;align-items:center;flex-direction:row;border-radius:",";overflow:hidden;pointer-events:",";"," box-sizing:border-box;cursor:pointer;"],(function(e){return"".concat(e.maxWidth,"px")}),r.c.SPACING_0B,r.c.SPACING_3B,r.c.SPACING_2B,(function(e){return e.theme.BG_MAIN}),r.c.SPACING_2B,(function(e){return e.disableClick?"none":"all"}),(function(e){return e.hasBorder?Object(o.c)(["border:1px solid ",";"],e.borderColor):e.selected?Object(o.c)(["border:1px solid ",";"],(function(e){return e.theme.TEXT_PRIMARY})):e.hasShadow?Object(o.c)(["box-shadow:0px 16px 32px ",";"],(function(e){return e.theme.SHADOW})):void 0})),c=o.d.div.withConfig({displayName:"ChoicePill__ChoiceContentWrapper",componentId:"pjbi2u-1"})(["position:relative;flex:1;min-width:40px;height:100%;display:flex;position:relative;align-items:center;justify-content:center;"]),d=o.d.div.withConfig({displayName:"ChoicePill__ChoiceText",componentId:"pjbi2u-2"})(["font-weight:",";font-size:",";line-height:",";color:",";position:absolute;transform:translateY(-50%);top:50%;transition:left 0.3s ease-in;",";"],r.d.BOLD,(function(e){return e.isEducator?r.d.MEDIUM:r.d.EXTRA_LARGE}),r.d.LINE_HEIGHT_MAX,(function(e){return e.color}),(function(e){return e.showPercentage?Object(o.c)(["left:0px;"]):Object(o.c)(["left:50%;transform:translate(-50%,-50%);"])})),p=Object(o.e)(["from{opacity:0;}to{opacity:1;}"]),u=o.d.div.withConfig({displayName:"ChoicePill__Percentage",componentId:"pjbi2u-3"})(["font-size:",";line-height:",";color:",";position:absolute;transform:translateY(-50%);top:50%;right:0px;animation:"," 0.3s ease-in;animation-fill-mode:forwards;"],(function(e){return e.isEducator?r.d.EXTRA_SMALL:r.d.SMALL}),r.d.LINE_HEIGHT_MAX,(function(e){return e.color}),p),h=o.d.div.withConfig({displayName:"ChoicePill__PercentageBar",componentId:"pjbi2u-4"})(["position:absolute;height:100%;width:",";background-color:",";opacity:0.24;left:0px;transition:width 0.3s ease-in;"],(function(e){return"".concat(e.percentage,"%")}),(function(e){return"".concat(e.color)})),m=a.a.memo((function(e){var t=e.choice,i=e.canChoose,n=e.onSelect,o=e.isSelected,r=e.maxWidth,p=e.hasShadow,m=e.theme,g=t.id,f=t.showPercentage,E=t.isCorrect,b=t.hasCorrectAnswer,C=t.answer,v=t.percentage,S=Object(s.e)((function(e){return e.getIn(["app","isEducator"])})),I=i?m.TEXT_PRIMARY:f?b?E?m.GREEN:o?m.RED:m.TEXT_TERTIARY:m.TEXT_TERTIARY:o?m.TEXT_PRIMARY:m.TEXT_TERTIARY;return a.a.createElement(l,{hasBorder:(o||S)&&f,selected:o,borderColor:I,onClick:function(){n&&n(g)},disableClick:!i,maxWidth:r,hasShadow:p},function(){var e=f&&!i?v:0;return a.a.createElement(h,{percentage:e,color:I})}(),a.a.createElement(c,null,a.a.createElement(d,{isEducator:S,color:I,showPercentage:f&&!i},C),function(){if(f&&!i)return a.a.createElement(u,{isEducator:S,color:I},"".concat(v,"%"))}()))}));m.defaultProps={hasShadow:!1},t.a=Object(o.f)(m)},Ffbl:function(e,t,i){"use strict";var n=i("q1tI"),a=i.n(n),o=i("/MKj"),r=(i("17x9"),i("WlAH")),s=i("vOnD"),l=i("8ezB"),c=i("wCkA"),d=i("XyO8"),p=i("C7CA"),u=s.d.div.withConfig({displayName:"ColorPicker__Wrapper",componentId:"sc-18zo605-0"})(["display:flex;justify-content:space-between;align-items:center;",""],(function(e){return e.isTestEvaluationMode?Object(s.c)(["flex-direction:row;"]):Object(s.c)(["flex-direction:column;position:absolute;top:",";left:",";transition:left 0.25s ease-in-out;"],l.c.SPACING_0B,(function(e){return e.isOpen?l.c.SPACING_4B:"-".concat(l.c.SPACING_14B)}))})),h=s.d.div.withConfig({displayName:"ColorPicker__ShortcutColorContainer",componentId:"sc-18zo605-1"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;height:32px;background:",";font-size:",";line-height:",";color:",";margin-bottom:",";"],(function(e){return e.theme.TRANSPARENT}),l.d.EXTRA_SMALL,l.d.LINE_HEIGHT,(function(e){return e.theme.TEXT_TERTIARY}),(function(e){return e.isTestEvaluationMode?l.c.SPACING_0B:l.c.SPACING_2B})),m=s.d.div.withConfig({displayName:"ColorPicker__ColorContainer",componentId:"sc-18zo605-2"})(["position:relative;display:flex;justify-content:center;align-items:center;height:32px;width:32px;background:",";border:1px solid ",";box-sizing:border-box;border-radius:",";"," cursor:pointer;"],(function(e){return e.theme.BG_MAIN}),(function(e){return e.isSelected&&!e.disabled?e.theme.TEXT_PRIMARY:e.theme.BORDER}),l.c.SPACING_2B,(function(e){return e.isTestEvaluationMode?Object(s.c)(["margin-left:",";margin-right:",";"],l.c.SPACING_6,l.c.SPACING_2B):Object(s.c)(["margin-right:",";"],l.c.SPACING_1B)})),g=s.d.div.withConfig({displayName:"ColorPicker__ColorInnerContainer",componentId:"sc-18zo605-3"})(["width:16px;height:16px;background:",";border-radius:",";"],(function(e){return e.color}),l.c.SPACING_1B),f=a.a.memo((function(e){var t=e.onColorChange,i=Object(o.e)((function(e){return e.getIn(["drawingBoardControls","drawingMode"])})),s=Object(o.e)((function(e){return e.getIn(["drawingBoardControls","markerColor"])})),l=Object(o.e)((function(e){return e.getIn(["canvas","activeSlide"])})),f=Object(o.e)((function(e){return e.getIn(["drawingBoardControls","isEducatorSlideViewActive"])})),E=Boolean(Object(o.e)((function(e){return e.getIn(["testEvaluation","evaluationUid"])}))),b=Object(o.e)((function(e){return e.getIn(["pdfEditor","isPdfEditor"])})),C=Object(n.useRef)(!1),v=Object(p.a)()||f,S=f||E&&i===r.v.ERASER,I=i===r.v.RECTANGLE||i===r.v.CIRCLE||i===r.v.ARROW||i===r.v.LINE||i===r.v.MARKER||i===r.v.HIGHLIGHTER,y=r.vb.DARK_PALLETE,_=r.vb.LIGHT_PALLETE,O=r.vb.TEST_EVAL_PALLETE,w=E?O:(b?Object(c.bb)(l,r.ac.LIGHT):Object(c.bb)(l))===r.ac.LIGHT?_:y;Object(n.useEffect)((function(){return document.addEventListener("keydown",T),function(){document.removeEventListener("keydown",T)}}),[i,s,v,w]),Object(n.useEffect)((function(){C.current?w==_?t(Object(c.N)(s)):w==y&&t(Object(c.z)(s)):(C.current=!0,w!=O||s!==r.vb.DARK_DEFAULT&&s!==r.vb.LIGHT_DEFAULT||t(r.vb.TEST_EVAL_DEFAULT))}),[w]);var T=function(e){if(!e.ctrlKey&&!e.metaKey&&I&&!v)switch(e.key){case"1":w[0]&&w[0]!==s&&t(w[0]);break;case"2":w[1]&&w[1]!==s&&t(w[1]);break;case"3":w[2]&&w[2]!==s&&t(w[2]);break;case"4":w[3]&&w[3]!==s&&t(w[3]);break;case"5":w[4]&&w[4]!==s&&t(w[4]);break;case"6":w[5]&&w[5]!==s&&t(w[5]);break;case"7":w[6]&&w[6]!==s&&t(w[6])}};return a.a.createElement(u,{isOpen:I,isTestEvaluationMode:E},w.map((function(e,i){return a.a.createElement(h,{key:i,isTestEvaluationMode:E},E&&i+1,a.a.createElement(m,{isTestEvaluationMode:E,onClick:function(){return function(e){S||e===s||t(e)}(e)},isSelected:s===e,disabled:S},a.a.createElement(g,{color:e}),function(){if(S)return a.a.createElement(d.e,null)}()),!E&&i+1)})))}));f.propTypes={},f.defaultProps={},t.a=f},GLwo:function(e,t,i){e.exports=i.p+"static/media/screenShared.a0308f9c.svg"},I4cS:function(e,t,i){e.exports=i.p+"static/media/darkRuledTheme.359fb5fd.svg"},K8YD:function(e,t,i){e.exports=i.p+"static/media/lightRuledThemeBanner.ba89ddd5.svg"},KUUV:function(e,t,i){"use strict";i.d(t,"a",(function(){return T}));var n=i("lwsE"),a=i.n(n),o=i("W8MJ"),r=i.n(o),s=i("PJYZ"),l=i.n(s),c=i("7W2i"),d=i.n(c),p=i("a1gu"),u=i.n(p),h=i("Nsbk"),m=i.n(h),g=i("lSNA"),f=i.n(g),E=i("q1tI"),b=i.n(E),C=i("17x9"),v=i.n(C),S=i("vOnD"),I=i("8ezB");function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=m()(e);if(t){var a=m()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return u()(this,i)}}var _=S.d.div.withConfig({displayName:"UserAvatar__AvatarImageContainer",componentId:"p5mv0s-0"})(["display:flex;justify-content:center;align-items:center;width:","px;height:","px;background-repeat:no-repeat;background-size:cover;background-position:center;border-radius:",";margin-right:",";background:",";color:",";text-transform:uppercase;overflow:hidden;border:",";@media only screen and (max-width:850px){display:none;}"],(function(e){return e.size}),(function(e){return e.size}),I.c.SPACING_2B,(function(e){return e.noMargin?"unset":"".concat(I.c.SPACING_2B)}),(function(e){return e.theme.BG_LIGHT}),(function(e){return e.theme.BG_MAIN}),(function(e){var t=e.borderSize,i=e.theme;return t?"".concat(t,"px solid ").concat(i.BODY_BG):"initial"})),O=S.d.img.withConfig({displayName:"UserAvatar__AvatarImage",componentId:"p5mv0s-1"})(["width:100%;height:100%;object-fit:cover;"]),w=["#838383","#6c79c5","#8e44ad","#e67e22","#e74c3c","#1a71bc","#2c3e50","#b4a996","#feba02","#331e54","#71685f"],T=function(e){d()(i,e);var t=y(i);function i(){var e;a()(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o)),f()(l()(e),"getAvatar",(function(){return e.props.avatar?e.props.avatar:"https://static.unacademy.link/thumbnail/user/default.png"})),f()(l()(e),"getBackground",(function(){var t=e.props.name,i=e.randomColorIndexSelector(t)%w.length;return w[i]})),f()(l()(e),"randomColorIndexSelector",(function(e){var t=0;if(!e)return 0;for(var i=0;i<e.length;i++)t+=e.charCodeAt(i);return t})),e}return r()(i,[{key:"render",value:function(){if(this.props.avatar)return b.a.createElement(_,{size:this.props.size,borderSize:this.props.borderSize,noMargin:this.props.noMargin},b.a.createElement(O,{src:this.getAvatar()}));var e=this.props.name?"".concat(this.props.name.charAt(0)):"U";return b.a.createElement(_,{size:this.props.size,background:this.getBackground(),borderSize:this.props.borderSize,doNotAddMargin:this.props.doNotAddMargin},e)}}]),i}(b.a.PureComponent);f()(T,"propTypes",{size:v.a.number.isRequired}),f()(T,"defaultProps",{size:32})},Kvek:function(e,t,i){e.exports=i.p+"static/media/eraser-medium.8b18dc04.svg"},MJbV:function(e,t,i){e.exports=i.p+"static/media/streak-poll-icon.44701ccd.svg"},MuBy:function(e,t,i){e.exports=i.p+"static/media/learnerKicked.30bdf029.svg"},NKhq:function(e,t,i){e.exports=i.p+"static/media/educator-live.51e4cffe.svg"},OY0g:function(e,t,i){e.exports=i.p+"static/media/uploadedPdf.924685d1.svg"},Ogmr:function(e,t,i){e.exports=i.p+"static/media/feedbackThanks.36dea665.svg"},PUJ4:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAZ9SURBVHgBlVjJktxEFEztUqv3WR3YB+4Q3AiuRPAjnLhw4kO48DdEcHXAmeAHCGN7lp5etS9FVknqrtb0jMdy1Ki1VL2sfPkW2cALDyGE0bulXwvtnjh6yTAEPnEYeLnh7rf53BQNiOjfewqQ8QIAxhNDn98ZqrUlag3M3vgpIMZnGDe10QejG9aN19q5e/4IiPEJAJ1R68RZf6dvuGx/V+111XtOHEZ9EkQLxDoBwG7PjvqdJBaXkcNEljVruG5jUIgSQVC2QLpRaSx1gPeM2CdYgAbAboejRrr2EJUeNhsXceyhqiwOA5Yl4JklgRTwvRz5NOP9AvN5pjFWauvvgexBtAD6LrCVsfHY4c5pfBngbh1i+xBikwywWwfIc5d7tOQCCNwcYZhgNokw2kQYn0VIVwTpmLyft/Y6NxmNWRkwhrBxfBiaCxzu0MFqFRBMiNX9CB9vZryeYrOeYheNUOQ+d2yrnXleinCwxf1khbPZCvN0iep6w01wzYivhCfDVgKxTwBoWNjtJAhJ/QC376f48PGC4wrr5RW22zOkyRRFGaCubc6oYDspfH+N0fqec2+QZi4s6qsoDHhzgSoSZKRzgwktdG3NFd1hqTEkC++XAywWE3z4cI5377/A3e0bbNdfIIovkWcTVBKEMCEFZlkpNbGhVm6RpCHqwpHKQ23WSqivpp1Iu2jp7B65Qw9BB+vcQ7we4O7jFDe3V1jcv8Fq+SW2mzfI0jOUxZBkulySIEQNwyrpnh13PkQlvGZFp4A3yDDyM8xmGZkqWiBmC+QgzJ4oLQrRRlm6uKEIpQaWD9dYk4Hd9jV3+gplPkFZ+9yUTUIN/uPfsqI+pEYcxYyJHL4TY0SdzOdbrhPj+jprbZaaS9DXhLF3x2bjIdkOsJIi3J0j3l1SB+fc7ZSGBmSBAFpXqqXkdWGpldK0gG1HFO8C290dlssFLi42vO+QjQzHWbfWLw7izHOLO3bp2wAxoyCJJ0xKE0V1XXstABOD0MD3PwCXl53mLdSlTxaHXEPOmXKdETcRIoocXvfT/p4J0WMDDDeDEyxEqafCsCgGXFiKkADqBsDlFfDrb4y8kBHIEPzpR4NnCpERV9eOej/PA67jI09cFLGjsuwBxJ59U0N0eJDnplK2KPm8thoBC7Ol3lDJ6auvGwDykOdvv1NRLys2mtRvErSjQlgqpDKfagGE2WOiIdXzSCwXtG2p+kb56oy6gUGAf74VigF5yPM/f8v7zXxZnOQw0dUTGcJ1z85+0/aR8W4IUWEYylqQw3USOFYCy0y5UIGCNQLMknFs4Jefycg3wF9vjRaQBFDCNHPY8n035hoJAj+H45TcXL/Uq0P3z6HU+ox7j8VoPIsRDHfwByu43gamvSOQDCYNyTC8vTXwx++SCdGEpcHMaWdwGBmOu2aS2iDk/EEQY+gxZ3gVHnddj4TZogwq+OMMw2GC6XCF9WjBEL1lfmCCqjxmADqmkiJl8TKajCkZsBSANTx/wci5Y464x5i1ZMKiZpDVJKkIrMJxoyP0ZNUhlC+VqvLNZjuszlaMddaCJETF8KwpPNOkW8qQIFwlOqkV08zIQsw8sMBw9A6T2TvMLz/gfP6Ay4sdpkHW9hmdDYFeshKPQPj049VVxIS15A4YZmWToiWAOI4YQWOUld9ED5/Y1I6sHeHglgD+w/nFv7i+uuEaKwwmMZyhLOdd2j7ShP1ID4f2TIrJwsWrDcOsyYQ2hRm4ETYElqYTVUUVCGrB9RL4wQqj4T3T9A3zyA3Or+iO+YYsyGdZC6JCr7uy5Z+2kuogKjXB901Mp4YqxwXDbMBiNJ5ssVzdUyPsJwpfdVeWVal+wmedmI2XmLKfkAxcv15zjYg1JGUZoNDHepunNr/vJ3pAujLbaKWuDeZ9smBXKu8Pw4haeaBLBqqzKiuTDNUqnMcjRhOH1NIFXWB6MUUpGSD4PQtHwpS2931Er8WzcGhwnf1Ys8eUrd5uxwhhbcmZDZXnbNnoNmIejTKeMzKTK5c2Lui0oDMhngIBPP7G6JrdpuWTZT4ILAKyVbed5wYN19SIUHlAJrogKPYuPRjXGRBPtvwnvjusHjPd0Kvhfrq2wwrHXZT+7QH0PglPfgYKsa8pJk5/ffVbAGgG6t6u+2laPPsFhseMAKe/Q80T8/VU3P8M/Lxv0RNAjBPv9++JZ8DgOQD9xfACQE/NO/X/E0ffm88d/wMgqJGBwKWe8AAAAABJRU5ErkJggg=="},PXPW:function(e,t,i){e.exports=i.p+"static/media/Safari.237a7f3b.svg"},PcDQ:function(e,t,i){"use strict";var n=i("o0o1"),a=i.n(n),o=i("yXPU"),r=i.n(o),s=i("lSNA"),l=i.n(s),c=i("q1tI"),d=i.n(c),p=i("/MKj"),u=i("vOnD"),h=i("VEaK"),m=i("ri1g"),g=i("Pj12"),f=i("wCkA"),E=i("WlAH"),b=i("7cBs"),C=i("lwsE"),v=i.n(C),S=i("W8MJ"),I=i.n(S),y=i("7W2i"),_=i.n(y),O=i("a1gu"),w=i.n(O),T=i("Nsbk"),A=i.n(T);function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=A()(e);if(t){var a=A()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return w()(this,i)}}var x={pen:i("PUJ4")},R=u.d.img.withConfig({displayName:"Pointer__Image",componentId:"sc-180pemr-0"})(["position:absolute;height:24px;width:24px;left:0;top:0;opacity:",";"],(function(e){return e.showSplashScreen?"0":"1"})),D=function(e){_()(i,e);var t=P(i);function i(e){var n;return v()(this,i),(n=t.call(this,e)).pointerTimer=void 0,n.position={x:-24,y:-24},n.scale=1,n.newPosition=null,n}return I()(i,[{key:"componentWillUnmount",value:function(){clearTimeout(this.pointerTimer)}},{key:"componentDidMount",value:function(){this.pointer=document.getElementById("pointerImg")}},{key:"updatePointerPosition",value:function(e,t,i){this.newPosition={x:e-12,y:t-12},this.drawPointer(i)}},{key:"updatePointerScale",value:function(e){this.scale=e}},{key:"drawPointer",value:function(e){var t=this;if(e)return this.position=this.newPosition,void(this.pointer.style.transform="translate(".concat(this.position.x,"px,").concat(this.position.y,"px) scale(").concat(1/this.scale,")"));if(!this.reachedNewPosition(this.newPosition)){if(!this.position)return this.position=this.newPosition,void(this.pointer.style.transform="translate(".concat(this.position.x,"px,").concat(this.position.y,"px) scale(").concat(1/this.scale,")"));this.position={x:this.position.x+(this.newPosition.x-this.position.x)/10,y:this.position.y+(this.newPosition.y-this.position.y)/10},this.pointer.style.transform="translate(".concat(this.position.x,"px,").concat(this.position.y,"px) scale(").concat(1/this.scale,")"),clearTimeout(this.pointerTimer),this.pointerTimer=setTimeout((function(){t.drawPointer()}),10)}}},{key:"reachedNewPosition",value:function(e){return!!(this.position&&e&&(Math.abs(e.x-this.position.x)<=.005||Math.abs(e.y-this.position.y)<=.005))}},{key:"render",value:function(){return d.a.createElement(R,{id:"pointerImg",showSplashScreen:this.props.showSplashScreen,src:x.pen})}}]),i}(d.a.PureComponent),N=i("YZDV"),j=i.n(N),k=i("wPU9"),L=i("hKI/"),B=i.n(L),M=i("+UwG"),G=i("nu1Y"),U=i("xRQt");const H={triangle:i("5wix"),circle:i("vO6E"),line:i("9MmO"),arrow:i("kKu4"),square:i("vcXj"),eraserLarge:i("cA9j"),eraserMedium:i("Kvek"),eraserSmall:i("uLC+")},V=u.d.canvas.withConfig({displayName:"DrawingBoard__DrawingCanvas",componentId:"sc-1r0ce6l-0"})(["padding:0;margin:0;border:0;background:transparent;position:absolute;top:0;left:0;touch-action:none;"]),F=u.d.div.withConfig({displayName:"DrawingBoard__ScaledDrawingBoardContainer",componentId:"sc-1r0ce6l-1"})(["position:absolute;width:100%;height:100%;"]),W=u.d.div.withConfig({displayName:"DrawingBoard__DrawingBoardContainer",componentId:"sc-1r0ce6l-2"})(["position:relative;overflow:hidden;display:flex;flex:1;cursor:",";"],({showCustomCursor:e,drawingMode:t,eraserSize:i})=>e?"".concat(((e,t)=>{if(e===E.v.ARROW)return"url(".concat(H.arrow,") 8 8");if(e===E.v.LINE)return"url(".concat(H.line,") 8 8");if(e===E.v.CIRCLE)return"url(".concat(H.circle,") 8 8");if(e===E.v.RECTANGLE)return"url(".concat(H.square,") 8 8");if(e===E.v.ERASER){if(t===E.J.LARGE)return"url(".concat(H.eraserLarge,") 11 11");if(t===E.J.MEDIUM)return"url(".concat(H.eraserMedium,") 9 9");if(t===E.J.DEFAULT)return"url(".concat(H.eraserSmall,") 7 7")}})(t,i),", auto"):"auto"),z=u.d.div.withConfig({displayName:"DrawingBoard__GreenScreenCanvasContainer",componentId:"sc-1r0ce6l-3"})(["position:absolute;left:0;bottom:0;pointer-events:none;"]),q=u.d.canvas.withConfig({displayName:"DrawingBoard__GreenScreenCanvas",componentId:"sc-1r0ce6l-4"})(["left:0px;bottom:0px;position:absolute;opacity:",";transition:opacity ease-in 0.3s;"," "," ",""],({isCameraTurnedOff:e})=>e?0:1,({border:e})=>{if(e)return Object(u.c)(["border:1px dashed #e0e0e0;"])},({borderLeftTop:e})=>{if(e)return Object(u.c)(["border-right:0px;border-bottom:0px;"])},({borderRightTop:e})=>{if(e)return Object(u.c)(["border-left:0px;border-bottom:0px;"])});class Y extends d.a.Component{constructor(e){super(e),l()(this,"hasEducatorAlignmentChanged",e=>{let t=!1;return this.props.educatorBoxAlign&&e.educatorBoxAlign&&(t=this.props.educatorBoxAlign.left!=e.educatorBoxAlign.left||this.props.educatorBoxAlign.top!=e.educatorBoxAlign.top),t}),l()(this,"handleAnnotations",()=>{this.props.areAnnotationsOff?this.reset():this.redraw()}),l()(this,"setTransformCanvasWrapper",()=>{let e=this.getCanvasHeight(),t=this.getCanvasWidth(),i="\n            translate(".concat(this.translationX*t,"px,").concat(this.translationY*e,"px)\n            scale(").concat(this.canvasScale,")\n        "),n=this.slideDivRef.current;n&&!this.props.slide&&M.f.sendData(M.c.INVALID_ACTIVE_SLIDE,{slideIndex:this.props.activeSlide,totalSlides:this.props.preProcessor.slides.length,fromDrawingBoard:!0}),n&&this.props.slide&&(!this.props.slide.image||this.state.isImageLoaded)&&(n.style.transform=i);let a=this.canvasDivRef.current;a&&(a.style.transform=i);let o=this.pointerDivRef.current;o&&(o.style.transform=i),this.pointer&&this.pointer.updatePointerScale(this.canvasScale)}),l()(this,"onErrorSlideImage",e=>{this.isSlideImageLoadFailed=!0,this.delegates.onImageLoadComplete.error(null===e||void 0===e?void 0:e.message)}),l()(this,"onLoadSlideImage",()=>{this.isSlideImageLoaded=!0,this.setState({isImageLoaded:!0},this.setTransformCanvasWrapper),this.delegates.onImageLoadComplete.done()}),l()(this,"setTranslation",()=>{let e=this.getTranslationLimits(this.translationX*this.canvasScale,this.translationY*this.canvasScale,this.canvasScale),t=e.xval,i=e.yval;this.translationX=t,this.translationY=i,this.setTransformCanvasWrapper()}),l()(this,"handleMouseDown",e=>{if(this.leaveMouseTimeout&&(clearTimeout(this.leaveMouseTimeout),this.leaveMouseTimeout=null),!this.props.canWrite)return;let t="undefined"!==typeof e.offsetX?e.offsetX:e.layerX,i="undefined"!==typeof e.offsetY?e.offsetY:e.layerY;this.onDown({x:Object(f.h)(t/this.getCanvasWidth()),y:Object(f.h)(i/this.getCanvasHeight()),s:e.shiftKey})}),l()(this,"handleMouseLeave",e=>{this.isDrawing&&this.handleMouseUp()}),l()(this,"handleMouseUp",e=>{if(this.wasXDiffHigher=!1,this.wasYDiffHigher=!1,this.leaveMouseTimeout&&(clearTimeout(this.leaveMouseTimeout),this.leaveMouseTimeout=null),!this.props.canWrite)return;let t=null;if(t=e?{x:"undefined"!==typeof e.offsetX?e.offsetX:e.layerX,y:"undefined"!==typeof e.offsetX?e.offsetY:e.layerY}:this.lastPointerPosition,!t)return this.isDrawing=!1,void(this.ppts=[]);this.onUp({x:Object(f.h)(t.x/this.getCanvasWidth()),y:Object(f.h)(t.y/this.getCanvasHeight())}),this.props.savePdfEditorDataToLocalStorage&&this.props.savePdfEditorDataToLocalStorage()}),l()(this,"handleMouseMove",e=>{if(this.leaveMouseTimeout&&(clearTimeout(this.leaveMouseTimeout),this.leaveMouseTimeout=null),!this.props.canWrite)return;let t="undefined"!==typeof e.offsetX?e.offsetX:e.layerX,i="undefined"!==typeof e.offsetX?e.offsetY:e.layerY;this.onMove({x:Object(f.h)(t/this.getCanvasWidth()),y:Object(f.h)(i/this.getCanvasHeight())})}),l()(this,"onZoomEvent",e=>{this.props.isSlideMode||this.props.isSeekHover||(this.translationX=this.translationX/this.canvasScale,this.translationY=this.translationY/this.canvasScale,this.canvasScale=e.zoomValue,this.setTranslation())}),l()(this,"onRotateEvent",()=>{var e,t;this.setState({slideRotation:null!==(e=null===(t=this.props.preProcessor.slides.getItem(this.props.activeSlide))||void 0===t?void 0:t.rotation)&&void 0!==e?e:0})}),l()(this,"onPanEvent",e=>{if(!this.props.isSlideMode&&!this.props.isSeekHover)if(this.translationX=e.translationX,this.translationY=e.translationY,this.setTranslation(),this.redrawState){e.isUp&&this.props.setCanvasTranslation({x:e.translationX,y:e.translationY,u:e.isUp})}else this.props.setCanvasTranslation({x:e.translationX,y:e.translationY})}),l()(this,"onGifPlayEvent",e=>{this.slideComp.current&&this.slideComp.current.handleGifPlayEvent(e)}),l()(this,"getCanvasWidth",()=>this.canvasWidth),l()(this,"getCanvasHeight",()=>this.canvasHeight),l()(this,"getSmoothPoints",(e,t)=>{let i=e.map((t,i)=>{let n={p:{x:t.x,y:t.y},t:0};return 0==i?n.a="start":i==e.length-1?n.a="end":n.a="move",n});return i=Object(b.a)(t,i,this.maxError,!1),i.map(e=>({x:e.p.x,y:e.p.y}))}),l()(this,"draw",()=>{if(this.ppts&&this.ppts.length>0){const e=this.state,t=e.tmp_context,i=e.tmp_canvas;e.context,e.canvas;this.redrawState||this.clearTempCanvas(),this.redrawState||this.drawMultiPoints(t,i)}}),l()(this,"sendPointerEvent",B()(e=>{this.shouldSendPointer&&this._ismounted&&this.newEvent({e:E.L.POINTER,p:{x:Object(f.h)(e.x,3),y:Object(f.h)(e.y,3)}})},500)),l()(this,"resetZoomAndTranslate",()=>{this.canvasScale=E.jc.INIT,this.translationX=0,this.translationY=0,this.setTransformCanvasWrapper()}),l()(this,"redraw",()=>{if(Object(f.pb)(this.props.activeSlide))return;const e=+new Date;this.reset(),this.canvasScale!=E.jc.INIT&&this.resetZoomAndTranslate();let t=[];this.props.preProcessor.slides&&this.props.preProcessor.slides.getItem(this.props.activeSlide)&&(t=this.props.preProcessor.slides.getItem(this.props.activeSlide).events);let i=this.props.currentTime;this.props.shouldUseVideoCurrentTime&&this.props.recordedVideo&&(this.props.isReplay?i=this.props.recordedVideo.currentTime:this.props.isLiveDVR&&(i=Object(f.P)(this.props.recordedVideo.currentTime))),this.redrawState=!0;let n=!1;t.forEach(e=>{let t=!1;const a=Object(f.ob)(i)&&this.props.isReplay?1e6*i:i;Object(f.ob)(i)&&(t=this.props.isReplay?Object(f.ob)(e.time)&&e.time/1e3>1e3*i:Object(f.ob)(e.time)&&e.time>i);let o=!0;return e.data.type==E.L.DOWN&&e.data.isUndone&&(e.data.unDoneTime<a||Object(f.pb)(a))&&(n=!0,o=!1),e.data.type==E.L.MOVE&&n&&(o=!1),e.data.type==E.L.UP&&n&&(o=!1,n=!1),e.data.type==E.L.UNDO&&(o=!1),o&&!t&&this.handleEvent(e.data,!1),!t}),this.copyTemp(),this.redrawState=!1,this.perSlideRedrawCalls.ts+=+new Date-e,this.perSlideRedrawCalls.count+=1}),l()(this,"shouldEndCurrentStroke",()=>this.isDrawing&&this.lastPointerPosition),l()(this,"shouldSendCurrentStrokeEvent",()=>!this.redrawState&&this.props.isEducator),l()(this,"renderPlaceHolder",()=>{if(this.props.isClassPaused)return d.a.createElement(U.a,null)}),l()(this,"shouldShowCustomCursor",()=>!this.props.isSeekHover&&!this.props.isSlideMode&&this.props.isEducator&&this.props.drawingMode!==E.v.MARKER&&this.props.drawingMode!==E.v.HIGHLIGHTER),this.redrawTimeout=null,this.imageUploadTimeout=null,this.imageUploaded=!1,this.isDrawing=!1,this.ppts=[],this.drawingMode=this.props.drawingMode,this.markerColor=this.props.markerColor,this.penStrokeSize=this.props.penStrokeSize,this.eraserStrokeSize=this.props.eraserStrokeSize,this.maxError=5,this.windowSize=10,this.windowScale=Math.max(window.devicePixelRatio,1),this.canvasScale=E.jc.INIT,this.canvasHeight=0,this.canvasWidth=0,this.translationX=0,this.translationY=0,this.slideDivRef=d.a.createRef(),this.canvasDivRef=d.a.createRef(),this.pointerDivRef=d.a.createRef(),this.slideComp=d.a.createRef(),this.cursorRef=d.a.createRef(),this.isSlideImageLoaded=!1,this.delegates=null,this.state={backgroundColor:null,isImageLoaded:!1},this.createDelegateFor("onImageLoadComplete"),this.resetPerSlideRedrawCalls(),this.props.delegate(this.delegates.onImageLoadComplete.p)}resetPerSlideRedrawCalls(){this.perSlideRedrawCalls={ts:0,count:0}}createDelegateFor(e){if(e in(this.delegates=this.delegates||{}))return;const t=this.delegates[e]={};t.done=null,t.error=null,t.p=new Promise((e,i)=>{t.done=e,t.error=i})}componentWillUnmount(){this.leaveMouseTimeout&&clearTimeout(this.leaveMouseTimeout),this.redrawTimeout&&clearTimeout(this.redrawTimeout),this.imageUploadTimeout&&clearTimeout(this.imageUploadTimeout),this.sendPointerEvent&&this.sendPointerEvent.cancel(),this._ismounted=!1}reset(){this._ismounted&&(this.isDrawing=!1,this.clearMainCanvas(),this.clearTempCanvas())}onReceiveData(e){this.handleEvent(e,!1)}shouldComponentUpdate(e,t){let i=!0;return e&&(i=!this.props.useGreenScreen&&e.useGreenScreen||!e.bulkUpdate&&!e.fastRendering||this.hasEducatorAlignmentChanged(e)),j()(this,e,t)&&i}componentDidMount(){const e=this.tmpCanvasRef.getContext("2d"),t=this.canvasRef.getContext("2d");this.windowScale>1&&(t.scale(this.windowScale,this.windowScale),e.scale(this.windowScale,this.windowScale)),this.setState({canvas:this.canvasRef,context:t,tmp_canvas:this.tmpCanvasRef,tmp_context:e},()=>{this._ismounted=!0,this.resizeCanvas(),this.addMouseEventOnCanvas()})}addMouseEventOnCanvas(){const e=this.state.tmp_canvas;e.addEventListener("pointerdown",this.handleMouseDown,{passive:!0}),e.addEventListener("pointercancel",this.handleMouseLeave,{passive:!0}),e.addEventListener("pointerleave",this.handleMouseLeave,{passive:!0}),e.addEventListener("pointerup",this.handleMouseUp,{passive:!0}),e.addEventListener("pointermove",this.handleMouseMove,{passive:!0})}componentDidUpdate(e){Object(f.ob)(this.props.activeSlide)&&this.props.activeSlide!=e.activeSlide&&!this.props.isSeekHover&&(M.f.sendData(M.c.REDRAW_TIME_PER_SLIDE,"NoOfCalls=".concat(this.perSlideRedrawCalls.count),{[M.e.Measure1]:this.perSlideRedrawCalls.ts}),this.resetPerSlideRedrawCalls()),!Object(f.ob)(this.props.activeSlide)||this.props.activeSlide==e.activeSlide||this.props.bulkUpdate||this.props.fastRendering?this.props.isSeekHover&&this.props.currentTime&&this.props.currentTime!==e.currentTime&&this.redraw():(this.isSlideImageLoaded=!1,this.resetSlideBackgroundColor(),this.handleAnnotations()),this.props.areAnnotationsOff!==e.areAnnotationsOff&&this.handleAnnotations(),(e.bulkUpdate&&!this.props.bulkUpdate||e.fastRendering&&!this.props.fastRendering)&&(this.redrawTimeout&&clearTimeout(this.redrawTimeout),this.redrawTimeout=setTimeout(()=>{this.redraw()},0)),this.props.isSlideMode&&this.props.shouldRedraw&&this.redraw(),this.props.cameraRatio!==e.cameraRatio&&this.props.useGreenScreen&&this.props.setEducatorBoxAlign(this.props.educatorBoxAlign.left?1-this.props.cameraRatio:0,this.props.educatorBoxAlign.top?1-this.props.cameraRatio:0)}resizeCanvas(){const e=this.state,t=e.canvas,i=e.tmp_canvas;e.context,e.tmp_context;let n=this.canvasRef?this.canvasRef.clientHeight:0,a=this.canvasRef?this.canvasRef.clientWidth:0;this.canvasHeight==n&&this.canvasWidth==a||t&&i&&(this.canvasHeight=n,this.canvasWidth=a,t.height=n*this.windowScale,t.width=a*this.windowScale,i.height=n*this.windowScale,i.width=a*this.windowScale,this.setState({canvas:t,tmp_canvas:i},()=>{this.handleAnnotations(),this.forceUpdate()}))}newEvent(e){this.props.onSendData(e)}getTranslationLimits(e,t,i){const n=.5*(i-1),a=.5*(i-1);return(e>n||e<-n)&&(e=e>=0?n:-n),(t>a||t<-a)&&(t=t>=0?a:-a),{xval:e,yval:t}}onDown(e,t=!0){this.animationId&&cancelAnimationFrame(this.animationId),this.drawingMode!==E.v.HIGHLIGHTER||this.redrawState||this.copyTemp(!0),this.isDrawing=!0,this.lastPointerPosition=e,this.ppts=[],this.ppts.push(e),t&&this.newEvent({e:E.L.DOWN,p:e})}onUp(e,t=!0){this.onUpCalled=!0,this.shouldSendPointer=!1,this.animationId&&cancelAnimationFrame(this.animationId),t&&this.newEvent({e:E.L.UP,p:e});const i=this.state,n=i.tmp_context,a=i.tmp_canvas;this.ppts&&this.ppts.length>0&&(this.redrawState?this.drawingMode!==E.v.HIGHLIGHTER&&this.drawingMode!=E.v.ERASER&&this.drawMultiPoints(n,a):this.drawingMode!==E.v.ERASER&&this.isDrawing&&(this.clearTempCanvas(),this.drawMultiPoints(n,a))),this.isDrawing=!1,this.ppts=[],this.drawingMode!==E.v.ERASER&&this.drawingMode!==E.v.HIGHLIGHTER&&!this.redrawState&&this.canDrawOnCanvas()&&this.copyTemp(),this.onUpCalled=!1}copyTemp(e){const t=this.state,i=(t.tmp_context,t.context),n=t.tmp_canvas,a=t.canvas;i.globalCompositeOperation="source-over",i.lineWidth=this.penStrokeSize*this.getCanvasWidth()/this.props.baseWidth/this.canvasScale,n.width>0&&n.height>0&&a.width>0&&a.height>0&&(this.windowScale>1&&i.setTransform(1,0,0,1,0,0),e||i.drawImage(n,0,0),this.clearTempCanvas(),this.windowScale>1&&i.scale(this.windowScale,this.windowScale))}canDrawOnCanvas(){return this._ismounted}onEraseMove(e,t,i){t.strokeStyle=this.markerColor,t.fillStyle=this.markerColor,t.lineJoin="round",t.globalCompositeOperation="destination-out",t.lineWidth=this.eraserStrokeSize*this.getCanvasWidth()/this.props.baseWidth/this.canvasScale,t.beginPath(),t.moveTo(this.lastPointerPosition.x*this.getCanvasWidth(),this.lastPointerPosition.y*this.getCanvasHeight()),t.lineTo(e.x*this.getCanvasWidth(),e.y*this.getCanvasHeight()),t.closePath(),t.stroke(),this.lastPointerPosition=e}drawMultiPoints(e,t){e.strokeStyle=this.drawingMode===E.v.HIGHLIGHTER?this.markerColor+"80":this.markerColor,e.fillStyle=this.drawingMode===E.v.HIGHLIGHTER?this.markerColor+"80":this.markerColor,e.lineJoin="round",e.lineCap="round",e.globalCompositeOperation="source-over",e.lineWidth=(this.drawingMode===E.v.HIGHLIGHTER?7:this.penStrokeSize)*this.getCanvasWidth()/this.props.baseWidth/this.canvasScale,this.drawingMode===E.v.CIRCLE?this.drawCircle(e,this.ppts):this.drawingMode===E.v.RECTANGLE?this.drawRectangle(e,this.ppts):this.drawingMode===E.v.LINE?this.drawLine(e,this.ppts):this.drawingMode===E.v.ARROW?this.drawArrow(e,this.ppts):this.drawPoints(e,t,this.ppts)}drawArrow(e,t){if(t.length>1){const i=t[0].x*this.getCanvasWidth(),n=t[0].y*this.getCanvasHeight();let a=t[t.length-1].x*this.getCanvasWidth(),o=t[t.length-1].y*this.getCanvasHeight(),r=this.getShiftedDeltasForLine(i,n,a,o,t[0].s);a=i+r.xDiff,o=n+r.yDiff,e.beginPath(),e.moveTo(i,n),e.lineTo(a,o),e.stroke(),e.closePath();const s=3*this.penStrokeSize*this.getCanvasWidth()/this.props.baseWidth/this.canvasScale,l=(o-n)/(a-i);let c=Math.atan(l);(i<a||Math.abs(i-a)<.001)&&(c+=Math.PI);let d=Math.PI/4;e.beginPath(),e.moveTo(a,o),e.lineTo(a+s*Math.cos(c-d),o+s*Math.sin(c-d)),e.moveTo(a,o),e.lineTo(a+s*Math.cos(c+d),o+s*Math.sin(c+d)),e.stroke(),e.closePath()}}drawLine(e,t){if(t.length>1){const i=t[0].x*this.getCanvasWidth(),n=t[0].y*this.getCanvasHeight(),a=t[t.length-1].x*this.getCanvasWidth(),o=t[t.length-1].y*this.getCanvasHeight();let r=this.getShiftedDeltasForLine(i,n,a,o,t[0].s);e.beginPath(),e.moveTo(i,n),e.lineTo(i+r.xDiff,n+r.yDiff),e.stroke(),e.closePath()}}drawRectangle(e,t){if(t.length>1){const i=t[0].x*this.getCanvasWidth(),n=t[0].y*this.getCanvasHeight(),a=t[t.length-1].x*this.getCanvasWidth(),o=t[t.length-1].y*this.getCanvasHeight();let r=this.getShiftedDeltasForRect(i,n,a,o,t[0].s);e.strokeRect(i,n,r.xDiff,r.yDiff)}}drawCircle(e,t){if(t.length>1){const i=t[0].x*this.getCanvasWidth(),n=t[0].y*this.getCanvasHeight(),a=t[t.length-1].x*this.getCanvasWidth(),o=t[t.length-1].y*this.getCanvasHeight();let r=this.getShiftedDeltasForRect(i,n,a,o,t[0].s);const s=i+r.xDiff/2,l=n+r.yDiff/2;e.beginPath(),e.ellipse(s,l,Math.abs(r.xDiff/2),Math.abs(r.yDiff/2),0,0,2*Math.PI),e.stroke(),e.closePath()}}drawPoints(e,t,i){if(i.length<3){var n=i[0];return e.beginPath(),e.arc(n.x*this.getCanvasWidth(),n.y*this.getCanvasHeight(),e.lineWidth/2,0,2*Math.PI,!0),e.fill(),void e.closePath()}this.onUpCalled&&this.props.useSmoothDraw&&this.drawingMode===E.v.MARKER&&(i=this.getSmoothPoints(i,0)),e.beginPath(),e.moveTo(i[0].x*this.getCanvasWidth(),i[0].y*this.getCanvasHeight());for(var a=1;a<i.length-1;a++){var o=(i[a].x*this.getCanvasWidth()+i[a+1].x*this.getCanvasWidth())/2,r=(i[a].y*this.getCanvasHeight()+i[a+1].y*this.getCanvasHeight())/2;e.quadraticCurveTo(i[a].x*this.getCanvasWidth(),i[a].y*this.getCanvasHeight(),o,r)}e.stroke()}onPointerMove(e,t=!1){this.pointer&&this.pointer.updatePointerPosition(e.x*this.getCanvasWidth(),e.y*this.getCanvasHeight(),t)}getShiftedDeltasForLine(e,t,i,n,a){let o=i-e,r=n-t;if(a){const e=Math.abs(o)-Math.abs(r),t=Math.abs(e)<.5*Math.abs(o)&&Math.abs(e)<.5*Math.abs(r);e>0?r=t?Math.abs(o)*(r>0?1:-1):0:o=t?Math.abs(r)*(o>0?1:-1):0}return{xDiff:o,yDiff:r}}getShiftedDeltasForRect(e,t,i,n,a){let o=i-e,r=n-t;return a&&(Math.abs(o)>Math.abs(r)?r=Math.abs(o)*(r>0?1:-1):o=Math.abs(r)*(o>0?1:-1)),{xDiff:o,yDiff:r}}onMove(e,t=!0,i=!1){const n=this.state,a=n.tmp_context,o=n.tmp_canvas,r=n.context,s=n.canvas;if(this.isDrawing){if(this.lastPointerPosition.x==e.x&&this.lastPointerPosition.y==e.y)return;if(this.ppts.length>1&&this.drawingMode==E.v.MARKER&&(t||!i)){let t=parseInt(Math.sqrt(100*(Math.pow(this.ppts[this.ppts.length-1].x-e.x,2)+Math.pow(this.ppts[this.ppts.length-1].y-e.y,2))));t+=1,e={x:(this.ppts[this.ppts.length-1].x+e.x*t)/(t+1),y:(this.ppts[this.ppts.length-1].y+e.y*t)/(t+1)}}if(t&&this.newEvent({e:E.L.MOVE,p:e,o:1}),this.redrawState||this.props.role!=E.p.TYPE_LEARNER||this.onPointerMove(e,!0),this.drawingMode===E.v.ERASER)return void(this.redrawState?this.onEraseMove(e,a,o):this.onEraseMove(e,r,s));this.ppts.push(e),this.redrawState||(this.animationId&&cancelAnimationFrame(this.animationId),this.animationId=requestAnimationFrame(()=>{this.ppts&&this.ppts.length>0&&(this.clearTempCanvas(),this.drawMultiPoints(a,o))})),this.lastPointerPosition=e}else t&&!this.props.isSlideMode&&this.props.role==E.p.TYPE_PUBLISHER&&(this.shouldSendPointer=!0,this.sendPointerEvent(e))}clearTempCanvas(){const e=this.state,t=e.tmp_canvas,i=e.tmp_context;this.windowScale>1?(i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),i.scale(this.windowScale,this.windowScale)):t.width=t.width}clearMainCanvas(){const e=this.state,t=e.canvas,i=e.context;this.windowScale>1?(i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),i.scale(this.windowScale,this.windowScale)):t.width=t.width}undo(){this.redraw()}removeAllUndos(e){let t=!1;for(let i=e.size-1;i>=0;i--){if(e.get(i).data.type==E.L.UNDO){t=!0,e=e.delete(i),e=this.processUndo(e,i-1);break}}return t&&(e=this.removeAllUndos(e)),e}processUndo(e,t){let i,n;if(e.size>1){for(let a=t;a>=0;a--){let t=e.get(a);if(t.data.type===E.L.UP&&(i=a),t.data.type===E.L.DOWN&&t.data.mode!=E.v.HIGHLIGHTER){n=a;break}}n&&i&&(e=e.splice(n,i-n+1))}return e}handleEvent(e,t=!0){if(!this._ismounted||this.props.bulkUpdate||!e)return;const i=!this.props.isTestEvaluationMode||e.id===this.props.activeSlide;switch(e.type){case E.L.UP:this.onUp(e.getPoint(),t);break;case E.L.DOWN:this.onDown(e.getPoint(),t);break;case E.L.MOVE:let n=e.isSmooth;this.onMove(e.getPoint(),t,n);break;case E.L.PEN_STROKE_CHANGE:this.shouldEndCurrentStroke()?(this.onUp(this.lastPointerPosition,this.shouldSendCurrentStrokeEvent()),this.penStrokeSize=e.size,this.onDown(this.lastPointerPosition,this.shouldSendCurrentStrokeEvent())):this.penStrokeSize=e.size;break;case E.L.ERASER_STROKE_CHANGE:this.eraserStrokeSize=e.size;break;case E.L.MODE_CHANGE:this.redrawState||(this.drawingMode===E.v.HIGHLIGHTER&&this.copyTemp(!0),e.mode===E.v.HIGHLIGHTER&&this.copyTemp()),this.shouldEndCurrentStroke()?(this.onUp(this.lastPointerPosition,this.shouldSendCurrentStrokeEvent()),this.drawingMode=e.mode,this.onDown(this.lastPointerPosition,this.shouldSendCurrentStrokeEvent())):this.drawingMode=e.mode;break;case E.L.CHANGE_COLOR:this.shouldEndCurrentStroke()?(this.onUp(this.lastPointerPosition,this.shouldSendCurrentStrokeEvent()),this.markerColor=e.color,this.onDown(this.lastPointerPosition,this.shouldSendCurrentStrokeEvent())):this.markerColor=e.color;break;case E.L.ERASE_ALL:i&&this.reset();break;case E.L.UNDO:i&&this.undo();break;case E.L.POINTER:this.props.isSlideMode||this.props.isSeekHover||this.onPointerMove(e.getPoint(),this.redrawState);break;case E.L.SLIDE_BACKGROUND_CHANGE:this.onSlideBackgroundChangeEvent(e.c);break;case E.L.ROTATE_SLIDE:i&&this.onRotateEvent();break;case E.L.ZOOM:this.onZoomEvent(e);break;case E.L.PAN:this.onPanEvent(e);break;case E.L.PLAY_GIF:this.onGifPlayEvent(e)}}onSlideBackgroundChangeEvent(e){e&&this.setState({backgroundColor:e})}resetSlideBackgroundColor(){this.setState({backgroundColor:null})}renderLearnerUID(){if(!this.props.isEducator&&!this.props.isCameraTurnedOff&&(this.props.isReplay||10===this.props.classState))return d.a.createElement(G.b,null)}renderVideoCanvas(){if(this.props.useGreenScreen&&!this.props.isSeekHover){const e=Object(f.H)(this.props.cameraRatio);let t=parseInt(this.getCanvasHeight()*this.props.cameraRatio),i=parseInt(this.getCanvasWidth()*this.props.cameraRatio),n=this.props.educatorBoxAlign?this.props.educatorBoxAlign.left*this.getCanvasWidth():e.LEFT_BOTTOM.left*this.getCanvasWidth(),a=this.props.educatorBoxAlign?this.props.educatorBoxAlign.top*this.getCanvasHeight():e.LEFT_BOTTOM.top*this.getCanvasHeight();const o=this.props.educatorBoxAlign&&this.props.educatorBoxAlign.left===e.RIGHT_BOTTOM.left&&this.props.educatorBoxAlign.top===e.RIGHT_BOTTOM.top,r=!this.props.educatorBoxAlign||this.props.educatorBoxAlign.left===e.LEFT_BOTTOM.left&&this.props.educatorBoxAlign.top===e.LEFT_BOTTOM.top;return d.a.createElement(z,{id:"greenContainer",style:{width:i,height:t,left:n,top:a}},d.a.createElement(q,{ref:e=>{this.greenScreenCanvas=e},border:this.props.role===E.p.TYPE_PUBLISHER,borderLeftTop:o,borderRightTop:r,id:"greenScreenMainCanvas",width:i,height:t,isCameraTurnedOff:this.props.isCameraTurnedOff}),d.a.createElement(q,{id:"streamingCanvas",width:"640",height:"360",hidden:!0}),d.a.createElement(q,{id:"greenScreenTempCanvas",width:"640",height:"360",hidden:!0}),this.renderLearnerUID(),this.renderPlaceHolder())}}renderPointer(){if(this.props.role==E.p.TYPE_LEARNER&&!this.props.isSlideMode&&!this.props.isSeekHover)return d.a.createElement(F,{ref:this.pointerDivRef},d.a.createElement(D,{ref:e=>{this.pointer=e},showSplashScreen:this.props.showSplashScreen}))}renderSlide(){if(this.props.slide)return d.a.createElement(F,{ref:this.slideDivRef},d.a.createElement(k.a,{ref:this.slideComp,slideRotation:this.state.slideRotation,slide:this.props.slide,backgroundColor:this.state.backgroundColor,onLoadImage:this.onLoadSlideImage,canvasWidth:this.getCanvasWidth(),canvasHeight:this.getCanvasHeight(),onSendData:this.props.onSendData,recordedVideo:this.props.recordedVideo,isSlideMode:this.props.isSlideMode,isSeekHover:this.props.isSeekHover,activeSlide:this.props.activeSlide,onErrorSlideImage:this.onErrorSlideImage}))}renderCanvas(){return d.a.createElement(F,{ref:this.canvasDivRef},d.a.createElement(V,{id:this.props.isSlideMode?"backCanvas":"mainBackCanvas",ref:e=>{window.backCanvas=e,this.canvasRef=e},style:{height:"100%",width:"100%"}}),d.a.createElement(V,{id:this.props.isSlideMode?"frontCanvas":"mainFrontCanvas",ref:e=>{window.frontCanvas=e,this.tmpCanvasRef=e},style:{height:"100%",width:"100%"}}))}render(){return d.a.createElement(W,{showCustomCursor:this.shouldShowCustomCursor(),drawingMode:this.props.drawingMode,eraserSize:this.props.eraserStrokeSize},this.renderSlide(),this.renderCanvas(),this.renderVideoCanvas(),this.renderPointer())}}const X={setCanvasTranslation:g.a,setEducatorBoxAlign:m.B};var K=Object(p.c)(e=>({isEducator:e.getIn(["app","isEducator"]),classState:e.getIn(["app","classState"]),isReplay:e.getIn(["app","isReplay"]),isCameraTurnedOff:e.getIn(["app","isCameraTurnedOff"]),isClassPaused:e.getIn(["app","isClassPaused"]),drawingMode:e.getIn(["drawingBoardControls","drawingMode"])}),X,null,{forwardRef:!0})(Y),Z=i("9/5/"),J=i.n(Z),Q=i("RYsq");const $=u.d.div.withConfig({displayName:"CanvasWrapper__Wrapper",componentId:"o4yfn3-0"})(["position:absolute;width:100%;height:100%;display:flex;background-color:",";"],({theme:e})=>e.WHITE),ee=Object(h.e)(),te=ee.getOrCreate("START_CLASS_SUCCESS_PROFILE"),ie=ee.getOrCreate("CLICK_TO_VIEW_PROFILE"),ne=ee.getOrCreate("SLIDE_RENDER_PROFILE"),ae=0;class oe extends d.a.PureComponent{constructor(e){super(e),l()(this,"updateAfterFastRender",J()(()=>{this.setState({fastRendering:!1})},130)),l()(this,"onSendData",e=>{this.props&&this.props.onSendData&&this.props.onSendData({id:this.props.activeSlide,data:e})}),l()(this,"prefetchImage",J()(e=>{if(!this.preProcessor.slides)return;let t=-2;this.props.isReplay&&(t=0);for(let i=t+e;i<=2+e;i++){let e=this.preProcessor.slides.getItem(i);if(i>=0&&e&&e.image){let t=this.preProcessor.imagesCache.getItem(i);if(t&&!t.loaded){let n=new window.Image;const a=this.props.isRecorded?1920:1080;n.src=Object(f.M)(e.image,0,a),n.onload=()=>{t&&(t=t.setImageInstance(n),this.preProcessor.updateImageCacheItem(t,i))}}}}},1e3)),l()(this,"resizeCanvas",()=>{this.drawingBoard&&this.drawingBoard.resizeCanvas()}),l()(this,"setDrawingBoardRef",e=>{this.drawingBoard=e}),l()(this,"renderSlides",()=>{if(!this.activeSlideNotYetSet())return d.a.createElement(K,{ref:this.setDrawingBoardRef,preProcessor:this.preProcessor,slide:this.preProcessor.slides.getItem(this.props.activeSlide),delegate:this.setImageLoadPromise.bind(this),markerColor:this.props.markerColor,drawingMode:this.props.drawingMode,baseWidth:this.props.baseWidth,role:this.props.role,currentTime:this.props.currentTime,shouldUseVideoCurrentTime:this.props.shouldUseVideoCurrentTime,recordedVideo:this.props.recordedVideo,canWrite:this.props.canWrite,isReplay:this.props.isReplay,isLiveDVR:this.props.isLiveDVR,bulkUpdate:this.props.bulkUpdate,fastRendering:this.state.fastRendering,penStrokeSize:this.props.penStrokeSize,eraserStrokeSize:this.props.eraserStrokeSize,isSlideMode:this.props.isSlideMode,isSeekHover:this.props.isSeekHover,activeSlide:this.props.activeSlide,areAnnotationsOff:this.props.areAnnotationsOff,shouldRedraw:this.props.shouldRedraw,onSendData:this.onSendData,fastRendering:this.state.fastRendering,isCanvasStreaming:this.props.isCanvasStreaming,useGreenScreen:this.props.useGreenScreen,cameraRatio:this.props.cameraRatio,useSmoothDraw:this.props.useSmoothDraw,classState:this.props.classState,showPlayButton:this.props.showPlayButton,educatorBoxAlign:this.props.educatorBoxAlign,showSplashScreen:this.props.showSplashScreen,isEducator:this.props.isEducator,isTestEvaluationMode:this.props.isTestEvaluationMode,savePdfEditorDataToLocalStorage:this.props.savePdfEditorDataToLocalStorage})}),this.state={fastRendering:!1},this.initialState=this.state,this.drawingBoard=null,this.fastRendering=!1,this.lastSlideChangedAt=0,this.fastRenderCheckCount=0,this.imageLodedPromise=null,this.paintingDone=!1,this.isDataProcessed=!1,this.preProcessor=e.preProcessor||Q.b.main}UNSAFE_componentWillReceiveProps(e){if((!this.props.bulkUpdate&&this.props.activeSlide!=e.activeSlide||this.props.bulkUpdate&&!e.bulkUpdate)&&(this.props.isSeekHover||this.props.isSlideMode||this.prefetchImage(e.activeSlide)),this.props.activeSlide!=e.activeSlide){let e=(new Date).getTime();e-this.lastSlideChangedAt<100?this.fastRenderCheckCount++:(this.setState({fastRendering:!1}),this.fastRenderCheckCount=0),this.fastRenderCheckCount>2&&(this.setState({fastRendering:!0}),this.updateAfterFastRender()),this.lastSlideChangedAt=e}}setDataProcessed(e){this.isDataProcessed!==e&&(this.isDataProcessed=e,this.isDataProcessed&&this.onAfterDataProcess())}onAfterDataProcess(){this.activeSlideNotYetSet()||this.props.isEducator||this.paintingDone||this.afterPaintComplete()}afterPaintComplete(){if(this.paintingDone=!0,Object(f.ob)(this.props.activeSlide)){var e,t;const i=null===(e=this.preProcessor.slides.get("items"))||void 0===e||null===(t=e.get(this.props.activeSlide))||void 0===t?void 0:t.get("image");i&&this.imageLodedPromise?(ne.isProfileRunning()&&ne.setDataInContext("ImageUrl",i),this.imageLodedPromise.then(()=>{this.sendMetricData()}).catch(e=>{e=e||"",M.f.sendData(M.c.SLIDE_LOADING_ERROR,{msg:e})})):this.sendMetricData()}else this.sendMetricData()}sendMetricData(){var e=this;return r()(a.a.mark((function t(){var i,n,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:te.isProfileRunning()?(i=te.end(),n=i.dts,te.classHasFailure===ae?M.f.sendData(M.c.CLASS_START_SUCCESS_WITH_FAILURES,"IsReplay=".concat(e.props.isReplay,";TimeTaken=").concat(n),{[M.e.Measure1]:n}):M.f.sendData(M.c.CLASS_START_SUCCESS,"IsReplay=".concat(e.props.isReplay,";TimeTaken=").concat(n),{[M.e.Measure1]:n}),M.f.sendData(M.c.Q_CLASS_START_EXPERIENCE,"IsReplay=".concat(e.props.isReplay,";TimeTaken=").concat(n),{[M.e.Measure1]:Object(M.g)(n,e.props.isReplay)}),te.reset()):M.f.sendData(M.c.UNKNOWN_STATE,{fqsource:"startClassSuccessProfile",reason:"could not finish profile because profile is not running"}),ie.isProfileRunning()?(i=ie.end(),M.f.sendData(M.c.CLICK_TO_VIEW_TIME,{timeTaken:i.dts},{[M.e.Measure1]:i.dts}),ie.reset()):M.f.sendData(M.c.UNKNOWN_STATE,{fqsource:"clickToViewProfile",reason:"could not finish profile because profile is not running"}),ne.isProfileRunning()&&(o=ne.end(),M.f.sendData(M.c.SLIDE_RENDERING_TIME,ne.getStrDataFromContext(),{[M.e.Measure1]:o.dts}));case 3:case"end":return t.stop()}}),t)})))()}componentWillUnmount(){this.updateAfterFastRender&&this.updateAfterFastRender.cancel(),this.prefetchImage&&this.prefetchImage.cancel()}reset(){this.drawingBoard&&this.drawingBoard.reset()}onDrawingChangeData(e){this.drawingBoard&&this.drawingBoard.onReceiveData(e)}onReceiveData(e){const t=e.data;this.drawingBoard&&(this.drawingBoard.onReceiveData(t),this.setDataProcessed(!0))}activeSlideNotYetSet(){return this.props.activeSlide>=this.preProcessor.slides.length}setImageLoadPromise(e){this.imageLodedPromise=e}render(){return d.a.createElement($,null,this.renderSlides())}}t.a=Object(p.c)(e=>({drawingMode:e.getIn(["drawingBoardControls","drawingMode"]),penStrokeSize:e.getIn(["drawingBoardControls","penStrokeSize"]),eraserStrokeSize:e.getIn(["drawingBoardControls","eraserStrokeSize"]),markerColor:e.getIn(["drawingBoardControls","markerColor"]),isCanvasStreaming:e.getIn(["app","isCanvasStreaming"]),useSmoothDraw:e.getIn(["app","useSmoothDraw"]),cameraRatio:e.getIn(["app","cameraRatio"]),educatorBoxAlign:e.getIn(["app","educatorBoxAlign"]),showSplashScreen:e.getIn(["app","showSplashScreen"]),isRecorded:e.getIn(["app","isRecorded"])}),null,null,{forwardRef:!0})(oe)},PfG6:function(e,t,i){e.exports=i.p+"static/media/Chrome.d60a042e.svg"},"U+Bj":function(e,t,i){e.exports=i.p+"static/media/play.73b41af3.svg"},U5fO:function(e,t,i){e.exports=i.p+"static/media/chevron-left.4e49472b.svg"},UtX9:function(e,t,i){"use strict";var n=i("J4zp"),a=i.n(n),o=i("ZDp4"),r=i.n(o),s=i("q1tI"),l=i.n(s),c=(i("17x9"),i("vOnD")),d=i("eVoo"),p=Object(c.e)(["from{opacity:0;}to:{opacity:1;}"]),u=c.d.div.withConfig({displayName:"FullScreenLoader__Wrapper",componentId:"xi9fn-0"})(["position:absolute;height:100%;width:100%;z-index:11;background-color:",";display:flex;align-items:center;justify-content:center;pointer-events:all;",""],(function(e){return"".concat(e.theme.BLACK,"A6")}),(function(e){return e.show?Object(c.c)(["animation:"," 0.5s ease-in-out;animation-fill-mode:forwards;"],p):Object(c.c)([""])})),h=l.a.memo((function(e){r()(e);var t=Object(s.useState)(!1),i=a()(t,2),n=i[0],o=i[1];return Object(s.useEffect)((function(){return o(!0),function(){return o(!1)}}),[]),l.a.createElement(u,{show:n},l.a.createElement(d.d,{size:80}))}));h.propTypes={},h.defaultProps={},t.a=h},WQoh:function(e,t,i){"use strict";var n=i("q1tI"),a=i.n(n),o=i("17x9"),r=i.n(o),s=i("6HPj"),l=i("KUUV"),c=i("wCkA"),d=i("b5IN"),p=i("vOnD"),u=i("8ezB"),h={attachment:i("X5ph")},m=p.d.div.withConfig({displayName:"QuestionMessage__TextMessageWrapper",componentId:"sc-1drc80q-0"})(["display:flex;flex:1;margin-bottom:",";@media only screen and (max-width:850px){margin-bottom:",";padding-right:",";}width:100%;"],u.c.SPACING_2B,u.c.SPACING_1,u.c.SPACING_2),g=p.d.div.withConfig({displayName:"QuestionMessage__UserAvatarContainer",componentId:"sc-1drc80q-1"})(["display:flex;padding-top:",";width:36px;@media only screen and (max-width:850px){width:0px;}"],u.c.SPACING_2B),f=p.d.div.withConfig({displayName:"QuestionMessage__MessageBox",componentId:"sc-1drc80q-2"})(["display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;text-align:left;width:248px;padding:"," ",";border-radius:",";background:",";border:1px solid ",";box-sizing:border-box;word-break:break-word;@media only screen and (max-width:850px){width:100%;border:none;margin-bottom:",";margin-top:",";}",";",";"],u.c.SPACING_2B,u.c.SPACING_3B,u.c.SPACING_2B,(function(e){return e.theme.BG_MAIN}),(function(e){return e.theme.BORDER}),u.c.SPACING_1,u.c.SPACING_0B,(function(e){if(e.isContinued)return Object(p.c)(["@media only screen and (min-width:850px){margin-left:",";margin-top:-",";}"],u.c.SPACING_7B,u.c.SPACING_1B)}),(function(e){return e.isEducator?Object(p.c)(["background:",";border:none;"],(function(e){return e.theme.BLUE})):e.isSelf?Object(p.c)(["background:",";border:none;"],(function(e){return e.theme.TEXT_PRIMARY})):void 0})),E=p.d.span.withConfig({displayName:"QuestionMessage__MessageHeader",componentId:"sc-1drc80q-3"})(["display:inline-block;font-size:",";color:",";margin-right:",";line-height:",";text-transform:capitalize;@media only screen and (max-width:850px){font-size:",";line-height:",";margin-right:",";&:after{content:':';}}",";"],u.d.SMALL,(function(e){return e.theme.TEXT_TERTIARY}),u.c.SPACING_2B,u.d.LINE_HEIGHT_MAX,u.d.SMALL,u.d.LINE_HEIGHT_MEDIUM,u.c.SPACING_1B,(function(e){return e.isEducator?Object(p.c)(["color:",";"],(function(e){return e.theme.WHITE})):e.isSelf?Object(p.c)(["color:",";"],(function(e){return e.theme.BG_MAIN})):void 0})),b=p.d.div.withConfig({displayName:"QuestionMessage__QuestionHeader",componentId:"sc-1drc80q-4"})(["display:flex;width:100%;justify-content:space-between;align-items:center;margin-top:",";margin-bottom:",";font-size:",";line-height:",";color:",";@media only screen and (max-width:850px){margin-top:",";maring-bottom:",";}"],u.c.SPACING_2B,u.c.SPACING_1B,u.d.EXTRA_SMALL,u.d.LINE_HEIGHT,(function(e){return e.theme.TEXT_TERTIARY}),u.c.SPACING_1,u.c.SPACING_1),C=p.d.div.withConfig({displayName:"QuestionMessage__QuestionTitle",componentId:"sc-1drc80q-5"})(["color:",";font-weight:",";"],(function(e){return e.theme.ORANGE}),u.d.BOLD),v=a.a.memo((function(e){var t=e.index,i=e.message,o=e.isSelf,r=i.timetoken?new Date(Number(i.timetoken)):new Date;return a.a.createElement(m,null,a.a.createElement(g,null,a.a.createElement(g,null,a.a.createElement(l.a,{key:t,avatar:Object(c.a)(i.sender.image),name:i.sender.name,size:28,borderSize:4}))),a.a.createElement(f,{isSelf:o,isEducator:!1,isContinued:!1},a.a.createElement(E,{isSelf:o,isEducator:!1},i.sender.name+" \u2022 "+Object(c.R)(r)),a.a.createElement(b,null,a.a.createElement(C,null,"QUESTION"),a.a.createElement(s.a,{justifyContent:"center",alignItems:"center"},function(){if(i.image)return[a.a.createElement(n.Fragment,{key:0},a.a.createElement("img",{src:h.attachment})),a.a.createElement(n.Fragment,{key:1},"Image attached")]}())),a.a.createElement(d.a,{isSelf:o,isEducator:!1,messageId:i.id,msgText:i.description})))}));v.propTypes={index:r.a.number.isRequired,message:r.a.object.isRequired,isSelf:r.a.bool},v.defaultProps={isSelf:!1},t.a=v},WvYd:function(e,t,i){e.exports=i.p+"static/media/doubts.8a449be9.svg"},WxK7:function(e,t,i){"use strict";var n=i("q1tI"),a=i.n(n),o=i("/MKj"),r=i("17x9"),s=i.n(r),l=i("WlAH"),c=i("vOnD"),d=i("8ezB"),p=i("v4fW"),u=c.d.div.withConfig({displayName:"Eraser__Wrapper",componentId:"sc-1ruqcy1-0"})(["margin-right:",";"],d.c.SPACING_2B),h=a.a.memo((function(e){var t=e.setDrawingMode,i=e.shortcutText,n=Object(o.e)((function(e){return e.getIn(["drawingBoardControls","drawingMode"])})),r=Object(o.e)((function(e){return e.getIn(["drawingBoardControls","isEducatorSlideViewActive"])})),s=n===l.v.ERASER;return a.a.createElement(u,null,a.a.createElement(p.a,{type:"eraser",text:l.u.ERASER,isSelected:s,onClick:function(){s||t(l.v.ERASER)},varWidth:!0,shortcutText:i,disabled:r}))}));h.propTypes={setDrawingMode:s.a.func.isRequired},t.a=h},X5ph:function(e,t,i){e.exports=i.p+"static/media/attachment.ca076791.svg"},b5IN:function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));var n=i("lwsE"),a=i.n(n),o=i("W8MJ"),r=i.n(o),s=i("7W2i"),l=i.n(s),c=i("a1gu"),d=i.n(c),p=i("Nsbk"),u=i.n(p),h=i("q1tI"),m=i.n(h),g=i("sIYH"),f=i.n(g),E=i("vOnD"),b=i("8ezB");function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=u()(e);if(t){var a=u()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return d()(this,i)}}var v=E.d.div.withConfig({displayName:"LinkifyComponent__MessageText",componentId:"sc-1d2n1re-0"})(["margin-top:",";font-size:",";line-height:",";@media only screen and (max-width:850px){font-size:",";line-height:",";}"," &,*{contain:content;","}"],(function(e){return e.isContinued?b.c.SPACING_0B:b.c.SPACING_1B}),b.d.MEDIUM,b.d.LINE_HEIGHT_MAX,b.d.SMALL,b.d.LINE_HEIGHT_MEDIUM,(function(e){if(e.isPinned&&!e.isExpanded)return Object(E.c)(["margin-top:",";"],b.c.SPACING_2B)}),(function(e){return e.isEducator?Object(E.c)(["color:",";"],(function(e){return e.theme.WHITE})):e.isSelf?Object(E.c)(["color:",";"],(function(e){return e.theme.BG_MAIN})):Object(E.c)(["color:",";"],(function(e){return e.theme.TEXT_PRIMARY}))})),S=function(e){l()(i,e);var t=C(i);function i(){return a()(this,i),t.apply(this,arguments)}return r()(i,[{key:"render",value:function(){return m.a.createElement(f.a,null,m.a.createElement(v,{key:this.props.messageId,isSelf:this.props.isSelf,isEducator:this.props.isEducator,isContinued:this.props.isContinued},this.props.msgText))}}]),i}(m.a.PureComponent)},cA9j:function(e,t,i){e.exports=i.p+"static/media/eraser-large.736902fb.svg"},cZft:function(e,t,i){"use strict";var n=i("q1tI"),a=i.n(n),o=i("17x9"),r=i.n(o),s=i("XyO8"),l=i("vOnD"),c=i("8ezB"),d={uploadedPDF:i("OY0g")},p=l.d.div.withConfig({displayName:"UploadedFile__UploadProgress",componentId:"sc-14z6bdr-0"})(["display:flex;width:100%;height:80px;display:flex;align-items:center;box-shadow:0px 0px 32px ",";border-radius:",";background:",";"],(function(e){return e.theme.SHADOW}),c.c.SPACING_1B,(function(e){return e.theme.BG_MAIN})),u=l.d.div.withConfig({displayName:"UploadedFile__ImageContainer",componentId:"sc-14z6bdr-1"})(["display:flex;align-items:center;margin-left:",";"],c.c.SPACING_4B),h=l.d.img.withConfig({displayName:"UploadedFile__StyledImage",componentId:"sc-14z6bdr-2"})(["border:"," solid ",";border-radius:",";width:84px;height:48px;margin-right:",";"],c.c.SPACING_1,(function(e){return e.theme.BORDER}),c.c.SPACING_1B,c.c.SPACING_4B),m=l.d.div.withConfig({displayName:"UploadedFile__DetailsContainer",componentId:"sc-14z6bdr-3"})(["overflow:hidden;"]),g=Object(l.d)(s.j).withConfig({displayName:"UploadedFile__FileTitle",componentId:"sc-14z6bdr-4"})(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),f=a.a.memo((function(e){var t=e.file,i=e.progress,n=e.thumbnail,o=e.theme;return a.a.createElement(p,null,a.a.createElement(u,null,a.a.createElement(h,{src:n||d.uploadedPDF})),a.a.createElement(m,null,a.a.createElement(g,{fontWeight:c.d.REGULAR},t.name),a.a.createElement(s.n,{margin:"".concat(c.c.SPACING_6," 0 0 0"),color:o.BLUE},0===i?"Waiting to upload":100===i?"Uploaded":"Uploading... ".concat(i,"%"))))}));f.propTypes={file:r.a.object.isRequired,progress:r.a.number.isRequired},f.defaultProps={file:{},progress:0},t.a=Object(l.f)(f)},ddCN:function(e,t,i){e.exports=i.p+"static/media/firefox.d03c8aa2.svg"},dnSQ:function(e,t,i){e.exports=i.p+"static/media/slow-internet-connection.c7c38cd8.svg"},fQLD:function(e,t,i){e.exports=i.p+"static/media/play_icon.6ff6d958.svg"},"h+nZ":function(e,t,i){e.exports=i.p+"static/media/lightThemeBanner.de937ee3.svg"},hud2:function(e,t,i){e.exports=i.p+"static/media/darkTheme.aa1caeba.svg"},"izK+":function(e,t,i){e.exports=i.p+"static/media/lightTheme.5bb83c5b.svg"},k7Dm:function(e,t,i){e.exports=i.p+"static/media/loading-slides.9495bee1.svg"},kKu4:function(e,t,i){e.exports=i.p+"static/media/shape-arrow.bdbcdde7.svg"},kkPo:function(e,t,i){"use strict";var n=i("q1tI"),a=i.n(n),o=i("vOnD"),r=i("8ezB"),s=i("17x9"),l=i.n(s),c=i("XyO8"),d=i("0dbe"),p=o.d.div.withConfig({displayName:"BackHeader__HeaderWrapper",componentId:"sc-1390yc7-0"})(["display:flex;cursor:pointer;width:100%;align-items:center;margin-bottom:",";height:48px;background:",";padding-left:",";"],r.c.SPACING_3B,(function(e){return e.theme.BG_MAIN}),r.c.SPACING_4B),u=o.d.div.withConfig({displayName:"BackHeader__BackIconWrapper",componentId:"sc-1390yc7-1"})(["display:flex;margin-right:",";"],r.c.SPACING_2B),h=a.a.memo((function(e){var t=e.heading,i=e.onBackClick;return a.a.createElement(p,{onClick:function(){i()}},a.a.createElement(u,null,a.a.createElement(d.d,null)),a.a.createElement(c.i,null,t))}));t.a=h,h.propTypes={heading:l.a.string.isRequired,onBackClick:l.a.func.isRequired},h.defaultProps={heading:""}},lD0E:function(e,t,i){e.exports=i.p+"static/media/statsPoll.b571884d.svg"},lKtP:function(e,t,i){e.exports=i.p+"static/media/rank-2.3a33aca6.svg"},mTP5:function(e,t,i){e.exports=i.p+"static/media/rank-1.ed6cb560.svg"},"n+8n":function(e,t,i){e.exports=i.p+"static/media/classHasEnded.c9297834.svg"},nStm:function(e,t,i){e.exports=i.p+"static/media/class-disconnected.2d7939e7.svg"},nu1Y:function(e,t,i){"use strict";i.d(t,"a",(function(){return g})),i.d(t,"b",(function(){return E}));var n=i("J4zp"),a=i.n(n),o=i("q1tI"),r=i.n(o),s=i("vOnD"),l=i("/MKj"),c=i("WlAH"),d=i("8ezB"),p=i("wCkA"),u=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=Object(o.useState)(!1),l=a()(s,2),c=l[0],d=l[1],u=Object(o.useRef)(null),h=Object(o.useRef)(null),m=Object(o.useRef)(!1),g=function(e){u.current&&clearTimeout(u.current),u.current=setTimeout((function(){i&&i(),d(!0)}),1e3*e)},f=function(){h.current&&clearTimeout(h.current),h.current=setTimeout((function(){d(!1)}),1e3*e)},E=function(){return n&&!m.current?null!==r&&void 0!==r?r:0:Object(p.U)(t.MIN,t.MAX)};return Object(o.useEffect)((function(){return c?(m.current=!0,f()):g(E()),function(){h.current&&clearTimeout(h.current),u.current&&clearTimeout(u.current)}}),[c,t.MIN,t.MAX,e]),c},h=s.d.div.withConfig({displayName:"LearnerDetailsOnCanvas__LearnerDetailsContainer",componentId:"sc-11ngyab-0"})(["position:absolute;display:flex;flex-direction:column;opacity:",";transition:opacity 0.25s;z-index:3;",""],(function(e){return e.isVisible?1:0}),(function(e){var t=e.position;return t===c.bb.ON_CANVAS.POSITION.TOP_LEFT?Object(s.c)(["top:",";left:",";align-items:flex-start;"],d.c.SPACING_13B,d.c.SPACING_5B):t===c.bb.ON_CANVAS.POSITION.TOP_RIGHT?Object(s.c)(["top:",";right:",";align-items:flex-end;"],d.c.SPACING_13B,d.c.SPACING_5B):t===c.bb.ON_CANVAS.POSITION.BOTTOM_LEFT?Object(s.c)(["bottom:",";left:",";align-items:flex-start;"],d.c.SPACING_5B,d.c.SPACING_5B):Object(s.c)(["bottom:",";right:",";align-items:flex-end;"],d.c.SPACING_5B,d.c.SPACING_5B)})),m=s.d.span.withConfig({displayName:"LearnerDetailsOnCanvas__LearnerDetail",componentId:"sc-11ngyab-1"})(["font-size:",";line-height:",";color:",";"],d.d.EXTRA_SMALL,d.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_TERTIARY})),g=r.a.memo((function(){var e=Object(l.e)((function(e){return e.getIn(["app","userEmail"])})),t=Object(l.e)((function(e){return e.getIn(["app","userContact"])})),i=Object(o.useState)(null),n=a()(i,2),s=n[0],d=n[1],p=u(c.bb.ON_CANVAS.DURATION,c.bb.ON_CANVAS.INTERVAL,(function(){d((function(e){return null===e?3:(e+1)%c.bb.ON_CANVAS.DISPLAY_ORDER.length}))}),!0,1.5),g=c.bb.ON_CANVAS.DISPLAY_ORDER[s];return r.a.createElement(h,{position:g,isVisible:p},r.a.createElement(m,null,e),r.a.createElement(m,null,t))})),f=s.d.div.withConfig({displayName:"LearnerUID__LearnerUid",componentId:"sc-1m2hulx-0"})(["position:absolute;bottom:",";display:flex;width:100%;justify-content:",";padding-left:",";font-size:8px;line-height:",";color:",";opacity:",";transition:opacity 0.25s;"],(function(e){return e.center?d.c.SPACING_3B:d.c.SPACING_4B}),(function(e){return e.center?"center":"auto"}),(function(e){return e.center?d.c.SPACING_0B:d.c.SPACING_4B}),d.d.LINE_HEIGHT_MAX,(function(e){return e.theme.WHITE}),(function(e){return e.isVisible?1:0})),E=r.a.memo((function(){var e=Object(l.e)((function(e){return e.getIn(["app","userId"])})),t=Object(l.e)((function(e){return e.getIn(["app","useGreenScreen"])})),i=Object(l.e)((function(e){return e.getIn(["app","useRoundVideo"])})),n=u(c.bb.USER_ID.DURATION,c.bb.USER_ID.INTERVAL);return r.a.createElement(f,{center:i||t,isVisible:n},e)}))},r4g9:function(e,t,i){e.exports=i.p+"static/media/rank-3.169bc593.svg"},tjUo:function(e,t,i){"use strict";i.r(t);var n=i("q1tI"),a=i.n(n),o=i("i8i4"),r=i.n(o),s=i("3CEA"),l=i("o8UZ"),c=i("o0o1"),d=i.n(c),p=i("yXPU"),u=i.n(p),h=i("J4zp"),m=i.n(h),g=i("gtzJ"),f=i("wCkA"),E=i("lSNA"),b=i.n(E),C=i("/MKj"),v=i("9ONQ"),S=i("vOnD"),I=i("9/5/"),y=i.n(I),_=i("VEaK"),O=i("VkAN"),w=i.n(O);function T(){var e=w()(["\n\tbody {\n\t\tbackground-color: #fff;\n\t\tcolor: #222;\n\t\t-webkit-touch-callout: none; /* iOS Safari */\n\t\t-webkit-user-select: none; /* Safari */\n\t\t-khtml-user-select: none; /* Konqueror HTML */\n\t\t-moz-user-select: none; /* Firefox */\n\t\t-ms-user-select: none; /* Internet Explorer/Edge */\n\t\tuser-select: none; /* Non-prefixed version, currently\n\t\t\t\t\t\t\t\t\tsupported by Chrome and Opera */\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\n\t\t/* SCROLLBAR (CHROME ONLY SUPPORT) */\n\n\t\t* {\n\t\t\t/* total width */\n\t\t\t::-webkit-scrollbar {\n\t\t\t\tbackground-color: transparent;\n\t\t\t\twidth: 6px;\n\t\t\t\theight: 6px;\n\t\t\t}\n\t\t\t/* background of the scrollbar except button or resizer */\n\t\t\t::-webkit-scrollbar-track {\n\t\t\t\tbackground-color: ",";\n\t\t\t}\n\t\t\t::-webkit-scrollbar-track:hover {\n\t\t\t\tbackground-color: ",";\n\t\t\t}\n\t\t\t/* scrollbar itself */\n\t\t\t::-webkit-scrollbar-thumb {\n\t\t\t\tbackground-color: ",";\n\t\t\t\tborder-radius: 16px;\n\t\t\t\tborder: 1px solid ",";\n\t\t\t}\n\t\t\t::-webkit-scrollbar-thumb:hover {\n\t\t\t\tbackground-color: #a0a0a5;\n\t\t\t\tborder: 1px solid ",";\n\t\t\t}\n\t\t\t/* set button(top and bottom of the scrollbar) */\n\t\t\t::-webkit-scrollbar-button {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t::-webkit-scrollbar-corner {\n\t\t\t\tbackground-color: transparent;\n\t\t\t}\n\t\t}\n\n\t\t/* \tSCROLLBAR (FOR FIREFOX ONLY)\n\t\t\tRefer - https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Scrollbars \n\t\t\tIf all browsers would support scrollbar properties in future, \n\t\t\tget rid of the moz-document filter */\n\n\t\t@-moz-document url-prefix() {\n\t\t\t/* this is read by firefox (any version) only */\n\t\t\t* {\n\t\t\t\tscrollbar-width: thin;\n\n\t\t\t\t/* \tFor macOS the colors won't be applied if scrollbar is visible only while scrolling (the default behaviour) \n\t\t\t\t\tTo see scrollbar in MAC, go to system preferences and set scrollbar to be always visible */\n\t\t\t\tscrollbar-color: ",";\n\t\t\t}\n\t\t}\n\t}\n\n\tdiv {\n\t\tbox-sizing: border-box;\n\t}\n\n\tbutton {\n\t\tfont-family: UN_REGULAR;\n\t\tbox-sizing: border-box;\n\t}\n\n\t.roundCameraWrapper {\n\t\tposition: absolute;\n\t\toverflow: hidden;\n\t\tborder: 2px solid #dde6ed;\n\t\tbox-sizing: border-box;\n\t\tborder-radius: 50%;\n\t\tpointer-events: all;\n\t}\n\n\t.roundCameraWrapperScreenShared {\n\t\tposition: absolute;\n\t\toverflow: hidden;\n\t\tpointer-events: all;\n\t}\n\n\t.roundCameraWrapper > .cameraContainer > video {\n\t\tobject-fit: cover;\n\t}\n\n\t.roundCameraWrapper > .cameraContainer {\n\t\t/* For Anti-aliasing fix  */\n\t\theight: calc(100% + 2px);\n\t\twidth: calc(100% + 2px);\n\t}\n\n\t.roundCameraWrapperAnimated {\n\t\ttransition: all 0.25s ease-in-out;\n\t}\n"]);return T=function(){return e},e}var A=Object(S.b)(T(),(function(e){return e.theme.BODY_BG}),(function(e){return e.theme.SHADOW}),(function(e){return e.theme.BG_LIGHT}),(function(e){return e.theme.BODY_BG}),(function(e){return e.theme.SHADOW}),(function(e){var t=e.theme;return"".concat(t.BG_LIGHT," ").concat(t.BODY_BG)})),P=i("8ezB"),x=i("RYsq"),R=i("B18y"),D=i("RYg1"),N=i("Xq25"),j=i("+UwG"),k=i("95RW"),L=i("Pj12"),B=i("Ocil"),M=i("oOl7"),G=i("17x9"),U=i.n(G),H=i("WlAH"),V=Object(S.e)(["0%{opacity:0;transform:translateX(-20px);}100%{opacity:1;transform:translateX(0);}"]),F=Object(S.e)(["0%{opacity:1;transform:translateX(0);}100%{opacity:0;transform:translateX(-10px);}"]),W=Object(S.e)(["0%{transform:translateX(0px);opacity:1;}100%{transform:translateX(-10px);opacity:0;}"]),z=Object(S.e)(["0%{transform:translateX(-10px);opacity:0;}100%{transform:translateX(0px);opacity:1;}"]),q=S.d.div.withConfig({displayName:"SubscriptionSubText__TextWrapper",componentId:"sc-1940dr6-0"})(["position:relative;display:flex;width:100%;align-items:center;justify-content:flex-start;"]),Y=S.d.span.withConfig({displayName:"SubscriptionSubText__BoldName",componentId:"sc-1940dr6-1"})(["color:",";margin-right:4px;font-weight:bold;"],(function(e){return e.theme.TEXT_PRIMARY})),X=S.d.span.withConfig({displayName:"SubscriptionSubText__Code",componentId:"sc-1940dr6-2"})(["color:",";margin:0 4px;font-family:UN_BOLD;"],(function(e){return e.theme.GREEN})),K=S.d.div.withConfig({displayName:"SubscriptionSubText__JustSubscribedText",componentId:"sc-1940dr6-3"})(["display:flex;align-items:center;color:",";width:100%;opacity:0;position:absolute;",";"],(function(e){return e.theme.TEXT_PRIMARY}),(function(e){return e.enter?Object(S.c)(["animation:"," 0.3s ease-in;animation-fill-mode:forwards;animation-delay:0.9s;"],V):e.exit?Object(S.c)(["animation:"," 0.3s ease-in;animation-fill-mode:forwards;"],W):void 0})),Z=S.d.div.withConfig({displayName:"SubscriptionSubText__StartLearningText",componentId:"sc-1940dr6-4"})(["display:flex;align-items:center;width:100%;opacity:0;color:",";position:absolute;",";"],(function(e){return e.theme.TEXT_PRIMARY}),(function(e){return e.enter?Object(S.c)(["animation:"," 0.2s ease-in;animation-delay:0.3s;animation-fill-mode:forwards;"],z):e.exit?Object(S.c)(["animation:"," 0.3s ease-in;animation-fill-mode:backwards;animation-delay:0.3s;"],F):void 0})),J=a.a.memo((function(e){var t=e.isTextChanged,i=e.isSubscriptionCTACardShown,n=Object(C.e)((function(e){return e.getIn(["subscription","subscribedUserDetails"])}));return a.a.createElement(q,null,function(){if(n&&n.user&&n.referral_code)return a.a.createElement(Z,{enter:t&&i,exit:!i&&t},a.a.createElement(Y,null,H.Vb.START_LEARNING)," ",H.Vb.GET_SUBSCRIPTION_TEXT," ",a.a.createElement(X,null,' "'.concat(n.referral_code.code,'" '))," ",H.Vb.TO_GET," ",n.referral_code.discount," ",H.Vb.GET_SUBSCRIPTION_EMOJI)}(),function(){if(n&&n.user&&n.referral_code)return a.a.createElement(K,{enter:i&&!t,exit:t},a.a.createElement(Y,null,n.user.firstName)," ",H.Vb.JUST_SUBSCRIBED,a.a.createElement(X,null,' "'.concat(n.referral_code.code,'" '))," ",H.Vb.JUST_SUBSCRIBED_EMOJI)}())}));J.propTypes={isTextChanged:U.a.bool.isRequired,isSubscriptionCTACardShown:U.a.bool.isRequired},J.defaultProps={isTextChanged:!1,isSubscriptionCTACardShown:!1};var Q=Object(S.f)(J),$=i("KUUV"),ee=i("XyO8"),te=Object(S.e)(["0%{transform:rotate(320deg) scale(0);opacity:0;}100%{transform:rotate(360deg) scale(1);opacity:1;}"]),ie=Object(S.e)(["0%{opacity:1;transform:rotate(360deg) scale(1);}100%{opacity:0;transform:rotate(340deg) scale(0);}"]),ne=Object(S.e)(["0%{opacity:0;transform:translateX(-20px);}100%{opacity:1;transform:translateX(0);}"]),ae=Object(S.e)(["0%{opacity:1;transform:translateX(0);}100%{opacity:0;transform:translateX(-10px);}"]),oe=S.d.div.withConfig({displayName:"SubscriptionUserDetails__UserDetailsWrapper",componentId:"sc-80amgl-0"})(["display:flex;width:100%;"]),re=Object(S.d)(ee.i).withConfig({displayName:"SubscriptionUserDetails__StyledH3",componentId:"sc-80amgl-1"})(["display:flex;margin-bottom:14px;margin-top:4px;font-family:UN_SEMIBOLD;color:",";opacity:0;",";"],(function(e){return e.theme.BLUE}),(function(e){return e.enter?Object(S.c)(["animation:"," 0.3s ease-in;animation-fill-mode:forwards;animation-delay:0.7s;"],ne):e.exit?Object(S.c)(["animation:"," 0.3s ease-in;animation-fill-mode:backwards;"],ae):void 0})),se=S.d.div.withConfig({displayName:"SubscriptionUserDetails__UserAvatarContainer",componentId:"sc-80amgl-2"})(["display:flex;opacity:0;position:relative;",";"],(function(e){return e.enter?Object(S.c)(["animation:"," 0.4s ease-in;animation-fill-mode:forwards;animation-delay:0.4s;"],te):e.exit?Object(S.c)(["animation:"," 0.3s ease-in;animation-fill-mode:backwards;animation-delay:0.6s;"],ie):void 0})),le=S.d.img.withConfig({displayName:"SubscriptionUserDetails__Gif",componentId:"sc-80amgl-3"})(["height:20px;width:20px;"]),ce=S.d.div.withConfig({displayName:"SubscriptionUserDetails__GifContainer",componentId:"sc-80amgl-4"})(["display:flex;height:24px;width:24px;position:absolute;border-radius:8px;align-items:center;justify-content:center;background:",";right:0;bottom:0;"],(function(e){return e.theme.WHITE})),de=S.d.div.withConfig({displayName:"SubscriptionUserDetails__TextWrapper",componentId:"sc-80amgl-5"})(["display:flex;flex-direction:column;width:100%;margin-left:20px;"]),pe=a.a.memo((function(e){var t=e.isSubscriptionCTACardShown,i=e.isTextChanged,n=Object(C.e)((function(e){return e.getIn(["subscription","subscribedUserDetails"])}));return a.a.createElement(oe,null,a.a.createElement(se,{enter:t,exit:!t},a.a.createElement($.a,{key:0,avatar:n.user.avatar,name:n.user.fullName,size:56,borderSize:4,noMargin:!0}),a.a.createElement(ce,null,a.a.createElement(le,{src:n.gif}))),a.a.createElement(de,null,a.a.createElement(re,{enter:t,exit:!t},n.subscription.goalNameAndDuration),a.a.createElement(Q,{isTextChanged:i,isSubscriptionCTACardShown:t})))}));pe.propTypes={isTextChanged:U.a.bool.isRequired,isSubscriptionCTACardShown:U.a.bool.isRequired},pe.defaultProps={isTextChanged:!1,isSubscriptionCTACardShown:!1};var ue=pe,he=i("5K3P"),me=Object(S.e)(["0%{transform:translateX(20px);opacity:0;}100%{transform:translateX(0px);opacity:1;}"]),ge=Object(S.e)(["0%{opacity:1;transform:translateX(0px);}100%{opacity:0;transform:translateX(20px);}"]),fe=S.d.a.withConfig({displayName:"GetSubscriptionLink__ButtonWrapper",componentId:"sc-116na3z-0"})(["opacity:0;text-decoration:none;cursor:pointer;",";"],(function(e){return e.enter?Object(S.c)(["animation:"," 0.3s ease-in;animation-delay:1.2s;animation-fill-mode:forwards;"],me):e.exit?Object(S.c)(["animation:"," 0.3s ease-in;animation-fill-mode:backwards;animation-delay:0.6s;"],ge):void 0})),Ee=Object(S.d)(ee.b).withConfig({displayName:"GetSubscriptionLink__StyledButton",componentId:"sc-116na3z-1"})(["width:176px;height:48px;box-shadow:0px 16px 32px ",";"],(function(e){return e.theme.SHADOW})),be=a.a.memo((function(e){var t=e.isSubscriptionCTACardShown,i=e.isTextChanged,n=Object(C.e)((function(e){return e.getIn(["subscription","subscribedUserDetails"])})).cta+"&utm_source=clx&utm_medium=subscription_cta";return a.a.createElement(fe,{enter:t,onClick:function(){he.b.dispatchEvent(he.a.GET_SUBSCRIPTION_CLICKED)},exit:!t&&i,href:n,target:"_blank"},a.a.createElement(Ee,{variant:"filled",isEducator:!1},H.Vb.GET_SUBSCRIPTION))}));be.propTypes={isTextChanged:U.a.bool.isRequired,isSubscriptionCTACardShown:U.a.bool.isRequired},be.defaultProps={isTextChanged:!1,isSubscriptionCTACardShown:!1};var Ce=Object(S.f)(be),ve=S.d.div.withConfig({displayName:"SubscriptionCTACard__Wrapper",componentId:"sc-1woqanj-0"})(["display:flex;justify-content:space-between;width:100%;height:100%;align-items:center;position:absolute;top:",";transition-delay:",";transition:top 0.4s ease-in;"],(function(e){return e.hide?"88px":"0px"}),(function(e){return e.hide?"1s":"0.4s"})),Se=a.a.memo((function(){var e=Object(C.d)(),t=Object(C.e)((function(e){return e.getIn(["subscription","isSubscriptionCTACardShown"])})),i=Object(C.e)((function(e){return e.getIn(["subscription","isDataReset"])})),o=Object(C.e)((function(e){return e.getIn(["poll","isPollActive"])})),r=Object(n.useState)(!1),s=m()(r,2),l=s[0],c=s[1];return Object(n.useEffect)((function(){var i,n;return t&&(he.b.dispatchEvent(he.a.CTA_CARD_SHOWN),i=setTimeout((function(){e(Object(M.b)())}),1e4),n=setTimeout((function(){c(!0)}),6e3)),function(){clearTimeout(i),clearTimeout(n)}}),[t]),Object(n.useEffect)((function(){i&&c(!1)}),[i]),a.a.createElement(ve,{hide:o},a.a.createElement(ue,{isSubscriptionCTACardShown:t,isTextChanged:l}),a.a.createElement(Ce,{isSubscriptionCTACardShown:t,isTextChanged:l}))})),Ie=Object(S.f)(Se),ye=i("ri1g"),_e=i("qSKu"),Oe=i("ZfJe"),we=i("apID"),Te=i("EyXO"),Ae=S.d.div.withConfig({displayName:"ReloadAppModal__ReloadAppModalWrapper",componentId:"sc-17l00oz-0"})(["background:",";display:flex;width:320px;height:fit-content;outline:none;flex-direction:column;padding:",";border-radius:",";pointer-events:all;"],(function(e){return e.theme.BG_MAIN}),P.c.SPACING_4B,P.c.SPACING_2B),Pe=Object(S.d)(ee.b).withConfig({displayName:"ReloadAppModal__ReloadButton",componentId:"sc-17l00oz-1"})(["height:40px;min-width:80px;width:unset;margin-top:",";"],P.c.SPACING_4B),xe=a.a.memo((function(){var e=Object(C.e)((function(e){return e.getIn(["app","showReloadModal"])})),t=Object(C.e)((function(e){return e.getIn(["app","chunkLoadError"])})),i=Object(n.useCallback)((function(){j.f.sendData(j.c.CHUNK_LOAD_FAILURE_RELOAD_CLICK,{error:t}),he.b.dispatchEvent(he.a.RELOAD_IFRAME)}));return a.a.createElement(n.Fragment,null,a.a.createElement(ee.r,{open:e,paperWidth:"320px",paperHeight:"fit-content",animation:"slide",disableEscapeKeyDown:!1,width:"100%"},a.a.createElement(Ae,null,a.a.createElement(ee.j,null,H.Hb.title),a.a.createElement(ee.n,{margin:"".concat(P.c.SPACING_2B," 0 0 0")},H.Hb.description),a.a.createElement(Pe,{variant:"filled",action:"destructive",onClick:i},H.Hb.button))))})),Re=i("PcDQ"),De={rank1:i("mTP5"),rank2:i("lKtP"),rank3:i("r4g9")},Ne=S.d.div.withConfig({displayName:"LeaderCard__Wrapper",componentId:"f21htc-0"})(["height:64px !important;width:236px;display:flex;align-items:center;padding:"," ",";background-color:",";border:",";border-radius:4px;"],P.c.SPACING_3B,P.c.SPACING_5B,(function(e){var t=e.rank,i=e.theme;return 1===t?i.RANK_ONE:2===t?i.RANK_TWO:3===t?i.RANK_THIRD:i.BG_MAIN}),(function(e){var t=e.rank,i=e.theme;return t>3?"1px solid ".concat(i.BORDER):"initial"})),je=S.d.img.withConfig({displayName:"LeaderCard__Badge",componentId:"f21htc-1"})(["height:24px;object-fit:cover;"]),ke=S.d.div.withConfig({displayName:"LeaderCard__RankWrapper",componentId:"f21htc-2"})(["height:24px;display:flex;justify-content:center;align-items:center;"]),Le=S.d.div.withConfig({displayName:"LeaderCard__AvatarWrapper",componentId:"f21htc-3"})(["height:24px;width:24px;margin-left:",";"],P.c.SPACING_4B),Be=S.d.div.withConfig({displayName:"LeaderCard__UserDetailsWrapper",componentId:"f21htc-4"})(["display:flex;flex-direction:column;justify-content:center;align-items:flex-start;margin-left:",";flex:1;min-width:0;overflow:hidden;"],P.c.SPACING_4B),Me=Object(S.d)(ee.j).withConfig({displayName:"LeaderCard__NameText",componentId:"f21htc-5"})(["text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:124px;text-align:left;text-transform:capitalize;color:",";"],(function(e){var t=e.isSelf,i=e.theme;return t?i.GREEN:i.TEXT_PRIMARY})),Ge=a.a.memo((function(e){var t=e.leader,i=e.theme,n=t.rank,o=t.avatar,r=t.name,s=t.correctAnswerCount,l=t.totalQuestions,c=t.totalTimeTaken,d=t.isSelf,p=d?"You":r;return a.a.createElement(Ne,{rank:t.rank},function(){if(n<=3){var e=De["rank".concat(n)];return a.a.createElement(je,{src:e})}var t=-1===n?"".concat(H.gb,"+"):n;return a.a.createElement(ke,null,a.a.createElement(ee.k,{color:i.TEXT_TERTIARY,fontWeight:P.d.REGULAR},t))}(),a.a.createElement(Le,null,a.a.createElement($.a,{avatar:o,size:24,borderSize:n<=3?1:0})),a.a.createElement(Be,null,a.a.createElement(Me,{isSelf:d},p),function(){if(s>0)return a.a.createElement(ee.k,{fontWeight:P.d.REGULAR,color:d?i.GREEN:i.TEXT_TERTIARY},"".concat(s," / ").concat(l," in ").concat(c,"s"))}()))}));Ge.propTypes={leader:U.a.object.isRequired},Ge.defaultProps={};var Ue=Object(S.f)(Ge),He=i("gRhY"),Ve=i("0dbe"),Fe=S.d.div.withConfig({displayName:"GlobalLeaderboard__ContentWrapper",componentId:"sc-1ntjvel-0"})(["display:flex;flex-direction:column;max-width:538px;min-width:0;padding:",";border-radius:",";min-height:0;min-width:0;overflow:hidden;"],P.c.SPACING_6B,P.c.SPACING_2B),We=S.d.div.withConfig({displayName:"GlobalLeaderboard__HeaderWrapper",componentId:"sc-1ntjvel-1"})(["height:24px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;margin-bottom:",";"],P.c.SPACING_7B),ze=S.d.div.withConfig({displayName:"GlobalLeaderboard__FlexWrapper",componentId:"sc-1ntjvel-2"})(["display:flex;flex-direction:row;align-items:center;"]),qe=S.d.div.withConfig({displayName:"GlobalLeaderboard__VisibleToLearnersView",componentId:"sc-1ntjvel-3"})(["padding:"," ",";height:24px;display:flex;flex-direction:row;align-items:center;text-transform:uppercase;border:1px solid ",";border-radius:4px;margin-left:",";"],P.c.SPACING_0B,P.c.SPACING_2B,(function(e){return e.theme.BORDER}),P.c.SPACING_2B),Ye=(S.d.img.withConfig({displayName:"GlobalLeaderboard__UsersImage",componentId:"sc-1ntjvel-4"})(["height:12px;width:12px;margin-right:",";"],P.c.SPACING_1B),S.d.img.withConfig({displayName:"GlobalLeaderboard__CloseButton",componentId:"sc-1ntjvel-5"})(["height:16px;width:16px;cursor:pointer;margin-left:",";"],P.c.SPACING_4B),S.d.div.withConfig({displayName:"GlobalLeaderboard__LeadersList",componentId:"sc-1ntjvel-6"})(["display:flex;flex-direction:column;flex:1;min-height:0;overflow:scroll;"])),Xe=S.d.div.withConfig({displayName:"GlobalLeaderboard__DummyCard",componentId:"sc-1ntjvel-7"})(["height:64px !important;width:236px;"]),Ke=S.d.div.withConfig({displayName:"GlobalLeaderboard__CloseWrapper",componentId:"sc-1ntjvel-8"})(["cursor:pointer;"]),Ze=a.a.memo((function(e){var t=e.socketManager,i=e.theme,n=Object(C.e)((function(e){return e.getIn(["poll","globalLeaderboard"])})),o=Object(C.e)((function(e){return e.getIn(["app","isEducator"])})),r=Object(C.e)((function(e){return e.getIn(["videoPlayControls","isChatHidden"])})),s=Object(C.d)(),l=function(){s(Object(He.o)(!1)),o&&t.closeLeaderBoard()};return a.a.createElement(ee.r,{open:!0,onClose:l,animation:"slide",paperWidth:"auto",paperHeight:"auto",width:r?"100%":"75%"},a.a.createElement(Fe,null,a.a.createElement(We,null,a.a.createElement(ze,null,a.a.createElement(ee.j,null,H.T.CLASS_LEADERBOARD),function(){if(o)return a.a.createElement(qe,null,a.a.createElement(Ve.ac,null),a.a.createElement(ee.l,{color:i.TEXT_TERTIARY},H.T.VISIBLE_TO_LEARNERS))}()),a.a.createElement(Ke,{onClick:l},a.a.createElement(Ve.u,null))),function(){if(n&&n.list.size>0)return a.a.createElement(Ye,null,a.a.createElement(ee.g,null,function(){for(var e=[],t=0;t<10;t++){var i=t%2==0?t/2:(t+9)/2;if(i<n.size){var o=n.getLeader(i);e.push(a.a.createElement(Ue,{key:t,leader:o}))}else e.push(a.a.createElement(Xe,{key:t}))}return e}()))}()))}));Ze.defaultProps={};var Je=Object(S.f)(Ze),Qe=i("QhPV"),$e=i("Jwi+"),et=S.d.div.withConfig({displayName:"FullCircularProgress__Wrapper",componentId:"m08lsb-0"})(["height:",";width:",";display:flex;justify-content:center;align-items:center;position:relative;"],(function(e){return"".concat(e.size,"px")}),(function(e){return"".concat(e.size,"px")})),tt=a.a.memo((function(e){return a.a.createElement(et,{size:e.size},a.a.createElement("div",{style:{position:"absolute",width:"100%",height:"100%"}},a.a.createElement($e.a,{className:"circleProgress",strokeWidth:11,styles:Object($e.b)({strokeLinecap:"butt",pathColor:e.theme.BLUE})})),a.a.createElement(et,{size:.8*e.size},a.a.createElement("div",{style:{position:"absolute",width:"100%",height:"100%"}},a.a.createElement($e.a,{className:"circleProgress",value:e.value,strokeWidth:50,counterClockwise:!0,styles:Object($e.b)({strokeLinecap:"butt",trailColor:"#0000",pathTransitionDuration:1,pathColor:e.theme.BLUE})}))))})),it=Object(S.f)(tt);Number.prototype.zeroPad=function(){return("0"+this).slice(-2)};var nt=S.d.div.withConfig({displayName:"ClassStartTimer__Wrapper",componentId:"sc-13axxt4-0"})(["display:flex;flex-direction:column;justify-content:center;align-items:center;"]),at=S.d.div.withConfig({displayName:"ClassStartTimer__ClassStartText",componentId:"sc-13axxt4-1"})(["font-weight:",";font-size:",";color:",";text-transform:uppercase;margin-top:",";"],P.d.SEMIBOLD,P.d.SMALL,(function(e){return e.theme.TEXT_TERTIARY}),P.c.SPACING_4B),ot=S.d.div.withConfig({displayName:"ClassStartTimer__TimeWrapper",componentId:"sc-13axxt4-2"})(["margin-top:",";display:flex;font-size:",";align-items:flex-end;color:",";font-weight:",";line-height:100%;"],P.c.SPACING_1B,P.d.LARGE_HEADING,(function(e){return e.theme.TEXT_PRIMARY}),P.d.BOLD),rt=S.d.div.withConfig({displayName:"ClassStartTimer__TimeMin",componentId:"sc-13axxt4-3"})(["width:82px;text-align:right;"]),st=S.d.div.withConfig({displayName:"ClassStartTimer__TimeSec",componentId:"sc-13axxt4-4"})(["width:74px;text-align:right;"]),lt=S.d.div.withConfig({displayName:"ClassStartTimer__TimeText",componentId:"sc-13axxt4-5"})(["display:inline;color:",";"],(function(e){return e.theme.BG_LIGHT})),ct=a.a.memo((function(e){var t=function(){e.showLateText()};return a.a.createElement(Qe.a,{daysInHours:!0,date:e.liveAt||new Date,renderer:function(i){if(i){var n=i.minutes,o=i.seconds,r=(60*n+o)/900*100;return i.completed&&e.liveAt?(t(),a.a.createElement("div",null)):a.a.createElement(nt,null,a.a.createElement(it,{size:40,value:r}),a.a.createElement(at,null,H.Zb.CLASS_STARTS_IN),a.a.createElement(ot,null,a.a.createElement(rt,null,parseInt(n).zeroPad(),a.a.createElement(lt,null,"m")),a.a.createElement(st,null,parseInt(o).zeroPad(),a.a.createElement(lt,null,"s"))))}}})})),dt=i("RIqP"),pt=i.n(dt),ut=Object(S.e)(["0%{transform:scale(0);opacity:0.2;}100%{transform:scale(1);opacity:1;}"]),ht=S.d.div.withConfig({displayName:"ImageBubbleAnimated__Wrapper",componentId:"oh9h8x-0"})(["height:",";width:",";margin:0px 6px;"],(function(e){return"".concat(e.size?e.size:48,"px")}),(function(e){return"".concat(e.size?e.size:48,"px")})),mt=S.d.img.withConfig({displayName:"ImageBubbleAnimated__BubbleImage",componentId:"oh9h8x-1"})(["width:100%;height:100%;top:0px;left:0px;object-fit:cover;background-color:",";transform:scale(0);opacity:0.2;border-radius:",";",""],(function(e){return e.theme.TEXT_PRIMARY}),(function(e){return"".concat(e.borderRadius?e.borderRadius:8,"px")}),(function(e){if(e.animateIn)return Object(S.c)(["animation:"," 0.2s ease-in;animation-fill-mode:forwards;animation-delay:0.15s;"],ut)})),gt=a.a.memo((function(e){var t=Object(n.useState)(!1),i=m()(t,2),o=i[0],r=i[1];return a.a.createElement(ht,{animateIn:o},a.a.createElement(mt,{src:e.src,index:e.index,animateIn:o,onLoad:function(){e.onLoad&&e.onLoad(e.index),r(!0)}}))}));function ft(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Et(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(i),!0).forEach((function(t){b()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ft(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var bt=S.d.div.withConfig({displayName:"BubbleAvatar__Wrapper",componentId:"ahbdet-0"})(["position:relative;display:flex;flex-direction:column;"]),Ct=S.d.div.withConfig({displayName:"BubbleAvatar__ContentWrapper",componentId:"ahbdet-1"})(["height:72px;background:",";border:1px solid ",";box-sizing:border-box;border-radius:8px;"],(function(e){return e.theme.BG_MAIN}),(function(e){return e.theme.BG_LIGHT})),vt=S.d.div.withConfig({displayName:"BubbleAvatar__EmptyBubbleParent",componentId:"ahbdet-2"})(["display:flex;padding:"," ",";align-items:center;justify-content:center;"],P.c.SPACING_3B,P.c.SPACING_6),St=Object(S.e)(["0%{transform:scale(0.5);opacity:0.2;}100%{transform:scale(1);opacity:1;}"]),It=S.d.div.withConfig({displayName:"BubbleAvatar__EmptyBubble",componentId:"ahbdet-3"})(["height:48px;width:48px;border-radius:8px;background:",";margin:0 ",";animation:"," 0.4s ease-in;animation-delay:",";animation-fill-mode:forwards;transform:scale(0.5);opacity:0.2;"],(function(e){return e.theme.BORDER}),P.c.SPACING_6,St,(function(e){return"".concat(e.delay?e.delay:0,"s")})),yt=S.d.div.withConfig({displayName:"BubbleAvatar__SliderParent",componentId:"ahbdet-4"})(["padding:"," ",";height:72px;width:312px;position:absolute;top:1px;left:1px;overflow:hidden;"],P.c.SPACING_3B,P.c.SPACING_6),_t=S.d.div.withConfig({displayName:"BubbleAvatar__SliderContainer",componentId:"ahbdet-5"})(["display:flex;transition:0.2s linear all;position:absolute;z-index:3;transform:translate(120px);height:48px;"]),Ot=S.d.div.withConfig({displayName:"BubbleAvatar__UserJoiningText",componentId:"ahbdet-6"})(["margin-top:",";font-weight:",";font-size:",";text-transform:uppercase;color:",";visibility:",";"],P.c.SPACING_3B,P.d.SEMIBOLD,P.d.SMALL,(function(e){return e.theme.TEXT_TERTIARY}),(function(e){return e.visibility})),wt=a.a.memo((function(e){var t=Object(n.useState)([]),i=m()(t,2),o=i[0],r=i[1],s=Object(n.useState)(""),l=m()(s,2),c=l[0],d=l[1],p=Object(C.e)((function(e){return e.getIn(["app","isSocketManagerInit"])})),u=Object(n.useRef)(null),h=[e.user],g=!1,f=!1,E=!1,b=0;Object(n.useEffect)((function(){var e=setInterval((function(){h[b]&&h.length<=25&&(y(Et({},h[b])),b<=1&&_(),b++)}),1e3);return u.current=e,function(){return clearInterval(e)}}),[]),Object(n.useEffect)((function(){if(e.socketManager&&p&&!f)return f=!0,e.socketManager.addMessageListener(I),e.socketManager.isSubscribed&&S(),e.socketManager.addSubscriptionListener(v),function(){e.isSocketManager&&(e.socketManager.removeMessageListener(I),e.socketManager.removeSubscriptionListener(v))}}),[e.socketManager,p]);var v=function(){S()},S=function(){g||(g=!0,e.socketManager.getParticipants())},I=function(e){var t=JSON.parse(e);switch(t.type){case"DATA":var i=JSON.parse(t.text);switch(i.type){case"MESSAGE":!function(e){e.type==H.jb.ATTENDANCE&&(h=[].concat(pt()(h),[e.sender])),h.length>25&&u.current&&clearInterval(u.current)}(function(e){return Et(Et({},e),JSON.parse(e.text))}(i));break;case"PARTICIPANTS":!function(e){var t=[];e.participants&&(t=e.participants.filter((function(e){return e.uid!==h[0].userId}))),E||(E=!0,h=[].concat(pt()(h),pt()(t)))}(JSON.parse(i.text))}}},y=function(e){r((function(t){return t.concat(e)}))},_=function(){var e="";1==h.length?e=H.Zb.YOU_JOINED:h.length>1&&(e=H.Zb.MORE_LEARNERS_JOINING),d(e)},O=function(e){if(e>=3){var t=document.getElementById("containerSlider");t&&(t.style.transform="translateX(".concat(-60*(e-2)+120,"px)"))}};return a.a.createElement(bt,null,a.a.createElement(Ct,null,a.a.createElement(vt,null,a.a.createElement(It,null),a.a.createElement(It,{delay:.5}),a.a.createElement(It,{delay:1}),a.a.createElement(It,{delay:1.5}),a.a.createElement(It,{delay:2})),a.a.createElement(yt,null,a.a.createElement(_t,{id:"containerSlider"},o.map((function(e,t){var i=e.avatar?e.avatar:e.image;return a.a.createElement(gt,{key:t,index:t,src:i,size:48,borderRadius:8,onLoad:O})}))))),a.a.createElement(Ot,{visibility:0==h.length?"hidden":"unset"},c))})),Tt={educatorLate:i("zpft"),classHasEnded:i("n+8n"),classHasDisconnected:i("nStm"),multipleTabs:i("x7qq"),screenShared:i("GLwo"),learnerKicked:i("MuBy"),educatorLive:i("NKhq")},At=S.d.div.withConfig({displayName:"StatusInfo__Wrapper",componentId:"sc-1llfate-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;"]),Pt=S.d.img.withConfig({displayName:"StatusInfo__Image",componentId:"sc-1llfate-1"})(["width:88px;"]),xt=S.d.div.withConfig({displayName:"StatusInfo__Title",componentId:"sc-1llfate-2"})(["margin-top:",";font-weight:",";font-size:",";color:",";"],P.c.SPACING_4B,P.d.SEMIBOLD,P.d.LARGE,(function(e){return e.theme.TEXT_PRIMARY})),Rt=S.d.div.withConfig({displayName:"StatusInfo__TitleRed",componentId:"sc-1llfate-3"})(["color:",";display:inline;"],(function(e){return e.theme.RED})),Dt=S.d.div.withConfig({displayName:"StatusInfo__SubTitle",componentId:"sc-1llfate-4"})(["margin-top:",";font-size:",";color:",";width:",";"],P.c.SPACING_2B,P.d.MEDIUM,(function(e){return e.theme.TEXT_TERTIARY}),(function(e){return e.setWidth?"360px":"100%"})),Nt=Object(S.d)(ee.b).withConfig({displayName:"StatusInfo__StyledButton",componentId:"sc-1llfate-5"})(["width:80px;height:40px;margin-top:",";"],P.c.SPACING_4B),jt=S.d.div.withConfig({displayName:"StatusInfo__ImageContainer",componentId:"sc-1llfate-6"})(["min-height:56px;min-width:88px;"]),kt=a.a.memo((function(e){Object(C.e)((function(e){return e.getIn(["app","isEducator"])}));var t=function(){he.b.dispatchEvent(he.a.RELOAD_IFRAME)},i=function(){switch(e.type){case"educatorLate":return{image:Tt.educatorLate,titleText:H.Zb.EDUCATOR_RUNNING_LATE_TITLE,titleTextRed:H.Zb.EDUCATOR_RUNNING_LATE_TITLE_RED,subTitleText:H.Zb.EDUCATOR_RUNNING_LATE_SUBTITLE};case"classEnded":return{image:Tt.classHasEnded,titleText:H.Zb.CLASS_ENDED_TITLE,titleTextRed:H.Zb.CLASS_ENDED_TITLE_RED,subTitleText:H.Zb.CLASS_ENDED_SUBTITLE};case"classDisconnected":return{image:Tt.classHasDisconnected,titleText:H.Zb.EDUCATOR_DISCONNECTED_TITLE,titleTextRed:H.Zb.EDUCATOR_DISCONNECTED_TITLE_RED,subTitleText:H.Zb.EDUCATOR_DISCONNECTED_SUBTITLE};case"multipleTabs":return{image:Tt.multipleTabs,titleText:H.Zb.MULTIPLE_TABS_TITLE,subTitleText:H.Zb.MULTIPLE_TABS_SUBTITLE};case"screenShared":return{image:Tt.screenShared,titleText:H.Zb.SCREEN_SHARED_TITLE,subTitleText:H.Zb.SCREEN_SHARED_SUB_TITLE};case"learnerKicked":return{image:Tt.learnerKicked,titleText:H.Zb.LEARNER_KICKED_HEADING,subTitleText:H.Zb.LEARNER_KICKED_SUB_TITLE};case"educatorLive":return{image:Tt.educatorLive,titleText:H.Zb.EDUCATOR_LIVE_MODERATOR_TITLE,subTitleText:H.Zb.EDUCATOR_LIVE_MODERATOR_SUB_TITLE};default:return{image:e.image,titleText:e.titleText,titleTextRed:e.titleTextRed,subTitleText:e.subTitleText}}}(),n=i.image,o=i.titleText,r=i.titleTextRed,s=i.subTitleText;return a.a.createElement(At,null,a.a.createElement(jt,null,a.a.createElement(Pt,{src:n})),a.a.createElement(xt,null,o,function(){if(r)return a.a.createElement(Rt,null," ".concat(r))}()),a.a.createElement(Dt,{setWidth:"multipleTabs"==e.type||"learnerKicked"==e.type||e.restrictWidth}," ",s," "),function(){if(e.showRefreshButton)return a.a.createElement(Nt,{onClick:t},H.d.REFRESH)}(),function(){if(e.showStopSharingButton)return a.a.createElement(Nt,{action:"destructive",onClick:e.handleStopSharing},H.d.STOP)}())})),Lt=kt;kt.propTypes={type:U.a.string.isRequired,showRefreshButton:U.a.bool.isRequired,showStopSharingButton:U.a.bool,restrictWidth:U.a.bool},kt.defaultProps={type:"",showRefreshButton:!1,showStopSharingButton:!1,restrictWidth:!1};var Bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=Object(n.useState)(null),a=m()(i,2),o=a[0],r=a[1],s=Object(n.useRef)(null),l=function(){s.current&&clearTimeout(s.current)},c=function(e,t){l(),s.current=setTimeout((function(){r(t)}),e)};return Object(n.useEffect)((function(){return Array.isArray(e)&&Array.isArray(t)&&t[0]>=0&&c(t[0],0),function(){l(),r(null)}}),[e,t]),Object(n.useEffect)((function(){if(null!==o){var e=o+1,i=t[e];i>=0&&c(i,e)}}),[o]),o>=0?e[o]:null},Mt={CONNECTING:i("8O3G"),LOADING_SLIDES:i("k7Dm"),SLOW_INTERNET:i("dnSQ")},Gt=a.a.memo((function(e){var t=e.states,i=void 0===t?[]:t,n=e.triggerTimes,o=Bt(i,void 0===n?[]:n),r=function(){switch(null===o||void 0===o?void 0:o.NAME){case H.K.CONNECTING:case H.K.CONNECTING_DELAYED:return Mt.CONNECTING;case H.K.CONNECTING_SLOW:case H.K.LOADING_SLIDES_SLOW:return Mt.SLOW_INTERNET;case H.K.LOADING_SLIDES:case H.K.LOADING_SLIDES_DELAYED:return Mt.LOADING_SLIDES}};return o?a.a.createElement(Lt,{image:r(),titleText:o.TITLE,subTitleText:o.SUBTITLE,showRefreshButton:o.REFRESH_BUTTON,restrictWidth:!0}):null})),Ut=Object(S.e)(["from{top:100vh;opacity:0;}to{top:0;opacity:1;}"]),Ht=Object(S.e)(["from{top:0;opacity:1;}to{top:-100vh;opacity:0;}"]),Vt=Object(S.e)(["0%{transform:scale(0);opacity:0;}50%{transform:scale(1);opacity:1;}75%{transform:translateY(0);}100%{transform:translateY(-100vh);}"]),Ft=Object(S.e)(["0%{top:0;}100%{top:-100vh;}"]),Wt=Object(S.e)(["0%{transform:scale(0);opacity:0;}100%{transform:scale(1);opacity:1;}"]),zt=S.d.div.withConfig({displayName:"StatusMessage__Wrapper",componentId:"sc-1dwx4qd-0"})(["width:100%;height:100%;position:absolute;display:flex;align-items:center;justify-content:center;flex-direction:column;background-color:",";transition:top 0.2s ease-in;",";"],(function(e){return e.theme.BG_MAIN}),(function(e){if(e.exit)return Object(S.c)(["animation:"," 0.2s ease-in;animation-fill-mode:forwards;"],Ft)})),qt=S.d.div.withConfig({displayName:"StatusMessage__ContentWrapper",componentId:"sc-1dwx4qd-1"})(["padding:",";display:flex;justify-content:center;align-items:center;max-width:60%;color:",";"],P.c.SPACING_4B,(function(e){return e.theme.TEXT_PRIMARY})),Yt=S.d.div.withConfig({displayName:"StatusMessage__BubbleAvatarWrapper",componentId:"sc-1dwx4qd-2"})(["margin-top:",";overflow:hidden;"],P.c.SPACING_10B),Xt=S.d.div.withConfig({displayName:"StatusMessage__ClassNotStartedWrapper",componentId:"sc-1dwx4qd-3"})(["display:flex;flex-direction:column;align-items:center;position:relative;overflow:hidden;top:700px;opacity:0;",";"],(function(e){return e.enterView?Object(S.c)(["animation:"," 0.5s ease-in;animation-fill-mode:forwards;animation-delay:1s;"],Ut):e.exitView?Object(S.c)(["animation:"," 0.5s ease-in;animation-fill-mode:forwards;animation-delay:1s;"],Ht):void 0})),Kt=S.d.div.withConfig({displayName:"StatusMessage__ClassNotStartedInfoWrapper",componentId:"sc-1dwx4qd-4"})(["height:200px;width:100%;position:relative;overflow:hidden;"]),Zt=S.d.div.withConfig({displayName:"StatusMessage__ClassNotStartedAnimatedWrapper",componentId:"sc-1dwx4qd-5"})(["position:absolute;height:100%;width:100%;display:flex;flex-direction:column;justify-content:flex-end;align-items:center;transition:all 0.5s ease-in-out;top:200px;opacity:0;",""],(function(e){return e.show?Object(S.c)(["opacity:1;top:0px;"]):e.hide?Object(S.c)(["opacity:0;top:-200px;"]):void 0})),Jt=S.d.div.withConfig({displayName:"StatusMessage__ClassEndMessageContainer",componentId:"sc-1dwx4qd-6"})(["position:absolute;height:100%;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;opacity:0;",";"],(function(e){if(e.animated)return Object(S.c)(["animation:"," 1s ease-in-out;animation-fill-mode:forwards;animation-delay:",";"],Vt,(function(e){return e.animated?"1s":"0"}))})),Qt=S.d.div.withConfig({displayName:"StatusMessage__ScaleAnimationWrapper",componentId:"sc-1dwx4qd-7"})(["position:absolute;height:100%;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;opacity:0;",";"],(function(e){return e.animated?Object(S.c)(["animation:"," 0.5s ease-in-out;animation-fill-mode:forwards;animation-delay:1s;"],Wt):e.fastAnimated?Object(S.c)(["animation:"," 0.2s ease-in-out;animation-fill-mode:forwards;animation-delay:0.2s;"],Wt):void 0})),$t=Object(S.d)(ee.b).withConfig({displayName:"StatusMessage__StyledButton",componentId:"sc-1dwx4qd-8"})(["background-color:",";color:",";margin-top:12px;outline-style:none;border:0;border-radius:",";padding:8px 40px;cursor:pointer;transition:background-color 0.2s ease-out;&:hover{background-color:",";}"],(function(e){return e.theme.GREEN}),(function(e){return e.theme.WHITE}),P.c.SPACING_1B,(function(e){return e.theme.GREEN_EXCEPTION})),ei=a.a.memo((function(e){var t,i=Object(n.useState)(e.secondsBeforeLive),o=m()(i,2),r=o[0],s=o[1],l=Object(n.useState)(!1),c=m()(l,2),d=c[0],p=c[1],u=Object(n.useState)(!1),h=m()(u,2),g=h[0],E=h[1],b=Object(n.useState)(!1),v=m()(b,2),S=(v[0],v[1]),I=e.lessonData,y=Object(C.e)((function(e){return e.getIn(["app","isMultiEduClass"])})),_=Object(C.e)((function(e){return e.getIn(["app","isModerator"])})),O=Object(C.e)((function(e){return e.getIn(["app","isEducator"])})),w=Object(C.e)((function(e){return e.getIn(["app","classState"])})),T=Object(C.e)((function(e){return e.getIn(["app","isGoLiveEnabled"])})),A=Object(C.e)((function(e){return e.getIn(["app","wasGoLiveClickedbyGuest"])}));Object(n.useEffect)((function(){if(e.secondsBeforeLive>0)return s(e.secondsBeforeLive),t=setInterval((function(){s((function(e){return e-1}))}),1e3),function(){clearInterval(t)}}),[e.secondsBeforeLive]),Object(n.useEffect)((function(){r<=0&&clearInterval(t)}),[r]),Object(n.useEffect)((function(){e.show?E(!0):!e.show&&g&&(S(!0),E(!1))}),[e.show]);var P=function(){window.location.href="/educator"},x=function(){he.b.dispatchEvent(he.a.RELOAD_IFRAME)},R=function(){p(!0)},D=function(){var t=e.user;if(t.avatar=t.avatar?t.avatar:"","notStarted"==e.status)return a.a.createElement(Yt,null,a.a.createElement(wt,{user:e.user,socketManager:e.socketManager}))};return a.a.createElement(n.Fragment,null,a.a.createElement(zt,{exit:!e.status},a.a.createElement(qt,null,function(){switch(e.status){case H.K.CLASS_CANT_BE_STARTED:if(e.role===H.p.TYPE_PUBLISHER)return a.a.createElement("div",null,"Hey, you're early! Make your learners happy. Please start this class in ",Object(f.C)(r-600),".");break;case H.K.RECONNECT:return a.a.createElement("div",null,"Reconnecting you to class. Please wait...");case H.K.NOT_STARTED:if(!e.showSplashScreen&&e.connectionState==H.Pb.WAITING_FOR_EDUCATOR)return y&&_&&(10===w||T)&&!A?a.a.createElement(Qt,{animated:!0},a.a.createElement(Lt,{type:"educatorLive"})):a.a.createElement(Xt,{enterView:g},a.a.createElement(Kt,null,a.a.createElement(Zt,{show:!d,hide:d},a.a.createElement(ct,{liveAt:I.liveAt,showLateText:R})),a.a.createElement(Zt,{show:d},a.a.createElement(Lt,{type:"educatorLate"}))),D());break;case H.K.COMPLETED:if(e.role===H.p.TYPE_LEARNER)return a.a.createElement(Jt,{animated:!e.showSplashScreen,addDelay:!e.showSplashScreen},a.a.createElement(Lt,{type:"classEnded"}));break;case H.K.DATA_FAIL:return a.a.createElement("div",null,a.a.createElement("div",null,"Looks like something went wrong."),a.a.createElement($t,{onClick:x},"Try again"));case H.K.NO_CLASS:return a.a.createElement("div",null,a.a.createElement("div",null,"Oops! There is no class here."),a.a.createElement($t,{onClick:P},"Back to Home"));case H.K.INCORRECT_IMAGE_TYPE:return a.a.createElement("div",null,"Invalid file. Please upload a PNG, JPG, or PDF file.");case H.K.IMAGE_UPLOAD:return a.a.createElement("div",null,"Image upload failed, taking you back to the class. Please try again.");case H.K.CONNECTED_IN_DIFF_TAB:return a.a.createElement(Qt,{animated:!0},a.a.createElement(Lt,{type:"multipleTabs",showRefreshButton:!0}));case H.K.CONNECTION_STATE:if(e.connectionState===H.Pb.DISCONNECTED)return e.role===H.p.TYPE_LEARNER?a.a.createElement(Qt,{animated:!0},a.a.createElement(Lt,{type:"classDisconnected",showRefreshButton:!0})):a.a.createElement("div",null,"Reconnecting you to class. Please wait...");if(e.connectionState===H.Pb.CONNECTING&&!O&&!_)return a.a.createElement(Qt,{animated:!0},a.a.createElement(Gt,{states:H.cc.CONNECTING_CLASS.STATES,triggerTimes:H.cc.CONNECTING_CLASS.TRIGGER_TIMES}));if(e.connectionState===H.Pb.KICKED)return a.a.createElement("div",null,"You have been removed from the class");if(e.connectionState===H.Pb.WAITING_FOR_EDUCATOR)return a.a.createElement(Qt,{animated:!0},a.a.createElement(Lt,{type:"classDisconnected",showRefreshButton:!0}));break;case H.K.LOADING_SLIDES:if(!O&&!_)return a.a.createElement(Qt,{animated:!0},a.a.createElement(Gt,{states:H.cc.LOADING_SLIDES.STATES,triggerTimes:H.cc.LOADING_SLIDES.TRIGGER_TIMES}));break;case H.K.LEARNER_KICKED:if(e.role===H.p.TYPE_LEARNER)return a.a.createElement(Qt,{animated:!0},a.a.createElement(Lt,{type:"learnerKicked",showRefreshButton:!0}));break;case H.K.SCREEN_SHARED:return a.a.createElement(Qt,{fastAnimated:!0},a.a.createElement(Lt,{type:"screenShared",showStopSharingButton:!0,handleStopSharing:e.handleStopSharing}))}}())))})),ti=i("Ffbl"),ii=i("C7CA"),ni=S.d.div.withConfig({displayName:"ShapesPicker__Wrapper",componentId:"sc-1eylil4-0"})(["display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:absolute;bottom:",";left:",";transition:left 0.25s ease-in-out;"],P.c.SPACING_0B,(function(e){return e.isOpen?P.c.SPACING_4B:"-".concat(P.c.SPACING_14B)})),ai=S.d.div.withConfig({displayName:"ShapesPicker__ShortcutShapeContainer",componentId:"sc-1eylil4-1"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;height:32px;font-size:",";line-height:",";color:",";margin-top:",";"],P.d.EXTRA_SMALL,P.d.LINE_HEIGHT,(function(e){return e.theme.TEXT_TERTIARY}),P.c.SPACING_2B),oi=S.d.div.withConfig({displayName:"ShapesPicker__ShapeContainer",componentId:"sc-1eylil4-2"})(["position:relative;display:flex;justify-content:center;align-items:center;height:32px;width:32px;background:",";border:1px solid ",";box-sizing:border-box;border-radius:",";margin-right:",";cursor:pointer;"],(function(e){return e.theme.BG_MAIN}),(function(e){return e.isSelected&&!e.disabled?e.theme.TEXT_PRIMARY:e.theme.BORDER}),P.c.SPACING_2B,P.c.SPACING_1B),ri=a.a.memo((function(e){var t=e.onShapeChange,i=Object(C.e)((function(e){return e.getIn(["drawingBoardControls","drawingMode"])})),o=Object(C.e)((function(e){return e.getIn(["drawingBoardControls","isEducatorSlideViewActive"])})),r=Object(ii.a)()||o,s=o,l=i===H.v.RECTANGLE||i===H.v.CIRCLE||i===H.v.ARROW||i===H.v.LINE,c=function(e){s||e===i||t(e)},d=[{type:H.v.RECTANGLE,image:a.a.createElement(Ve.Cb,null),shortcut:"R"},{type:H.v.CIRCLE,image:a.a.createElement(Ve.s,null),shortcut:"O"},{type:H.v.ARROW,image:a.a.createElement(Ve.c,null),shortcut:"A"},{type:H.v.LINE,image:a.a.createElement(Ve.U,null),shortcut:"L"}];Object(n.useEffect)((function(){return document.addEventListener("keydown",p),function(){document.removeEventListener("keydown",p)}}),[r]);var p=function(e){if(!e.ctrlKey&&!e.metaKey&&!r)switch(e.key){case"r":case"R":c(d[0].type);break;case"o":case"O":c(d[1].type);break;case"a":case"A":c(d[2].type)}};return a.a.createElement(ni,{isOpen:l},d.map((function(e,t){return a.a.createElement(ai,{key:t},a.a.createElement(oi,{onClick:function(){return c(e.type)},isSelected:i===e.type,disabled:s},e.image,function(){if(s)return a.a.createElement(ee.e,null)}()),e.shortcut)})))}));ri.propTypes={},ri.defaultProps={};var si=ri,li=S.d.div.withConfig({displayName:"PenStrokes__Wrapper",componentId:"sc-1jer7db-0"})(["display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:absolute;bottom:",";left:",";transition:left 0.25s ease-in-out;"],P.c.SPACING_0B,(function(e){return e.isOpen?P.c.SPACING_4B:"-".concat(P.c.SPACING_14B)})),ci=S.d.div.withConfig({displayName:"PenStrokes__ShortcutStrokeContainer",componentId:"sc-1jer7db-1"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;height:32px;background:",";font-size:",";line-height:",";color:",";margin-top:",";"],(function(e){return e.theme.TRANSPARENT}),P.d.EXTRA_SMALL,P.d.LINE_HEIGHT,(function(e){return e.theme.TEXT_TERTIARY}),P.c.SPACING_2B),di=S.d.div.withConfig({displayName:"PenStrokes__StrokeContainer",componentId:"sc-1jer7db-2"})(["position:relative;display:flex;justify-content:center;align-items:center;height:32px;width:32px;background:",";border:1px solid ",";box-sizing:border-box;border-radius:",";margin-right:",";cursor:pointer;"],(function(e){return e.theme.BG_MAIN}),(function(e){return e.isSelected&&!e.disabled?e.theme.TEXT_PRIMARY:e.theme.BORDER}),P.c.SPACING_2B,P.c.SPACING_1B),pi=a.a.memo((function(e){var t=e.onPenStrokeChange,i=Object(C.e)((function(e){return e.getIn(["drawingBoardControls","drawingMode"])})),o=Object(C.e)((function(e){return e.getIn(["drawingBoardControls","penStrokeSize"])})),r=Object(C.e)((function(e){return e.getIn(["drawingBoardControls","isEducatorSlideViewActive"])})),s=Object(ii.a)()||r,l=r,c=i===H.v.MARKER,d=function(e){l||e===o||t(e)},p=[{size:H.wb.DEFAULT,image:a.a.createElement(Ve.qb,null),shortcut:"C"},{size:H.wb.MEDIUM,image:a.a.createElement(Ve.sb,null),shortcut:"X"},{size:H.wb.LARGE,image:a.a.createElement(Ve.rb,null),shortcut:"Z"}];Object(n.useEffect)((function(){return document.addEventListener("keydown",u),function(){document.removeEventListener("keydown",u)}}),[o,i,s]);var u=function(e){if(!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&c&&!s)switch(e.key){case"c":case"C":d(p[0].size);break;case"x":case"X":d(p[1].size);break;case"z":case"Z":d(p[2].size)}};return a.a.createElement(li,{isOpen:c},p.map((function(e,t){return a.a.createElement(ci,{key:t},a.a.createElement(di,{onClick:function(){return d(e.size)},isSelected:o===e.size,disabled:l},e.image,function(){if(l)return a.a.createElement(ee.e,null)}()),e.shortcut)})))}));pi.propTypes={},pi.defaultProps={};var ui=pi,hi=S.d.div.withConfig({displayName:"EraserStrokes__Wrapper",componentId:"sc-1a2knu6-0"})(["display:flex;flex-direction:column;justify-content:space-between;align-items:flex-start;position:absolute;bottom:",";left:",";transition:left 0.25s ease-in-out;"],P.c.SPACING_0B,(function(e){return e.isOpen?P.c.SPACING_4B:"-".concat(P.c.SPACING_14B)})),mi=S.d.div.withConfig({displayName:"EraserStrokes__ShortcutStrokeContainer",componentId:"sc-1a2knu6-1"})(["position:relative;display:flex;flex-direction:row;justify-content:center;align-items:center;height:32px;background:",";font-size:",";line-height:",";color:",";margin-top:",";"],(function(e){return e.theme.TRANSPARENT}),P.d.EXTRA_SMALL,P.d.LINE_HEIGHT,(function(e){return e.theme.TEXT_TERTIARY}),P.c.SPACING_2B),gi=S.d.div.withConfig({displayName:"EraserStrokes__StrokeContainer",componentId:"sc-1a2knu6-2"})(["display:flex;justify-content:center;align-items:center;cursor:pointer;height:32px;width:32px;background:",";border:1px solid ",";box-sizing:border-box;border-radius:",";margin-right:",";",""],(function(e){return e.theme.BG_MAIN}),(function(e){return e.isSelected&&!e.disabled?e.theme.TEXT_PRIMARY:e.theme.BORDER}),P.c.SPACING_2B,P.c.SPACING_1B,(function(e){if(e.isEraseAllButton)return Object(S.c)(["font-size:",";font-weight:600;color:",";line-height:120%;text-transform:uppercase;"],P.d.ULTRA_SMALL,(function(e){return e.theme.TEXT_PRIMARY}))})),fi=a.a.memo((function(e){var t=e.onEraserStrokeChange,i=e.onEraseAll,o=Object(C.e)((function(e){return e.getIn(["drawingBoardControls","drawingMode"])})),r=Object(C.e)((function(e){return e.getIn(["drawingBoardControls","eraserStrokeSize"])})),s=Object(C.e)((function(e){return e.getIn(["drawingBoardControls","isEducatorSlideViewActive"])})),l=Object(ii.a)()||s,c=s,d=o===H.v.ERASER,p=function(e){c||e===r||t(e)},u=[{label:H.u.ERASE_ALL,shortcut:" "},{size:H.J.DEFAULT,image:a.a.createElement(Ve.E,null),shortcut:"C"},{size:H.J.MEDIUM,image:a.a.createElement(Ve.G,null),shortcut:"X"},{size:H.J.LARGE,image:a.a.createElement(Ve.F,null),shortcut:"Z"}];Object(n.useEffect)((function(){return document.addEventListener("keydown",h),function(){document.removeEventListener("keydown",h)}}),[r,o,l,i]);var h=function(e){if(!e.ctrlKey&&!e.metaKey&&!l)switch(e.key){case"c":case"C":e.shiftKey?i():d&&p(u[1].size);break;case"x":case"x":d&&p(u[2].size);break;case"z":case"Z":d&&p(u[3].size)}};return a.a.createElement(hi,{isOpen:d},u.map((function(e,t){return a.a.createElement(mi,{key:t},a.a.createElement(gi,{onClick:function(){return(t=e).label===H.u.ERASE_ALL?i():p(t.size);var t},isSelected:r===e.size,isEraseAllButton:e.label,disabled:c},(n=e).label?a.a.createElement("span",null,n.label):n.image,function(){if(c)return a.a.createElement(ee.e,null)}()),e.shortcut);var n})))}));fi.propTypes={},fi.defaultProps={};var Ei=fi,bi=i("hwvQ");const Ci=a.a.memo(({onSendData:e,onChangeDrawingState:t,onReceiveCanvasWrapperData:i})=>{const o=Object(C.d)(),r=(Object(C.e)(e=>e.getIn(["drawingBoardControls","isEducatorSlideViewActive"])),Object(C.e)(e=>e.getIn(["canvas","activeSlide"]))),s=Object(n.useCallback)(i=>{o(Object(L.c)(i));let n=Object(f.s)(i);e(n);let a=new bi.a(n);t(a)},[]),l=Object(n.useCallback)(i=>{o(Object(L.e)(i)),j.f.sendData(j.c.WB_TOOL_SELECTION,i);let n=Object(f.D)(i);e(n);let a=new bi.a(n);t(a)},[]),c=Object(n.useCallback)(i=>{o(Object(L.i)(i));let n=Object(f.S)(i);e(n);let a=new bi.a(n);t(a)},[]),d=Object(n.useCallback)(i=>{o(Object(L.h)(i));let n=Object(f.J)(i);e(n);let a=new bi.a(n);t(a)},[]),p=Object(n.useCallback)(()=>{let t=Object(f.I)(r);e(t);let n=new bi.a(t);i(n)},[r]);return a.a.createElement(n.Fragment,null,a.a.createElement(ti.a,{onColorChange:s}),a.a.createElement(si,{onShapeChange:l}),a.a.createElement(ui,{onPenStrokeChange:c}),a.a.createElement(Ei,{onEraserStrokeChange:d,onEraseAll:p}))});Ci.propTypes={},Ci.defaultProps={};var vi=Ci,Si=S.d.div.withConfig({displayName:"SingleStat__SingelStatWrapper",componentId:"sc-1ravozg-0"})(["display:flex;width:180px;height:74px;background:",";border:1px solid ",";border-radius:",";justify-content:flex-start;padding:",";box-sizing:border-box;margin-right:",";"],(function(e){return e.theme.BG_MAIN}),(function(e){return e.theme.BORDER}),P.c.SPACING_2B,P.c.SPACING_3B,P.c.SPACING_4B),Ii=S.d.img.withConfig({displayName:"SingleStat__StatImg",componentId:"sc-1ravozg-1"})(["width:32px;height:32px;border-radius:8px;"]),yi=S.d.div.withConfig({displayName:"SingleStat__Details",componentId:"sc-1ravozg-2"})(["display:flex;flex-direction:column;margin-left:",";"],P.c.SPACING_3B),_i=S.d.div.withConfig({displayName:"SingleStat__UnitsContainer",componentId:"sc-1ravozg-3"})(["font-weight:",";font-size:",";line-height:",";display:flex;align-items:center;color:",";"],P.d.BOLD,P.d.EXTRA_LARGE,P.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_PRIMARY})),Oi=S.d.div.withConfig({displayName:"SingleStat__Stat",componentId:"sc-1ravozg-4"})(["font-size:",";line-height:",";color:",";"],P.d.SMALL,P.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_PRIMARY})),wi=function(e){var t=e.item;return a.a.createElement(Si,null,a.a.createElement(Ii,{src:t.get("image")}),a.a.createElement(yi,null,a.a.createElement(_i,null,t.get("data")),a.a.createElement(Oi,null,t.get("type"))))},Ti=a.a.memo(wi);wi.propTypes={stat:U.a.object.isRequired},wi.defaultProps={stat:{}};var Ai="https://quark.uacdn.net/emoji/grinning_face_with_smiling_eyes_cmp.gif",Pi="https://quark.uacdn.net/emoji/frowning_face_cmp.gif",xi=S.d.div.withConfig({displayName:"FeedbackType__FeedbackTypeWrapper",componentId:"sc-1f2ir29-0"})(["min-width:180px;height:64px;background:",";border:1px solid ",";box-sizing:border-box;border-radius:",";align-items:center;justify-content:center;display:flex;opacity:",";cursor:",";pointer-events:",";&:first-of-type{margin-right:",";}"],(function(e){return e.theme.BG_MAIN}),(function(e){return e.theme.BORDER}),P.c.SPACING_2B,(function(e){return e.addOpacity?"0.3":"initial"}),(function(e){return e.clickable?"pointer":"auto"}),(function(e){return e.clickable?"all":"none"}),P.c.SPACING_3B),Ri=S.d.img.withConfig({displayName:"FeedbackType__TypeImg",componentId:"sc-1f2ir29-1"})(["width:40px;height:40px;"]),Di=function(e){var t=e.type,i=e.onClickHandler,n=(e.clickable,e.addOpacity);return a.a.createElement(xi,{onClick:function(){i&&i(t)},clickable:!0,addOpacity:n},a.a.createElement(Ri,{src:t==H.O.FEEDBACK_TYPE_YES?Ai:Pi}),a.a.createElement(ee.i,{margin:"0 0 0 ".concat(P.c.SPACING_3B)},t))},Ni=a.a.memo(Di);Di.propTypes={type:U.a.string.isRequired,onClickHandler:U.a.func},Di.defaultProps={type:"",handleOnclick:function(){}};var ji=i("r/fz");const ki=S.d.div.withConfig({displayName:"ReportOption__OptionWrapper",componentId:"sc-1x48kvl-0"})(["display:flex;cursor:pointer;background:",";color:",";border:",";box-sizing:border-box;border-radius:",";padding:"," ",";margin:"," 0;align-items:center;font-size:",";width:",";transition:font-weight 0.1s ease-in;text-align:left;&:hover{font-weight:",";}"],e=>e.theme.BG_MAIN,({showSelectedBorder:e,theme:t})=>e?t.TEXT_PRIMARY:t.TEXT_TERTIARY,({showSelectedBorder:e,theme:t})=>"1px solid ".concat(e?t.TEXT_PRIMARY:t.BORDER),P.c.SPACING_2B,P.c.SPACING_3B,P.c.SPACING_4B,P.c.SPACING_1B,P.d.SMALL,({fullWidth:e})=>e?"100%":"49%",P.d.SEMIBOLD),Li=S.d.div.withConfig({displayName:"ReportOption__IconWrapper",componentId:"sc-1x48kvl-1"})(["display:flex;align-items:center;margin-right:",";"],P.c.SPACING_3B),Bi=a.a.memo(({option:e,onSelectOption:t,isReportCurtainOpened:i,fullWidth:o,theme:r,showTickIcon:s,selectedFeedbackType:l})=>{const c=Object(n.useState)(!1),d=m()(c,2),p=d[0],u=d[1];Object(n.useEffect)(()=>{u(!1)},[i]);return Object(n.useEffect)(()=>{l&&u(!1)},[l]),a.a.createElement(ki,{showSelectedBorder:p,onClick:()=>{u(!p),t(e)},fullWidth:o},(()=>{if(s)return a.a.createElement(Li,null,a.a.createElement(Ve.Tb,{fill:p?r.GREEN:r.BG_DARK}))})(),e.name)});var Mi=Object(S.f)(Bi),Gi=i("Dkz8"),Ui=Object(S.e)(["0%{transform:translateY(100vh);z-index:11;}100%{transform:translateY(0px);z-index:11;}"]),Hi=Object(S.e)(["0%{opacity:1;}100%{opacity:0;}"]),Vi=S.d.div.withConfig({displayName:"FeedbackTypeOptions__Wrapper",componentId:"sc-1kjtj7y-0"})(["display:flex;flex-direction:column;align-items:center;position:absolute;width:100%;transform:translateY(100vh);background:",";overflow:auto;height:100%;justify-content:center;",";"],(function(e){return e.theme.BG_MAIN}),(function(e){return e.enterCanvas?Object(S.c)(["animation:"," 0.4s ease-in-out;animation-fill-mode:forwards;animation-delay:0.3s;"],Ui):e.exitCanvas?Object(S.c)(["animation:"," 0.3s ease-in;animation-fill-mode:forwards;"],Hi):void 0})),Fi=(S.d.div.withConfig({displayName:"FeedbackTypeOptions__ReasonHeading",componentId:"sc-1kjtj7y-1"})(["display:flex;"]),S.d.div.withConfig({displayName:"FeedbackTypeOptions__RenderOptions",componentId:"sc-1kjtj7y-2"})(["display:flex;flex-wrap:wrap;justify-content:space-between;"])),Wi=S.d.div.withConfig({displayName:"FeedbackTypeOptions__ContentContainer",componentId:"sc-1kjtj7y-3"})(["display:flex;flex-direction:column;width:368px;"]),zi=S.d.div.withConfig({displayName:"FeedbackTypeOptions__TypeWrapper",componentId:"sc-1kjtj7y-4"})(["display:flex;margin-bottom:40px;@media (max-width:1024px){margin-bottom:20px;}"]),qi=S.d.div.withConfig({displayName:"FeedbackTypeOptions__HeadingWrapper",componentId:"sc-1kjtj7y-5"})(["display:flex;margin-bottom:16px;@media (max-width:1024px){margin-bottom:10px;}"]),Yi=Object(S.d)(ee.b).withConfig({displayName:"FeedbackTypeOptions__SubmitButton",componentId:"sc-1kjtj7y-6"})(["width:80px;height:40px;align-self:flex-end;margin-top:16px;"]),Xi=a.a.memo((function(e){var t=e.selectedFeedbackType,i=e.feedbackReasons,o=e.choicesArray,r=e.dispatch,s=e.onSelectReasons,l=e.onSubmitClick,c=e.onInputChange,d=e.suggestion,p=e.isFeedbackSubmitted,u=e.isEducator,h=e.onClickHandler,g=Object(n.useState)(!1),f=m()(g,2),E=f[0],b=f[1],v=Object(C.e)((function(e){return e.getIn(["app","isSuccessfulWatch"])})),S=function(e){s(e)};return a.a.createElement(Vi,{enterCanvas:t&&!p,exitCanvas:t&&p},a.a.createElement(zi,null,a.a.createElement(Ni,{type:H.O.FEEDBACK_TYPE_YES,onClickHandler:h,clickable:!0,addOpacity:t===H.O.FEEDBACK_TYPE_NO}),a.a.createElement(Ni,{type:H.O.FEEDBACK_TYPE_NO,onClickHandler:h,clickable:!0,addOpacity:t===H.O.FEEDBACK_TYPE_YES})),a.a.createElement(qi,null,function(){var e="";return e=t==H.O.FEEDBACK_TYPE_YES?u?H.O.FEEDBACK_TYPE_YES_HEADING_EDUCATOR:v?H.O.FEEDBACK_TYPE_YES_HEADING_AFTER_SUCCESSFUL_WATCH:H.O.FEEDBACK_TYPE_YES_HEADING_BEFORE_SUCCESSFUL_WATCH:u?H.O.FEEDBACK_TYPE_NO_HEADING_EDUCATOR:v?H.O.FEEDBACK_TYPE_NO_HEADING_AFTER_SUCCESSFUL_WATCH:H.O.FEEDBACK_TYPE_NO_HEADING_BEFORE_SUCCESSFUL_WATCH,a.a.createElement(ee.i,null,e)}()),a.a.createElement(Wi,null,a.a.createElement(Fi,null,t==H.O.FEEDBACK_TYPE_YES?o&&o.get(0).options.map((function(e,i){return a.a.createElement(Mi,{key:i,option:e,onSelectOption:S,fullWidth:!1,showTickIcon:!0,selectedFeedbackType:t})})):o&&o.get(1).options.map((function(e,i){return a.a.createElement(Mi,{key:i,option:e,onSelectOption:S,fullWidth:!1,showTickIcon:!0,selectedFeedbackType:t})}))),a.a.createElement(Gi.a,{placeHolderText:H.O.OTHER_REASONS_PLACEHOLDER,rows:3,handleOnChange:function(e){var t=e.target.value;"function"===typeof t.trimStart&&(t=t.trimStart()),c(t)},suggestion:d,multiline:!0,onFocusHandler:function(){r(Object(B.k)())},onBlurHandler:function(){r(Object(B.k)())}}),a.a.createElement(Yi,{variant:0==i.length&&!d||E?"disabled":"filled",onClick:function(){l(),b(!0)},isEducator:u},"Submit")))})),Ki=Xi;Xi.propTypes={},Xi.defaultProps={};var Zi=i("g60p");const Ji=S.d.div.withConfig({displayName:"NextLessonCard__ItemWrapper",componentId:"sc-1x0kpj4-0"})(["display:flex;flex-direction:column;cursor:pointer;background:",";"],({theme:e})=>e.BODY_BG),Qi=S.d.div.withConfig({displayName:"NextLessonCard__ItemDetails",componentId:"sc-1x0kpj4-1"})(["display:flex;box-sizing:border-box;margin-left:",";margin-top:",";"],P.c.SPACING_2B,P.c.SPACING_2B),$i=S.d.div.withConfig({displayName:"NextLessonCard__IconsWrapper",componentId:"sc-1x0kpj4-2"})(["display:flex;margin-right:",";"],P.c.SPACING_2B),en=S.d.div.withConfig({displayName:"NextLessonCard__ContentWrapper",componentId:"sc-1x0kpj4-3"})(["display:flex;flex-direction:column;margin-right:",";"],P.c.SPACING_1B),tn=S.d.div.withConfig({displayName:"NextLessonCard__UpcomingDate",componentId:"sc-1x0kpj4-4"})(["display:flex;flex-direction:column;justify-content:flex-start;align-items:center;margin-left:10px;"]),nn=Object(S.d)(ee.l).withConfig({displayName:"NextLessonCard__StyledH6",componentId:"sc-1x0kpj4-5"})(["line-height:",";margin-bottom:",";font-weight:",";color:",";font-size:10px;display:flex;"],P.d.LINE_HEIGHT,({removeBottomMargin:e})=>e?"0":"16px",P.d.REGULAR,({theme:e})=>e.TEXT_TERTIARY),an=Object(S.d)(ee.l).withConfig({displayName:"NextLessonCard__StyledHeading",componentId:"sc-1x0kpj4-6"})(["text-transform:uppercase;font-weight:",";line-height:",";color:",";margin:"," 0 0 ",";display:flex;"],P.d.BOLD,P.d.LINE_HEIGHT,({theme:e})=>e.TEXT_TERTIARY,P.c.SPACING_2B,P.c.SPACING_12B),on=Object(S.d)(ee.k).withConfig({displayName:"NextLessonCard__StyledName",componentId:"sc-1x0kpj4-7"})(["display:flex;text-align:initial;margin:0 "," "," 0;"],P.c.SPACING_2B,P.c.SPACING_1B),rn=S.d.div.withConfig({displayName:"NextLessonCard__TimeRemaining",componentId:"sc-1x0kpj4-8"})(["font-weight:",";font-size:",";line-height:",";color:",";text-transform:uppercase;margin-left:",";"],P.d.BOLD,P.d.EXTRA_SMALL,P.d.LINE_HEIGHT,({theme:e})=>e.TEXT_PRIMARY,P.c.SPACING_1B),sn=S.d.div.withConfig({displayName:"NextLessonCard__StartingIn",componentId:"sc-1x0kpj4-9"})(["font-weight:",";font-size:",";line-height:",";color:",";text-transform:uppercase;display:flex;opacity:",";transition:opacity 0.2s ease-in;transition-delay:0.2s;"],P.d.BOLD,P.d.EXTRA_SMALL,P.d.LINE_HEIGHT,({theme:e})=>e.TEXT_TERTIARY,({show:e})=>e?"1":"0"),ln=S.d.div.withConfig({displayName:"NextLessonCard__CloseIconWrapper",componentId:"sc-1x0kpj4-10"})(["position:absolute;top:",";right:",";padding:",";"],P.c.SPACING_1B,P.c.SPACING_2B,P.c.SPACING_1B),cn=a.a.memo(({showDivider:e,item:t,theme:i,hidePopover:o,handleClose:r,exitAutoplay:s,popoverOpen:l})=>{const c=Object(C.e)(e=>e.getIn(["app","hasReplayEnded"])),d=Object(Zi.a)(6,0),p=Object(n.useRef)(null);Object(n.useEffect)(()=>{t&&t.type&&(p.current="LiveClass"===t.type?2:1)},[]),Object(n.useEffect)(()=>{1==d&&c&&!s&&(j.f.sendData(j.c.NEXT_CLASS_LESSON,"SELECTED"),m(null,!0))},[d,c,s]);const u=Object(n.useCallback)(e=>{e&&(e.preventDefault(),e.stopPropagation()),r&&(j.f.sendData(j.c.NEXT_CLASS,{src:"feedback",[j.e.Measure1]:2,[j.e.Measure2]:p.current}),r())},[r]),h=()=>a.a.createElement(tn,null,a.a.createElement(ee.l,{textTransform:"uppercase"},t.data.getLiveAtMonth()),a.a.createElement(ee.i,{fontWeight:P.d.BOLD},t.data.getLiveAtDate())),m=(e,i=!1)=>{"LiveClass"===t.type?0===t.data.state?(window.open(t.data.permalink.split(/[?]/)[0],"_blank"),j.f.sendData(j.c.NEXT_CLASS,{src:c?"feedback":"ctrl",[j.e.Measure1]:i?3:1,[j.e.Measure2]:p.current})):(j.f.sendData(j.c.NEXT_CLASS,{src:c?"feedback":"ctrl",[j.e.Measure1]:i?3:1,[j.e.Measure2]:p.current}),he.b.dispatchEvent(he.a.NEXT_LESSON_CLICKED,{nextLesson:{uid:t.data.uid,slug:t.data.slug}})):(window.open(t.data.permalink,"_blank"),i&&he.b.dispatchEvent(he.a.CLOSE_IFRAME)),o&&!i&&o()};return a.a.createElement(Ji,{onClick:m},a.a.createElement(an,null,c?a.a.createElement(sn,{show:!l},"Starting in ",a.a.createElement(rn,null,"".concat(d," secs...")),a.a.createElement(ln,{onClick:u},a.a.createElement(Ve.Hb,null))):"LiveClass"===t.type?H.pb.NEXT_CLASS:H.pb.NEXT_QUIZ),a.a.createElement(Qi,null,a.a.createElement($i,null,"LiveClass"===t.type?10===t.data.state?a.a.createElement(Ve.N,{fill:i.RED}):20===t.data.state?a.a.createElement(Ve.N,null):h():"upcoming"===t.getQuizStatus()?h():"completed"===t.getQuizStatus()?a.a.createElement(Ve.Bb,null):void 0),a.a.createElement(en,null,a.a.createElement(on,null,t.data.getName()),a.a.createElement(nn,{removeBottomMargin:e},t.getInfoString()))),(()=>{if(e)return a.a.createElement(ee.f,{margin:"12px 16px 4px 16px",width:"initial"})})())});cn.propTypes={showDivider:U.a.bool.isRequired,item:U.a.object.isRequired,hidePopover:U.a.func.isRequired},cn.defaultProps={showDivider:!1,item:{},hidePopover:()=>{}};var dn=Object(S.f)(cn),pn=Object(S.e)(["0%{right:-300px;opacity:0;}100%{right:16px;opacity:1;}"]),un=Object(S.e)(["0%{right:16px;opacity:1;}100%{right:-300px;opacity:0;}"]),hn=S.d.div.withConfig({displayName:"AutoplayNextLesson__Wrapper",componentId:"sc-1mob192-0"})(["position:absolute;bottom:16px;right:-300px;opacity:0;width:260px;border:1px solid ",";box-sizing:border-box;border-radius:8px;overflow:hidden;",";"],(function(e){return e.theme.BG_MAIN}),(function(e){return e.enter?Object(S.c)(["animation:"," 0.2s ease-in-out;animation-fill-mode:forwards;animation-delay:1s;"],pn):e.exit?Object(S.c)(["animation:"," 0.2s ease-in-out;animation-fill-mode:backwards;"],un):void 0})),mn=a.a.memo((function(e){var t=e.enter,i=e.item,o=Object(n.useState)(!1),r=m()(o,2),s=r[0],l=r[1];return a.a.createElement(hn,{enter:t&&!s,exit:s},a.a.createElement(dn,{item:i,showDivider:!1,handleClose:function(){l(!0)},exitAutoplay:s}))})),gn={feedbackSubmitted:i("Ogmr")},fn=Object(S.e)(["0%{transform:scale(0);}100%{transform:scale(1);}"]),En=S.d.div.withConfig({displayName:"FeedbackSubmitted__FeedbackSubmittedContainer",componentId:"sc-1wosbzn-0"})(["display:flex;flex-direction:column;position:absolute;justify-content:center;align-items:center;width:100%;height:100%;transform:scale(0);background:",";",";"],(function(e){return e.theme.BG_MAIN}),(function(e){if(e.enterCanvas)return Object(S.c)(["animation:"," 0.4s ease-in-out;animation-fill-mode:forwards;animation-delay:0.5s;"],fn)})),bn=S.d.img.withConfig({displayName:"FeedbackSubmitted__FeedbackSubmittedImage",componentId:"sc-1wosbzn-1"})(["margin-bottom:",";"],P.c.SPACING_4B),Cn=function(e){e.selectedFeedbackType;var t=e.isFeedbackSubmitted,i=e.isEducator,o=Object(C.e)((function(e){return e.getIn(["app","programmeDetails"])})),r=Object(C.e)((function(e){return e.getIn(["feedback","isFeedbackShownOnBackClick"])})),s=Object(C.e)((function(e){return e.getIn(["app","isReplay"])}));return Object(n.useEffect)((function(){t&&r&&setTimeout((function(){he.b.dispatchEvent(he.a.CLOSE_IFRAME)}),1e3)}),[t,r]),a.a.createElement(En,{enterCanvas:t},a.a.createElement(bn,{src:gn.feedbackSubmitted}),a.a.createElement(ee.i,{margin:"0 0 ".concat(P.c.SPACING_6," 0")},H.O.FEEDBACK_SUBMITTED),function(){if(!i)return a.a.createElement(ee.o,{fontSize:P.d.MEDIUM},H.O.FEEDBACK_SUBMITTED_TEXT)}(),function(){if(i||!s);else{var e=o&&o.nextItems&&o.nextItemsLength>0&&o.nextItems.get(0);if(e){var n=e.type,l=e.data;if(("LiveClass"==n&&(10===l.state||20===l.state)||"Quiz"==n&&e.getQuizStatus()&&"upcoming"!==e.getQuizStatus())&&t&&!r)return a.a.createElement(mn,{enter:t,item:e})}}}())},vn=a.a.memo(Cn);Cn.propTypes={isEducator:U.a.bool.isRequired,selectedFeedbackType:U.a.string.isRequired,isFeedbackSubmitted:U.a.bool.isRequired},Cn.defaultProps={isEducator:!1,selectedFeedbackType:"Yes",isFeedbackSubmitted:!1};var Sn=i("wEcn");const In={doubts:i("WvYd"),statsMessages:i("9dHv"),statsPoll:i("lD0E")},yn=[In.statsMessages,In.doubts,In.statsPoll],_n=Object(S.e)(["0%{transform:translateY(100vh);}100%{transform:translateY(0);}"]),On=Object(S.e)(["0%{transform:translateY(0);}100%{transform:translateY(-100vh);z-index:10;}"]),wn=S.d.div.withConfig({displayName:"PostClassFeedback__PostClassFeedbackWrapper",componentId:"r8jlcq-0"})(["display:flex;width:100%;height:100%;position:absolute;flex-direction:column;justify-content:center;transform:translateY(100vh);box-sizing:border-box;background:",";@media (max-width:1024px){padding:",";}",";"],e=>e.theme.BG_MAIN,({removePadding:e})=>e?"unset":"32px 0",e=>{if(e.enter)return Object(S.c)(["animation:"," 0.2s ease-in-out;animation-fill-mode:forwards;animation-delay:",";"],_n,({addDelay:e})=>e?"2s":"1s")}),Tn=S.d.div.withConfig({displayName:"PostClassFeedback__MainContent",componentId:"r8jlcq-1"})(["display:flex;flex-direction:column;justify-content:center;height:100%;overflow:auto;",";"],e=>e.moveUp?Object(S.c)(["animation:"," 0.4s ease-in-out;animation-fill-mode:forwards;"],On):e.exit?Object(S.c)(["display:none;"]):void 0),An=S.d.div.withConfig({displayName:"PostClassFeedback__StatsContainer",componentId:"r8jlcq-2"})(["display:flex;justify-content:center;"]),Pn=S.d.div.withConfig({displayName:"PostClassFeedback__TextContainer",componentId:"r8jlcq-3"})(["display:flex;flex-direction:column;width:360px;"]),xn=S.d.div.withConfig({displayName:"PostClassFeedback__TextWrapper",componentId:"r8jlcq-4"})(["display:flex;margin-top:88px;@media (max-width:1024px){margin-top:44px;}justify-content:center;"]),Rn=S.d.div.withConfig({displayName:"PostClassFeedback__FeedbackTypeWrapper",componentId:"r8jlcq-5"})(["display:flex;margin-top:24px;justify-content:center;"]);var Dn=({enter:e,socketManager:t})=>{const i=Object(n.useState)(""),o=m()(i,2),r=o[0],s=o[1],l=Object(n.useState)(""),c=m()(l,2),d=c[0],p=c[1],u=Object(n.useState)(!1),h=m()(u,2),g=h[0],f=h[1],E=Object(n.useState)([]),b=m()(E,2),v=b[0],S=b[1],I=Object(C.d)(),y=Object(C.e)(e=>e.getIn(["feedback","feedback"])),_=Object(C.e)(e=>e.getIn(["app","accessToken"])),O=Object(C.e)(e=>e.getIn(["app","apiHost"])),w=Object(C.e)(e=>e.getIn(["app","classId"])),T=Object(C.e)(e=>e.getIn(["feedback","feedbackOptions"])),A=Object(C.e)(e=>e.getIn(["feedback","educatorFeedbackOptions"])),x=Object(C.e)(e=>e.getIn(["app","isEducator"])),R=Object(C.e)(e=>e.getIn(["pdfEditor","isPdfEditor"])),D=Object(C.e)(e=>e.getIn(["videoPlayControls","isClassFeedbackSubmitted"])),N=Object(C.e)(e=>e.getIn(["app","classState"])),j=Object(C.e)(e=>e.getIn(["app","socketSubscribed"])),k=Object(C.e)(e=>e.getIn(["app","hasReplayEnded"])),L=Object(C.e)(e=>e.getIn(["app","isReplay"])),M=Object(C.e)(e=>e.getIn(["feedback","isFeedbackShownOnBackClick"])),G=Object(C.e)(e=>e.getIn(["app","isSuccessfulWatch"])),U=x?A:T,V=U.choicesArr,F=U.uid,W=U.lastSubmittedAt,z=(20==N||L)&&W||r&&g;Object(n.useEffect)(()=>{j&&t&&(k||20==N||M)&&t.getClassStats()},[N,t,j,k,M]),Object(n.useEffect)(()=>{I(x?Object(ji.a)(O,_,w):Object(ji.b)(O,_,w,L,G))},[]);const q=e=>{d&&p(""),v&&v.length>0&&S([]),s(e)},Y=e=>{let t=[...v];t.includes(e)?t=t.filter(t=>t.id!=e.id):t.push(e),S(t)},X=e=>{p(e)},K=()=>{if(V&&V.size>0){const e={choice_id:r==H.O.FEEDBACK_TYPE_YES?V.get(0).id:V.get(1).id,object_id:"".concat(w),others:"".concat(d.trim()),options:J()};(v.length>0||d)&&I(Object(B.B)(e,O,F,_,!0))}},Z=()=>{let e=[];return v&&v.length>0&&(e=v.map(e=>e.name)),d.length>0&&(e=e.length>0?e.toString()+","+d:d),e=e||H.Kb.DEFAULTS.NA,e};Object(n.useEffect)(()=>{if(D){const e={classFeedback:r===H.O.FEEDBACK_TYPE_YES?"Liked":"Disliked",classFeedbackDetails:Z(),classFeedbackType:G?H.Kb.FEEDBACK_TYPE.HIGH_WATCHTIME:H.Kb.FEEDBACK_TYPE.LOW_WATCHTIME,classFeedbackSource:M?H.Kb.FEEDBACK_SOURCE.CLASS_DROP:H.Kb.FEEDBACK_SOURCE.CLASS_END};f(!0),R&&x||Sn.a.shared.sendEvents(H.Kb.FEEDBACK_SUBMITTED,e)}},[D]);const J=()=>v.map(e=>({id:e.id,value:0}));return a.a.createElement(wn,{enter:e,addDelay:20==N},(()=>{if(!z)return a.a.createElement(Tn,{moveUp:r&&!g,exit:r&&g},a.a.createElement(ee.i,{margin:"0 0 ".concat(P.c.SPACING_6B," 0")},"Class stats"),a.a.createElement(An,null,(()=>{if(y&&y.statsData.length>0)return y.statsData.all().map((e,t)=>{const i=e.set("image",yn[t]);return a.a.createElement(Ti,{item:i,key:t})})})()),a.a.createElement(xn,null,a.a.createElement(Pn,null,a.a.createElement(ee.i,{margin:"0 0 ".concat(P.c.SPACING_2B," 0")},x?H.O.FEEDBACK_HEADING_EDUCATOR:L?H.O.FEEDBACK_HEADING_REPLAY:H.O.FEEDBACK_HEADING),a.a.createElement(ee.o,{fontSize:P.d.MEDIUM},x?H.O.FEEDBACK_BODY_EDUCATOR:H.O.FEEDBACK_BODY),a.a.createElement(Rn,null,a.a.createElement(Ni,{type:H.O.FEEDBACK_TYPE_YES,onClickHandler:q,clickable:!0}),a.a.createElement(Ni,{type:H.O.FEEDBACK_TYPE_NO,onClickHandler:q,clickable:!0})))))})(),(()=>{if(!z)return a.a.createElement(Ki,{selectedFeedbackType:r,isFeedbackSubmitted:g,choicesArray:V,dispatch:I,classId:w,accessToken:_,apiHost:O,onSelectReasons:Y,feedbackReasons:v,onSubmitClick:K,onInputChange:X,suggestion:d,isEducator:x,onClickHandler:q})})(),a.a.createElement(vn,{selectedFeedbackType:r,lastSubmittedAt:W,isFeedbackSubmitted:z,isEducator:x}))};function Nn(){var e=w()(["\n    .usernameComponent{\n        font-size: 14px;\n        line-height: 150%;\n        color: ",";\n        font-family: UN_REGULAR;\n    }\n\n    .usernameDarkComponent {\n        font-size: 14px;\n        line-height: 16px;\n        color: #ffffff;\n        text-shadow: 0px 1px 6px rgba(0, 0, 0, 0.16);\n    }\n\n\n\n    @media only screen and (max-width: 850px) {\n        .usernameComponent {\n            font-size: 12px;\n            line-height: 14px;\n        }\n        \n        \n        .usernameDarkComponent{\n            font-size: 12px;\n            line-height: 14px;\n        }\n    }\n"]);return Nn=function(){return e},e}var jn=Object(S.b)(Nn(),(function(e){return e.theme.TEXT_TERTIARY})),kn=function(e){var t=e.author;return a.a.createElement(n.Fragment,null,a.a.createElement("div",{className:"dark"==e.background?"usernameDarkComponent":"usernameComponent"},t.fullName),a.a.createElement(jn,null))},Ln=i("Z3vd"),Bn=i("H2TA"),Mn=i("+uQC"),Gn=Object(Bn.a)((function(){return{root:{width:"40px",height:"40px",borderRadius:"50%",minWidth:"unset",padding:"".concat(P.c.SPACING_2B," ").concat(P.c.SPACING_1B),opacity:function(e){return e.showNobackground?"0.2":"unset"},"&:hover":{background:function(e){var t=e.showNobackground,i=e.theme;return t?"unset":"".concat(i.BG_LIGHT)}},zIndex:function(e){return e.zIndex}}}}))(Ln.a),Un=function(e){var t=e.title,i=e.children,n=e.handleOnclick,o=e.showNobackground,r=e.zIndex,s=e.theme,l=e.anchorSide;return a.a.createElement(Mn.a,{title:t,round:!0,anchorSide:l},a.a.createElement(Gn,{onClick:function(e){n(e)},showNobackground:o,zIndex:r,theme:s},i))},Hn=Object(S.f)(Un);Un.propTypes={children:U.a.node.isRequired},Un.defaultProps={children:null,zIndex:"initial",anchorSide:"default"};Object(Bn.a)((function(e){return{root:{width:"40px",height:"40px",borderRadius:"50%",marginRight:"".concat(P.c.SPACING_2B),minWidth:"unset","&:hover":{backgroundColor:function(e){var t=e.theme;return"".concat(t.BG_LIGHT)}}}}}))(Ln.a);var Vn=function(e){var t=e.handleClick,i=e.theme,n=function(){t()};return a.a.createElement(Hn,{title:"Back",handleOnclick:n,onClick:n,theme:i},a.a.createElement(Ve.d,null))},Fn=Object(S.f)(Vn);Vn.propTypes={onClick:U.a.func.isRequired,theme:U.a.object.isRequired},Vn.defaultProps={onClick:function(){},object:{}};var Wn=S.d.div.withConfig({displayName:"LessonDetailsCard__CardWrapper",componentId:"sc-7bxvw7-0"})(["width:100%;display:flex;justify-content:space-between;height:100%;opacity:",";pointer-events:",";transition:opacity 0.3s ease-in;"],(function(e){var t=e.isHidden,i=e.fade;return t?0:i?.2:1}),(function(e){return e.isHidden?"none":"initial"})),zn=S.d.div.withConfig({displayName:"LessonDetailsCard__DetailsWrapper",componentId:"sc-7bxvw7-1"})(["display:flex;align-items:center;flex:1;min-width:0;margin-right:",";overflow:hidden;"],P.c.SPACING_2B),qn=Object(S.d)(ee.j).withConfig({displayName:"LessonDetailsCard__LessonDuration",componentId:"sc-7bxvw7-2"})(["color:",";font-weight:",";width:65px;text-align:left;"],(function(e){return e.theme.TEXT_TERTIARY}),P.d.REGULAR),Yn=(S.d.img.withConfig({displayName:"LessonDetailsCard__BackIcon",componentId:"sc-7bxvw7-3"})([""]),S.d.div.withConfig({displayName:"LessonDetailsCard__LessonName",componentId:"sc-7bxvw7-4"})(["color:",";font-size:",";line-height:",";font-weight:",";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;flex-shrink:0;max-width:560px;"],(function(e){return e.theme.TEXT_PRIMARY}),P.d.LARGE,P.d.LINE_HEIGHT_MAX,P.d.SEMIBOLD)),Xn=S.d.div.withConfig({displayName:"LessonDetailsCard__CourseName",componentId:"sc-7bxvw7-5"})(["color:",";font-size:",";line-height:",";font-family:UN_REGULAR;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;min-width:0;"],(function(e){return e.theme.TEXT_TERTIARY}),P.d.MEDIUM,P.d.LINE_HEIGHT_MAX),Kn=S.d.div.withConfig({displayName:"LessonDetailsCard__Bullet",componentId:"sc-7bxvw7-6"})(["color:",";margin:",";"],(function(e){return e.theme.TEXT_TERTIARY}),P.c.SPACING_2B),Zn=S.d.div.withConfig({displayName:"LessonDetailsCard__EducatorWrapper",componentId:"sc-7bxvw7-7"})(["display:flex;align-items:center;"]),Jn=S.d.div.withConfig({displayName:"LessonDetailsCard__ReplayData",componentId:"sc-7bxvw7-8"})(["display:flex;align-items:center;"]),Qn=function(e){var t=e.lessonData,i=e.isHidden,n=e.fade,o=Object(C.d)(),r=Object(C.e)((function(e){return e.getIn(["app","isSpecial"])})),s=Object(C.e)((function(e){return e.getIn(["app","isReplay"])}));return a.a.createElement(Wn,{isHidden:i,fade:n},a.a.createElement(zn,null,a.a.createElement(Fn,{handleClick:function(){o(Object(B.e)(!0))}}),a.a.createElement(Yn,null,t.name),function(){if(!r)return a.a.createElement(Kn,null,"\u2022")}(),function(){if(!r)return a.a.createElement(Xn,null,"L".concat(t.rank," of ").concat(t.courseTitle))}(),function(){if(s)return a.a.createElement(Jn,null,a.a.createElement(Kn,null,"\u2022"),a.a.createElement(qn,null,Object(f.L)(t.lessonDuration)))}()),a.a.createElement(Zn,null,a.a.createElement($.a,{avatar:t.author.avatar,name:t.author.fullName}),a.a.createElement(kn,{author:t.author,background:"light"})))},$n=a.a.memo(Qn);Qn.propTypes={lessonData:U.a.object.isRequired,isHidden:U.a.bool.isRequired,isSpecial:U.a.bool.isRequired,fade:U.a.bool.isRequired},Qn.defaultProps={lessonData:{},isHidden:!1,isSpecial:!1,fade:!1};const ea=S.d.div.withConfig({displayName:"Rewind__Wrapper",componentId:"sc-1nohe00-0"})(["opacity:",";transition:opacity 0.1s ease-in;"],({hide:e})=>e?"0.1":"1"),ta=({moveAheadOrBack:e,disable:t})=>{const i=Object(C.e)(e=>e.getIn(["videoPlayControls","isForwardShortCutUsed"]));return a.a.createElement(ea,{hide:i},a.a.createElement(Hn,{title:H.ec.REWIND,handleOnclick:()=>{t||e(!1)},showNobackground:t},a.a.createElement(Ve.Db,null)))};var ia=a.a.memo(ta);ta.propTypes={moveAheadOrBack:U.a.func.isRequired},ta.defaultProps={moveAheadOrBack:()=>{}};const na=S.d.div.withConfig({displayName:"Forward__Wrapper",componentId:"sc-1qixr37-0"})(["transition:opacity 0.1s ease-in;opacity:",";"],({hide:e})=>e?"0.1":"1"),aa=({moveAheadOrBack:e,isReplay:t,isLiveDVR:i})=>{const n=Object(C.e)(e=>e.getIn(["videoPlayControls","isRewindShortCutUsed"]));return a.a.createElement(na,{hide:n},a.a.createElement(Hn,{title:H.ec.FORWARD,handleOnclick:()=>{(i||t)&&e(!0)},showNobackground:!t&&!i},a.a.createElement(Ve.K,null)))};var oa=a.a.memo(aa);aa.propTypes={moveAheadOrBack:U.a.func.isRequired,isReplay:U.a.bool.isRequired,isLiveDVR:U.a.bool.isRequired,isRewindShortCutUsed:U.a.bool.isRequired},aa.defaultProps={isReplay:!1,isLiveDVR:!1,isRewindShortCutUsed:!1};const ra=S.d.div.withConfig({displayName:"PlayPause__PlayPauseWrapper",componentId:"sc-6t9k4j-0"})(["display:flex;transition:opacity 0.1s ease-in;opacity:",";"],({hide:e})=>e?"0.1":"1"),sa=({isReplay:e,isLiveDVR:t,disable:i})=>{const n=Object(C.d)(),o=Object(C.e)(e=>e.getIn(["videoPlayControls","isLivePaused"])),r=Object(C.e)(e=>e.getIn(["videoPlayControls","isVideoPaused"])),s=Object(C.e)(e=>e.getIn(["videoPlayControls","isRewindShortCutUsed"])),l=Object(C.e)(e=>e.getIn(["videoPlayControls","isForwardShortCutUsed"]));return a.a.createElement(ra,{hide:s||l},a.a.createElement(Hn,{title:o||r?H.ec.PLAY:H.ec.PAUSE,handleOnclick:a=>{i||n(e||t?Object(B.p)(!r):Object(B.i)(!o))},showNobackground:i},(t||e?r:o)?a.a.createElement(Ve.tb,null):a.a.createElement(Ve.ob,null)))};var la=sa;sa.propTypes={},sa.defaultProps={};var ca=i("lwsE"),da=i.n(ca),pa=i("W8MJ"),ua=i.n(pa),ha=i("PJYZ"),ma=i.n(ha),ga=i("7W2i"),fa=i.n(ga),Ea=i("a1gu"),ba=i.n(Ea),Ca=i("Nsbk"),va=i.n(Ca),Sa=i("TSYQ"),Ia=i.n(Sa);function ya(){var e=w()(["\n\t.ProgressBar-intent {\n\t\tposition: relative;\n\t\tdisplay: none;\n\t}\n\n\t.ProgressBar-intentTime {\n\t\tposition: absolute;\n\t\tright: 0px;\n\t\tbottom: 15px;\n\t\twidth: 50px;\n\t\tborder-radius: 4px;\n\t\tborder: 1px solid #fff;\n\t\tbackground-color: ",";\n\t\tcolor: ",";\n\t\tvisibility: hidden;\n\t}\n\n\t.ProgressBar.isEnabled:hover .ProgressBar-intentTime,\n\t.ProgressBar.isSeekable:hover .ProgressBar-intentTime {\n\t\tvisibility: visible;\n\t}\n\n\t.ProgressBar.isEnabled:hover .ProgressBar-intent,\n\t.ProgressBar.isSeekable:hover .ProgressBar-intent {\n\t\tdisplay: block;\n\t}\n\n\t@keyframes plyr-progress {\n\t\tto {\n\t\t\tbackground-position: 25px 0;\n\t\t}\n\t}\n\n\t.progress-loading {\n\t\twebkit-animation: plyr-progress 1s linear infinite;\n\t\tmoz-animation: plyr-progress 1s linear infinite;\n\t\tms-animation: plyr-progress 1s linear infinite;\n\t\to-animation: plyr-progress 1s linear infinite;\n\t\tanimation: plyr-progress 1s linear infinite;\n\t\tbackground-size: 25px 25px;\n\t\tbackground-repeat: repeat-x;\n\t\tbackground-image: linear-gradient(\n\t\t\t-45deg,\n\t\t\trgba(0, 0, 0, 0.15) 25%,\n\t\t\ttransparent 0,\n\t\t\ttransparent 50%,\n\t\t\trgba(0, 0, 0, 0.15) 0,\n\t\t\trgba(0, 0, 0, 0.15) 75%,\n\t\t\ttransparent 0,\n\t\t\ttransparent\n\t\t);\n\t\tcolor: transparent;\n\t\theight: 4px;\n\t\ttop: 0;\n\t}\n\n\t.ProgressBar {\n\t\tflex: 1;\n\t\tposition: relative;\n\t\tborder-radius: 4px;\n\t\tdisplay: flex;\n\t\tbackground: ",";\n\t}\n\n\t.ProgressBar-elapsed,\n\t.ProgressBar-value {\n\t\tbackground: #878c88;\n\t\tborder-radius: 4px;\n\t}\n\n\t.ProgressBar-seek {\n\t\tposition: absolute;\n\t\tcursor: pointer;\n\t}\n\n\t.hiddenOpacity {\n\t\topacity: 0 !important;\n\t\tdisplay: none;\n\t}\n\n\t.ProgressBar-opacity-handle {\n\t\tposition: absolute;\n\t\twidth: 20px;\n\t\theight: 20px;\n\t\tbackground: ",";\n\t\tborder-radius: 100%;\n\t}\n\n\t.ProgressBar-opacity-handle {\n\t\ttop: -2px;\n\t\tmargin: -6px 0 0 -12px;\n\t}\n\n\t.ProgressBar-handle {\n\t\tposition: absolute;\n\t\twidth: 12px;\n\t\theight: 12px;\n\t\tbackground: ",";\n\t\tborder-radius: 100%;\n\t\t/* transform: scale(0);\n\t\ttransition: transform 0.2s;  */\n\t}\n\n\t.ProgressBar.isSeekable:hover .ProgressBar-handle,\n\t.ProgressBar.isSeekable:hover .VolumeSlider-handle,\n\t.ProgressBar.isEnabled:hover .ProgressBar-handle,\n\t.ProgressBar.isEnabled:hover .VolumeSlider-handle,\n\t.VolumeSlider.isSeekable:hover .ProgressBar-handle,\n\t.VolumeSlider.isSeekable:hover .VolumeSlider-handle,\n\t.VolumeSlider.isEnabled:hover .ProgressBar-handle,\n\t.VolumeSlider.isEnabled:hover .VolumeSlider-handle {\n\t\ttransform: scale(1);\n\t}\n\n\t.ProgressBar.isSeekable:hover .ProgressBar-intent,\n\t.ProgressBar.isSeekable:hover .VolumeSlider-intent,\n\t.ProgressBar.isEnabled:hover .ProgressBar-intent,\n\t.ProgressBar.isEnabled:hover .VolumeSlider-intent,\n\t.VolumeSlider.isSeekable:hover .ProgressBar-intent,\n\t.VolumeSlider.isSeekable:hover .VolumeSlider-intent,\n\t.VolumeSlider.isEnabled:hover .ProgressBar-intent,\n\t.VolumeSlider.isEnabled:hover .VolumeSlider-intent {\n\t\tposition: absolute;\n\t\tbackground: rgba(0, 0, 0, 0.05);\n\t}\n\n\t.ProgressBar.isSeekable .ProgressBar-elapsed,\n\t.ProgressBar.isSeekable .VolumeSlider-value,\n\t.ProgressBar.isEnabled .ProgressBar-elapsed,\n\t.ProgressBar.isEnabled .VolumeSlider-value,\n\t.VolumeSlider.isSeekable .ProgressBar-elapsed,\n\t.VolumeSlider.isSeekable .VolumeSlider-value,\n\t.VolumeSlider.isEnabled .ProgressBar-elapsed,\n\t.VolumeSlider.isEnabled .VolumeSlider-value {\n\t\tbackground: ",";\n\t}\n\n\t.ProgressBar {\n\t\theight: 4px;\n\t\tmargin: 10px 16px 10px 0;\n\t}\n\n\t.ProgressBar-elapsed {\n\t\theight: 100%;\n\t}\n\n\t.progressControls {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-left: 32px;\n\t\tmargin-right: 32px;\n\t}\n\n\t.ProgressBar-seek {\n\t\ttop: -8px;\n\t\tright: 0;\n\t\tbottom: -8px;\n\t\tleft: 0;\n\t}\n\n\t.ProgressBar-handle {\n\t\ttop: 2px;\n\t\tmargin: -6px 0 0 -8px;\n\t}\n\n\t.ProgressBar.isSeekable:hover .ProgressBar-handle {\n\t\ttransform: scale(1);\n\t}\n\n\t.ProgressBar.isSeekable:hover .ProgressBar-intent {\n\t\ttop: 0;\n\t\tleft: 0;\n\t\theight: 100%;\n\t}\n\n\t.ProgressBar.isLoading {\n\t\topacity: 0.5;\n\t\tbackground: #ccc;\n\t\tanimation: barLoading 2s infinite;\n\t}\n\n\t.seekHover {\n\t\tposition: absolute;\n\t\tbottom: 50px;\n\t\tz-index: 3;\n\t\ttransform: translateX(-50%);\n\t}\n\n\t.seekHoverCanvasWrapperContainer {\n\t\twidth: 160px;\n\t\tborder-radius: 2px;\n\t\theight: 90px;\n\t\tbackground: ",";\n\t\toverflow: hidden;\n\t\tbox-shadow: 0px 1px 4px rgba(0, 0, 0, 0.25);\n\t}\n\n\t.seekHoverTime {\n\t\tposition: absolute;\n\t\tbottom: -24px;\n\t\tleft: 50%;\n\t\ttransform: translateX(-50%);\n\t\tborder-radius: 2px;\n\t\twhite-space: nowrap;\n\t}\n\n\t.seekHoverTimeCanvasDisabled {\n\t\tbottom: 0;\n\t}\n"]);return ya=function(){return e},e}var _a=Object(S.b)(ya(),(function(e){return e.theme.TEXT_PRIMARY}),(function(e){return e.theme.TEXT_PRIMARY}),(function(e){return e.theme.SLIDER_OPACITY}),(function(e){return e.theme.SLIDER_OPACITY}),(function(e){return e.theme.TEXT_PRIMARY}),(function(e){return e.theme.TEXT_PRIMARY}),(function(e){return e.theme.TEXT_PRIMARY})),Oa=i("rbrk");function wa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=va()(e);if(t){var a=va()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ba()(this,i)}}var Ta=U.a.oneOfType,Aa=U.a.shape,Pa=U.a.func,xa=U.a.number,Ra=U.a.oneOf,Da=U.a.object,Na="HORIZONTAL",ja="VERTICAL",ka=S.d.div.withConfig({displayName:"RangeControlOverlay__HoverPointer",componentId:"sc-8q87p-0"})(["position:absolute;border-radius:50%;background-color:",";bottom:-48px;height:16px;width:16px;left:calc(50% - 10px);"],(function(e){return e.theme.SLIDER_OPACITY})),La=S.d.div.withConfig({displayName:"RangeControlOverlay__HoverViewWrapper",componentId:"sc-8q87p-1"})(["position:absolute;bottom:50px;z-index:3;transform:translateX(-50%);left:",";display:",";"],(function(e){return e.left}),(function(e){return e.show?"unset":"none"})),Ba=function(e){fa()(i,e);var t=wa(i);function i(e){var n;return da()(this,i),n=t.call(this,e),b()(ma()(n),"startDrag",(function(e){n.setState({isDragging:!0}),window.addEventListener("mousemove",n.triggerRangeChange),window.addEventListener("mouseup",n.endDrag),n.toggleSelection("none");var t=e?n.getValueFromMouseEvent(e):null;n.props.onChangeStart(t)})),b()(ma()(n),"endDrag",(function(e){e&&n.triggerRangeChange(e),n.setState({isDragging:!1}),window.removeEventListener("mousemove",n.triggerRangeChange),window.removeEventListener("mouseup",n.endDrag),n.toggleSelection("");var t=e?n.getValueFromMouseEvent(e):null;n.props.onChangeEnd(t)})),b()(ma()(n),"handleSeekHover",(function(e){var t=n.getValueFromMouseEvent(e)*n.props.totalTime;if(!n.props.isCanvasModeDisabled&&n.props.isReplay){var i=n.props.isReplay?1e6*t:Object(f.P)(t),a=Object(f.g)(n.props.getActiveSlideAtSeekPosition(t),i);n.setState({hoverActiveSlide:a,isSeekHovered:!0,progressPercent:t/n.props.totalTime*100})}else n.setState({isSeekHovered:!0,progressPercent:t/n.props.totalTime*100});n.state.isDragging&&n.props.updateProgress(n.getValueFromMouseEvent(e))})),b()(ma()(n),"handleSeekHoverOut",(function(){n.setState({isSeekHovered:!1})})),b()(ma()(n),"triggerRangeChange",(function(e){n.props.onValue(n.getValueFromMouseEvent(e))})),b()(ma()(n),"handleIntentMove",(function(e){n.handleSeekHover(e),n.state.isDragging||n.triggerIntent(e)})),b()(ma()(n),"getTimeToDisplayOnHover",(function(){return n.props.isReplay?a.a.createElement(ee.k,{lineHeight:"".concat(P.d.LINE_HEIGHT)},Object(f.C)(n.state.progressPercent/100*n.props.totalTime,!0,!0).replace(/ /g,"")):a.a.createElement(ee.k,{lineHeight:"".concat(P.d.LINE_HEIGHT)},"-".concat(Object(f.C)(n.props.totalTime-n.state.progressPercent/100*n.props.totalTime,!0,!0).replace(/ /g,"")))})),n.state={isDragging:!1},n}return ua()(i,[{key:"componentWillUnmount",value:function(){}},{key:"toggleSelection",value:function(e){var t=document.getElementsByTagName("body")[0];t.style["user-select"]=e,t.style["-webkit-user-select"]=e,t.style["-moz-user-select"]=e,t.style["-ms-user-select"]=e}},{key:"getValueFromMouseEvent",value:function(e){return this.props.direction===ja?this.getVerticalValue(e.pageY):this.getHorizontalValue(e.pageX)}},{key:"triggerIntent",value:function(e){var t=this.props,i=t.direction;(0,t.onIntent)(i===ja?this.getVerticalValue(e.pageY):this.getHorizontalValue(e.pageX))}},{key:"getRectFromBounds",value:function(){var e=this.props.bounds;return"function"===typeof e?e():e}},{key:"getHorizontalValue",value:function(e){var t=this.getRectFromBounds();if(!t)return 0;var i=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,n=e-(t.left+i);return n=Math.max(n,0),(n=Math.min(n,t.width))/t.width}},{key:"getVerticalValue",value:function(e){var t=this.getRectFromBounds();if(!t)return 0;var i=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,n=e-(t.top+i);return n=Math.max(n,0),1-(n=Math.min(n,t.height))/t.height}},{key:"renderCanvas",value:function(e){if(!this.props.isCanvasModeDisabled&&this.props.isReplay&&e)return a.a.createElement("div",{className:"seekHoverCanvasWrapperContainer"},a.a.createElement(Re.a,{slides:x.b.main.slides,isVolumeEnabled:!1,role:"listener",baseWidth:360,canWrite:!1,activeSlide:this.state.hoverActiveSlide,canvasHeight:90,canvasWidth:160,baseWidth:360,replayMode:!0,areAnnotationsOff:!1,currentTime:e,isReplay:this.props.isReplay,isLiveDVR:this.props.isLiveDVR,isSeekHover:!0}))}},{key:"renderTime",value:function(){return a.a.createElement("div",{className:"seekHoverTime ".concat(this.props.isCanvasModeDisabled?"seekHoverTimeCanvasDisabled":"")},this.getTimeToDisplayOnHover())}},{key:"renderHoverView",value:function(e){var t=this.state.isSeekHovered&&!this.props.isPollActive&&this.props.totalTime>=0&&!isNaN(this.props.totalTime)&&!isNaN(this.state.progressPercent);return a.a.createElement(La,{left:"".concat(this.state.progressPercent,"%"),show:t},this.renderCanvas(e),this.renderTime(),a.a.createElement(ka,null))}},{key:"render",value:function(){var e=this.props,t=e.className,i=e.extraClasses,n=e.style,o=this.state.isDragging,r=this.state.progressPercent/100*this.props.totalTime,s=!isNaN(r)&&r?this.props.isReplay?r:Object(f.P)(r):null;return a.a.createElement("div",{className:Ia()(t,i,{isDragging:o}),style:n,onMouseDown:this.startDrag,onMouseMove:this.handleIntentMove,onMouseOver:this.handleSeekHover,onMouseLeave:this.handleSeekHoverOut},this.renderHoverView(s))}}]),i}(n.PureComponent);b()(Ba,"propTypes",{bounds:Ta([Pa,Aa({width:xa.isRequired,left:xa.isRequired}),Aa({height:xa.isRequired,top:xa.isRequired})]).isRequired,onValue:Pa.isRequired,onChangeStart:Pa,onChangeEnd:Pa,onIntent:Pa,direction:Ra([Na,ja]),style:Da}),b()(Ba,"defaultProps",{onChangeStart:function(){},onChangeEnd:function(){},onIntent:function(){},direction:Na,style:{}});var Ma=Object(Oa.d)("RangeControlOverlay")(Ba);function Ga(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Ua(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ga(Object(i),!0).forEach((function(t){b()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ga(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Ha(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=va()(e);if(t){var a=va()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ba()(this,i)}}var Va=U.a.number,Fa=U.a.bool,Wa=U.a.func,za=U.a.object,qa=function(e){fa()(i,e);var t=Ha(i);function i(e){var n;return da()(this,i),n=t.call(this,e),b()(ma()(n),"storeRef",(function(e){n.progressBarEl=e})),b()(ma()(n),"handleSeek",(function(e){var t=n.props,i=t.isSeekable,a=t.onSeek,o=t.totalTime;i&&a(e*o)})),b()(ma()(n),"handleSeekStart",(function(e){var t=n.props,i=t.isSeekable;t.onSeekStart,t.totalTime;i&&n.props.setIsSeekStarted(!0)})),b()(ma()(n),"handleSeekEnd",(function(e){var t=n.props,i=t.isSeekable,a=(t.onSeekEnd,t.totalTime);i&&(n.props.setSeekTime(e*a),n.updateProgress(e))})),b()(ma()(n),"updateProgress",(function(e){var t=n.props,i=t.isSeekable,a=t.totalTime;i&&n.setState({currentTime:e*a})})),b()(ma()(n),"handleIntent",(function(e){var t=n.props,i=t.isSeekable,a=t.onIntent,o=t.totalTime,r=i?e:0;n.setState((function(e,t){return Ua(Ua({},e),{},{currentIntent:r})})),i&&a(e*o)})),b()(ma()(n),"getBounds",(function(){if(n.progressBarEl)return n.progressBarEl.getBoundingClientRect()})),n.progressBarEl=null,n.state={currentIntent:0,currentTime:n.props.currentTime},n}return ua()(i,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.currentTime==this.props.currentTime||e.isSeeking||this.setState({currentTime:e.currentTime})}},{key:"render",value:function(){var e=this.props,t=e.totalTime,i=e.isSeekable,o=e.className,r=e.extraClasses,s=e.childClasses,l=e.style,c=e.childrenStyles,d=this.state,p=d.currentIntent,u=d.currentTime,h=Math.min(100,100*u/t),m="".concat(h,"%"),g=0!==p&&p<u/t;return a.a.createElement(n.Fragment,null,a.a.createElement("div",{className:Ia()(o,r,{isSeekable:i,isRewindIntent:g}),style:l,ref:this.storeRef},a.a.createElement("div",{className:s.elapsed||"ProgressBar-elapsed",style:Ua({width:m},c.elapsed||{})}),a.a.createElement("div",{className:s.intent||"ProgressBar-intent",style:Ua({width:"".concat(100*p,"%")},c.intent||{})}),a.a.createElement("div",{className:s.handle||"ProgressBar-handle",style:Ua({left:m},c.handle||{})}),a.a.createElement("div",{className:s.opacityHandle||"ProgressBar-opacity-handle",style:Ua({left:m},c.handle||{})}),i&&a.a.createElement(Ma,{className:s.seek||"ProgressBar-seek",style:c.RangeControlOverlay,bounds:this.getBounds,onValue:this.handleSeek,onChangeStart:this.handleSeekStart,onChangeEnd:this.handleSeekEnd,onIntent:this.handleIntent,updateProgress:this.updateProgress,isCanvasModeDisabled:this.props.isCanvasModeDisabled,totalTime:this.props.totalTime,getActiveSlideAtSeekPosition:this.props.getActiveSlideAtSeekPosition,isReplay:this.props.isReplay,isLiveDVR:this.props.isLiveDVR,isPollActive:this.props.isPollActive})),a.a.createElement(_a,null))}}]),i}(n.PureComponent);b()(qa,"propTypes",{totalTime:Va,currentTime:Va,isSeekable:Fa,onSeek:Wa,onSeekStart:Wa,onSeekEnd:Wa,onIntent:Wa,style:za}),b()(qa,"defaultProps",{totalTime:1/0,currentTime:0,isSeekable:!1,onSeek:function(){},onSeekStart:function(){},onSeekEnd:function(){},onIntent:function(){},style:{}});var Ya={setIsSeekStarted:B.n,setSeekTime:B.w},Xa=Object(Oa.a)(Object(Oa.c)(),Object(Oa.d)("ProgressBar"),Object(Oa.b)(),Object(C.c)(null,Ya))(qa);const Ka=Object(_.e)().getOrCreate("CHAT_TOGGLE"),Za=()=>{const e=Object(C.e)(e=>e.getIn(["videoPlayControls","isChatHidden"])),t=Object(C.d)();Object(n.useEffect)(()=>(Ka.isProfileRunning()||Ka.start(),()=>{Ka.isProfileRunning()&&Ka.end()}),[]),Object(n.useEffect)(()=>{i(Ka,j.c.CHAT_TOGGLE,e?"HIDDEN":"VISIBLE")},[e]);const i=(e,t,i)=>{const n=e.peek();j.f.sendData(t,i,{[j.e.Measure1]:n.dts/1e3}),e.end(),e.start()};return a.a.createElement(Hn,{title:e?H.ec.SHOW_CHAT:H.ec.HIDE_CHAT,handleOnclick:()=>{t(Object(B.f)(!e))}},e?a.a.createElement(Ve.O,null):a.a.createElement(Ve.Mb,null))};var Ja=Za;Za.propTypes={isChatHidden:U.a.bool.isRequired},Za.defaultProps={isChatHidden:!1};var Qa=function(e){var t=e.fullScreenHandler,i=Object(C.e)((function(e){return e.getIn(["videoPlayControls","isFullScreenEnabled"])}));return a.a.createElement(Hn,{title:i?H.ec.EXIT_FULL_SCREEN:H.ec.FULL_SCREEN,handleOnclick:function(){t()},anchorSide:i?"right":"default"},i?a.a.createElement(Ve.H,null):a.a.createElement(Ve.L,null))},$a=Qa;Qa.propTypes={isFullScreenEnabled:U.a.bool,fullScreenHandler:U.a.func.isRequired};var eo=S.d.div.withConfig({displayName:"LiveText__LiveTextContainer",componentId:"sc-131pai0-0"})(["display:flex;align-items:center;font-size:",";line-height:",";font-weight:",";color:",";margin-left:",";cursor:",";"],P.d.MEDIUM,P.d.LINE_HEIGHT,P.d.SEMIBOLD,(function(e){return e.theme.TEXT_PRIMARY}),P.c.SPACING_2B,(function(e){return e.showCursor?"pointer":"unset"})),to=S.d.div.withConfig({displayName:"LiveText__RedDot",componentId:"sc-131pai0-1"})(["width:8px;height:8px;border-radius:50%;background:",";margin-right:",";"],(function(e){return e.theme.RED}),P.c.SPACING_2B),io=function(e){var t=e.isLiveDVR,i=Object(C.d)(),n=function(){i(Object(_e.c)(!1))};return t?a.a.createElement(eo,{showCursor:!0,onClick:n},"GO LIVE"):a.a.createElement(eo,null,a.a.createElement(to,null),"LIVE")},no=io;io.propTypes={isLiveDVR:U.a.bool.isRequired},io.defaultProps={isLiveDVR:!1};const ao=({volumeMuteHandler:e})=>{const t=Object(C.e)(e=>e.getIn(["videoPlayControls","volume"])),i=Object(C.e)(e=>e.getIn(["videoPlayControls","isMuted"]));return a.a.createElement(Hn,{title:H.ec.VOLUME,handleOnclick:()=>{e&&e(!0)},zIndex:1},0===t||i?a.a.createElement(Ve.hb,null):t<=50&&!i?a.a.createElement(Ve.W,null):t>50&&!i?a.a.createElement(Ve.P,null):a.a.createElement(Ve.hb,null))};var oo=a.a.memo(ao),ro=i("6Obz"),so=i("pAHG"),lo=(i("3PcP"),i("U+Bj"),Object(Bn.a)((function(){return{root:{color:function(e){var t=e.theme;return"".concat(t.TEXT_PRIMARY)},height:4,width:function(e){return e.show?"90px":"0"},opacity:function(e){return e.show?"1":"0"},transition:"all 0.2s ease-in 0.1s","will-change":"width, opacity",marginRight:function(e){return e.show?"16px":"0"},marginLeft:function(e){return e.show?"10px":"0"}},thumb:{height:12,width:12,background:function(e){var t=e.theme;return"".concat(t.TEXT_PRIMARY)},boxShadow:function(e){var t=e.theme;return"0px 0px 0px 6px ".concat(t.SLIDER_OPACITY)},marginTop:-4,marginLeft:-4,"&:hover":{boxShadow:function(e){var t=e.theme;return"0px 0px 0px 6px ".concat(t.SLIDER_OPACITY)}}},active:{"&:hover":{boxShadow:function(e){var t=e.theme;return"0px 0px 0px 6px ".concat(t.SLIDER_OPACITY)}}},valueLabel:{left:"calc(-50% - 2px)",fontFamily:"UN_REGULAR","& *":{background:"transparent",color:function(e){return e.theme.TEXT_PRIMARY}}},track:{height:4,borderRadius:4},rail:{height:4,borderRadius:4}}}))(ro.a)),co=a.a.memo(Object(S.f)((function(e){var t=e.volume,i=e.setVolumeLevel,o=e.theme,r=Object(C.d)(),s=Object(C.e)((function(e){return e.getIn(["videoPlayControls","isVolumeShortCutUsed"])})),l=Object(C.e)((function(e){return e.getIn(["videoPlayControls","showVolumeSlider"])})),c=Object(C.e)((function(e){return e.getIn(["videoPlayControls","isMuted"])})),d=Object(n.useState)(t),p=m()(d,2),u=p[0],h=p[1];Object(n.useEffect)((function(){h(t)}),[t]);var g=Object(n.useCallback)((function(e){return i(e)}),[]),f=Object(so.a)(g,100),E=function(e){"keydown"!=e.type&&(c&&r(Object(B.s)(!1)),f(u))};return a.a.createElement(lo,{valueLabelDisplay:s?"on":"auto",valueLabelFormat:function(e){return"".concat(e,"%")},"aria-label":"styled slider",value:c?0:u,onChange:function(e,t){h(t),E(e)},onChangeCommitted:E,show:l||s,theme:o})})));const po=S.d.div.withConfig({displayName:"SettingsPanelOption__OptionWrapper",componentId:"sc-1wqbpkd-0"})(["cursor:pointer;display:flex;justify-content:space-between;padding:"," ",";align-items:center;&:first-of-type{margin-top:0;}&:last-of-type{margin-bottom:0;}:hover{background:",";}"],P.c.SPACING_2B,P.c.SPACING_4B,({theme:e})=>e.BORDER),uo=S.d.div.withConfig({displayName:"SettingsPanelOption__TypeContainer",componentId:"sc-1wqbpkd-1"})(["display:flex;align-items:center;"]),ho=S.d.div.withConfig({displayName:"SettingsPanelOption__SwitchWrapper",componentId:"sc-1wqbpkd-2"})(["display:flex;width:100px;"]),mo=Object(S.d)(ee.j).withConfig({displayName:"SettingsPanelOption__StyledH4",componentId:"sc-1wqbpkd-3"})(["font-weight:",";color:",";"],P.d.REGULAR,({isRed:e,theme:t})=>e?t.RED:t.TEXT_PRIMARY),go=S.d.div.withConfig({displayName:"SettingsPanelOption__IconWrapper",componentId:"sc-1wqbpkd-4"})(["display:flex;transform:",";transition:transform 0.2s;margin-left:",";"],({animate:e})=>e?"translatex(8px)":"translatex(0px)",P.c.SPACING_2B),fo=a.a.memo(({optionName:e,type:t,reportOption:i,onClick:o,activeEducatorQuality:r,isCameraTurnedOff:s,selected:l,theme:c})=>{const d=Object(C.e)(e=>e.getIn(["videoPlayControls","activePlayBackRate"])),p=Object(n.useState)(!1),u=m()(p,2),h=u[0],g=u[1],f=()=>{o()};return a.a.createElement(po,{onClick:(()=>{switch(t){case"educatorVideoSwitch":case"themeSwitch":return null;default:return f}})(),onMouseEnter:()=>{g(!0)},onMouseLeave:()=>{g(!1)}},(()=>{if(e)return a.a.createElement(mo,{reportOption:i,isRed:!!i,animate:h},e)})(),(()=>{switch(t){case"playback":return a.a.createElement(uo,null,a.a.createElement(ee.j,null,"".concat(d,"x")),a.a.createElement(go,{animate:h},a.a.createElement(Ve.p,{orientation:"right"})));case"videoQuality":return a.a.createElement(uo,null,a.a.createElement(ee.j,null,r.quality),a.a.createElement(go,{animate:h},a.a.createElement(Ve.p,{orientation:"right"})));case"educatorVideoSwitch":return a.a.createElement(ho,null,a.a.createElement(ee.p,{selected:s?"off":"on",onChange:f}));case"themeSwitch":return a.a.createElement(ho,null,a.a.createElement(ee.p,{selected:l?"on":"off",onChange:f}));case"curtain":return a.a.createElement(uo,null,a.a.createElement(Ve.q,{fill:e==H.Lb.SLIDES?c.TEXT_PRIMARY:c.RED}))}})())});var Eo=Object(S.f)(fo);const bo=S.d.div.withConfig({displayName:"SettingsPanel__SettingsPanelWrapper",componentId:"sc-1bg0wrd-0"})(["display:flex;flex-direction:column;background:",";box-sizing:border-box;border-radius:8px;padding:"," 0;"],({theme:e})=>e.BODY_BG,P.c.SPACING_2B),Co=Object(S.d)(ee.f).withConfig({displayName:"SettingsPanel__StyledDivider",componentId:"sc-1bg0wrd-1"})(["margin:"," ",";"],P.c.SPACING_2B,P.c.SPACING_0B);var vo=a.a.memo(({isReplay:e,videoStreamManager:t,onSettingSelect:i,hidePopover:o})=>{const r=Object(C.e)(e=>e.getIn(["videoPlayControls","activeEducatorQuality"])),s=Object(C.e)(e=>e.getIn(["videoPlayControls","isReportCurtainOpened"])),l=Object(C.e)(e=>e.getIn(["app","isCameraTurnedOff"])),c=Object(C.e)(e=>e.getIn(["app","isHlsClass"])),d=Object(C.e)(e=>e.getIn(["app","isCanvasModeDisabled"])),p=Object(C.e)(e=>e.getIn(["app","isEducator"])),u=Object(C.e)(e=>e.getIn(["videoPlayControls","isLiveDVR"])),h=Object(C.e)(e=>e.getIn(["app","isDarkMode"])),m=Object(C.e)(e=>e.getIn(["app","isScreenShared"])),g=Object(C.e)(e=>e.getIn(["app","audioUrl"])),f=Object(C.d)(),E=Object(n.useCallback)(()=>{i("playbackRate")},[]),b=Object(n.useCallback)(()=>{i("videoQuality")},[]),v=Object(n.useCallback)(()=>{m||f(Object(ye.O)(!l,!1))},[l,m]),S=Object(n.useCallback)(()=>{o(),f(Object(B.r)(!0))},[]),I=Object(n.useCallback)(()=>{o(),f(Object(B.u)(!s))},[]),y=Object(n.useCallback)(()=>{f(Object(ye.x)(!h,{onUserAction:!0}))},[h]);return a.a.createElement(bo,null,(()=>{if(e)return a.a.createElement(Eo,{optionName:H.Lb.PLAYBACK_SPEED,type:"playback",onClick:E})})(),(()=>{if(e&&t.availableStreams.length>0)return a.a.createElement(Eo,{optionName:H.Lb.EDUCATOR_VIDEO_QUALITY,type:"videoQuality",onClick:b,activeEducatorQuality:r})})(),(()=>{if(!c&&!d&&!p&&!u&&!m&&(!e||g))return a.a.createElement(Eo,{optionName:H.Lb.EDUCATOR_VIDEO,type:"educatorVideoSwitch",activeEducatorQuality:r,isCameraTurnedOff:l,onClick:v})})(),(()=>{if(!p)return a.a.createElement(Eo,{optionName:H.Lb.DARK_THEME,type:"themeSwitch",selected:!!h,onClick:y})})(),(()=>{if(e)return a.a.createElement(Eo,{optionName:H.Lb.SLIDES,type:"curtain",onClick:S})})(),(()=>{if(!u)return a.a.createElement(Co,null)})(),a.a.createElement(Eo,{optionName:H.Lb.REPORT_ISSUE,type:"curtain",addMarginTop:!0,reportOption:!0,isReportCurtainOpened:s,onClick:I}))}),So=S.d.div.withConfig({displayName:"SmallBackHeader__HeaderWrapper",componentId:"sc-1re48hr-0"})(["display:flex;cursor:pointer;width:100%;align-items:center;pointer-events:",";"],(function(e){return e.disabled?"none":"auto"})),Io=S.d.div.withConfig({displayName:"SmallBackHeader__IconWrapper",componentId:"sc-1re48hr-1"})(["display:flex;transform:",";transition:transform 0.2s;margin-right:",";"],(function(e){return e.animate?"translatex(-8px)":"translatex(0px)"}),P.c.SPACING_2B),yo=a.a.memo((function(e){var t=e.heading,i=e.onBackClick,o=e.disabled,r=Object(n.useState)(!1),s=m()(r,2),l=s[0],c=s[1];return a.a.createElement(So,{onClick:function(){i()},disabled:o,onMouseEnter:function(){c(!0)},onMouseLeave:function(){c(!1)}},a.a.createElement(Io,{animate:l},a.a.createElement(Ve.p,{orientation:"left"})),a.a.createElement(ee.j,{fontWeight:P.d.REGULAR},t))})),_o=yo;yo.propTypes={heading:U.a.string.isRequired,onBackClick:U.a.func.isRequired,disabled:U.a.bool.isRequired},yo.defaultProps={heading:"",disabled:!1};const Oo={chevronRight:i("U5fO"),activeRate:i("DdGD")},wo=S.d.div.withConfig({displayName:"ExpandedSettings__ItemContainer",componentId:"y4a36w-0"})(["cursor:pointer;display:flex;padding:"," 0;align-items:center;&:first-of-type{margin-top:0;}&:last-of-type{margin-bottom:0;}"],P.c.SPACING_2B),To=S.d.img.withConfig({displayName:"ExpandedSettings__ActiveRateImage",componentId:"y4a36w-1"})(["min-width:16px;margin-right:",";"],P.c.SPACING_2B),Ao=S.d.div.withConfig({displayName:"ExpandedSettings__Wrapper",componentId:"y4a36w-2"})(["padding:",";width:100%;display:flex;flex-direction:column;box-sizing:border-box;background:",";"],P.c.SPACING_4B,({theme:e})=>e.BODY_BG),Po=S.d.div.withConfig({displayName:"ExpandedSettings__EmptyDiv",componentId:"y4a36w-3"})(["width:24px;"]),xo=Object(S.d)(ee.j).withConfig({displayName:"ExpandedSettings__StyledH4",componentId:"y4a36w-4"})(["color:",";font-weight:",";width:100%;:hover{font-weight:",";}"],({activeRate:e,theme:t})=>e?t.GREEN:t.TEXT_PRIMARY,({activeRate:e})=>e?P.d.SEMIBOLD:P.d.REGULAR,P.d.BOLD),Ro=a.a.memo(({activeSettings:e,onBackClick:t,dataArray:i,activeOption:n,videoStreamManager:o,reset:r})=>{const s=Object(C.d)(),l=e=>n==e?a.a.createElement(To,{src:Oo.activeRate}):a.a.createElement(Po,null),c=t=>{"videoQuality"==e?(o.setStream(t),r(!0)):(s(Object(B.t)(t)),r(!1))};return a.a.createElement(Ao,null,a.a.createElement(_o,{heading:"playbackRate"==e?H.Lb.PLAYBACK_SPEED:"videoQuality"==e?H.Lb.EDUCATOR_VIDEO_QUALITY:void 0,onBackClick:t}),a.a.createElement(ee.f,{margin:"".concat(P.c.SPACING_4B," 0 ").concat(P.c.SPACING_2B," 0")}),"playbackRate"==e?i.map(e=>a.a.createElement(wo,{onClick:c.bind(null,e)},l(e),a.a.createElement(xo,{activeRate:n==e},"".concat(e,"x")))):"videoQuality"==e?i.map(e=>a.a.createElement(wo,{onClick:c.bind(null,e.streamId)},l(e),a.a.createElement(xo,{activeRate:n==e},"".concat(e.quality)))):void 0)});var Do=Ro;Ro.propTypes={activeSettings:U.a.string.isRequired,dataArray:U.a.array.isRequired,activeOption:U.a.string.isRequired,videoStreamManager:U.a.object.isRequired,reset:U.a.func.isRequired},Ro.defaultProps={activeSettings:"",dataArray:[],activeOption:"",videoStreamManager:null,reset:()=>{}};var No=i("QILm"),jo=i.n(No),ko=i("5Gel"),Lo=i("R/WZ");function Bo(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Mo(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Bo(Object(i),!0).forEach((function(t){b()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Bo(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var Go=function(e){var t=e.children,i=e.classes,o=e.theme,r=e.positionProperties,s=jo()(e,["children","classes","theme","positionProperties"]),l=Object(n.useCallback)(Object(Lo.a)((function(){return{root:Mo({},i&&i.root),paper:Mo({backgroundColor:o.BODY_BG,marginBottom:P.c.SPACING_8B,border:"1px solid ".concat(o.BORDER),boxShadow:"0 16px 32px ".concat(o.SHADOW),width:"".concat(e.width,"px")},i&&i.paper)}})),[i,o])(),c=Object(n.useCallback)((function(e){if(r&&Array.isArray(r)&&2===r.length&&(!r.includes("top")||!r.includes("left"))){var t=window.innerHeight,i=window.innerWidth,n=e.offsetWidth,a=e.offsetHeight;requestAnimationFrame((function(){var o=e.style,s=o.top,l=o.left;r.forEach((function(o){"bottom"===o&&(e.style.bottom="".concat(t-(+s.split("px")[0]+a),"px"),e.style.top="auto"),"right"===o&&(e.style.right="".concat(i-(+l.split("px")[0]+n),"px"),e.style.left="auto")}))}))}}),[r]),d=Mo(Mo({},s),{},{classes:{root:l.root,paper:l.paper},getContentAnchorEl:c});return a.a.createElement(ko.a,d,t)};Go.defaultProps={width:200};var Uo=Object(S.f)(Go),Ho=S.d.div.withConfig({displayName:"popOverMenu__MenuWrapper",componentId:"nrqa4e-0"})(["display:flex;width:100%;overflow:hidden;"]),Vo=S.d.div.withConfig({displayName:"popOverMenu__SlidingWrapper",componentId:"nrqa4e-1"})(["display:flex;background:",";flex:0 0 200%;height:",";transform:translateX(",");transition:height 0.2s cubic-bezier(0,0,0.2,1),transform 0.2s cubic-bezier(0,0,0.2,1);will-change:height,transform;"],(function(e){return e.theme.BODY_BG}),(function(e){return e.height+"px"||!1}),(function(e){return e.open?"-50%":"0"})),Fo=S.d.div.withConfig({displayName:"popOverMenu__ItemsWrapper",componentId:"nrqa4e-2"})(["flex:0 0 50%;max-width:50%;height:fit-content;"," opacity:",";transition:opacity 0.1s cubic-bezier(0,0,0.2,1);"],(function(e){return e.customStyles||""}),(function(e){return e.visible?"1":"0"})),Wo=function(e){var t=e.open,i=e.update,o=e.mainMenu,r=e.optionsMenu,s=e.mainMenuStyles,l=e.optionMenuStyles,c=Object(n.useState)(),d=m()(c,2),p=d[0],u=d[1],h=Object(n.useRef)(),g=Object(n.useRef)();Object(n.useEffect)((function(){u(t&&g.current?g.current.clientHeight:h.current.clientHeight)}),[t,i]);return a.a.createElement(Ho,null,a.a.createElement(Vo,{open:t,height:p},a.a.createElement(Fo,{visible:!t,ref:function(e){return h.current=e},customStyles:s},o()),function(){if(r)return a.a.createElement(Fo,{visible:t,ref:function(e){return g.current=e},customStyles:l},r())}()))};const zo=S.d.div.withConfig({displayName:"Settings__SettingsWrapper",componentId:"sc-1rm8on8-0"})(["display:flex;transition:opacity 0.3s ease-in;opacity:",";"],({isVolumeShortCutUsed:e})=>e?"0":"1"),qo=({isVolumeShortCutUsed:e,videoStreamManager:t})=>{const i=Object(C.d)(),o=Object(n.useRef)(null),r=Object(C.e)(e=>e.getIn(["app","isReplay"])),s=Object(C.e)(e=>e.getIn(["app","isScreenShared"])),l=Object(C.e)(e=>e.getIn(["videoPlayControls","playBackRates"])),c=Object(C.e)(e=>e.getIn(["videoPlayControls","activePlayBackRate"])),d=Object(C.e)(e=>e.getIn(["videoPlayControls","activeEducatorQuality"])),p=Object(C.e)(e=>e.getIn(["poll","isPollActive"])),u=Object(n.useState)(!1),h=m()(u,2),g=h[0],f=h[1],E=Object(n.useState)(""),b=m()(E,2),v=b[0],S=b[1],I=Object(n.useCallback)(()=>{f(!1),S("")}),y=()=>{S("")},_=()=>{const e=t.getSelectedStream();i(Object(B.c)(e))},O=e=>{e&&_(),S("")},w=()=>a.a.createElement(Do,{dataArray:x(),heading:"Educator video quality",activeSettings:v,onBackClick:y,videoStreamManager:t,activeOption:A(),reset:O}),T=()=>a.a.createElement(vo,{videoStreamManager:t,onSettingSelect:P,hidePopover:I,isReplay:r,activeSettings:v}),A=()=>"playbackRate"==v?c:"videoQuality"==v?d:void 0,P=e=>{S(e)},x=()=>"playbackRate"==v?l.items:"videoQuality"==v?t.getAvailableStreams():void 0;return a.a.createElement(zo,{ref:o,isVolumeShortCutUsed:e},a.a.createElement(Hn,{title:"Settings",handleOnclick:()=>{r&&_(),f(!0)}},a.a.createElement(Ve.Kb,null)),a.a.createElement(Uo,{open:g&&!p,anchorEl:o.current,onClose:I,elevation:0,classes:{paper:{width:"293px"}},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},positionProperties:["bottom","right"]},a.a.createElement(Wo,{open:!!v,mainMenu:T,optionsMenu:w,update:s})))};var Yo=a.a.memo(qo);qo.defaultProps={};const Xo=S.d.div.withConfig({displayName:"NextLesson__NextLessonWrapper",componentId:"sc-6a7wsz-0"})(["display:flex;transition:opacity 0.3s ease-in;opacity:",";"],({hide:e})=>e?"0.1":"1"),Ko=S.d.div.withConfig({displayName:"NextLesson__PopoverWrapper",componentId:"sc-6a7wsz-1"})(["display:flex;flex-direction:column;"]),Zo=({})=>{const e=Object(C.e)(e=>e.getIn(["app","isScreenShared"])),t=Object(C.e)(e=>e.getIn(["app","programmeDetails"])),i=Object(C.e)(e=>e.getIn(["videoPlayControls","isVolumeShortCutUsed"])),o=Object(C.e)(e=>e.getIn(["app","hasReplayEnded"])),r=Object(C.e)(e=>e.getIn(["videoPlayControls","isRewindShortCutUsed"])),s=Object(C.e)(e=>e.getIn(["videoPlayControls","isForwardShortCutUsed"])),l=Object(n.useState)(!1),c=m()(l,2),d=c[0],p=c[1],u=Object(n.useRef)(null);Object(n.useEffect)(()=>{(o||i||r||s)&&p(!1)},[o,i,r,s]);const h=Object(n.useCallback)(()=>{p(!1)}),g=()=>a.a.createElement(Ko,null,(()=>{if(t)return t.nextItems.map((e,i)=>a.a.createElement(dn,{key:i,item:e,showDivider:0==i&&t.nextItems.size>1,hidePopover:h,popoverOpen:d}))})());return a.a.createElement(Xo,{ref:u,hide:i||r||s},a.a.createElement(Hn,{title:"Next Lesson",handleOnclick:()=>{p(!0),j.f.sendData(j.c.NEXT_CLASS_CTRL_CLICK)}},a.a.createElement(Ve.ib,null)),a.a.createElement(Uo,{open:d,anchorEl:u.current,onClose:h,elevation:0,classes:{paper:{width:"220px"}},anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},positionProperties:["bottom","center"]},a.a.createElement(Wo,{open:!1,mainMenu:g,optionsMenu:null,update:e})))};var Jo=Object(S.f)(Zo);Zo.propTypes={};const Qo={seek:"ProgressBar-seek"},$o=S.d.div.withConfig({displayName:"ControlsWrapperCard__ControlsWrapper",componentId:"sc-1wnweq4-0"})(["display:flex;width:100%;height:100%;align-items:center;position:relative;"]),er=S.d.div.withConfig({displayName:"ControlsWrapperCard__ProgressBarWrapper",componentId:"sc-1wnweq4-1"})(["display:flex;margin:"," ",";flex:1;align-items:center;transition:opacity 0.1s ease-in;opacity:",";"],P.c.SPACING_0B,P.c.SPACING_6B,({hide:e})=>e?"0.1":"1"),tr=S.d.div.withConfig({displayName:"ControlsWrapperCard__LeftHandSideControls",componentId:"sc-1wnweq4-2"})(["display:flex;transition:opacity 0.1s ease-in;opacity:",";"],({hide:e})=>e?"0.1":"1"),ir=S.d.div.withConfig({displayName:"ControlsWrapperCard__RightHandSideControls",componentId:"sc-1wnweq4-3"})(["display:flex;align-items:center;width:",";"],({width:e})=>e),nr=S.d.div.withConfig({displayName:"ControlsWrapperCard__TimeWrapper",componentId:"sc-1wnweq4-4"})(["display:flex;align-items:center;"]),ar=S.d.div.withConfig({displayName:"ControlsWrapperCard__AdditionalControls",componentId:"sc-1wnweq4-5"})(["display:flex;transition:opacity 0.1s ease-in;transition-delay:",";opacity:",";align-items:center;display:flex;"],({hide:e,lowerOpacity:t})=>e||t?"0s":"0.3s",({lowerOpacity:e,hide:t})=>e?"0.1":t?"0":"1"),or=S.d.div.withConfig({displayName:"ControlsWrapperCard__BackButtonWrapper",componentId:"sc-1wnweq4-6"})(["transition:opacity 0.1s ease-in;transition-delay:",";opacity:",";"],({hide:e})=>e?"0s":"0.3s",({hide:e})=>e?"0.1":"1"),rr=S.d.div.withConfig({displayName:"ControlsWrapperCard__VolumeWrapper",componentId:"sc-1wnweq4-7"})(["display:flex;align-items:center;border-radius:",";transition:opacity 0.1s ease-in;opacity:",";"],({isSliderShowing:e})=>e?"50px":"50%",({hide:e})=>e?"0.1":"1"),sr=S.d.div.withConfig({displayName:"ControlsWrapperCard__CurrentTimeContainer",componentId:"sc-1wnweq4-8"})(["color:",";font-size:",";font-weight:",";line-height:",";width:50px;display:flex;justify-content:flex-start;"],({theme:e})=>e.TEXT_PRIMARY,P.d.SMALL,P.d.SEMIBOLD,P.d.LINE_HEIGHT),lr=S.d.div.withConfig({displayName:"ControlsWrapperCard__TotalTimeContainer",componentId:"sc-1wnweq4-9"})(["color:",";font-size:",";font-weight:",";line-height:",";width:55px;display:flex;justify-content:flex-start;"],({theme:e})=>e.TEXT_TERTIARY,P.d.SMALL,P.d.SEMIBOLD,P.d.LINE_HEIGHT),cr=S.d.div.withConfig({displayName:"ControlsWrapperCard__ForwardSlash",componentId:"sc-1wnweq4-10"})(["color:",";font-size:",";line-height:",";margin-left:4px;margin-right:4px;"],({theme:e})=>e.TEXT_TERTIARY,P.d.SMALL,P.d.LINE_HEIGHT),dr=S.d.div.withConfig({displayName:"ControlsWrapperCard__LoadingDiv",componentId:"sc-1wnweq4-11"})(["color:",";font-size:",";line-height:",";font-weight:",";width:120px;display:flex;justify-content:flex-end;"],e=>e.theme.TEXT_TERTIARY,P.d.SMALL,P.d.LINE_HEIGHT,P.d.SEMIBOLD),pr=({isCanvasModeDisabled:e,isLoading:t,getActiveSlideAtSeekPosition:i,isReplay:o,isLiveDVR:r,videoStreamManager:s,volumeMuteHandler:l,setVolumeLevel:c,onMouseEnterControls:d,onMouseLeaveControls:p,fullScreenHandler:u})=>{const h=Object(C.d)(),g=Object(n.useState)(0),E=m()(g,2),b=(E[0],E[1]),v=Object(C.e)(e=>e.getIn(["videoPlayControls","showVolumeSlider"])),S=Object(C.e)(e=>e.getIn(["videoPlayControls","volume"])),I=Object(C.e)(e=>e.getIn(["videoPlayControls","isVideoLoading"])),y=Object(C.e)(e=>e.getIn(["videoPlayControls","isSettingsPanelOpen"])),_=Object(C.e)(e=>e.getIn(["videoPlayControls","isSeeking"])),O=Object(C.e)(e=>e.getIn(["videoPlayControls","videoCurrentTime"])),w=Object(C.e)(e=>e.getIn(["videoPlayControls","videoDuration"])),T=Object(C.e)(e=>e.getIn(["videoPlayControls","isVolumeShortCutUsed"])),A=Object(C.e)(e=>e.getIn(["videoPlayControls","isRewindShortCutUsed"])),P=Object(C.e)(e=>e.getIn(["videoPlayControls","isForwardShortCutUsed"])),x=Object(C.e)(e=>e.getIn(["poll","isPollActive"])),R=Object(C.e)(e=>e.getIn(["app","isJanusClass"])),D=Object(C.e)(e=>e.getIn(["app","isModerator"])),N=Object(C.e)(e=>e.getIn(["app","isMultiEduClass"])),j=Object(C.e)(e=>e.getIn(["app","programmeDetails"])),k=Object(n.useState)(!1),L=m()(k,2),M=L[0],G=L[1],U=Object(C.e)(e=>e.getIn(["feedback","isFeedbackShownOnBackClick"])),H=Object(C.e)(e=>e.getIn(["app","lessonData"])),V=Object(C.e)(e=>e.getIn(["videoPlayControls","isBackClicked"])),F=o&&j&&j.nextItemsLength>0,W=H.isReviewed;let z=null;const q=Object(n.useCallback)(()=>{U||W?V||h(Object(B.e)(!0)):h(Object(ji.e)(!0))},[W,U,V]);Object(n.useEffect)(()=>{U&&h(o?Object(B.p)(!0):Object(B.i)(!0))},[U]),Object(n.useEffect)(()=>{let e;return I?e=setTimeout(()=>{G(!0)},700):G(!1),()=>{e&&clearTimeout(e)}},[I]);const Y=e=>{let t;t=e?O+10>=w?w:O+10:O<=10?0:O-10,h(Object(B.w)(t))},X=e=>{b(e)},K=()=>a.a.createElement(no,{isLiveDVR:r}),Z=()=>{v||(clearTimeout(z),z=setTimeout(()=>{h(Object(B.A)(!0))},100))},J=()=>{clearTimeout(z),h(Object(B.A)(!1))},Q=Object(n.useCallback)(e=>{d(),e.stopPropagation()},[]),$=Object(n.useCallback)(e=>{p()},[]),ee=Object(n.useCallback)(e=>{e.stopPropagation()},[]),te=()=>a.a.createElement(co,{volume:S,setVolumeLevel:c});return a.a.createElement($o,{onMouseEnter:Q,onMouseLeave:$,onMouseMove:ee,onTouchStart:Q},a.a.createElement(tr,{hide:T},a.a.createElement(or,{hide:T||P||A},a.a.createElement(Fn,{handleClick:q})),a.a.createElement(ia,{moveAheadOrBack:Y,disable:D&&N}),a.a.createElement(la,{isReplay:o,isLiveDVR:r,disable:D&&N}),a.a.createElement(oa,{moveAheadOrBack:Y,isReplay:o,isLiveDVR:r})),a.a.createElement(er,{hide:T},(()=>{const n=o||!R||r?O:w,s=!(D&&N)&&!t;return a.a.createElement(Xa,{isCanvasModeDisabled:e,totalTime:w,currentTime:n,isSeekable:s,childClasses:Qo,onIntent:X,getActiveSlideAtSeekPosition:i,isReplay:o,isLiveDVR:r,isSeeking:_,isPollActive:x})})(),o?M?a.a.createElement(dr,null,"LOADING..."):a.a.createElement(nr,null,a.a.createElement(sr,null,Object(f.C)(O).replace(/ /g,"")),a.a.createElement(cr,null,"/"),a.a.createElement(lr,null,Object(f.C)(w).replace(/ /g,""))):K()),a.a.createElement(ir,{width:F?"200px":"160px"},(()=>{if(F)return a.a.createElement(Jo,null)})(),a.a.createElement(rr,{isSliderShowing:v,onMouseEnter:Z,onMouseMove:Z,onMouseLeave:J,hide:A||P},a.a.createElement(oo,{volumeMuteHandler:l}),te()),a.a.createElement(ar,{lowerOpacity:A||P,hide:v||T},a.a.createElement(Ja,null),a.a.createElement(Yo,{isVolumeShortCutUsed:T,isSettingsPanelOpen:y,videoStreamManager:s}),a.a.createElement($a,{fullScreenHandler:u}))))};var ur=a.a.memo(pr);const hr=S.d.div.withConfig({displayName:"VideoPlayControls__Wrapper",componentId:"sc-1kk4b0e-0"})(["position:relative;flex:1;height:100%;transition:transform 0.4s;",";"],e=>{if(e.hide)return Object(S.c)(["transform:translateY(88px);"])}),mr=S.d.div.withConfig({displayName:"VideoPlayControls__AnimatedWrapper",componentId:"sc-1kk4b0e-1"})(["box-sizing:border-box;display:flex;width:100%;height:88px;align-items:center;flex-direction:column;transition:all 0.4s;position:absolute;bottom:",";transition-delay:",";"],({isShown:e})=>"".concat(e?0:-88,"px"),({delay:e})=>e);class gr extends a.a.PureComponent{constructor(e){super(e),b()(this,"handleMouseHoverChange",()=>{this.props.isMouseHoverActive?this.showControls():this.hideControls()}),b()(this,"showControls",()=>{clearTimeout(this.lessonCardFadeTimer),this.setState({showControls:!0,fadeLessonCard:!1})}),b()(this,"hideControls",()=>{this.setState({showControls:!1},()=>{this.startLessonCardFadeTimer()})}),b()(this,"fadeLessonCard",()=>{this.setState({fadeLessonCard:!0})}),b()(this,"startLessonCardFadeTimer",()=>{clearTimeout(this.lessonCardFadeTimer),this.lessonCardFadeTimer=setTimeout(()=>{this.fadeLessonCard()},2e3)}),b()(this,"handleKeyDown",e=>{this.props.recordedVideo&&!this.props.isEducator&&(e.target&&"suggestionsInput"===e.target.dataset.input||(this.props.isFeedbackShownOnBackClick&&!this.isAnyTextfieldFocused()&&e.preventDefault(),e.ctrlKey||e.metaKey||this.props.isLearnerSlideModeActive||this.isAnyTextfieldFocused()||this.props.hasReplayEnded||this.props.isFeedbackShownOnBackClick||(e.preventDefault(),this.props.onMouseLeaveControls(),this.onKeyDown(e))))}),b()(this,"onSpaceBarPressed",()=>{this.props.isModerator&&this.props.isMultiEduClass||(this.props.showPlayButton&&this.props.playLiveVideoAutoplayFail?this.props.playLiveVideoAutoplayFail():this.togglePlay())}),b()(this,"onUpArrowPress",()=>{if((this.props.volume<100&&this.props.volume>=0||100===this.props.volume&&this.props.isMuted)&&!this.props.isRewindShortCutUsed&&!this.props.isForwardShortCutUsed){let e=parseFloat(this.props.volume+5);this.props.isChatFocused||(this.props.setIsVolumeShortcutUsed(!0),this.setVolumeLevel(e)),this.toggleShortCutState(),this.props.setMouseActivity()}}),b()(this,"onLeftArrowPressed",()=>{const e=this.props.isModerator&&this.props.isMultiEduClass;this.props.isVolumeShortCutUsed||this.props.isForwardShortCutUsed||e||(this.props.setIsRewindShortcutUsed(!0),this.props.setIsRewindedByLeftArrow(!0),this.props.setSeekTime(this.props.videoCurrentTime-10),this.toggleShortCutState(),this.props.setMouseActivity())}),b()(this,"onRightArrowPress",()=>{const e=this.props.videoDuration-this.props.videoCurrentTime<=10;!this.props.isReplay&&!this.props.isLiveDVR||this.props.isRewindShortCutUsed||this.props.isVolumeShortCutUsed||e||(this.props.setIsForwardShortcutUsed(!0),this.props.setIsForwardedByRightArrow(!0),this.props.setSeekTime(this.props.videoCurrentTime+10),this.toggleShortCutState(),this.props.setMouseActivity())}),b()(this,"onDownArrowPress",()=>{if(this.props.volume>0&&!this.props.isRewindShortCutUsed&&!this.props.isForwardShortCutUsed){let e=this.props.volume-5;this.props.isChatFocused||(this.props.setIsVolumeShortcutUsed(!0),this.setVolumeLevel(e),this.toggleShortCutState(),this.props.setMouseActivity())}}),b()(this,"isAnyTextfieldFocused",()=>this.props.isChatFocused||this.props.isReportInputFocussed||this.props.isChatReportBlockFocused||this.props.isCreatePollInputFocused),b()(this,"onFkeyPress",()=>{this.props.fullScreenHandler()}),b()(this,"onMkeyPress",()=>{this.volumeMuteHandler()}),b()(this,"volumeMuteHandler",e=>{0===this.props.volume&&this.props.isMuted?this.setVolumeLevel(100):this.props.setMute(!this.props.isMuted,!e)}),b()(this,"setVolumeLevel",e=>{this.props.setMute(e<=0),this.props.setVolumeLevel(e)}),b()(this,"onKkeyPress",()=>{this.props.isModerator&&this.props.isMultiEduClass||this.togglePlay()}),b()(this,"onCkeyPress",()=>{this.props.isPollActive||this.props.setIsChatHidden(!this.props.isChatHidden)}),b()(this,"toggleShortCutState",y()(()=>{this.props.isForwardShortCutUsed&&this.props.setIsForwardShortcutUsed(!1),this.props.isRewindShortCutUsed&&this.props.setIsRewindShortcutUsed(!1),this.props.isVolumeShortCutUsed&&this.props.setIsVolumeShortcutUsed(!1)},1e3)),b()(this,"togglePlay",()=>{this.props.isReplay||this.props.isLiveDVR?this.props.setIsVideoPaused(!this.props.isVideoPaused,!0):this.props.setIsLivePaused(!this.props.isLivePaused,!0)}),b()(this,"renderLessonDetailsCard",()=>{const e=this.state.fadeLessonCard&&!this.props.showOnlyLessonCard;return a.a.createElement(mr,{isShown:!this.shouldShowControls(),id:"lessonDetails"},a.a.createElement($n,{lessonData:this.props.lessonData,fade:e}))}),b()(this,"renderControls",()=>a.a.createElement(mr,{isShown:this.shouldShowControls(),id:"controls"},a.a.createElement(ur,{isCanvasModeDisabled:this.props.isCanvasModeDisabled,isSeekable:!this.props.isLoading,getActiveSlideAtSeekPosition:this.props.getActiveSlideAtSeekPosition,isReplay:this.props.isReplay,isLiveDVR:this.props.isLiveDVR,videoStreamManager:this.props.videoStreamManager,volumeMuteHandler:this.volumeMuteHandler,setVolumeLevel:this.setVolumeLevel,onMouseEnterControls:this.props.onMouseEnterControls,onMouseLeaveControls:this.props.onMouseLeaveControls,fullScreenHandler:this.props.fullScreenHandler}))),this.state={fadeLessonCard:!1,showControls:!1},this.lessonCardFadeTimer=null}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown),this.props.setSuccessfulWatchStarted(!1,!0)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown),this.toggleShortCutState&&this.toggleShortCutState.cancel(),clearTimeout(this.lessonCardFadeTimer)}componentDidUpdate(e){this.props.isMouseHoverActive!=e.isMouseHoverActive&&this.handleMouseHoverChange()}onKeyDown(e){switch(e.key){case"s":case"S":this.props.isReplay&&(this.props.setLearnerSlideModeActive(!0),this.props.setIsVideoPaused(!0));break;case" ":this.onSpaceBarPressed();break;case"ArrowLeft":this.onLeftArrowPressed();break;case"ArrowUp":this.onUpArrowPress();break;case"ArrowRight":this.onRightArrowPress();break;case"ArrowDown":this.onDownArrowPress();break;case"c":case"C":this.onCkeyPress();break;case"f":case"F":this.onFkeyPress();break;case"m":case"M":this.onMkeyPress();break;case"j":case"J":this.onLeftArrowPressed();break;case"k":case"K":this.onKkeyPress();break;case"l":case"L":this.onRightArrowPress()}}hasClassLoaded(){return this.props.isReplay?this.props.isReplayDataProcessed:this.props.isLiveDataProcessed}shouldShowControls(){return!!this.hasClassLoaded()&&((this.props.isVideoPaused||this.props.isLivePaused||this.state.showControls)&&!this.props.showOnlyLessonCard)}render(){return a.a.createElement(hr,{hide:this.props.isPollActive&&!this.props.showSplashScreen||this.props.isSubscriptionCTACardShown},this.renderLessonDetailsCard(),this.renderControls())}}const fr={setSeekTime:B.w,setIsLivePaused:B.i,setIsVideoPaused:B.p,setMute:B.s,setVolumeLevel:B.z,setIsVolumeShortcutUsed:B.q,setIsRewindShortcutUsed:B.l,setIsForwardShortcutUsed:B.g,setIsChatHidden:B.f,setLearnerSlideModeActive:B.r,setSuccessfulWatchStarted:ye.rb,setIsForwardedByRightArrow:B.h,setIsRewindedByLeftArrow:B.m};var Er=Object(C.c)(e=>({isChatFocused:e.getIn(["chat","isChatFocused"]),isLivePaused:e.getIn(["videoPlayControls","isLivePaused"]),isVideoPaused:e.getIn(["videoPlayControls","isVideoPaused"]),isMouseHoverActive:e.getIn(["videoPlayControls","isMouseHoverActive"]),isLearnerSlideModeActive:e.getIn(["videoPlayControls","isLearnerSlideModeActive"]),volume:e.getIn(["videoPlayControls","volume"]),isVolumeShortCutUsed:e.getIn(["videoPlayControls","isVolumeShortCutUsed"]),isRewindShortCutUsed:e.getIn(["videoPlayControls","isRewindShortCutUsed"]),isForwardShortCutUsed:e.getIn(["videoPlayControls","isForwardShortCutUsed"]),videoCurrentTime:e.getIn(["videoPlayControls","videoCurrentTime"]),isPollActive:e.getIn(["poll","isPollActive"]),isLiveDVR:e.getIn(["videoPlayControls","isLiveDVR"]),isMuted:e.getIn(["videoPlayControls","isMuted"]),isReportInputFocussed:e.getIn(["videoPlayControls","isReportInputFocussed"]),isChatReportBlockFocused:e.getIn(["chat","isChatReportBlockFocused"]),isChatHidden:e.getIn(["videoPlayControls","isChatHidden"]),isFullScreenEnabled:e.getIn(["videoPlayControls","isFullScreenEnabled"]),isModerator:e.getIn(["app","isModerator"]),isMultiEduClass:e.getIn(["app","isMultiEduClass"]),isSubscriptionCTACardShown:e.getIn(["subscription","isSubscriptionCTACardShown"]),hasReplayEnded:e.getIn(["app","hasReplayEnded"]),videoDuration:e.getIn(["videoPlayControls","videoDuration"]),videoCurrentTime:e.getIn(["videoPlayControls","videoCurrentTime"]),isFeedbackShownOnBackClick:e.getIn(["feedback","isFeedbackShownOnBackClick"]),isCreatePollInputFocused:e.getIn(["poll","isCreatePollInputFocused"]),isReplayDataProcessed:e.getIn(["app","isReplayDataProcessed"]),isLiveDataProcessed:e.getIn(["app","isLiveDataProcessed"]),showSplashScreen:e.getIn(["app","showSplashScreen"])}),fr)(gr),br=i("6HPj");const Cr=S.d.div.withConfig({displayName:"Timer__TimerText",componentId:"i2rq57-0"})(["font-size:",";color:",";line-height:",";width:56px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:",";"],P.d.SMALL,({theme:e,endClassAlertActive:t})=>t?e.RED:e.TEXT_PRIMARY,P.d.LINE_HEIGHT,P.d.SEMIBOLD),vr=a.a.memo(({shouldStart:e,startedAt:t,showSpaces:i,duration:o,triggerEndClassAlert:r,endClassAlertActive:s,showSplashScreen:l})=>{const c=Object(C.d)(),d=Object(n.useState)(0),p=m()(d,2),u=p[0],h=p[1];let g=!1;const E=Object(C.e)(e=>e.getIn(["app","isExtendClassModalOpen"])),b=Object(C.e)(e=>e.getIn(["app","isEndClassButtonClicked"])),v=Object(C.e)(e=>e.getIn(["app","isLocal"]));return Object(n.useEffect)(()=>{u>=o-H.I&&!g&&(g=!0,r())},[u]),Object(n.useEffect)(()=>{u!==o||l?u>o+H.dc&&!l&&!E&&!b&&(v||c(Object(ye.J)(!0))):c(Object(ye.N)(H.Z.TIME_IS_UP,!1,3e5))},[u]),Object(n.useEffect)(()=>{let i;return t&&e&&(h(Math.round(((new Date).getTime()-t.getTime())/1e3)),i=setInterval(()=>{h(e=>e+1)},1e3)),()=>clearInterval(i)},[e,t]),a.a.createElement(Cr,{endClassAlertActive:s},Object(f.C)(u,i))});vr.propTypes={shouldStart:U.a.bool.isRequired,startedAt:U.a.object,showSpaces:U.a.bool.isRequired,duration:U.a.number.isRequired,triggerEndClassAlert:U.a.func.isRequired,endClassAlertActive:U.a.bool.isRequired},vr.defaultProps={shouldStart:!0,showSpaces:!0,duration:0,triggerEndClassAlert:()=>{},endClassAlertActive:!1};var Sr=vr,Ir=i("y/cE");const yr=S.d.span.withConfig({displayName:"countdown__CoundownText",componentId:"buibo8-0"})(["color:",";"],({theme:e})=>e.RED);var _r=a.a.memo(({countdownExpiryCallback:e})=>{const t=Object(Zi.a)(H.X,0);return Object(n.useEffect)(()=>{0===t&&e()},[t]),a.a.createElement(yr,null," paused in ".concat(t,"s"))});const Or=S.d.div.withConfig({displayName:"ExtendByTime__Wrapper",componentId:"sc-1h9u601-0"})(["display:flex;border:1px solid ",";box-sizing:border-box;border-radius:",";height:",";width:",";justify-content:center;align-items:center;margin-bottom:",";cursor:pointer;border:",";"],({theme:e})=>e.BORDER,P.c.SPACING_2B,({height:e})=>e,({width:e})=>e,P.c.SPACING_2B,({isSelected:e,theme:t})=>"1px solid ".concat(e?t.TEXT_PRIMARY:t.BORDER));var wr=Object(S.f)(({option:e,handleOnclick:t,selectedIndex:i,index:n,isUsedInModal:o,height:r,width:s})=>a.a.createElement(Or,{onClick:e=>{e&&e.preventDefault(),e&&e.stopPropagation(),t&&t(n)},isSelected:i===n,height:r,width:s},a.a.createElement(ee.k,null,o?"".concat(e," mins"):"Extend by ".concat(e," mins"))));S.d.div.withConfig({displayName:"ExtendClassModal__Wrapper",componentId:"qn6ti7-0"})(["display:flex;flex-direction:column;"]);const Tr=S.d.div.withConfig({displayName:"ExtendClassModal__ModalWrapper",componentId:"qn6ti7-1"})(["padding:40px 48px;height:100%;display:flex;flex-direction:column;align-items:center;& > p{text-align:center;}"]),Ar=S.d.div.withConfig({displayName:"ExtendClassModal__ButtonWrapper",componentId:"qn6ti7-2"})(["display:flex;"]),Pr=S.d.div.withConfig({displayName:"ExtendClassModal__ActionButtonWrapper",componentId:"qn6ti7-3"})(["opacity:",";pointer-events:",";display:block;"],({disabled:e})=>e?"0.3":"1",({disabled:e})=>e?"none":"auto"),xr=Object(S.d)(ee.b).withConfig({displayName:"ExtendClassModal__CustomButton",componentId:"qn6ti7-4"})(["height:48px;width:176px;margin:",";"],({margin:e})=>e),Rr=S.d.div.withConfig({displayName:"ExtendClassModal__ContentWrapper",componentId:"qn6ti7-5"})(["display:flex;text-align:center;width:",";margin:0 0 "," 0;>:nth-child(2){margin:",";}"],({custom:e})=>e?"initial":"248px",P.c.SPACING_8B,({custom:e})=>e?"0 ".concat(P.c.SPACING_4B):"initial");var Dr=e=>{const t=ee.r,i=xr,o=ee.h,r=ee.o,s=Object(C.e)(e=>e.getIn(["videoPlayControls","isChatHidden"])),l=Object(C.e)(e=>e.getIn(["app","accessToken"])),c=Object(C.e)(e=>e.getIn(["app","apiHost"])),d=Object(C.e)(e=>e.getIn(["app","classId"])),p=Object(C.e)(e=>e.getIn(["app","isExtendClassModalOpen"])),u=Object(C.e)(e=>e.getIn(["app","isEndClassButtonClicked"])),h=Object(C.e)(e=>e.getIn(["app","isClassPaused"])),g=Object(n.useState)(!1),f=m()(g,2),E=f[0],b=f[1],v=Object(n.useState)(0),S=m()(v,2),I=S[0],y=S[1],_=Object(C.d)(),O=Object(n.useCallback)(()=>{p&&(_(Object(ye.J)(!1)),_(Object(ye.F)(!0))),_(Object(ye.H)(!0))},[p,u]),w=Object(n.useCallback)(()=>{E?I>0&&_(Object(ye.r)(c,l,d,H.N[I-1])):b(!0)},[E,I]),T=Object(n.useCallback)(()=>{_(Object(ye.cb)(!0))},[]);Object(n.useEffect)(()=>{p||(b(!1),y(0)),h&&!p&&_(Object(ye.cb)(!1))},[p]);const A=e=>{y(e)},x="0 0 ".concat(E?P.c.SPACING_5B:P.c.SPACING_2B," 0");return a.a.createElement(n.Fragment,null,a.a.createElement(t,{open:e.isOpen,paperWidth:"560px",paperHeight:"239px",contentPositionVertical:"flex-end",animation:"slide",disableEscapeKeyDown:!1,onClose:()=>{e.onCloseModal&&e.onCloseModal()},width:s?"100%":"75%"},a.a.createElement(Tr,null,a.a.createElement(n.Fragment,null,a.a.createElement(o,{fontWeight:P.d.BOLD,lineHeight:P.d.LINE_HEIGHT_MIN,margin:x},E?H.M.EXTEND_CLASS_HEADING:H.M.TIME_LIMIT_HEADING),a.a.createElement(Rr,{custom:E},E?H.N.map((e,t)=>a.a.createElement(wr,{option:e,handleOnclick:A,selectedIndex:I,index:t+1,isUsedInModal:!0,height:"32px",width:"110px"})):a.a.createElement(r,{fontSize:P.d.SMALL,margin:"initial"},H.M.CLASS_PAUSED_DES,a.a.createElement(_r,{countdownExpiryCallback:T}))),a.a.createElement(Ar,null,a.a.createElement(i,{variant:"hollow",action:"destructive",isEducator:!0,fontWeight:P.d.BOLD,fontSize:P.d.LARGE,onClick:O,margin:"0 ".concat(P.c.SPACING_4B," 0 0")},H.M.END_CLASS_BUTTON),a.a.createElement(Pr,{disabled:0===I&&E},a.a.createElement(i,{variant:"filled",isEducator:!0,fontWeight:P.d.BOLD,fontSize:P.d.LARGE,onClick:w},E?H.M.CONTINUE:H.M.EXTEND_CLASS)))))))},Nr=S.d.div.withConfig({displayName:"Tab__Wrapper",componentId:"ezl9jo-0"})(["display:flex;background:",";color:",";font-size:",";line-height:",";border:",";margin-bottom:",";cursor:pointer;border-radius:",";width:156px;height:42px;align-items:center;padding-left:",";box-sizing:border-box;"],(function(e){return e.theme.BG_MAIN}),(function(e){var t=e.isSelected,i=e.theme;return"".concat(t?i.BLUE:i.TEXT_PRIMARY)}),P.d.SMALL,P.d.LINE_HEIGHT_MAX,(function(e){var t=e.isSelected,i=e.theme;return"1px solid ".concat(t?i.BLUE:i.BORDER)}),P.c.SPACING_5B,P.c.SPACING_2B,P.c.SPACING_4B),jr=function(e){var t=e.option,i=e.onClickHandler,n=e.activeTab;return a.a.createElement(Nr,{onClick:function(){i(t)},isSelected:n==t},t)},kr=S.d.div.withConfig({displayName:"Tabs__TabsWrappwer",componentId:"sc-1i0ljjk-0"})(["display:flex;flex-direction:column;width:30%;height:100%;padding-left:",";padding-top:",";box-shadow:0px 0px 32px ",";box-sizing:border-box;"],P.c.SPACING_6B,P.c.SPACING_6B,(function(e){return e.theme.SHADOW})),Lr=S.d.span.withConfig({displayName:"Tabs__StyledImage",componentId:"sc-1i0ljjk-1"})(["cursor:pointer;"]),Br=function(e){var t=e.tabs,i=e.onClickHandler,n=e.onClose,o=e.activeTab,r=Object(C.e)((function(e){return e.getIn(["app","isRoundVideoSupported"])})),s=Object(C.e)((function(e){return e.getIn(["app","isChromaEnabled"])}));return a.a.createElement(kr,null,a.a.createElement(Lr,{onClick:n},a.a.createElement(Ve.u,{height:24,width:24})),a.a.createElement(ee.i,{margin:"".concat(P.c.SPACING_6B," 0")},H.k.CLASS_SETTINGS_TABS_HEADER),t.map((function(e,t){return e!=H.Xb.VIDEO_MODE||r||s?a.a.createElement(jr,{option:e,key:t,activeTab:o,onClickHandler:i}):void 0})))};const Mr=Object(_.e)(),Gr=Mr.getOrCreate("TOGGLE_CHAT"),Ur=Mr.getOrCreate("TOGGLE_EMOJI"),Hr=Mr.getOrCreate("TOGGLE_QUESTION"),Vr=Mr.getOrCreate("PUBLISHER_TIMELINE"),Fr=S.d.div.withConfig({displayName:"ToggleFeature__ToggleFeatureWrapper",componentId:"ff6afu-0"})(["display:flex;flex-direction:column;"]),Wr=S.d.div.withConfig({displayName:"ToggleFeature__SwitchWrapper",componentId:"ff6afu-1"})(["display:flex;width:96px;position:relative;"]),zr=({feature:e,socketManager:t,showDivider:i})=>{const o=Object(C.d)(),r=Object(C.e)(e=>e.getIn(["chat","isQuestionEnabled"])),s=Object(C.e)(e=>e.getIn(["chat","isChatDisabledByEducator"])),l=Object(C.e)(e=>e.getIn(["app","shouldPredictPoll"])),c=Object(C.e)(e=>e.getIn(["app","classState"])),d=Object(C.e)(e=>e.getIn(["chat","areEmojisEnabled"]));Object(n.useEffect)(()=>(p(Gr),p(Ur),p(Hr),()=>{u(Gr),u(Ur),u(Hr)}),[]);const p=e=>{e.isProfileRunning()||e.start()},u=e=>{e.isProfileRunning()&&e.end()},h=(e,t,i)=>{const n=e.peek();j.f.sendData(t,i,{[j.e.Measure1]:n.dts/1e3}),e.end(),e.reset(),e.start()},m=Object(n.useCallback)(i=>{e.name==H.k.CHAT_SETTINGS_NAME?"off"==i?(t.setClassConfiguration({chatEnabled:!1}),Vr.isProfileRunning()&&j.f.sendData(j.c.CHAT_TOGGLE,"DISABLED",{[j.e.Measure1]:Vr.timeSinceLastCall().dts})):(t.setClassConfiguration({chatEnabled:!0}),Vr.isProfileRunning()&&j.f.sendData(j.c.CHAT_TOGGLE,"ENABLED",{[j.e.Measure1]:Vr.timeSinceLastCall().dts})):e.name==H.k.QUESTIONS_SETTINGS_NAME?10===c&&("off"==i?(t.setClassConfiguration({questionsEnabled:!1}),h(Hr,j.c.QUESTION_TOGGLE,"DISABLED")):(t.setClassConfiguration({questionsEnabled:!0}),h(Hr,j.c.QUESTION_TOGGLE,"ENABLED"))):e.name==H.k.POLL_PREDICTION_SETTINGS_NAME?o("off"==i?Object(ye.ib)(!1):Object(ye.ib)(!0)):e.name==H.k.REACTIONS_SETTINGS_NAME&&("off"==i?(t.setClassConfiguration({emojisEnabled:!1}),h(Ur,j.c.EMOJI_TOGGLE,"DISABLED")):(t.setClassConfiguration({emojisEnabled:!0}),h(Ur,j.c.EMOJI_TOGGLE,"ENABLED")))},[t]);return a.a.createElement(Fr,null,a.a.createElement(ee.i,{margin:"0 0 ".concat(P.c.SPACING_1B," 0")},e.name),a.a.createElement(ee.n,{margin:"0 0 ".concat(P.c.SPACING_2B," 0")},e.des),a.a.createElement(Wr,null,a.a.createElement(ee.p,{onChange:m,selected:e.name==H.k.CHAT_SETTINGS_NAME?s?"off":"on":e.name==H.k.QUESTIONS_SETTINGS_NAME?r?"on":"off":e.name==H.k.POLL_PREDICTION_SETTINGS_NAME?l?"on":"off":e.name==H.k.REACTIONS_SETTINGS_NAME?d?"on":"off":void 0,disabled:e.name===H.k.QUESTIONS_SETTINGS_NAME&&10!==c})),(()=>{if(i)return a.a.createElement(ee.f,{margin:"24px 0"})})())};var qr=a.a.memo(zr),Yr=S.d.div.withConfig({displayName:"ChatAndQuestionsSettings__Wrapper",componentId:"hm3qg5-0"})(["display:flex;flex-direction:column;box-sizing:border-box;padding-top:50px;padding-right:48px;width:100%;"]),Xr=[{name:H.k.CHAT_SETTINGS_NAME,des:H.k.CHAT_SETTINGS_DESCRIPTON},{name:H.k.QUESTIONS_SETTINGS_NAME,des:H.k.QUESTIONS_SETTINGS_DESCRIPTON},{name:H.k.REACTIONS_SETTINGS_NAME,des:H.k.REACTIONS_SETTINGS_DESCRIPTON},{name:H.k.POLL_PREDICTION_SETTINGS_NAME,des:H.k.POLL_PREDICTION_SETTINGS_DESCRIPTON}],Kr=function(e){var t=e.socketManager;return a.a.createElement(Yr,null,Xr.map((function(e,i){return a.a.createElement(qr,{key:i,feature:e,index:i,showDivider:i<Xr.length-1,socketManager:t})})))},Zr=i("cVXz"),Jr=i("jjAL"),Qr=i("W7iK");function $r(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=va()(e);if(t){var a=va()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ba()(this,i)}}var es=Array.from({length:8},(function(e,t){return t+1})),ts=Object(S.d)(br.a).withConfig({displayName:"AudioVisualizer__AudioVisualizerWrapper",componentId:"sc-1pn93b4-0"})(["margin-left:",";padding:",";"],P.c.SPACING_4B,P.c.SPACING_2B),is=S.d.div.withConfig({displayName:"AudioVisualizer__AudioCell",componentId:"sc-1pn93b4-1"})(["width:16px;height:8px;border-radius:100px;margin-right:",";background:",";transition:background-color 0.1s linear;&:last-of-type{margin-right:0;}"],P.c.SPACING_1B,(function(e){return e.theme.BG_LIGHT})),ns=function(e){fa()(i,e);var t=$r(i);function i(){var e;return da()(this,i),e=t.call(this),b()(ma()(e),"setStreamWithMicrophone",(function(t){e.microphoneUtil.startMonitoringVolume(t,e.processVolume)})),b()(ma()(e),"processVolume",(function(t){for(var i=8*t,n=0;n<8;++n)e.barsEle[n]&&(e.barsEle[n].style.background="".concat(n<i?e.props.theme.BLUE:e.props.theme.BORDER))})),e.barsEle=[],e.microphoneUtil=new Qr.a,e}return ua()(i,[{key:"componentDidMount",value:function(){var e=this;window.setTimeout((function(){e.setStreamWithMicrophone(e.props.deviceId)}),200)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.deviceId!==this.props.deviceId&&this.setStreamWithMicrophone(e.deviceId)}},{key:"componentWillUnmount",value:function(){this.microphoneUtil.stopMonitoringVolume(),this.microphoneUtil.stopStream()}},{key:"render",value:function(){var e=this;return a.a.createElement(ts,{alignItems:"center"},es.map((function(t,i){return a.a.createElement(is,{key:i,ref:function(t){return e.barsEle[i]=t}})})))}}]),i}(a.a.Component),as=Object(S.f)(ns);const os=S.d.div.withConfig({displayName:"AudioVideoSelector__SelectorWrapper",componentId:"sc-1c7vj43-0"})(["display:flex;flex-direction:column;"]),rs=S.d.div.withConfig({displayName:"AudioVideoSelector__AudioSelector",componentId:"sc-1c7vj43-1"})(["display:flex;flex-direction:column;width:100%;"]),ss=S.d.div.withConfig({displayName:"AudioVideoSelector__VideoSelector",componentId:"sc-1c7vj43-2"})(["display:flex;width:100%;"]),ls=Object(S.d)(Zr.a).withConfig({displayName:"AudioVideoSelector__StyledSelect",componentId:"sc-1c7vj43-3"})(["&.MuiInput-root{font-family:UN_REGULAR;height:45px;::before{content:none;}.MuiSelect-icon{fill:",";}.MuiSelect-root{border:1px solid ",";color:",";box-sizing:border-box;font-size:",";box-shadow:0px 16px 32px ",";border-radius:8px;display:block;text-align:left;width:200px;height:45px;padding:12px;background:",";}.MuiList-root{color:",";background:",";& > .MuiListItem-root{font-size:",";}}::after{content:none;}.Mui-disabled{opacity:0.5;}}"],e=>e.theme.TEXT_PRIMARY,e=>e.theme.BORDER,e=>e.theme.TEXT_PRIMARY,P.d.MEDIUM,e=>e.theme.SHADOW,e=>e.theme.BG_MAIN,e=>e.theme.TEXT_PRIMARY,e=>e.theme.BG_MAIN,P.d.MEDIUM),cs=Object(S.d)(Jr.a).withConfig({displayName:"AudioVideoSelector__StyledMenu",componentId:"sc-1c7vj43-4"})(["&.MuiMenuItem-root{font-family:UN_REGULAR;font-size:",";}"],P.d.MEDIUM),ds=S.d.div.withConfig({displayName:"AudioVideoSelector__AudioMediaWrapper",componentId:"sc-1c7vj43-5"})(["display:flex;margin-top:",";"],P.c.SPACING_4B),ps=S.d.div.withConfig({displayName:"AudioVideoSelector__OtherContainer",componentId:"sc-1c7vj43-6"})(["display:flex;flex-direction:column;margin-right:",";"],P.c.SPACING_7B),us=S.d.video.withConfig({displayName:"AudioVideoSelector__StyledVideo",componentId:"sc-1c7vj43-7"})(["display:flex;width:160px;height:90px;border:1px solid ",";box-sizing:border-box;border-radius:",";"],e=>e.theme.BORDER,P.c.SPACING_2B),hs=S.d.div.withConfig({displayName:"AudioVideoSelector__VideoWrapper",componentId:"sc-1c7vj43-8"})(["display:flex;flex:1;align-items:flex-end;"]);var ms=({devices:e,cameraDeviceId:t,microphoneDeviceId:i,isCanvasModeDisabled:o,isVideoSquare:r,isLoading:s})=>{const l=Object(C.d)(),c=e.filter(e=>"audioinput"===e.kind),d=e.filter(e=>"videoinput"===e.kind),p=Object(n.useRef)(null),u=Object(n.useRef)(null);Object(n.useEffect)(()=>(p.current&&h(),()=>{u.current&&Object(f.Db)(u.current)}),[p,t]);const h=(e=!1)=>{Object(f.o)(!o,t,r,e).then(i=>{const n={video:{deviceId:t?{exact:t}:void 0,width:{exact:i.width},height:{exact:i.height}}};navigator.mediaDevices.getUserMedia(n).then(e=>{Object(f.Db)(u.current),u.current=e,Object(f.d)(p.current,e)}).catch(t=>{console.log("Get user media camera error",t),e||h(!0)})}).catch(e=>{console.log("Get user media camera error",e)})},m=e=>e.map(e=>a.a.createElement(cs,{key:e.deviceId,value:e.deviceId},e.label)).all(),g=e=>{const t=e.target.value;t!=i&&l(Object(ye.Y)(t))},E=e=>{const i=e.target.value;i!=t&&l(Object(ye.n)(i))};return a.a.createElement(os,null,a.a.createElement(rs,null,a.a.createElement(ee.i,{margin:"0 0 ".concat(P.c.SPACING_1B," 0")},H.k.AUDIO_SETTINGS_NAME),a.a.createElement(ee.n,null,H.k.AUDIO_SETTINGS_DESCRIPTON),a.a.createElement(ds,null,a.a.createElement(ls,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:i,onChange:g,disabled:s},m(c)),a.a.createElement(as,{deviceId:i}))),a.a.createElement(ee.f,{margin:"24px 0"}),a.a.createElement(ss,null,a.a.createElement(ps,null,a.a.createElement(ee.i,{margin:"0 0 ".concat(P.c.SPACING_1B," 0")},H.k.VIDEO_SETTINGS_NAME),a.a.createElement(ee.n,{fontSize:P.d.SMALL,fontWeight:P.d.REGULAR,margin:"0 0 ".concat(P.c.SPACING_4B," 0")},H.k.VIDEO_SETTINGS_DESCRIPTON),a.a.createElement(ls,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:t,onChange:E,disabled:s},m(d))),a.a.createElement(hs,null,a.a.createElement(us,{ref:p,autoPlay:!0}))))},gs=S.d.div.withConfig({displayName:"AudioVideoSettings__AudioVideoSettingsWrapper",componentId:"sc-1twct37-0"})(["display:flex;width:100%;flex-direction:column;padding-top:48px;padding-right:40px;box-sizing:border-box;"]),fs=function(){var e=Object(C.e)((function(e){return e.getIn(["app","devices"])})),t=Object(C.e)((function(e){return e.getIn(["app","cameraDeviceId"])})),i=Object(C.e)((function(e){return e.getIn(["app","microphoneDeviceId"])})),n=Object(C.e)((function(e){return e.getIn(["app","isCanvasModeDisabled"])})),o=Object(C.e)((function(e){return e.getIn(["app","useRoundVideo"])})),r=Object(C.e)((function(e){return e.getIn(["app","isLoading"])})),s=Object(C.e)((function(e){return e.getIn(["app","isMultiEduClass"])}));return a.a.createElement(gs,null,a.a.createElement(ms,{devices:e,cameraDeviceId:t,microphoneDeviceId:i,isCanvasModeDisabled:n,isVideoSquare:o||s,isLoading:r}))},Es=S.d.div.withConfig({displayName:"ClickablePill__Wrapper",componentId:"sc-12ur5ar-0"})(["width:80px;height:20px;background:",";border:",";box-sizing:border-box;border-radius:",";font-weight:",";font-size:",";line-height:",";text-transform:uppercase;justify-content:center;align-items:center;display:flex;cursor:pointer;margin-top:16px;color:",";"],(function(e){return e.theme.BG_MAIN}),(function(e){var t=e.isSelected,i=e.theme;return"1px solid ".concat(t?i.BLUE:i.BORDER)}),P.c.SPACING_2B,P.d.BOLD,P.d.EXTRA_SMALL,P.d.LINE_HEIGHT,(function(e){return function(e){e.isScreenModeTabClicked;var t=e.isSelected,i=e.theme;return e.disabled?i.TEXT_SECONDARY:t?i.BLUE:i.TEXT_PRIMARY}(e)})),bs=a.a.memo((function(e){var t=e.option,i=e.optionSelected,n=e.isScreenModeTabClicked,o=e.disabled;return a.a.createElement(Es,{disabled:o,isSelected:i==t.text,isScreenModeTabClicked:n},t.text)})),Cs=bs;bs.propTypes={option:U.a.object.isRequired,isSelected:U.a.string.isRequired,onClickHandler:U.a.func.isRequired,isScreenModeTabClicked:U.a.bool.isRequired},bs.defaultProps={option:{text:""},isSelected:"",disabled:!1,isScreenModeTabClicked:!1,onClickHandler:function(){}};var vs=S.d.div.withConfig({displayName:"OptionCard__OptionCardWrapper",componentId:"gqujah-0"})(["display:flex;flex-direction:column;align-items:center;margin-right:32px;pointer-events:",";cursor:pointer;"],(function(e){return e.disabled?"none":"auto"})),Ss=a.a.memo((function(e){var t=e.option,i=e.optionSelected,n=e.onClickHandler,o=e.isScreenModeTabClicked,r=function(){n(t)};return function(){if(!t.isDisabled)return a.a.createElement(vs,{onClick:r},"rectangle"==t.text?a.a.createElement(Ve.jb,{disabled:t.isDisabled}):"circle"==t.text?a.a.createElement(Ve.t,{disabled:t.isDisabled}):"chroma"==t.text?a.a.createElement(Ve.r,{disabled:t.isDisabled}):void 0,a.a.createElement(Cs,{disabled:t.isDisabled,option:t,optionSelected:i,isScreenModeTabClicked:o}))}()})),Is=i("TM95"),ys=S.d.div.withConfig({displayName:"GreenColorPicker__Wrapper",componentId:"sc-1qrzgoz-0"})(["display:flex;justify-content:space-evenly;width:100%;align-items:center;"]),_s=S.d.div.withConfig({displayName:"GreenColorPicker__SaturationPicker",componentId:"sc-1qrzgoz-1"})(["display:flex;height:74px;width:166px;position:relative;border-radius:4px;overflow:hidden;"]),Os=S.d.div.withConfig({displayName:"GreenColorPicker__SquareColorPicker",componentId:"sc-1qrzgoz-2"})(["width:166px;height:74px;display:flex;flex-wrap:wrap;padding:"," 0;align-items:center;"],P.c.SPACING_1B),ws=S.d.div.withConfig({displayName:"GreenColorPicker__SquareColorUnit",componentId:"sc-1qrzgoz-3"})(["width:21px;height:24px;border-radius:2px;background-color:",";margin-left:",";cursor:pointer;&:nth-of-type(6n + 1){margin-left:",";}transition:all 0.1s ease-in;border:",";box-shadow:",";"],(function(e){return e.color}),P.c.SPACING_2B,P.c.SPACING_0B,(function(e){return e.selected?"1px solid ".concat(e.theme.TEXT_ANTI_PRIMARY):"none"}),(function(e){return e.selected?"0px 0px 0px 2px ".concat(e.theme.TEXT_PRIMARY):"none"})),Ts=a.a.memo((function(e){var t=e.presetColors,i=e.color,n=e.onChange;return a.a.createElement(ys,null,a.a.createElement(Os,null,t.map((function(e){return a.a.createElement(ws,{key:e,color:e,selected:!(e!==i.toUpperCase()),onClick:function(){n(e)}})}))),a.a.createElement(_s,null,a.a.createElement(Is.Saturation,e)))})),As=Object(Is.ColorWrap)(Ts),Ps=i("o2lh");function xs(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}const Rs=new v.a,Ds=["#D6FFDF","#7EFF9A","#80FF9B","#65EF83","#59D474","#50C069","#4DB563","#4AB060","#3D914F","#347D44","#285E34","#1C4325"],Ns=S.d.div.withConfig({displayName:"GreenColorSelector__Wrapper",componentId:"sc-1vhgk3x-0"})(["display:flex;flex-direction:column;width:100%;"]),js=Object(S.d)(ee.b).withConfig({displayName:"GreenColorSelector__StyledButton",componentId:"sc-1vhgk3x-1"})(["width:100px;height:40px;"]),ks=S.d.div.withConfig({displayName:"GreenColorSelector__CameraContainer",componentId:"sc-1vhgk3x-2"})(["display:flex;justify-content:space-evenly;margin-top:20px;"]),Ls=S.d.div.withConfig({displayName:"GreenColorSelector__ActualVideo",componentId:"sc-1vhgk3x-3"})(["display:flex;flex-direction:column;align-items:center;"]),Bs=S.d.div.withConfig({displayName:"GreenColorSelector__WithChromaVideo",componentId:"sc-1vhgk3x-4"})(["display:flex;flex-direction:column;align-items:center;"]),Ms=S.d.div.withConfig({displayName:"GreenColorSelector__SaveButtonWrapper",componentId:"sc-1vhgk3x-5"})(["display:flex;justify-content:space-evenly;margin-top:20px;"]),Gs=S.d.div.withConfig({displayName:"GreenColorSelector__Paragraph",componentId:"sc-1vhgk3x-6"})(["display:flex;width:244px;"]),Us=Object(S.d)(ee.o).withConfig({displayName:"GreenColorSelector__StyledP2",componentId:"sc-1vhgk3x-7"})(["font-weight:",";margin:"," 0 0 0;text-transform:uppercase;font-size:",";line-height:",";"],P.d.BOLD,P.c.SPACING_2B,P.d.EXTRA_SMALL,P.d.LINE_HEIGHT);var Hs=a.a.memo(({isScreenModeTabClicked:e})=>{const t=Object(C.d)(),i=Object(C.e)(e=>e.getIn(["app","selectedGreenColor"])),o=Object(C.e)(e=>e.getIn(["app","cameraDeviceId"])),r=Object(C.e)(e=>e.getIn(["canvas","activeSlide"])),s=Object(C.e)(e=>e.getIn(["app","isEducator"])),l=Object(C.e)(e=>e.getIn(["app","classId"])),c=Object(n.useState)(i),d=m()(c,2),p=d[0],u=d[1],h=Object(n.useState)(!1),g=m()(h,2),E=g[0],v=g[1],S=Object(C.e)(e=>e.getIn(["app","classState"])),I=Object(n.useRef)(null),y=Object(n.useRef)(null),_=Object(n.useRef)(null);Object(n.useEffect)(()=>{O()},[o]),Object(n.useEffect)(()=>(i&&w(i),i||10!==S||v(!0),()=>{I.current&&(I.current.stop(),I.current.destroy()),y.current&&(y.current=null),_.current&&Object(f.Db)(_.current)}),[]);const O=(e=!1)=>{Object(f.o)(!0,o,!1,e).then(t=>{let i={video:{deviceId:o?{exact:o}:void 0,width:{exact:t.width},height:{exact:t.height}}};navigator.mediaDevices.getUserMedia(i).then(e=>{Object(f.Db)(_.current),_.current=e;let t=document.getElementById("colorSelectorVideo");Object(f.d)(t,e),t.muted=!0,t.play()}).catch(t=>{e||O(!0),console.log("Get user media green colour error",t)})}).catch(e=>{console.log("Get user media green colour error",e)})},w=e=>{if(I.current)return I.current.stop(),e&&(y.current.screen=Object(f.t)(e)),void I.current.go();const t=new window.Seriously;let i=t.source("#colorSelectorVideo"),n=t.target("#colorSelectorCanvas");var a=t.effect("chroma");a.screen=Object(f.t)(e),a.source=i,y.current=a;var o=t.transform("reformat");o.source=a,o.height=94,o.width=166,o.mode="cover",n.source=o,t.go(),I.current=t},T=e=>{const i=new Date;i.setDate(i.getDate()+1);const n="color"+l;Rs.set(n,e,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?xs(Object(i),!0).forEach((function(t){b()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):xs(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({expires:i},Object(f.A)())),t(Object(ye.gb)(e))},A=()=>{p&&(T(p),v(!0))};return a.a.createElement(Ns,null,a.a.createElement(As,{onChange:e=>{u(new Ps.a(e)),v(!1)},onChangeComplete:i=>{e||(T(i),t(Object(ye.L)(!0))),w(new Ps.a(i))},presetColors:Ds,color:p?p.hex:"#008000"}),a.a.createElement(ks,null,a.a.createElement(Ls,null,a.a.createElement("video",{id:"colorSelectorVideo",height:"94",width:"166",disablePictureInPicture:!0}),a.a.createElement(Us,null,H.k.ACTUAL_VIDEO)),a.a.createElement(Bs,null,a.a.createElement("canvas",{id:"colorSelectorCanvas",height:"94",width:"166",style:{background:Object(f.bb)(r)}}),a.a.createElement(Us,null,H.k.WITH_CHROMA))),(()=>{if(e)return a.a.createElement(Ms,null,a.a.createElement(Gs,null,a.a.createElement(ee.n,null,H.k.SAVE_BUTTON_MESSAGE)),a.a.createElement(js,{variant:E?"hollow":"filled",onClick:A,isEducator:s},E&&i?H.d.SAVED:H.d.SAVE))})())}),Vs=i("tn5L");const Fs=S.d.div.withConfig({displayName:"OnboardingContent__Container",componentId:"sc-1qmq8nh-0"})(["display:flex;flex-direction:column;justify-content:space-between;background-color:",";height:100%;width:100%;"],({theme:e})=>e.BODY_BG),Ws=S.d.div.withConfig({displayName:"OnboardingContent__HeaderWrapper",componentId:"sc-1qmq8nh-1"})(["display:flex;flex-direction:column;padding:",";"],({padding:e})=>null!==e&&void 0!==e?e:"".concat(P.c.SPACING_4B," ").concat(P.c.SPACING_6B)),zs=S.d.div.withConfig({displayName:"OnboardingContent__FooterWrapper",componentId:"sc-1qmq8nh-2"})(["display:flex;justify-content:space-between;align-items:center;background-color:",";box-shadow:"," "," "," ",";width:100%;min-height:",";height:",";padding:"," ",";z-index:1;"],({theme:e})=>e.BG_MAIN,P.c.SPACING_0B,P.c.SPACING_0B,P.c.SPACING_8B,({theme:e})=>e.SHADOW,P.c.SPACING_16B,P.c.SPACING_16B,P.c.SPACING_0B,P.c.SPACING_6B),qs=S.d.div.withConfig({displayName:"OnboardingContent__DummyDiv",componentId:"sc-1qmq8nh-3"})(["width:100px;"]),Ys=Object(S.d)(ee.i).withConfig({displayName:"OnboardingContent__TitleText",componentId:"sc-1qmq8nh-4"})(["margin-top:",";"],P.c.SPACING_4B),Xs=Object(S.d)(ee.n).withConfig({displayName:"OnboardingContent__SubtitleText",componentId:"sc-1qmq8nh-5"})(["margin-top:",";width:324px;"],P.c.SPACING_1B),Ks=S.d.div.withConfig({displayName:"OnboardingContent__ScreenDisplayWrapper",componentId:"sc-1qmq8nh-6"})(["display:flex;"]),Zs=Object(S.d)(ee.j).withConfig({displayName:"OnboardingContent__GreyText",componentId:"sc-1qmq8nh-7"})(["color:",";margin-left:",";"],({theme:e})=>e.TEXT_TERTIARY,P.c.SPACING_2),Js=Object(S.d)(ee.b).withConfig({displayName:"OnboardingContent__StyledButton",componentId:"sc-1qmq8nh-8"})(["width:100px;height:",";"],P.c.SPACING_10B),Qs=S.d.div.withConfig({displayName:"OnboardingContent__HeaderContainer",componentId:"sc-1qmq8nh-9"})(["display:flex;justify-content:space-between;align-items:center;"]);var $s=a.a.memo(({header:e,body:t,footer:i})=>{const n=Object(C.e)(e=>e.getIn(["app","isEducator"]));return a.a.createElement(Fs,null,(()=>{return"function"===typeof e?e():a.a.createElement(Ws,{padding:e.padding},a.a.createElement(Qs,null,(t=e.title,a.a.createElement(Ys,null,t)),e.isLiveSupportTouchpointHidden?null:a.a.createElement(Vs.a,null)),(e=>{if(e)return a.a.createElement(Xs,null,e)})(e.subtitle));var t})(),t(),"function"===typeof i?i():i?a.a.createElement(zs,null,a.a.createElement(qs,null),(e=>{const t=e.displayScreenNumber,i=void 0===t||t,n=e.currentScreen,o=e.totalScreens;if(i&&n&&o)return a.a.createElement(Ks,null,a.a.createElement(ee.j,null,n),a.a.createElement(Zs,null,"/"),a.a.createElement(Zs,null,o))})(i),(e=>{const t=e.text,i=e.onClick,o=e.disabled,r=e.variant;return a.a.createElement(Js,{onClick:i,isEducator:n,variant:o?"disabled":r},t)})(i.primaryButton)):void 0)});const el=S.d.div.withConfig({displayName:"ScreenSelector__ScreenSelectorWrapper",componentId:"r3rsxf-0"})(["padding-top:",";padding-left:",";width:100%;height:100%;align-items:center;display:flex;flex-direction:column;background:",";"],({isScreenModeTabClicked:e})=>e?P.c.SPACING_8B:0,({isScreenModeTabClicked:e})=>e?"unset":0,({theme:e})=>e.BODY_BG),tl=S.d.div.withConfig({displayName:"ScreenSelector__OptionWrapper",componentId:"r3rsxf-1"})(["display:flex;width:100%;justify-content:",";padding:",";box-sizing:border-box;"],({isScreenModeTabClicked:e})=>e?"unset":"space-evenly",({isScreenModeTabClicked:e})=>e?"".concat(P.c.SPACING_6B," ").concat(P.c.SPACING_0B," ").concat(P.c.SPACING_8B," ").concat(P.c.SPACING_0B):"".concat(P.c.SPACING_3B," ").concat(P.c.SPACING_0B," ").concat(P.c.SPACING_6B," ").concat(P.c.SPACING_6B)),il=S.d.div.withConfig({displayName:"ScreenSelector__BodyContainer",componentId:"r3rsxf-2"})(["display:flex;flex-direction:column;align-items:center;width:100%;flex-grow:1;"]),nl=()=>{};var al=({isScreenModeTabClicked:e,isDescriptionHidden:t,primaryButtonText:i="",onPrimaryButtonClick:o=nl,currentScreen:r,totalScreens:s,displayScreenNumber:l=!0})=>{const c=Object(C.e)(e=>e.getIn(["app","useRoundVideo"])),d=Object(C.e)(e=>e.getIn(["app","useGreenScreen"])),p=Object(C.e)(e=>e.getIn(["app","isRoundVideoSupported"])),u=Object(C.e)(e=>e.getIn(["app","isChromaEnabled"])),h=Object(C.e)(e=>e.getIn(["app","classState"])),m=Object(C.e)(e=>e.getIn(["app","isGreenColorSelected"])),g=Object(C.e)(e=>e.getIn(["app","selectedGreenColor"])),f=Object(C.d)(),E=[{text:"rectangle",isDisabled:!(10!=h||!c&&!d)},{text:"circle",isDisabled:0==h?!p:!c},{text:"chroma",isDisabled:0==h?!u:!d}],b=(e,t)=>{j.f.sendData(e,t)},v=Object(n.useCallback)(e=>{"circle"==e.text?(b(j.c.VIDEO_MODE,"circular"),f(Object(ye.db)(!0))):"chroma"==e.text?(b(j.c.VIDEO_MODE,"chroma"),f(Object(ye.xb)(!0))):(b(j.c.VIDEO_MODE,"rectangular"),f(Object(ye.bb)()))},[]),S=Object(n.useMemo)(()=>({title:H.C.SCREEN_MODE_SELECTION_HEADING,subtitle:t?null:H.C.SCREEN_MODE_SELECTION_DESCRIPTION,padding:e?P.c.SPACING_0B:null,isLiveSupportTouchpointHidden:!!e}),[t,e]),I=()=>a.a.createElement(il,null,a.a.createElement(tl,{isScreenModeTabClicked:e},E.map((t,i)=>a.a.createElement(Ss,{option:t,key:i,optionSelected:c||d?c&&!d?"circle":!c&&d||c&&d?"chroma":void 0:"rectangle",onClickHandler:v,isScreenModeTabClicked:e}))),(()=>{if(!c&&d)return a.a.createElement(Hs,{isScreenModeTabClicked:e})})()),y=Object(n.useMemo)(()=>{if(e)return null;return{primaryButton:{text:i,onClick:o,disabled:d&&!c&&!m&&!g},currentScreen:r,totalScreens:s,displayScreenNumber:l}},[o,i,r,s,e,l,d,c,m,g]);return a.a.createElement(el,{isScreenModeTabClicked:e},a.a.createElement($s,{header:S,body:I,footer:y}))},ol=S.d.div.withConfig({displayName:"ShortcutCell__ShortcutCellWrapper",componentId:"kweczy-0"})(["display:flex;width:190px;min-height:46px;border-radius:6px;align-items:center;background:",";border:1px solid ",";padding:"," ",";"],(function(e){return e.theme.BG_MAIN}),(function(e){return e.theme.BORDER}),P.c.SPACING_3B,P.c.SPACING_4B),rl=S.d.div.withConfig({displayName:"ShortcutCell__TextWrapper",componentId:"kweczy-1"})([""]),sl=S.d.div.withConfig({displayName:"ShortcutCell__ShortcutKeyPill",componentId:"kweczy-2"})(["display:flex;min-width:73px;margin-left:auto;align-items:center;justify-content:center;min-height:22px;border-radius:4px;font-size:",";padding:0 ",";color:",";background:",";"],P.d.SMALL,P.c.SPACING_2B,(function(e){return e.theme.BLUE}),(function(e){return e.theme.BLUE_LIGHT})),ll=function(e){var t=e.data;return a.a.createElement(ol,null,a.a.createElement(rl,null,a.a.createElement(ee.j,{fontWeight:P.d.REGULAR},t.label),a.a.createElement(ee.k,{fontWeight:P.d.REGULAR},t.subLabel)),a.a.createElement(sl,null,t.keys.reduce((function(e,t,i,n){return a.a.createElement("span",null,e," + ",i===n.length-1?a.a.createElement("b",null,t):t)}))))};const cl=S.d.div.withConfig({displayName:"Shortcuts__ShortCutsWrapper",componentId:"jb4vff-0"})(["padding-top:50px;padding-right:40px;width:100%;"]);var dl=()=>(Object(n.useEffect)(()=>{j.f.sendData(j.c.SHORTCUT_LIST_VIEW)},[]),a.a.createElement(cl,null,a.a.createElement(ee.i,{margin:"0 0 ".concat(P.c.SPACING_6B," 0")},H.k.SHORTCUTS_HEADER),a.a.createElement(ee.g,null,H.E.map(e=>a.a.createElement(ll,{data:e}))))),pl=S.d.div.withConfig({displayName:"ClassSettingsBody__Wrapper",componentId:"vhvl0e-0"})(["display:flex;width:70%;box-sizing:border-box;padding-left:40px;"]),ul=function(e){var t=e.activeTab,i=(e.janusWrapper,e.socketManager);return a.a.createElement(pl,null,t===H.Xb.AUDIO_VIDEO?a.a.createElement(fs,null):t===H.Xb.CHAT_POLL_CONTROLS?a.a.createElement(Kr,{socketManager:i}):t===H.Xb.VIDEO_MODE?a.a.createElement(al,{isScreenModeTabClicked:!0,isDescriptionHidden:!0,type:H.D.VIDEO_MODE}):t===H.Xb.SHORTCUTS?a.a.createElement(dl,null):void 0)},hl=[H.Xb.AUDIO_VIDEO,H.Xb.VIDEO_MODE,H.Xb.CHAT_POLL_CONTROLS,H.Xb.SHORTCUTS],ml=S.d.div.withConfig({displayName:"ClassSettings__ClassSettingsWrapper",componentId:"sc-102omz4-0"})(["width:100%;height:100%;display:flex;"]),gl=function(e){var t=e.janusWrapper,i=e.socketManager,o=Object(n.useState)(H.Xb.AUDIO_VIDEO),r=m()(o,2),s=r[0],l=r[1],c=Object(C.e)((function(e){return e.getIn(["app","isClassSettingsModalOpened"])})),d=Object(C.e)((function(e){return e.getIn(["app","classSettingsActiveTab"])})),p=Object(C.e)((function(e){return e.getIn(["app","selectedGreenColor"])})),u=Object(C.e)((function(e){return e.getIn(["app","classState"])})),h=Object(C.e)((function(e){return e.getIn(["app","useGreenScreen"])})),g=Object(C.e)((function(e){return e.getIn(["videoPlayControls","isChatHidden"])})),f=Object(C.e)((function(e){return e.getIn(["app","isMultiEduClass"])})),E=Object(C.e)((function(e){return e.getIn(["app","isModerator"])})),b=Object(C.e)((function(e){return e.getIn(["app","isEducator"])})),v=Object(C.d)(),S=function(){h&&!p&&10==u&&b||v(Object(ye.s)(!1))};Object(n.useEffect)((function(){d&&l(d)}),[d]);return a.a.createElement(ee.r,{open:c,paperWidth:"675px",paperHeight:"545px",animate:"slide",disableEscapeKeyDown:!1,onClose:S,width:g?"100%":"75%"},a.a.createElement(ml,null,a.a.createElement(Br,{tabs:b?hl:f&&E?hl.filter((function(e){return e==H.Xb.AUDIO_VIDEO})):void 0,activeTab:s,onClickHandler:function(e){l(e)},onClose:S}),a.a.createElement(ul,{activeTab:s,janusWrapper:t,socketManager:i})))},fl=Object(S.e)(["0%{opacity:0;transform:translateY(-50px);}100%{opacity:1;transform:translateY(0px);}"]),El=Object(S.e)(["0%{opacity:1;transform:translateY(0px);}100%{opacity:0;transform:translateY(-50px)}"]),bl=S.d.div.withConfig({displayName:"JustSubscribedTextCard__SubscriptionSnackbar",componentId:"rkv822-0"})(["background:",";font-size:12px;line-height:150%;border-radius:4px;display:flex;height:30px;position:absolute;align-items:center;display:flex;padding:0 12px;color:",";opacity:0;",""],(function(e){return e.theme.BLUE}),(function(e){return e.theme.WHITE}),(function(e){return e.show?Object(S.c)(["animation:"," 0.3s ease-in;animation-fill-mode:forwards;animation-delay:0.3s;"],fl):Object(S.c)(["animation:"," 0.3s ease-in;animation-fill-mode:forwards;"],El)})),Cl=S.d.span.withConfig({displayName:"JustSubscribedTextCard__BoldName",componentId:"rkv822-1"})(["color:",";margin-right:4px;font-weight:bold;"],(function(e){return e.theme.WHITE})),vl=S.d.span.withConfig({displayName:"JustSubscribedTextCard__Code",componentId:"rkv822-2"})(["text-transform:uppercase;font-weight:bold;color:",";margin:0 4px;"],(function(e){return e.theme.WHITE})),Sl=a.a.memo((function(){var e=Object(C.e)((function(e){return e.getIn(["subscription","isSubscriptionCTACardShown"])})),t=Object(C.e)((function(e){return e.getIn(["subscription","subscribedUserDetails"])})),i=Object(C.d)();return Object(n.useEffect)((function(){var t;return e&&(t=setTimeout((function(){i(Object(M.b)())}),1e4)),function(){clearTimeout(t)}}),[e]),a.a.createElement(bl,{show:e},a.a.createElement(Cl,null,t.user.firstName)," ",H.Vb.JUST_SUBSCRIBED,a.a.createElement(vl,null,' "'.concat(t.referral_code.discountCode,'" '))," ",H.Vb.JUST_SUBSCRIBED_EMOJI)}));Sl.propTypes={},Sl.defaultProps={};var Il=Object(S.f)(Sl),yl=i("AOnC"),_l=S.d.div.withConfig({displayName:"UnmutePopper__Container",componentId:"sc-1ugn6t6-0"})(["display:flex;width:280px;flex-direction:column;justify-content:center;border-radius:",";background-color:",";padding:"," ",";box-shadow:0px 4px 32px ",";z-index:1;"],P.c.SPACING_6,(function(e){return e.theme.BG_MAIN}),P.c.SPACING_4B,P.c.SPACING_4B,(function(e){return e.theme.SHADOW})),Ol=S.d.div.withConfig({displayName:"UnmutePopper__DescriptionText",componentId:"sc-1ugn6t6-1"})(["font-size:",";line-height:",";color:",";margin-top:",";white-space:pre-line;text-align:left;"],P.d.SMALL,P.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_SECONDARY}),P.c.SPACING_3B),wl=S.d.div.withConfig({displayName:"UnmutePopper__HeaderText",componentId:"sc-1ugn6t6-2"})(["color:",";font-style:normal;font-weight:",";font-size:",";margin-left:",";"],(function(e){return e.theme.TEXT_PRIMARY}),P.d.SEMIBOLD,P.d.MEDIUM,P.c.SPACING_2B),Tl=S.d.div.withConfig({displayName:"UnmutePopper__HeaderContainer",componentId:"sc-1ugn6t6-3"})(["display:flex;justify-content:space-between;align-items:center;padding-left:",";"],P.c.SPACING_1B),Al=S.d.div.withConfig({displayName:"UnmutePopper__HeaderContent",componentId:"sc-1ugn6t6-4"})(["display:flex;"]),Pl=S.d.div.withConfig({displayName:"UnmutePopper__Triangle",componentId:"sc-1ugn6t6-5"})(["border-width:0 5px 8px 5px;border-style:solid;border-color:transparent transparent "," transparent;height:0;width:0;margin-top:",";"],(function(e){return e.theme.BG_MAIN}),P.c.SPACING_1B),xl=S.d.div.withConfig({displayName:"UnmutePopper__CloseIconContainer",componentId:"sc-1ugn6t6-6"})(["display:flex;justify-content:center;align-items:center;cursor:pointer;"]),Rl=Object(S.d)(yl.a).withConfig({displayName:"UnmutePopper__StyledPopper",componentId:"sc-1ugn6t6-7"})(["display:flex;flex-direction:column;align-items:center;"]),Dl=a.a.memo((function(e){var t=e.open,i=e.buttonRef,o=e.onClose,r=Object(n.useRef)(null);return a.a.createElement(Rl,{open:t,anchorEl:i},a.a.createElement(Pl,{ref:r}),a.a.createElement(_l,null,a.a.createElement(Tl,null,a.a.createElement(Al,null,a.a.createElement(Ve.Xb,null),a.a.createElement(wl,null,H.B.UNMUTE_POPPER.TITLE)),a.a.createElement(xl,{onClick:o},a.a.createElement(Ve.u,null))),a.a.createElement(Ol,null,H.B.UNMUTE_POPPER.DESCRIPTION)))}));const Nl=Object(S.d)(ee.b).withConfig({displayName:"EducatorMuteUnmute__MuteUnmuteButton",componentId:"z34n5j-0"})(["display:flex;position:relative;margin-left:",";height:",";width:",";border-color:",";padding:initial;"],P.c.SPACING_4B,P.c.SPACING_6B,P.c.SPACING_18B,e=>e.isEducatorOnMute?e.theme.RED:e.theme.BORDER),jl=S.d.span.withConfig({displayName:"EducatorMuteUnmute__TextContainer",componentId:"z34n5j-1"})(["margin-left:",";text-transform:uppercase;"],P.c.SPACING_1B),kl=Object(_.e)().getOrCreate("EDUCATOR_MUTE_UNMUTE"),Ll=new Qr.a,Bl=a.a.memo(({canMuteUnmute:e,muteEducator:t,unmuteEducator:i,theme:o})=>{const r=Object(C.d)(),s=Object(C.e)(e=>e.getIn(["app","isEducatorOnMute"])),l=Object(C.e)(e=>e.getIn(["app","microphoneDeviceId"])),c=Object(n.useState)(0),d=m()(c,2),p=d[0],u=(d[1],Object(n.useRef)(null)),h=Object(n.useRef)(!1),g=Object(n.useState)(!1),f=m()(g,2),E=f[0],b=f[1],v=Object(ii.a)(),S=e=>{const t=!e.ctrlKey&&!e.shiftKey&&!e.metaKey&&("M"===e.key||"m"===e.key);!v&&t&&_()};Object(n.useEffect)(()=>(document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)}),[v,e,s]);const I=Object(n.useCallback)(()=>{E&&b(!1)},[E]),y=e=>{e>=H.gc&&s&&(E||h.current||(b(!0),h.current=!0))};Object(n.useEffect)(()=>(s?t():(i(),I(),h.current=!1),s&&Ll.startMonitoringVolume(l,y),()=>{Ll.stopMonitoringVolume(),Ll.stopStream()}),[s,l]),Object(n.useEffect)(()=>(kl.start(),()=>{if(kl.isProfileRunning()){const e=kl.end();j.f.sendData(j.c.MUTE_TOGGLE,s?H.B.MUTED:H.B.NOT_MUTED,{[j.e.Measure1]:e.dts})}}),[s]);const _=()=>{e&&r(Object(ye.D)(!s))};return a.a.createElement(n.Fragment,null,a.a.createElement(Nl,{variant:e?"hollow":"disabled",action:s?"destructive":"normal",fontSize:P.d.EXTRA_SMALL,onClick:_,isEducatorOnMute:s,ref:u},s?a.a.createElement(Ve.B,null):a.a.createElement(Ve.A,{fillPercent:p<H.gc?100*p:100,fill:e?null:o.TEXT_SECONDARY}),a.a.createElement(jl,null,s?H.B.UNMUTE:H.B.MUTE)),a.a.createElement(Dl,{open:E,buttonRef:u.current,onClose:I}))});var Ml=Object(S.f)(Bl);const Gl=S.d.div.withConfig({displayName:"ExtendClassPopper__Wrapper",componentId:"qh45q2-0"})(["display:flex;flex-direction:column;"]),Ul=Object(S.d)(ee.k).withConfig({displayName:"ExtendClassPopper__Desc",componentId:"qh45q2-1"})(["display:flex;margin-bottom:",";color:",";"],P.c.SPACING_5B,({theme:e})=>e.TEXT_SECONDARY),Hl=Object(S.d)(ee.i).withConfig({displayName:"ExtendClassPopper__PopperHeading",componentId:"qh45q2-2"})(["margin-left:",";"],P.c.SPACING_6),Vl=S.d.div.withConfig({displayName:"ExtendClassPopper__OptionsWrapper",componentId:"qh45q2-3"})(["display:flex;flex-direction:column;"]),Fl=S.d.div.withConfig({displayName:"ExtendClassPopper__Header",componentId:"qh45q2-4"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:",";"],P.c.SPACING_3B),Wl=S.d.div.withConfig({displayName:"ExtendClassPopper__IconWrapper",componentId:"qh45q2-5"})(["display:flex;align-items:center;"]),zl=Object(S.d)(ee.b).withConfig({displayName:"ExtendClassPopper__StyledButton",componentId:"qh45q2-6"})(["width:100%;height:40px;margin-top:",";"],P.c.SPACING_1B),ql=S.d.div.withConfig({displayName:"ExtendClassPopper__CloseIconWrapper",componentId:"qh45q2-7"})(["cursor:pointer;"]);var Yl=Object(S.f)(({width:e,onClose:t})=>{const i=Object(n.useState)(0),o=m()(i,2),r=o[0],s=o[1],l=Object(C.d)(),c=zl,d=Object(C.e)(e=>e.getIn(["app","accessToken"])),p=Object(C.e)(e=>e.getIn(["app","apiHost"])),u=Object(C.e)(e=>e.getIn(["app","classId"])),h=e=>{s(e)};return a.a.createElement(Gl,{onClick:e=>{e&&e.preventDefault(),e&&e.stopPropagation()}},a.a.createElement(Fl,null,a.a.createElement(Wl,null,a.a.createElement(Ve.I,{height:24,width:24}),a.a.createElement(Hl,null,H.M.TIME_LIMIT)),a.a.createElement(ql,{onClick:e=>{e&&e.preventDefault(),t&&t()}},a.a.createElement(Ve.u,{height:20,width:20}))),a.a.createElement(Ul,null,H.M.DESCRIPTION),a.a.createElement(Vl,null,H.N.map((e,t)=>a.a.createElement(wr,{key:t,option:e,handleOnclick:h,selectedIndex:r,index:t+1,isUsedInModal:!1,height:"42px",width:"100%"}))),a.a.createElement(c,{variant:r?"filled":"disabled",onClick:e=>{l(Object(ye.r)(p,d,u,H.N[r-1])),t()},isEducator:!0},"Extend class"))}),Xl=S.d.div.withConfig({displayName:"ConfirmationModal__ModalContainer",componentId:"sc-1oh60wn-0"})(["background:",";display:flex;width:320px;outline:none;flex-direction:column;padding:",";border-radius:",";pointer-events:all;"],(function(e){return e.theme.BG_MAIN}),P.c.SPACING_4B,P.c.SPACING_2B),Kl=S.d.div.withConfig({displayName:"ConfirmationModal__IconContainer",componentId:"sc-1oh60wn-1"})(["display:flex;justify-content:center;align-items:center;width:24px;height:24px;border-radius:8px;overflow:hidden;"]),Zl=Object(S.d)(ee.b).withConfig({displayName:"ConfirmationModal__PrimaryButton",componentId:"sc-1oh60wn-2"})(["height:40px;min-width:80px;width:unset;margin-left:",";"],P.c.SPACING_4B),Jl=S.d.div.withConfig({displayName:"ConfirmationModal__IconTitleContainer",componentId:"sc-1oh60wn-3"})(["display:flex;justify-content:space-between;align-items:center;"]),Ql=S.d.div.withConfig({displayName:"ConfirmationModal__FlexWrapper",componentId:"sc-1oh60wn-4"})(["display:flex;justify-content:flex-start;align-items:center;flex:1;"]),$l=S.d.div.withConfig({displayName:"ConfirmationModal__BodyButtonContainer",componentId:"sc-1oh60wn-5"})(["display:flex;justify-content:space-between;align-items:flex-end;"]),ec=S.d.div.withConfig({displayName:"ConfirmationModal__CloseButtonContainer",componentId:"sc-1oh60wn-6"})(["display:flex;align-items:center;justify-content:center;cursor:pointer;"]),tc=a.a.memo((function(e){var t=e.icon,i=e.isModalOpen,o=e.onConfirmation,r=e.onCancel,s=e.modalData,l=e.fullWidth,c=Object(C.e)((function(e){return e.getIn(["videoPlayControls","isChatHidden"])}));return a.a.createElement(n.Fragment,null,a.a.createElement(ee.r,{open:i,paperWidth:"320px",paperHeight:"fit-content",contentPositionVertical:"flex-end",animation:"slide",disableEscapeKeyDown:!1,onClose:r,width:c||l?"100%":"75%"},a.a.createElement(Xl,null,a.a.createElement(Jl,null,a.a.createElement(Ql,null,a.a.createElement(Kl,null,t),a.a.createElement(ee.j,{margin:"0 0 0 ".concat(P.c.SPACING_2B)},s.MODAL_TITLE)),a.a.createElement(ec,{onClick:r},a.a.createElement(Ve.u,{width:"24",height:"24"}))),a.a.createElement($l,null,a.a.createElement(ee.n,{margin:"".concat(P.c.SPACING_4B," 0 0 0")},s.MODAL_BODY),a.a.createElement(Zl,{variant:"filled",action:"destructive",onClick:o},s.MODAL_BTN)))))}));tc.propTypes={onConfirmation:U.a.func.isRequired,isModalOpen:U.a.bool.isRequired,onCancel:U.a.func.isRequired,modalData:U.a.object.isRequired,fullWidth:U.a.bool,icon:U.a.element.isRequired},tc.defaultProps={onConfirmation:function(){},isModalOpen:!1,onCancel:function(){},modalData:H.o.END_CLASS,fullWidth:!1,icon:a.a.createElement(Ve.C,null)};var ic=tc,nc=i("1tDn");const ac=S.d.div.withConfig({displayName:"LastSavedTime__Container",componentId:"z1sr6u-0"})(["opacity:",";transition:opacity 0.2s ease-in;margin-right:",";"],({isVisible:e})=>e?1:0,P.c.SPACING_3B),oc=Object(S.d)(ee.o).withConfig({displayName:"LastSavedTime__LastSavedTimeText",componentId:"z1sr6u-1"})(["line-height:100%;color:",";"],({theme:e})=>e.TEXT_SECONDARY);var rc=a.a.memo(()=>{const e=Object(C.e)(e=>e.getIn(["pdfEditor","shouldShowLastSavedTime"])),t=Object(C.e)(e=>e.getIn(["pdfEditor","pdfFile"])),i=Object(n.useState)(null),o=m()(i,2),r=o[0],s=o[1],l=Object(n.useRef)(null);Object(n.useEffect)(()=>(e&&p(),()=>{d()}),[e]);const c=()=>{const e=t.modifiedAt;if(!e)return;let i=nc.a.timeAgoSinceDate(e,!0,H.ub.LAST_SAVED_TIME.PREFIX,H.ub.LAST_SAVED_TIME.SUFFIX,H.ub.LAST_SAVED_TIME.UNDER_A_MINUTE,H.ub.LAST_SAVED_TIME.TEXT_CONSTANTS);s(i)},d=()=>{l.current&&clearInterval(l.current)},p=()=>{d(),c(),l.current=setInterval(c,6e4)};return a.a.createElement(ac,{isVisible:e&&Object(f.ob)(r)},a.a.createElement(oc,null,r))});function sc(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}const lc=S.d.div.withConfig({displayName:"EducatorHeader__Wrapper",componentId:"sc-1oh3r89-0"})(["position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:space-between;"]),cc=S.d.div.withConfig({displayName:"EducatorHeader__ClassDuration",componentId:"sc-1oh3r89-1"})(["font-size:",";color:",";line-height:",";width:62px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:",";"],P.d.SMALL,({theme:e,endClassAlertActive:t})=>t?e.RED:e.TEXT_TERTIARY,P.d.LINE_HEIGHT,P.d.SEMIBOLD),dc=S.d.div.withConfig({displayName:"EducatorHeader__UsersImage",componentId:"sc-1oh3r89-2"})(["margin-left:",";"],P.c.SPACING_4B),pc=S.d.div.withConfig({displayName:"EducatorHeader__ParticipantCount",componentId:"sc-1oh3r89-3"})(["margin-left:",";font-size:",";color:",";line-height:",";font-weight:",";"],P.c.SPACING_2B,P.d.EXTRA_SMALL,e=>e.theme.TEXT_PRIMARY,P.d.LINE_HEIGHT,P.d.BOLD),uc=Object(S.d)(ee.b).withConfig({displayName:"EducatorHeader__ClassSettingsButton",componentId:"sc-1oh3r89-4"})(["margin-left:",";height:24px;width:unset;"],P.c.SPACING_3B),hc=Object(S.d)(ee.b).withConfig({displayName:"EducatorHeader__EndClassButton",componentId:"sc-1oh3r89-5"})(["margin-left:",";height:24px;width:unset;"],P.c.SPACING_3B),mc=Object(S.d)(ee.b).withConfig({displayName:"EducatorHeader__SaveToDriveButton",componentId:"sc-1oh3r89-6"})(["height:24px;width:106px;"]),gc=S.d.div.withConfig({displayName:"EducatorHeader__LiveLabel",componentId:"sc-1oh3r89-7"})(["font-weight:",";background-color:",";color:",";font-size:",";padding:"," ",";border-radius:2px;display:flex;align-items:center;margin-right:",";"],P.d.SEMIBOLD,e=>e.background,e=>e.customColor,P.d.SMALL,P.c.SPACING_1B,P.c.SPACING_2B,P.c.SPACING_2B),fc=Object(S.d)(ee.j).withConfig({displayName:"EducatorHeader__StyledH4",componentId:"sc-1oh3r89-8"})(["font-weight:",";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transform:",";transition:transform 0.3s ease-in;line-height:",";"],P.d.REGULAR,({show:e})=>e?"translateY(0px)":"translateY(-50px)",e=>e.lineHeight),Ec=S.d.div.withConfig({displayName:"EducatorHeader__BackButtonWrapper",componentId:"sc-1oh3r89-9"})(["padding-top:2px;margin-right:4px;"]),bc=S.d.div.withConfig({displayName:"EducatorHeader__EntityNameWrapper",componentId:"sc-1oh3r89-10"})(["display:flex;position:relative;flex:1;height:100%;align-items:center;overflow:hidden;margin-right:",";"],P.c.SPACING_2B),Cc=S.d.div.withConfig({displayName:"EducatorHeader__TimerContainer",componentId:"sc-1oh3r89-11"})(["display:flex;cursor:pointer;align-items:center;pointer-events:",";"],({clickable:e})=>e?"auto":"none"),vc=S.d.div.withConfig({displayName:"EducatorHeader__TimerIconWrap",componentId:"sc-1oh3r89-12"})(["display:flex;margin-right:",";"],P.c.SPACING_1B),Sc=new v.a;var Ic=Object(S.f)(({secondsBeforeLive:e,janusWrapper:t,socketManager:i,theme:o})=>{const r=Object(C.e)(e=>e.getIn(["app","lessonData"])),s=Object(C.e)(e=>e.getIn(["app","classDuration"])),l=Object(C.e)(e=>e.getIn(["chat","participantCount"])),c=Object(C.e)(e=>e.getIn(["app","classState"])),d=Object(C.e)(e=>e.getIn(["app","endClassModalOpen"])),p=Object(C.e)(e=>e.getIn(["app","showInactivityModal"])),u=Object(Zi.a)(e,0),h=Object(C.e)(e=>e.getIn(["subscription","isSubscriptionCTACardShown"])),g=Object(C.e)(e=>e.getIn(["subscription","subscribedUserDetails"])),E=Object(C.e)(e=>e.getIn(["app","isMultiEduClass"])),v=Object(C.e)(e=>e.getIn(["app","isModerator"])),S=Object(C.e)(e=>e.getIn(["app","isEducator"])),I=Object(C.e)(e=>e.getIn(["app","classId"])),y=Object(C.e)(e=>e.getIn(["app","isGoLiveEnabled"])),_=Object(C.e)(e=>e.getIn(["app","apiHost"])),O=Object(C.e)(e=>e.getIn(["app","accessToken"])),w=Object(C.e)(e=>e.getIn(["app","wasGoLiveClickedbyGuest"])),T=Object(n.useState)(!1),A=m()(T,2),x=A[0],R=A[1],D=Object(C.e)(e=>e.getIn(["app","isExtendClassModalOpen"])),N=Object(C.e)(e=>e.getIn(["app","showSplashScreen"])),k=Object(C.e)(e=>e.getIn(["app","isEndClassButtonClicked"])),L=Object(C.e)(e=>e.getIn(["pdfEditor","isPdfEditor"])),M=Object(C.e)(e=>e.getIn(["pdfEditor","canEditPdf"])),G=Object(C.e)(e=>e.getIn(["pdfEditor","pdfFile"])),U=Object(C.e)(e=>e.getIn(["pdfEditor","isSaveToDriveButtonClicked"])),V=Object(C.e)(e=>e.getIn(["app","connectionState"])),F=Object(n.useRef)(null),W=Object(C.e)(e=>e.getIn(["app","isDarkMode"])),z=Object(n.useState)(!1),q=m()(z,2),Y=q[0],X=q[1],K=!S&&E&&v,Z=Object(C.d)(),J=Object(n.useCallback)(()=>{S?Z(Object(ye.G)(!0)):K&&(Z(Object(ye.ab)(_,I,O)),Z(Object(B.e)(!0))),$(!1)},[S,K]),Q=Object(n.useCallback)(()=>{Z(Object(ye.cb)(!0)),Z(Object(ye.H)(!0))},[]),$=Object(n.useCallback)((e=!0)=>{e&&Z(Object(ye.cb)(!1)),!D&&k&&(Z(Object(ye.J)(!0)),Z(Object(ye.F)(!1))),Z(Object(ye.H)(!1))},[D,k]),te=Object(n.useCallback)(()=>{Z(Object(ye.qb)(!0))},[]),ie=(e=>{const t=Object(n.useRef)();return Object(n.useEffect)(()=>{t.current=e}),t.current})(s);Object(n.useEffect)(()=>{Y&&s!=ie&&X(!1)},[Y,s,ie]),Object(n.useEffect)(()=>{Y&&!N&&Z(Object(ye.N)(H.Z.EXTEND_CLASS_WARNING,!0))},[Y,N]),Object(n.useEffect)(()=>{p&&D&&Z(Object(ye.kb)(!1))},[D,p]),Object(n.useEffect)(()=>{(D||x)&&Z(Object(ye.Cb)())},[D,x]);const ne=Object(n.useCallback)(()=>{X(!0)},[Y]),ae=()=>{R(!x)},oe=Object(n.useCallback)(()=>{x&&R(!1)},[x]),re=()=>{Z(Object(ye.s)(!0))},se=Object(n.useCallback)(()=>{t&&!p&&(t.enableMic(),j.f.sendData(j.c.EDUCATOR_MUTE_UNMUTE,{onMute:!1}))},[t,p]),le=Object(n.useCallback)(()=>{t&&!p&&(t.disableMic(),j.f.sendData(j.c.EDUCATOR_MUTE_UNMUTE,{onMute:!0}))},[t,p]),ce=()=>S?c>0?H.B.END_CLASS:H.B.START_CLASS:K?w?H.U.LEAVE_CLASS:H.U.GO_LIVE:void 0,de=()=>{const e=new Date;e.setDate(e.getDate()+1),Sc.set("is_moderator_connected"+I,!0,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?sc(Object(i),!0).forEach((function(t){b()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):sc(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({expires:e},Object(f.A)()))},pe=()=>{if(S)c>0?Q():te();else if(K){const e=ce();e==H.U.LEAVE_CLASS?Z(Object(ye.H)(!0)):e==H.U.GO_LIVE&&(y||10===c?(de(),te(),Z(Object(ye.Ab)(!0))):Z(Object(ye.N)(H.Z.GUEST_EDUCATOR_GO_LIVE_WARNING,!0)))}},ue=()=>{Z(Object(Te.n)(!0))},he=()=>{Z(Object(Te.d)(!0))};return a.a.createElement(lc,null,(()=>{if(L)return a.a.createElement(Ec,null,a.a.createElement(Fn,{handleClick:he}))})(),a.a.createElement(bc,null,(()=>{if(!L&&10===c)return a.a.createElement(gc,{background:W?Object(Ir.a)(o.RED,10):o.RED,customColor:W?o.RED:o.WHITE},"LIVE")})(),a.a.createElement(fc,{show:!h,lineHeight:L?"150%":"none"},L?G.name:r.name)),(()=>{if(g)return a.a.createElement(Il,null)})(),a.a.createElement(br.a,{flexDirection:"row",justifyContent:"flex-end",alignItems:"center"},(()=>{if(!L){const e=K?r.startedAt:r.startedAt||r.liveAt;if(0===c){if(u>0){const e=Math.ceil(u/60),t=e>1?H.B.MINS:H.B.MIN;return a.a.createElement(ee.k,{color:o.TEXT_TERTIARY},"".concat(H.B.CLASS_STARTS_IN," ").concat(e," ").concat(t))}{const e=r.liveAt?r.liveAt.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"";return a.a.createElement(ee.k,{color:o.TEXT_TERTIARY},"".concat(H.B.WAS_SCHEDULED_START_AT," ").concat(e))}}if(10===c)return a.a.createElement(Cc,{onClick:ae,ref:F,clickable:Y},a.a.createElement(vc,null,a.a.createElement(Ve.Ub,{fill:Y?o.RED:o.TEXT_PRIMARY})),a.a.createElement(Sr,{shouldStart:!0,startedAt:e,showSpaces:!1,duration:s,triggerEndClassAlert:ne,endClassAlertActive:Y,showSplashScreen:N}),a.a.createElement(cc,{endClassAlertActive:Y},"/ ",Object(f.C)(s,!1)),a.a.createElement(ee.s,{open:x,compRef:F.current,onClose:oe},a.a.createElement(Yl,{width:"280px",onClose:oe})))}})(),(()=>{if(!L&&l>0)return a.a.createElement(n.Fragment,null,a.a.createElement(dc,null,a.a.createElement(Ve.ac,null)),a.a.createElement(pc,null,l))})(),(()=>{if(!L&&10===c){const e=t&&V===H.Pb.CONNECTED;return a.a.createElement(Ml,{canMuteUnmute:!!e,muteEducator:le,unmuteEducator:se})}})(),(()=>{if(!L)return a.a.createElement(uc,{label:H.B.CLASS_SETTINGS,variant:"hollow",isEducator:!0,fontSize:P.d.EXTRA_SMALL,fontWeight:P.d.BOLD,onClick:re},H.B.CLASS_SETTINGS)})(),(()=>{const e=c>0;if(!L)return a.a.createElement(hc,{label:S?e?H.B.END_CLASS:H.B.START_CLASS:"Go live",variant:K?"filled":S?Y?"filled":c>0?"hollow":u>600?"disabled":"filled":void 0,isEducator:!0,fontSize:P.d.EXTRA_SMALL,fontWeight:P.d.BOLD,onClick:pe,action:S?Y?"destructive":"normal":10===c||y||w?"destructive":"normal",isGuestEducator:K},ce())})(),(()=>{if(L&&M)return a.a.createElement(rc,null)})(),(()=>{if(L&&M)return a.a.createElement(mc,{variant:U?"disabled":"hollow",isEducator:!0,fontSize:P.d.EXTRA_SMALL,fontWeight:P.d.BOLD,onClick:ue,textTransform:"uppercase"},H.B.SAVE_TO_CLOUD)})()),a.a.createElement(gl,{janusWrapper:t,socketManager:i}),a.a.createElement(ic,{isModalOpen:d,onConfirmation:J,onCancel:$,modalData:K?H.o.LEAVE_CLASS:H.o.END_CLASS}),(()=>{if(10===c)return a.a.createElement(Dr,{isOpen:D})})())}),yc=S.d.div.withConfig({displayName:"MediaDevicesSelector__MediaDevicesWrapper",componentId:"sc-6mp18q-0"})(["display:flex;justify-content:center;width:100%;margin-top:",";flex-grow:1;"],P.c.SPACING_6B),_c=a.a.memo((function(e){var t=e.primaryButtonText,i=e.onPrimaryButtonClick,o=e.currentScreen,r=e.totalScreens,s=e.displayScreenNumber,l=void 0===s||s,c=Object(C.e)((function(e){return e.getIn(["app","devices"])})),d=Object(C.e)((function(e){return e.getIn(["app","cameraDeviceId"])})),p=Object(C.e)((function(e){return e.getIn(["app","microphoneDeviceId"])})),u=Object(C.e)((function(e){return e.getIn(["app","isCanvasModeDisabled"])})),h=Object(C.e)((function(e){return e.getIn(["app","useRoundVideo"])})),m=Object(C.e)((function(e){return e.getIn(["app","isLoading"])})),g=Object(C.e)((function(e){return e.getIn(["app","isMultiEduClass"])})),f=Object(n.useMemo)((function(){return{title:H.C.DEVICE_SELCTION_HEADING,subtitle:H.C.DEVICE_SELCTION_DESCRIPTION}}),[]),E=Object(n.useMemo)((function(){return{primaryButton:{text:t,onClick:i},currentScreen:o,totalScreens:r,displayScreenNumber:l}}),[i,t,o,r]);return a.a.createElement($s,{header:f,body:function(){return a.a.createElement(yc,null,a.a.createElement(ms,{devices:c,cameraDeviceId:d,microphoneDeviceId:p,isCanvasModeDisabled:u,isVideoSquare:h||g,isLoading:m}))},footer:E})})),Oc={darkTheme:i("hud2"),darkRuledThemeBanner:i("I4cS"),lightTheme:i("izK+"),lightRuledTheme:i("xVbC")},wc=S.d.div.withConfig({displayName:"ThemeOptions__OptionCardWrapper",componentId:"dsf0vm-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;pointer-events:",";cursor:pointer;"],(function(e){return e.disabled?"none":"auto"})),Tc=S.d.img.withConfig({displayName:"ThemeOptions__ThemeOptionImage",componentId:"dsf0vm-1"})(["box-shadow:0px 4px 12px ",";border-radius:",";"],(function(e){return e.theme.SHADOW}),P.c.SPACING_2B),Ac=a.a.memo((function(e){var t=e.option,i=e.optionSelected,n=e.onClickHandler,o=e.isScreenModeTabClicked;return a.a.createElement(wc,{disabled:t.isDisabled,onClick:function(){n(t)}},a.a.createElement(Tc,{src:function(){switch(t.text){case H.bc.RULED_LIGHT:return Oc.lightRuledTheme;case H.bc.RULED_DARK:return Oc.darkRuledThemeBanner;case H.bc.LIGHT:return Oc.lightTheme;case H.bc.DARK:return Oc.darkTheme}}()}),a.a.createElement(Cs,{disabled:t.isDisabled,option:t,optionSelected:i,isScreenModeTabClicked:o}))}));const Pc={lightThemeBanner:i("h+nZ"),lightRuledThemeBanner:i("K8YD"),darkThemeBanner:i("DE6I"),darkRuledThemeBanner:i("2Zw5")},xc={LIGHT:[{text:H.bc.LIGHT,hex:H.ac.LIGHT},{text:H.bc.RULED_LIGHT,bgImage:H.ac.RULED_LIGHT,hex:H.ac.LIGHT}],DARK:[{text:H.bc.DARK,hex:H.ac.DARK},{text:H.bc.RULED_DARK,bgImage:H.ac.RULED_DARK,hex:H.ac.DARK}]},Rc=S.d.div.withConfig({displayName:"ThemeSelector__OptionWrapper",componentId:"sc-12q36dv-0"})(["display:flex;width:100%;margin-top:",";justify-content:space-around;"],P.c.SPACING_7B),Dc=S.d.div.withConfig({displayName:"ThemeSelector__OptionGroupWrapper",componentId:"sc-12q36dv-1"})(["display:flex;align-items:center;justify-content:space-between;width:40%;"]),Nc=S.d.div.withConfig({displayName:"ThemeSelector__BodyContainer",componentId:"sc-12q36dv-2"})(["display:flex;flex-direction:column;flex-grow:1;margin-top:",";"],P.c.SPACING_7B),jc=S.d.div.withConfig({displayName:"ThemeSelector__BannerContainer",componentId:"sc-12q36dv-3"})(["align-self:center;width:322px;height:180px;"]);var kc=({onPrimaryButtonClick:e,primaryButtonText:t,currentScreen:i,totalScreens:o,displayScreenNumber:r=!0})=>{const s=Object(C.d)(),l=Object(C.e)(e=>e.getIn(["drawingBoardControls","theme"])),c=Object(C.e)(e=>e.getIn(["drawingBoardControls","slideBgImage"])),d=Object(C.e)(e=>e.getIn(["app","lessonData"])),p=Object(C.e)(e=>e.getIn(["app","classState"])),u=Object(C.e)(e=>e.getIn(["app","isFirstSlideApiDone"])),h=Object(C.e)(e=>e.getIn(["app","isEducator"])),m=Object(n.useCallback)(e=>{var t;s(Object(L.k)(e.hex)),s(Object(L.j)(null!==(t=e.bgImage)&&void 0!==t?t:""))},[l,c]);Object(n.useEffect)(()=>{s(Object(L.k)(l))},[]);const g=()=>c==H.ac.RULED_DARK?H.bc.RULED_DARK:c==H.ac.RULED_LIGHT?H.bc.RULED_LIGHT:l==H.ac.LIGHT?H.bc.LIGHT:H.bc.DARK,f=Object(n.useCallback)(()=>{d&&0===p&&h&&!u&&(j.f.sendData(j.c.SLIDE_THEME_INIT,g()),s(Object(ye.K)())),e()},[l,d,p,h,u,e]),E=()=>a.a.createElement(Rc,null,a.a.createElement(a.a.Fragment,null,a.a.createElement(Dc,null,xc.LIGHT.map((e,t)=>a.a.createElement(Ac,{option:e,key:t,optionSelected:g(),onClickHandler:m}))),a.a.createElement(Dc,null,xc.DARK.map((e,t)=>a.a.createElement(Ac,{option:e,key:t,optionSelected:g(),onClickHandler:m}))))),b=Object(n.useMemo)(()=>({title:H.C.THEME_SELCTION_HEADING,subtitle:H.C.THEME_SELCTION_DESCRIPTION}),[]),v=Object(n.useMemo)(()=>({primaryButton:{text:t,onClick:f},currentScreen:i,totalScreens:o,displayScreenNumber:r}),[e,t,i,o]);return a.a.createElement($s,{header:b,body:()=>a.a.createElement(Nc,null,a.a.createElement(jc,null,c==H.ac.RULED_DARK?a.a.createElement("img",{src:Pc.darkRuledThemeBanner}):c==H.ac.RULED_LIGHT?a.a.createElement("img",{src:Pc.lightRuledThemeBanner}):l===H.ac.LIGHT?a.a.createElement("img",{src:Pc.lightThemeBanner}):a.a.createElement("img",{src:Pc.darkThemeBanner})),E()),footer:v})};let Lc;!function(e){e.SELECT_FROM_CLOUD="Select from cloud",e.UPLOAD_NEW="Upload new"}(Lc||(Lc={}));const Bc=S.d.div.withConfig({displayName:"Tabs__Tab",componentId:"w2cm6x-0"})(["padding:12px 0;margin:0 16px;border-bottom:",";cursor:pointer;pointer-events:",";opacity:",";"],({active:e,color:t})=>"".concat(e?2:0,"px solid ").concat(t),({disabled:e})=>e?"none":"all",({disabled:e})=>e?.5:1),Mc=S.d.div.withConfig({displayName:"Tabs__TabsWrapper",componentId:"w2cm6x-1"})(["display:flex;padding:0 8px;"]),Gc=a.a.memo(({tabList:e,onChange:t,defaultTabId:i,theme:o})=>{const r=Object(n.useState)(i||null),s=m()(r,2),l=s[0],c=s[1];Object(n.useEffect)(()=>{t(l)},[l]);const d=e=>{const t=e.currentTarget.id;t!==l&&c(t)},p=e=>e?o.BLUE:o.TEXT_PRIMARY;return a.a.createElement(Mc,null,e.map(e=>{var t;const i=e.id===l,n=null!==(t=e.disabled)&&void 0!==t&&t;return a.a.createElement(Bc,{id:e.id,key:e.id,onClick:d,active:i,disabled:n,color:p(i)},a.a.createElement(ee.i,{color:p(i)},e.label))}))});var Uc=Object(S.f)(Gc),Hc=i("pZas"),Vc=i("Q7fd"),Fc=i("eVoo"),Wc=i("c7k8");const zc=S.d.div.withConfig({displayName:"FileDetail__OuterContainer",componentId:"g55a3-0"})(["padding:"," "," "," ",";margin-left:",";"],P.c.SPACING_6,P.c.SPACING_6B,P.c.SPACING_6,P.c.SPACING_0B,P.c.SPACING_6B),qc=S.d.div.withConfig({displayName:"FileDetail__Container",componentId:"g55a3-1"})(["display:flex;justify-content:space-between;padding:"," "," "," ",";border-radius:",";background-color:",";height:100%;width:100%;box-sizing:border-box;border:"," solid ",";box-shadow:"," "," "," ",";"],P.c.SPACING_4B,P.c.SPACING_4B,P.c.SPACING_4B,P.c.SPACING_2B,P.c.SPACING_1B,({theme:e,isRecommended:t})=>t?e.DIVIDER:e.BG_MAIN,P.c.SPACING_1,({theme:e,isSelected:t})=>t?e.BLUE:"transparent",P.c.SPACING_0B,P.c.SPACING_0B,P.c.SPACING_8B,({theme:e})=>e.SHADOW),Yc=S.d.img.withConfig({displayName:"FileDetail__ThumbnailImage",componentId:"g55a3-2"})(["margin-left:",";width:",";height:",";border-radius:",";border:"," solid ",";box-sizing:border-box;"],P.c.SPACING_1B,P.c.SPACING_20B,P.c.SPACING_11B,P.c.SPACING_1B,P.c.SPACING_1,({theme:e})=>e.BG_LIGHT),Xc=S.d.div.withConfig({displayName:"FileDetail__FileNameAndSlides",componentId:"g55a3-3"})(["display:flex;flex-direction:column;margin-left:",";max-width:364px;"],P.c.SPACING_4B),Kc=Object(S.d)(ee.j).withConfig({displayName:"FileDetail__FileName",componentId:"g55a3-4"})(["word-break:break-word;font-weight:",";"],P.d.REGULAR),Zc=Object(S.d)(ee.k).withConfig({displayName:"FileDetail__SlideCount",componentId:"g55a3-5"})(["font-weight:",";color:",";margin-top:",";"],P.d.REGULAR,({theme:e})=>e.TEXT_SECONDARY,P.c.SPACING_1B),Jc=S.d.div.withConfig({displayName:"FileDetail__OrderDisplayContainer",componentId:"g55a3-6"})(["height:",";width:",";background-color:transparent;padding:",";"],P.c.SPACING_6B,P.c.SPACING_6B,P.c.SPACING_2),Qc=S.d.div.withConfig({displayName:"FileDetail__OrderDisplay",componentId:"g55a3-7"})(["display:flex;align-items:center;justify-content:center;height:100%;width:100%;background-color:",";border-radius:",";"],({theme:e})=>e.BLUE,P.c.SPACING_2),$c=S.d.div.withConfig({displayName:"FileDetail__PreviewButton",componentId:"g55a3-8"})(["display:flex;height:",";width:",";align-items:center;justify-content:center;background-color:",";border:"," solid ",";border-radius:",";margin-left:",";cursor:pointer;"],P.c.SPACING_10B,P.c.SPACING_10B,({theme:e})=>e.BG_MAIN,P.c.SPACING_1,({theme:e})=>e.BORDER,P.c.SPACING_2B,P.c.SPACING_4B),ed=Object(S.d)(ee.k).withConfig({displayName:"FileDetail__OrderNumber",componentId:"g55a3-9"})(["color:",";line-height:100%;"],({theme:e})=>e.WHITE),td=Object(S.d)(ee.c).withConfig({displayName:"FileDetail__StyledCheckbox",componentId:"g55a3-10"})(["height:",";width:",";"],P.c.SPACING_6B,P.c.SPACING_6B),id=S.d.div.withConfig({displayName:"FileDetail__DetailsContainer",componentId:"g55a3-11"})(["display:flex;"]),nd=()=>{};var ad=a.a.memo(({file:e,selected:t,order:i,onChange:o=nd,onPreviewButtonClick:r=nd,showPreviewButton:s})=>{const l=Object(n.useCallback)(()=>{if(i&&i>0)return a.a.createElement(Jc,null,a.a.createElement(Qc,null,a.a.createElement(ed,null,i)))},[i]);return a.a.createElement(zc,null,a.a.createElement(qc,{isSelected:t,isRecommended:e.isRecommended},a.a.createElement(id,null,a.a.createElement(td,{checked:t,onChange:(t,i)=>o(e,i),checkedIcon:l(),color:"primary",disableRipple:!0}),(()=>{const t=e.metaJson;if(Array.isArray(null===t||void 0===t?void 0:t.image_urls)&&t.image_urls[0])return a.a.createElement(Yc,{src:t.image_urls[0]})})(),a.a.createElement(Xc,null,a.a.createElement(Kc,null,e.name),a.a.createElement(Zc,null,"".concat(e.count," slides")))),(()=>{if(s)return a.a.createElement($c,{onClick:()=>r(e)},a.a.createElement(Ve.xb,null))})()))});const od=S.d.div.withConfig({displayName:"FolderDetail__OuterContainer",componentId:"uj50pl-0"})(["padding:"," "," "," ",";margin-left:",";"],P.c.SPACING_2B,P.c.SPACING_0B,P.c.SPACING_10,P.c.SPACING_0B,P.c.SPACING_6B),rd=S.d.div.withConfig({displayName:"FolderDetail__Container",componentId:"uj50pl-1"})(["display:flex;"]),sd=Object(S.d)(ee.j).withConfig({displayName:"FolderDetail__FolderName",componentId:"uj50pl-2"})(["margin-left:",";"],P.c.SPACING_6);var ld=a.a.memo(({folder:e})=>a.a.createElement(od,null,a.a.createElement(rd,null,a.a.createElement(Ve.J,null),a.a.createElement(sd,null,e.name)))),cd=i("p8Lg");const dd=Object(S.d)(ee.d).withConfig({displayName:"DriveItemList__Container",componentId:"m8aiy3-0"})(["flex-grow:1;overflow:hidden;margin-right:",";"],P.c.SPACING_6B),pd=Object(S.d)(Wc.e).withConfig({displayName:"DriveItemList__VirtualizedList",componentId:"m8aiy3-1"})(["outline:none;"]),ud=new Wc.c({fixedWidth:!0,defaultHeight:88}),hd=()=>{};var md=a.a.memo(({items:e,selectedItems:t,onFileSelect:i,onPreviewButtonClick:o,onScrollEnd:r=hd,showPreviewButton:s,searchBarText:l})=>{const c=Object(C.e)(e=>e.getIn(["app","recommendedFilesArray"])),d=Object(n.useRef)(ud);Object(n.useEffect)(()=>{d.current=new Wc.c({fixedWidth:!0,defaultHeight:88,keyMapper:e=>{var t;const i=p[e];return i&&null!==(t=i.uid)&&void 0!==t?t:e}})},[]);const p=Object(n.useMemo)(()=>{const t=cd.b.getAggregatedFileMap(e);let i=[];if(c.length>0&&!l)for(let e=0;e<c.length;e++){const t=c.getItem(e).setIsRecommended(!0);i.push(t)}return Object.keys(t).forEach(e=>{const n=t[e],a=n[0]?n[0].parent:null;a&&i.push(a),i=i.concat(n)}),i},[e,c,l]);Object(n.useEffect)(()=>{d.current&&d.current.clearAll()},[p]);const u=e=>{return e.type===cd.a.FILE?(e=>{const n=t.findIndex(t=>t.uid===e.uid),r=n>=0,l=n+1;return a.a.createElement(ad,{file:e,selected:r,onChange:i,order:l,onPreviewButtonClick:o,showPreviewButton:s})})(e):(n=e,a.a.createElement(ld,{folder:n}));var n},h=Object(n.useCallback)(({key:e,style:t,index:i,parent:n})=>{const o=p[i];if(o)return a.a.createElement(Wc.b,{key:e,cache:d.current,parent:n,columnIndex:0,rowIndex:i},a.a.createElement("div",{key:e,style:t},u(o)))},[e,t,s,c]),m=Object(n.useCallback)(({clientHeight:e,scrollHeight:t,scrollTop:i})=>{t-(e+i)<=50&&r()},[r]),g=Object(Vc.a)(m,300);return a.a.createElement(dd,{track:{marginBottom:16}},a.a.createElement(Wc.a,{children:({height:e,width:t})=>a.a.createElement(pd,{height:e,width:t,rowRenderer:h,rowCount:p.length,deferredMeasurementCache:d.current,rowHeight:d.current.rowHeight,overscanRowCount:5,onScroll:g})}))});const gd=S.d.div.withConfig({displayName:"DriveFileSelector__Container",componentId:"sc-1jdtjng-0"})(["display:flex;flex-grow:1;flex-direction:column;padding-top:",";"],P.c.SPACING_6B),fd=S.d.div.withConfig({displayName:"DriveFileSelector__SearchBarContainer",componentId:"sc-1jdtjng-1"})(["width:316px;margin:"," "," "," ",";"],P.c.SPACING_0B,P.c.SPACING_6B,P.c.SPACING_6B,P.c.SPACING_6B),Ed=Object(S.d)(ee.j).withConfig({displayName:"DriveFileSelector__ErrorMessage",componentId:"sc-1jdtjng-2"})(["width:100%;margin-top:",";text-align:center;color:",";"],P.c.SPACING_8B,({theme:e})=>e.RED),bd=()=>{},Cd=a.a.memo(({theme:e,showPreviewButton:t=!0,onPreviewButtonClick:i=bd,onSelectedFilesChange:o,selectedDriveFiles:r})=>{const s=Object(C.d)(),l=Object(n.useRef)(!1),c=Object(C.e)(e=>e.getIn(["app","accessToken"])),d=Object(C.e)(e=>e.getIn(["app","driveSearchAPINextUrl"])),p=Object(C.e)(e=>e.getIn(["app","driveItemListFetchError"])),u=Object(C.e)(e=>e.getIn(["app","driveItemList"])),h=Object(C.e)(e=>e.getIn(["app","isFetchingDriveItems"])),g=Object(C.e)(e=>e.getIn(["app","apiHost"])),E=(Object(C.e)(e=>e.getIn(["app","recommendedFilesArray"])),Object(C.e)(e=>e.getIn(["app","isFetchingRecommendedList"]))),b=Object(C.e)(e=>e.getIn(["app","classId"])),v=Object(n.useState)(""),S=m()(v,2),I=S[0],y=S[1],_=Object(n.useCallback)((e,t,i)=>{s(Object(ye.b)(e,t,i))},[]),O=Object(Vc.a)(_,400);Object(n.useEffect)(()=>{if(l.current||I){const e=Object(f.F)(g,I);O(e,c,!1)}},[I]),Object(n.useEffect)(()=>{const e=Object(f.F)(g);return _(e,c,!1),s(Object(ye.d)(g,c,b)),()=>{s(Object(ye.A)([],null,!1,!1))}},[]),Object(n.useEffect)(()=>{h&&!l.current&&(l.current=!0)},[h]);const w=Object(n.useCallback)(e=>{y(e.target.value)},[]),T=Object(n.useCallback)(()=>{s(Object(ye.fb)(!0))},[]),A=Object(n.useCallback)(()=>{s(Object(ye.fb)(!1))},[]),x=Object(n.useCallback)(()=>{y("")},[]),R=Object(n.useCallback)((e,t)=>{let i;i=t?r.push(e):r.filter(t=>t.uid!==e.uid),o(i)},[r,o]),D=()=>{d&&_(d,c,!0)};return a.a.createElement(gd,null,a.a.createElement(fd,null,a.a.createElement(Hc.a,{placeholder:H.w.SEARCH,height:48,placeholderMarginTop:3,onChange:w,value:I,onFocus:T,onBlur:A,onClear:x})),(()=>{if(E||h){const t={display:"flex",justifyContent:"center",width:"100%",paddingTop:P.c.SPACING_8B,paddingBottom:P.c.SPACING_8B};return a.a.createElement(Fc.d,{size:32,color:e.GREEN,rootContainerStyles:t,delay:500})}})(),(()=>{if(p)return a.a.createElement(Ed,null,H.w.ERROR_MESSAGE)})(),(()=>{if(!E)return a.a.createElement(md,{items:u,selectedItems:r,onFileSelect:R,showPreviewButton:t,onPreviewButtonClick:i,onScrollEnd:D,searchBarText:I})})())});var vd=Object(S.f)(Cd),Sd=i("Gbs5"),Id=i("dLth"),yd=i("HC+X");const _d=S.d.div.withConfig({displayName:"DragNDropFileSelector__Wrapper",componentId:"sc-14pjl1q-0"})(["width:100%;height:100%;padding:",";box-sizing:border-box;"],P.c.SPACING_6B),Od=S.d.div.withConfig({displayName:"DragNDropFileSelector__ContentWrapper",componentId:"sc-14pjl1q-1"})(["display:flex;flex-direction:column;align-items:center;"]),wd=S.d.div.withConfig({displayName:"DragNDropFileSelector__InnerBox",componentId:"sc-14pjl1q-2"})(["width:100%;margin:0 auto;height:100%;display:flex;align-items:center;justify-content:center;padding:"," 0;background:",";border-radius:8px;border:1px dashed ",";box-sizing:border-box;"],P.c.SPACING_8B,e=>e.theme.BG_MAIN,e=>e.theme.BORDER),Td=Object(S.d)(ee.i).withConfig({displayName:"DragNDropFileSelector__MainTextH3",componentId:"sc-14pjl1q-3"})(["margin-top:",";color:",";line-height:100%;"],P.c.SPACING_7B,e=>e.theme.TEXT_PRIMARY),Ad=Object(S.d)(ee.k).withConfig({displayName:"DragNDropFileSelector__SubTextH5",componentId:"sc-14pjl1q-4"})(["margin-top:",";color:",";line-height:100%;"],P.c.SPACING_4B,e=>e.theme.TEXT_PRIMARY),Pd=S.d.label.withConfig({displayName:"DragNDropFileSelector__Upload",componentId:"sc-14pjl1q-5"})(["cursor:pointer;display:flex;margin-top:",";"],P.c.SPACING_3B),xd=Object(S.d)(ee.i).withConfig({displayName:"DragNDropFileSelector__BrowseFilesButton",componentId:"sc-14pjl1q-6"})(["cursor:pointer;pointer-events:none;color:",";font-weight:",";line-height:100%;"],e=>e.theme.BLUE,P.d.BOLD),Rd=S.d.input.withConfig({displayName:"DragNDropFileSelector__Input",componentId:"sc-14pjl1q-7"})(["opacity:0;width:0;"]);var Dd=({handleFileSelection:e,acceptedFileExtensions:t=""})=>{const i=Object(n.useCallback)(e=>{e.preventDefault()},[]),o=Object(n.useCallback)(e=>{e.preventDefault()},[]),r=Object(n.useCallback)(t=>{t.preventDefault();const i=t.target.files;e(i)},[e]),s=Object(n.useCallback)(t=>{t.preventDefault();const i=t.dataTransfer.files;e(i)},[e]);return a.a.createElement(_d,null,a.a.createElement(wd,{onDragOver:i,onDragEnter:o,onDrop:s},a.a.createElement(Od,null,a.a.createElement(yd.a,null),a.a.createElement(Td,null,H.Q.DRAG_DROP_FILES),a.a.createElement(Ad,null,H.Q.OR),a.a.createElement(Pd,{htmlFor:"uploadFile"},a.a.createElement(Rd,{id:"uploadFile",type:"file",accept:t,multiple:!0,onChange:r}),a.a.createElement(xd,null,H.Q.BROWSE_FILES)))))},Nd=i("gyWk"),jd=i("0U3w"),kd=i("UKLk");const Ld=S.d.div.withConfig({displayName:"FileUploadCard__Wrapper",componentId:"ix43as-0"})(["padding:",";background-color:",";box-sizing:border-box;display:flex;flex-direction:row;margin-bottom:",";border-radius:4px;box-shadow:0px 0px 32px ",";min-height:76px;margin-right:",";&:last-of-type{margin-bottom:0;}"],P.c.SPACING_4B,e=>e.theme.BG_MAIN,P.c.SPACING_4B,e=>e.theme.SHADOW,({customScrollbar:e})=>e?P.c.SPACING_4B:0),Bd=S.d.div.withConfig({displayName:"FileUploadCard__FileDetailsWrapper",componentId:"ix43as-1"})(["flex:1;display:flex;flex-direction:column;margin:0 ",";overflow-wrap:anywhere;"],P.c.SPACING_4B),Md=Object(S.d)(ee.j).withConfig({displayName:"FileUploadCard__FileName",componentId:"ix43as-2"})(["font-weight:",";margin-bottom:",";"],P.d.REGULAR,P.c.SPACING_1B),Gd=Object(S.d)(ee.k).withConfig({displayName:"FileUploadCard__FileUploadingState",componentId:"ix43as-3"})(["color:",";font-weight:",";display:inline;flex-direction:row;"],e=>e.isError?e.theme.RED:e.theme.BLUE,P.d.REGULAR),Ud=S.d.div.withConfig({displayName:"FileUploadCard__CloseButton",componentId:"ix43as-4"})(["height:24px;width:24px;display:flex;justify-content:center;align-items:center;cursor:pointer;"]),Hd=S.d.span.withConfig({displayName:"FileUploadCard__UploadStateCTA",componentId:"ix43as-5"})(["font-weight:",";cursor:pointer;"],P.d.SEMIBOLD),Vd=S.d.div.withConfig({displayName:"FileUploadCard__DragIconWrapper",componentId:"ix43as-6"})(["display:flex;align-items:center;margin-right:",";& > svg{cursor:all-scroll;}"],P.c.SPACING_4B);var Fd;!function(e){e[e.NotStarted=0]="NotStarted",e[e.Uploading=1]="Uploading",e[e.Failed=2]="Failed",e[e.Finished=3]="Finished",e[e.Cancelled=4]="Cancelled"}(Fd||(Fd={}));var Wd=({uploadToDrive:e=!1,shouldStartUpload:t=!0,file:i,onImageUrls:o,onUploadFinished:r,onRemove:s,parentUid:l,customScrollbar:c,allowSorting:d})=>{const p=Object(C.e)(e=>e.getIn(["driveUploader","isDriveUploader"]))?Object(C.e)(e=>e.getIn(["driveUploader","isTemplateCreation"])):Object(C.e)(e=>e.getIn(["pdfEditor","isTemplateCreation"])),u=Object(n.useState)(0),h=m()(u,2),g=h[0],f=h[1],E=Object(n.useState)((null===i||void 0===i?void 0:i.status)===Id.b.UPLOADED?Fd.Finished:Fd.NotStarted),b=m()(E,2),v=b[0],S=b[1],I=Object(n.useRef)(null),y=Object(n.useRef)(!0);Object(n.useEffect)(()=>(y.current=!0,()=>{y.current=!1}),[]),Object(n.useEffect)(()=>{t&&_()},[t]);const _=()=>{S(Fd.Uploading);const t=p?jd.a.TEMPLATE:jd.a.FILE;I.current=new jd.c(i.file,t,"",l),Nd.a.shared.startUploading(I.current,T,e).then(e=>{A(e)}).catch(e=>{P(e)})},O=()=>{_()},w=Object(n.useCallback)(()=>{I.current&&I.current.cancel(H.Q.CANCELLED_BY_USER),s(i.id)},[i,s]),T=Object(n.useCallback)(e=>{y.current&&f(e)},[]),A=Object(n.useCallback)(e=>{y.current&&(S(Fd.Finished),kd.a.getImageUrls(e).then(t=>{o&&o(i.id,t),r&&r(i,e)}))},[e,i,r]),P=e=>{y.current&&(e.message===H.Q.CANCELLED_BY_USER?S(Fd.Cancelled):S(Fd.Failed))},x=()=>{let e=(()=>{switch(v){case Fd.NotStarted:return H.Q.UPLOADING_NOT_STARTED;case Fd.Uploading:return"".concat(H.Q.UPLOADING_PROGRESS," ").concat(g.toFixed(0),"%");case Fd.Finished:return H.Q.UPLOADING_FINISHED;case Fd.Failed:return H.Q.UPLOADING_FAILED;case Fd.Cancelled:return H.Q.UPLOADING_CANCELLED}})();const t=v===Fd.Failed;return a.a.createElement(Gd,{isError:t},e,(()=>{if(v===Fd.Failed)return a.a.createElement(Hd,{onClick:O},H.Q.RETRY)})())};return a.a.createElement(Ld,{customScrollbar:c},d&&a.a.createElement(Vd,{className:"drag-handle"},a.a.createElement(Ve.z,null)),(()=>{var e;return(null===i||void 0===i||null===(e=i.file)||void 0===e?void 0:e.type.match(/image/))?a.a.createElement(Ve.R,null):a.a.createElement(Ve.nb,null)})(),a.a.createElement(Bd,null,a.a.createElement(Md,null,i.name),x()),a.a.createElement(Ud,{onClick:w},a.a.createElement(Ve.u,{height:16,width:16})))},zd=i("bMUW");const qd=S.d.div.withConfig({displayName:"FileUploadingListView__Wrapper",componentId:"j4moj2-0"})(["height:100%;width:100%;padding:",";padding-right:",";box-sizing:border-box;display:flex;flex-direction:column;"],P.c.SPACING_6B,({customScrollbar:e})=>e?P.c.SPACING_5B:P.c.SPACING_6B),Yd=Object(S.d)(ee.i).withConfig({displayName:"FileUploadingListView__Heading",componentId:"j4moj2-1"})(["margin-bottom:",";box-sizing:border-box;"],P.c.SPACING_4B),Xd=S.d.div.withConfig({displayName:"FileUploadingListView__ListWrapper",componentId:"j4moj2-2"})(["box-sizing:border-box;overflow-y:scroll;"," ",""],({listMaxHeight:e})=>e?Object(S.c)(["max-height:","px;"],e):Object(S.c)(["max-height:100%;"]),({customScrollbar:e})=>{if(e)return Object(S.c)(["overflow-y:auto;"])}),Kd=Object(S.d)(ee.d).withConfig({displayName:"FileUploadingListView__CustomScrollbarWrapper",componentId:"j4moj2-3"})(["height:100%;width:100%;"]);var Zd=e=>{const t=e.files,i=e.onRemoveCard,n=e.onUploadFinished,o=e.onImageUrls,r=e.parentUid,s=e.listMaxHeight,l=e.customScrollbar,c=e.isLiveClass,d=e.allowSorting,p=e.sortFileList,u=()=>t.all().map((e,t)=>a.a.createElement(Wd,{key:e.id,file:e,uploadToDrive:!c,shouldStartUpload:!d,onRemove:i,onUploadFinished:n,onImageUrls:(e,i)=>o(t,e,i),parentUid:r,customScrollbar:l})),h=(e,t)=>a.a.createElement(Xd,{listMaxHeight:s,customScrollbar:!0,ref:t},e),m=(e,t)=>a.a.createElement(Wd,{key:e.id,file:e,uploadToDrive:!c,shouldStartUpload:!1,onRemove:i,parentUid:r,customScrollbar:l,onImageUrls:(e,i)=>o(t,e,i),allowSorting:!0}),g=(e,t)=>{p&&p(e,t)};return a.a.createElement(qd,{customScrollbar:l},(()=>{if(!c)return a.a.createElement(Yd,null,H.Q.UPLOADING)})(),l?a.a.createElement(Kd,null,d&&t.all().size>1?a.a.createElement(zd.a,{renderWrapper:h,renderItem:m,data:t.all(),onItemSort:g}):a.a.createElement(Xd,{listMaxHeight:s,customScrollbar:!0},u())):a.a.createElement(Xd,{listMaxHeight:s},u()))};const Jd=S.d.div.withConfig({displayName:"FileUploader__Wrapper",componentId:"sc-1dkjya2-0"})(["display:flex;justify-content:center;width:100%;height:100%;background-color:",";"],e=>e.theme.BODY_BG),Qd=new Sd.a,$d=()=>{};var ep=({filesToUpload:e=Qd,removeCardOnUpload:t=!0,isLiveClass:i=!1,onImageUrls:o=$d,onSelectedSystemFilesChange:r,onFileUploadComplete:s,onAllFilesUploadComplete:l,sortSystemFiles:c,parentUid:d="",showEmptyUploadState:p,acceptedFileExtensions:u,acceptedFileTypes:h,listMaxHeight:g,customScrollbar:E=!1,allowSorting:b})=>{const C=Object(n.useState)(e),v=m()(C,2),S=v[0],I=v[1],y=Object(n.useRef)(e),_=S.length>0;Object(n.useEffect)(()=>{r&&r(S)},[S]);const O=e=>{const t=y.current.findIndex(t=>t.id===e);t>-1&&(y.current=y.current.removeItem(t),T(y.current),o(t,e,null,!0))},w=Object(n.useCallback)(e=>{I(e);const t=e.filter(e=>e.status!==Id.b.UPLOADED);(e.length<=0||0===t.length)&&l&&l()},[]),T=Object(Vc.a)(w,100),A=Object(n.useCallback)((e,i)=>{s&&s(e,i),t?O(e.id):(e=>{const t=y.current.findIndex(t=>t.id===e);if(t>-1){const e=y.current.getItem(t).updateStatus(Id.b.UPLOADED);y.current=y.current.updateItem(e,t),T(y.current)}})(e.id)},[S,y.current,t]),P=Object(n.useCallback)(e=>{O(e)},[S,y.current]),x=Object(n.useCallback)(e=>{let t=new Sd.a;if(e){const i=Object(f.f)(e,h).map(e=>new Id.a(e));t=t.concat(i)}y.current=t,I(t)},[]),R=Object(n.useCallback)((e,t)=>{y.current=y.current.move(e,t),w(y.current),c&&c(y.current)},[]);return a.a.createElement(Jd,null,_?a.a.createElement(Zd,{files:S,onImageUrls:o,onRemoveCard:P,onUploadFinished:A,parentUid:d,listMaxHeight:g,customScrollbar:E,isLiveClass:i,allowSorting:b,sortFileList:R}):p?a.a.createElement(Dd,{handleFileSelection:x,acceptedFileExtensions:u}):null)},tp=i("vDqi"),ip=i.n(tp),np=i("wPU9"),ap=i("vGJw");const op=S.d.div.withConfig({displayName:"SlideWrapper__SlideContainer",componentId:"sc-13lc8z0-0"})(["border:",";height:100%;width:100%;position:relative;box-sizing:border-box;cursor:",";display:flex;flex-direction:column-reverse;font-size:",";font-weight:",";transition:border 0.5s;"],e=>e.isSelected?"".concat(P.c.SPACING_2," solid ").concat(e.theme.BLUE):"".concat(P.c.SPACING_2," solid ").concat(e.theme.BORDER),({canSelect:e})=>e?"pointer":"auto",P.d.EXTRA_SMALL,P.d.BOLD),rp=()=>{};var sp=a.a.memo(({slides:e,slideIndex:t,selectedSlide:i,onSlideClick:n=rp,canSelect:o=!1,preProcessor:r,slideData:s})=>a.a.createElement(op,{isSelected:t===i,canSelect:o,onClick:()=>n(t)},(()=>{const i=e.getItem(t);return i.image?a.a.createElement(np.a,{slide:i,useSmallLoader:!0,useLatestBackground:!0,isSlideMode:!0}):a.a.createElement(Re.a,{preProcessor:r,slides:e,isVolumeEnabled:!1,isSlideMode:!0,isReplay:!0,role:H.p.TYPE_PUBLISHER,canWrite:!1,activeSlide:t})})(),(()=>{var i,n;const o=e.getItem(t),r=!(null===o||void 0===o||!o.pollData),l=null===o||void 0===o?void 0:o.uid,c=null!==(i=null===s||void 0===s||null===(n=s[l])||void 0===n?void 0:n.slideTitle)&&void 0!==i?i:"";return a.a.createElement(ap.a,{showSlideNumber:!0,slideNumber:t+1,slideTitle:c,showSlideTitle:!!c,showPollIcon:r,isPollIconClickable:!1})})())),lp=i("fPM3");const cp=Object(S.d)(Wc.d).withConfig({displayName:"SlideView__VirtualizedGrid",componentId:"sc-6c0lzj-0"})(["outline:none;"]),dp=S.d.div.withConfig({displayName:"SlideView__GridCellContainer",componentId:"sc-6c0lzj-1"})(["padding:",";"],P.c.SPACING_2B),pp=Object(S.d)(lp.a).withConfig({displayName:"SlideView__Scrollbar",componentId:"sc-6c0lzj-2"})(["flex-grow:1;"]);var up=a.a.memo(({slides:e,columns:t,customScrollbar:i=!0,scrollbarOffset:n=24,preProcessor:o=x.b.main,slideData:r})=>{const s=({columnIndex:i,rowIndex:n,style:s,key:l})=>{const c=n*t+i;return e.getItem(c)&&a.a.createElement(dp,{style:s,key:l},a.a.createElement(sp,{slides:e,slideIndex:c,preProcessor:o,slideData:r}))},l=({height:o,width:r})=>{const l=e.length,c=Math.ceil(l/t),d=(r-(i?n:8))/t,p=9*d/16;return a.a.createElement(cp,{height:o,width:r,rowCount:c,columnCount:t,rowHeight:p,columnWidth:d,cellRenderer:s})},c=()=>a.a.createElement(Wc.a,{children:l});return(()=>{if(i){const e={marginBottom:80,marginTop:48};return a.a.createElement(pp,{track:e},c())}return c()})()});const hp=S.d.div.withConfig({displayName:"DriveFilePreview__Container",componentId:"sc-15ckmgp-0"})(["display:flex;flex-direction:column;height:100%;width:100%;"]),mp=S.d.div.withConfig({displayName:"DriveFilePreview__HeaderContainer",componentId:"sc-15ckmgp-1"})(["display:flex;align-items:center;padding:"," ",";width:100%;overflow:hidden;"],P.c.SPACING_5B,P.c.SPACING_6B),gp=S.d.div.withConfig({displayName:"DriveFilePreview__BackButtonContainer",componentId:"sc-15ckmgp-2"})(["display:flex;height:",";width:",";align-items:center;justify-content:center;border-radius:",";border:"," solid ",";cursor:pointer;"],P.c.SPACING_10B,P.c.SPACING_10B,P.c.SPACING_2B,P.c.SPACING_1,({theme:e})=>e.BORDER),fp=Object(S.d)(ee.i).withConfig({displayName:"DriveFilePreview__FileName",componentId:"sc-15ckmgp-3"})(["padding-left:",";max-width:560px;word-break:break-word;"],P.c.SPACING_3B),Ep=S.d.div.withConfig({displayName:"DriveFilePreview__SlideViewContainer",componentId:"sc-15ckmgp-4"})(["display:flex;flex-grow:1;overflow:hidden;padding:"," "," "," ",";"],P.c.SPACING_6B,P.c.SPACING_6B,P.c.SPACING_0B,P.c.SPACING_6B),bp=Object(S.d)(ee.j).withConfig({displayName:"DriveFilePreview__ErrorMessage",componentId:"sc-15ckmgp-5"})(["width:100%;margin-top:",";text-align:center;color:",";"],P.c.SPACING_8B,({theme:e})=>e.RED),Cp=x.b.getOrCreate({isLive:!1,skipEmptySlide:!0},x.a.DRIVE_FILE_PREVIEW),vp=a.a.memo(({theme:e,previewFile:t,onClose:i})=>{const o=Object(n.useState)(!0),r=m()(o,2),s=r[0],l=r[1],c=Object(n.useState)(!1),d=m()(c,2),p=d[0],u=d[1],h=Object(n.useState)({}),g=m()(h,2),E=g[0],b=g[1],C=e=>{Cp.processEvent(new bi.a(e))};Object(n.useEffect)(()=>{if(t&&t.filePath){const i=Object(f.E)(t.filePath);e=i,ip.a.get(e).then(e=>{Object(f.wb)(e.data,C),l(!1)}).catch(()=>{l(!1),u(!0)});(e=>{ip.a.get(e).then(e=>{var t,i;b(null!==(t=null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.contentTaggingData)&&void 0!==t?t:{})}).catch(()=>{})})(Object(f.G)(t.filePath))}else l(!1),u(!0);var e},[]);const v=()=>{Cp.reset(),i()};return a.a.createElement(hp,null,a.a.createElement(mp,null,a.a.createElement(gp,{onClick:v},a.a.createElement(Ve.p,{size:16,orientation:"left",fill:e.TEXT_PRIMARY})),a.a.createElement(fp,null,null===t||void 0===t?void 0:t.name)),a.a.createElement(ee.f,null),(()=>{if(!s&&!p)return a.a.createElement(Ep,null,a.a.createElement(up,{slides:Cp.slides,columns:2,preProcessor:Cp,slideData:E}))})(),(()=>{if(s){const t={display:"flex",justifyContent:"center",width:"100%",paddingTop:P.c.SPACING_8B,paddingBottom:P.c.SPACING_8B};return a.a.createElement(Fc.d,{size:32,color:e.GREEN,rootContainerStyles:t,delay:500})}})(),(()=>{if(p)return a.a.createElement(bp,null,"There was an error in showing the preview.")})())});var Sp=Object(S.f)(vp);function Ip(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function yp(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ip(Object(i),!0).forEach((function(t){b()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ip(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const _p=S.d.div.withConfig({displayName:"FileUploader__TabsContainer",componentId:"yo9dr3-0"})(["display:flex;flex-direction:column;width:100%;margin-top:",";"],P.c.SPACING_5B),Op=S.d.div.withConfig({displayName:"FileUploader__OnboardingContentWrapper",componentId:"yo9dr3-1"})(["display:",";height:100%;width:100%;"],({isVisible:e})=>e?"auto":"none"),wp=S.d.div.withConfig({displayName:"FileUploader__FileUploaderWrapper",componentId:"yo9dr3-2"})(["display:flex;flex-grow:1;overflow:hidden;background-color:",";"],({theme:e})=>e.BG_MAIN),Tp=new Sd.a;var Ap,Pp=a.a.memo(({onSendData:e,onChangeSlide:t,disableSelectFromDrive:i=!1,disableSystemUpload:o=!1,primaryButtonText:r,onPrimaryButtonClick:s,currentScreen:l,totalScreens:c,resetDrawingBoardTools:d,lastPath:p})=>{const u=Object(C.d)(),h=Object(C.e)(e=>e.getIn(["canvas","activeSlide"])),g=Object(C.e)(e=>e.getIn(["drawingBoardControls","theme"])),E=Object(C.e)(e=>e.getIn(["drawingBoardControls","slideBgImage"])),b=Object(n.useState)(null),v=m()(b,2),S=v[0],I=v[1],y=Object(n.useState)(Tp),_=m()(y,2),O=_[0],w=_[1],T=Object(n.useState)(!1),A=m()(T,2),P=A[0],R=A[1],D=Object(n.useState)(!1),N=m()(D,2),k=N[0],L=N[1],B=Object(n.useState)(null),M=m()(B,2),G=M[0],U=M[1],V=Object(n.useRef)([]),F=Object(n.useRef)([]),W=Object(n.useRef)(!1),z=Object(n.useCallback)(e=>I(e),[]),q=Object(n.useCallback)(()=>[{id:Lc.SELECT_FROM_CLOUD,label:Lc.SELECT_FROM_CLOUD,disabled:P},{id:Lc.UPLOAD_NEW,label:Lc.UPLOAD_NEW,disabled:O.length>0}],[P,O]),Y=(e,t,i,n=!1)=>{const a=[...V.current];if(n&&V.current[e])a.splice(e,1);else{let n;if(V.current[e]&&i){const a=V.current[e];n={index:e,uid:t,imageUrls:a?a.imageUrls.concat(i):i}}else i&&(n={index:e,uid:t,imageUrls:i});a[e]=n}V.current=a},X=Object(n.useCallback)(e=>{if(Array.isArray(V.current)&&e.length>0){const t=e.map(e=>e.id);V.current=V.current.sort((e,i)=>t.findIndex(t=>t===(null===e||void 0===e?void 0:e.uid))-t.findIndex(e=>e===(null===i||void 0===i?void 0:i.uid)))}},[]),K=Object(n.useCallback)(e=>{e&&e.length?R(!0):(R(!1),L(!1))},[]),Z=Object(n.useCallback)(()=>{L(!0)},[]),J=()=>{x.b.main.isValidSlide(h+1)&&t(h+1),u(Object(ye.C)(!1))},Q=()=>{u(Object(ye.C)(!1))},$=()=>{d&&(d(F.current),F.current=[]),J()},te=t=>{const i=O.map(e=>Object(f.E)(e.filePath));Object(f.Ab)(i.reverse().getJS(),{},i=>((t,i)=>{Object(f.wb)(t,t=>{e(t,!1,h+1,{contentTaggingData:i})})})(i,t),Q,$)},ie=()=>{u(Object(ye.C)(!0));const e=x.b.main.getCurrentDrawingData();F.current=Object(f.l)(e),new Promise(e=>{let t={};const i=O.map(e=>Object(f.G)(e.filePath));Object(f.Ab)(i.getJS(),{},e=>{const i=e.contentTaggingData;t=yp(yp({},t),i)},null,()=>{Object.keys(t).forEach(e=>{var i;const n=t[e];t[e]=null!==(i=null===n||void 0===n?void 0:n.slideTitle)&&void 0!==i?i:null}),e(t)},0,!1)}).then(e=>{te(e)})},ne=Object(n.useCallback)(()=>{W.current||(W.current=!0,O.length>0?ie():P&&(u(Object(ye.C)(!0)),V.current.reverse().forEach(t=>{t&&t.imageUrls.reverse().forEach(t=>{const i=g||H.ac.DARK,n=Object(f.k)(t,h+1,i,E);e(n)})}),setTimeout(()=>{J()},500)),s(),j.f.sendData(j.c.UPLOAD_FILE,{src:p}))},[P,s,V.current,g,h,e,t,O,W.current]),ae=Object(n.useCallback)(e=>{U(e)},[]),oe=Object(n.useCallback)(()=>{U(null)},[]),re=Object(n.useCallback)(e=>{w(e)},[]),se=()=>{switch(i?Lc.UPLOAD_NEW:o?Lc.SELECT_FROM_CLOUD:S){case Lc.SELECT_FROM_CLOUD:return a.a.createElement(vd,{selectedDriveFiles:O,onSelectedFilesChange:re,showPreviewButton:!0,onPreviewButtonClick:ae});case Lc.UPLOAD_NEW:return a.a.createElement(wp,null,a.a.createElement(ep,{onImageUrls:Y,onSelectedSystemFilesChange:K,onAllFilesUploadComplete:Z,removeCardOnUpload:!1,isLiveClass:!0,acceptedFileExtensions:H.A.ACCEPTED_FILE_EXTENSIONS,acceptedFileTypes:H.A.ACCEPTED_FILE_TYPES,showEmptyUploadState:!0,customScrollbar:!0,allowSorting:k,sortSystemFiles:X}));default:return a.a.createElement(a.a.Fragment,null)}},le=Object(n.useCallback)(()=>a.a.createElement(_p,null,a.a.createElement(Uc,{tabList:q(),defaultTabId:i?Lc.UPLOAD_NEW:Lc.SELECT_FROM_CLOUD,onChange:z}),a.a.createElement(ee.f,null)),[q,z,i]),ce=Object(n.useCallback)(()=>i?{title:H.A.UPLOAD_FILE.TITLE,subtitle:H.A.UPLOAD_FILE.SUBTITLE}:o?{title:H.A.SELECT_FROM_DRIVE.TITLE,subtitle:H.A.SELECT_FROM_DRIVE.SUBTITLE}:le,[i,o,le]),de=Object(n.useMemo)(()=>({primaryButton:{text:r,onClick:ne,disabled:P&&!k},currentScreen:l,totalScreens:c}),[r,P,k,l,c,ne]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(Op,{isVisible:!G},a.a.createElement($s,{header:ce(),body:se,footer:de})),(()=>{if(G)return a.a.createElement(Sp,{previewFile:G,onClose:oe})})())});!function(e){e.THEME_SELECTOR="THEME_SELECTOR",e.MEDIA_DEVICES="MEDIA_DEVICES",e.VIDEO_MODE="VIDEO_MODE",e.FILE_SELECT="FILE_SELECT"}(Ap||(Ap={}));const xp=[Ap.THEME_SELECTOR,Ap.MEDIA_DEVICES,Ap.VIDEO_MODE,Ap.FILE_SELECT],Rp=()=>{};var Dp=a.a.memo(({onSendData:e=Rp,onChangeSlide:t=Rp,screens:i,resetDrawingBoardTools:o})=>{const r=Object(C.e)(e=>e.getIn(["app","showSplashScreen"])),s=Object(C.e)(e=>e.getIn(["app","isEducator"])),l=Object(C.e)(e=>e.getIn(["app","devices"])),c=Object(C.e)(e=>e.getIn(["videoPlayControls","isChatHidden"])),d=Object(C.e)(e=>e.getIn(["app","isRoundVideoSupported"])),p=Object(C.e)(e=>e.getIn(["app","isChromaEnabled"])),u=Object(C.e)(e=>e.getIn(["app","isMultiEduClass"])),h=Object(C.e)(e=>e.getIn(["app","isModerator"])),g=Object(C.e)(e=>e.getIn(["app","isDriveEnabled"])),f=Object(n.useState)(!1),E=m()(f,2),b=E[0],v=E[1],S=Object(n.useState)(0),I=m()(S,2),y=I[0],_=I[1],O=Object(n.useRef)(!1),w=Object(n.useMemo)(()=>i||(u&&h&&!s?[Ap.MEDIA_DEVICES]:d||p?xp:xp.filter(e=>e!==Ap.VIDEO_MODE)),[i,u,h,s,d,p]);Object(n.useEffect)(()=>{let e;return!r&&l.length>0&&!O.current&&(e=setTimeout(()=>{v(!0),O.current=!0},1e3)),()=>{e&&clearTimeout(e)}},[r,l]);const T=Object(n.useCallback)(()=>{y===w.length-1?v(!1):_(y+1)},[y,w]),A=()=>y===w.length-1?H.d.DONE:H.d.NEXT;return a.a.createElement(ee.r,{open:b,onClose:Rp,animation:"slide",width:c?"100%":"75%",paperWidth:g&&w[y]===Ap.FILE_SELECT?"676px":"500px",paperHeight:"545px"},(()=>{switch(w[y]){case Ap.THEME_SELECTOR:return a.a.createElement(kc,{onPrimaryButtonClick:T,primaryButtonText:A(),currentScreen:y+1,totalScreens:w.length});case Ap.MEDIA_DEVICES:return a.a.createElement(_c,{onPrimaryButtonClick:T,primaryButtonText:A(),currentScreen:y+1,totalScreens:w.length});case Ap.VIDEO_MODE:return a.a.createElement(al,{isScreenModeTabClicked:!1,isDescriptionHidden:!1,primaryButtonText:A(),onPrimaryButtonClick:T,currentScreen:y+1,totalScreens:w.length});case Ap.FILE_SELECT:return a.a.createElement(Pp,{onSendData:e,onChangeSlide:t,onPrimaryButtonClick:T,primaryButtonText:A(),currentScreen:y+1,totalScreens:w.length,disableSelectFromDrive:!g,resetDrawingBoardTools:o,lastPath:H.R.ONBOARDING})}})())}),Np=i("E4fE"),jp=i("WxK7"),kp=i("v4fW"),Lp=S.d.div.withConfig({displayName:"Shapes__Wrapper",componentId:"oupu2k-0"})(["margin-right:",";"],P.c.SPACING_2B),Bp=a.a.memo((function(e){var t=e.setDrawingMode,i=e.shortcutText,n=Object(C.e)((function(e){return e.getIn(["drawingBoardControls","drawingMode"])})),o=Object(C.e)((function(e){return e.getIn(["drawingBoardControls","markerColor"])})),r=Object(C.e)((function(e){return e.getIn(["drawingBoardControls","isEducatorSlideViewActive"])})),s=n===H.v.RECTANGLE||n===H.v.CIRCLE||n===H.v.ARROW||n===H.v.LINE;return a.a.createElement(Lp,null,a.a.createElement(kp.a,{type:"shapes",text:H.u.SHAPES,isSelected:s,selectedColor:o,onClick:function(){s||t(H.v.RECTANGLE)},varWidth:!0,shortcutText:i,disabled:r}))}));Bp.propTypes={setDrawingMode:U.a.func.isRequired};var Mp=Bp;const Gp=S.d.div.withConfig({displayName:"AddSlide__Wrapper",componentId:"sc-1akupu4-0"})(["margin-right:",";"],P.c.SPACING_2B),Up=a.a.memo(({onAddSlide:e})=>{const t=Object(C.e)(e=>e.getIn(["drawingBoardControls","isEducatorSlideViewActive"]));return a.a.createElement(Gp,null,a.a.createElement(kp.a,{type:"addSlide",text:H.u.ADD_SLIDE,onClick:()=>{e(),j.f.sendData(j.c.SLIDE_ADDED)},varWidth:!0,disabled:t}))});Up.propTypes={onAddSlide:U.a.func.isRequired};var Hp=Up,Vp=S.d.div.withConfig({displayName:"Highlighter__Wrapper",componentId:"ed2ze3-0"})(["margin-right:",";"],P.c.SPACING_2B),Fp=a.a.memo((function(e){var t=e.setDrawingMode,i=e.shortcutText,n=Object(C.e)((function(e){return e.getIn(["drawingBoardControls","drawingMode"])})),o=Object(C.e)((function(e){return e.getIn(["drawingBoardControls","markerColor"])})),r=Object(C.e)((function(e){return e.getIn(["drawingBoardControls","isEducatorSlideViewActive"])})),s=n===H.v.HIGHLIGHTER;return a.a.createElement(Vp,null,a.a.createElement(kp.a,{type:"highlighter",text:H.u.HIGHLIGHTER,isSelected:s,selectedColor:o,onClick:function(){s||t(H.v.HIGHLIGHTER)},varWidth:!0,shortcutText:i,disabled:r}))}));Fp.propTypes={setDrawingMode:U.a.func.isRequired};var Wp=Fp,zp=i("T+JF"),qp=S.d.div.withConfig({displayName:"SelectPollType__Wrapper",componentId:"nnwh80-0"})(["display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%;margin-bottom:",";"],P.c.SPACING_2B),Yp=a.a.memo((function(e){var t=e.setOptions,i=e.theme,o=e.noOfOptions,r=Object(n.useCallback)((function(){t(5)}),[]),s=Object(n.useCallback)((function(){t(4)}),[]),l=Object(n.useCallback)((function(){t(2)}),[]);return a.a.createElement(qp,null,a.a.createElement(Fc.e,{height:56,width:104,iconSize:20,textSize:P.d.SMALL,isSelected:5==o,selectedColor:i.BLUE,type:"option5",text:H.Eb.OPTION_5,onClick:r}),a.a.createElement(Fc.e,{height:56,width:104,iconSize:20,textSize:P.d.SMALL,isSelected:4==o,selectedColor:i.BLUE,type:"option4",text:H.Eb.OPTION_4,onClick:s}),a.a.createElement(Fc.e,{height:56,width:104,iconSize:20,textSize:P.d.SMALL,isSelected:2==o,selectedColor:i.BLUE,type:"option2",text:H.Eb.OPTION_2,onClick:l}))}));Yp.propTypes={setOptions:U.a.func.isRequired};var Xp=Object(S.f)(Yp),Kp=S.d.div.withConfig({displayName:"PollAnswer__Wrapper",componentId:"sc-1snydze-0"})(["height:48px;width:100%;margin-right:",";border:1px solid;color:",";background:",";border-color:",";box-sizing:border-box;border-radius:",";text-transform:uppercase;display:flex;justify-content:center;align-items:center;font-size:",";font-weight:",";cursor:pointer;pointer-events:",";"],P.c.SPACING_2B,(function(e){var t=e.isSelected,i=e.theme;return t?i.BLUE:i.TEXT_PRIMARY}),(function(e){return e.theme.BG_MAIN}),(function(e){var t=e.isSelected,i=e.theme;return t?i.BLUE:i.BORDER}),P.c.SPACING_2B,P.d.MEDIUM,P.d.SEMIBOLD,(function(e){return e.disabled?"none":"initial"})),Zp=a.a.memo((function(e){var t=e.pollAnswer,i=e.answer,n=e.onClick,o=e.disabled,r=t===i;return a.a.createElement(Kp,{onClick:function(){n(i)},disabled:o,isSelected:r},i)}));Zp.propTypes={answer:U.a.string.isRequired,onClick:U.a.func.isRequired,disabled:U.a.bool.isRequired},Zp.defaultProps={answer:"",disabled:!1};var Jp=Zp,Qp={2:["True","False"],4:["A","B","C","D"],5:["A","B","C","D","E"]},$p=S.d.div.withConfig({displayName:"SelectCorrectAnswer__Wrapper",componentId:"sc-1uc0mf-0"})(["display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%;margin-bottom:",";background-color:",";"],P.c.SPACING_2B,(function(e){return e.theme.BODY_BG})),eu=Object(S.d)(ee.b).withConfig({displayName:"SelectCorrectAnswer__SkipButton",componentId:"sc-1uc0mf-1"})(["padding:0px;height:48px;width:100%;color:",";border-radius:",";border-color:",";"],(function(e){return e.theme.BLUE}),P.c.SPACING_2B,(function(e){return e.isSelected?e.theme.BLUE:e.theme.BORDER})),tu=a.a.memo((function(e){var t=e.noOfOptions,i=e.onAnswerSelected,o=e.pollAnswer,r=Object(n.useRef)(t);Object(n.useEffect)((function(){r.current=t}),[t]);var s=function(){i("")},l=Object(n.useCallback)((function(e){i(e)}),[t]);return a.a.createElement($p,null,function(){var e=t||r.current;if(e>0)return Qp[e].map((function(e,t){return a.a.createElement(Jp,{key:t,pollAnswer:o,answer:e,onClick:l})}))}(),a.a.createElement(eu,{isSelected:""===o,variant:"hollow",onClick:s},H.Cb.SKIP_SELECTION))}));tu.propTypes={noOfOptions:U.a.number.isRequired,onAnswerSelected:U.a.func.isRequired};var iu=tu,nu=S.d.div.withConfig({displayName:"SelectPollTime__Wrapper",componentId:"sc-18v15a7-0"})(["display:flex;flex-direction:row;justify-content:flex-start;align-items:center;width:100%;margin-bottom:",";background-color:",";"],P.c.SPACING_4B,(function(e){return e.theme.BODY_BG})),au=Object(S.d)(ee.b).withConfig({displayName:"SelectPollTime__SideButton",componentId:"sc-18v15a7-1"})(["padding:0;height:28px;width:28px;margin-right:",";background-color:",";opacity:",";"],P.c.SPACING_3B,(function(e){return e.theme.DIVIDER}),(function(e){return"disabled"===e.variant?.5:1})),ou=S.d.input.withConfig({displayName:"SelectPollTime__PollTimeInput",componentId:"sc-18v15a7-2"})(["border-width:0px;width:","ch;height:100%;text-align:center;outline:none;&::-webkit-outer-spin-button,&::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}-moz-appearance:textfield;background-color:transparent;font-family:'UN_REGULAR';font-weight:",";font-size:",";line-height:",";color:",";"],(function(e){var t=e.value;return String(t).length+3}),P.d.SEMIBOLD,P.d.MEDIUM,P.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_PRIMARY})),ru=S.d.div.withConfig({displayName:"SelectPollTime__InputContainer",componentId:"sc-18v15a7-3"})(["min-width:48px;height:48px;margin-right:",";background-color:",";border:1px solid ",";border-radius:",";"],P.c.SPACING_3B,(function(e){return e.theme.BODY_BG}),(function(e){return e.theme.BORDER}),P.c.SPACING_2B),su=a.a.memo((function(e){var t=e.pollTime,i=e.onPollTimeChange,o=Object(C.d)(),r=Object(n.useCallback)((function(){var e=Math.max(t-H.Db.STEP,H.Db.MIN);i(e)}),[t]),s=Object(n.useCallback)((function(){i(Math.min(t+H.Db.STEP,H.Db.MAX))}),[t]),l=Object(n.useCallback)((function(e){var t=Math.min(Math.max(Number(e.target.value),H.Db.MIN),H.Db.MAX);i(t)}),[i]),c=Object(n.useCallback)((function(){o(Object(He.e)(!0))}),[]),d=Object(n.useCallback)((function(){o(Object(He.e)(!1))}),[]);return a.a.createElement(nu,null,a.a.createElement(au,{variant:t===H.Db.MIN?"disabled":"hollow",onClick:r},a.a.createElement(Ve.eb,{size:20})),a.a.createElement(ru,null,a.a.createElement(ou,{onChange:l,type:"number",value:t,min:H.Db.MIN,step:H.Db.STEP,max:H.Db.MAX,onFocus:c,onBlur:d})),a.a.createElement(au,{variant:t===H.Db.MAX?"disabled":"hollow",onClick:s},a.a.createElement(Ve.ub,{size:20})))}));su.propTypes={pollTime:U.a.number.isRequired,onPollTimeChange:U.a.func.isRequired};var lu=su;const cu=S.d.div.withConfig({displayName:"CreatePollPopup__Wrapper",componentId:"sc-1s5g0dm-0"})(["width:360px;box-sizing:border-box;display:flex;flex-direction:column;justify-content:flex-end;align-items:center;padding:",";"],P.c.SPACING_4B),du=S.d.div.withConfig({displayName:"CreatePollPopup__SectionHeading",componentId:"sc-1s5g0dm-1"})(["display:flex;flex-direction:row;justify-content:flex-start;align-items:center;width:100%;font-size:",";font-weight:",";line-height:",";color:",";padding-top:",";padding-bottom:",";"],P.d.LARGE,P.d.SEMIBOLD,P.d.LINE_HEIGHT_MAX,({theme:e})=>e.TEXT_PRIMARY,P.c.SPACING_2B,P.c.SPACING_2B),pu=S.d.div.withConfig({displayName:"CreatePollPopup__ButtonsWrapper",componentId:"sc-1s5g0dm-2"})(["display:flex;flex-direction:column;width:100%;"]),uu=Object(S.d)(ee.b).withConfig({displayName:"CreatePollPopup__ShareLeaderboardButton",componentId:"sc-1s5g0dm-3"})(["height:40px;margin-top:",";margin-bottom:",";border-color:",";"],P.c.SPACING_1B,P.c.SPACING_2B,({theme:e})=>e.BLUE),hu=Object(S.d)(ee.b).withConfig({displayName:"CreatePollPopup__CreatePollButton",componentId:"sc-1s5g0dm-4"})(["height:40px;margin-bottom:",";"],P.c.SPACING_2B),mu=a.a.memo(({setOptions:e,showShareLeaderboard:t,theme:i,onShareLeaderboard:o,noOfOptions:r,onPollCreated:s,pollTime:l,onPollTimeChange:c,runningSlidePollData:d,isPdfEditor:p,updatePoll:u,deletePoll:h,activeSlide:g,popoverOpen:E,isCloudPollIconClicked:b})=>{const C=Object(n.useState)(null),v=m()(C,2),S=v[0],I=v[1],y=Object(n.useState)(!1),_=m()(y,2),O=_[0],w=_[1],T=Object(n.useRef)(!1);Object(n.useEffect)(()=>{E&&d&&I(d.answer)},[E,d]);const A=Object(n.useCallback)(t=>{e(t),I(null)},[r]),x=Object(n.useCallback)(e=>{I(e)},[]),R=Object(n.useCallback)(()=>{w(!0),T.current||(T.current=!0,s(S))},[s,S]),D=Object(n.useCallback)(()=>{h&&!T.current&&(T.current=!0,h())},[h]),N=Object(n.useCallback)(()=>{u&&!T.current&&(T.current=!0,u(S))},[u,S]);return a.a.createElement(cu,null,a.a.createElement(du,null,"Type"),a.a.createElement(Xp,{setOptions:A,noOfOptions:r}),a.a.createElement(du,null,"Correct Answer"),a.a.createElement(iu,{noOfOptions:r,pollAnswer:S,onAnswerSelected:x}),a.a.createElement(du,null,"Time in seconds"),a.a.createElement(lu,{pollTime:l,onPollTimeChange:c}),(()=>{if(p&&(d||b)){const e=Object(f.pb)(S)||!(()=>{if(d){var e;const t=d.answer,i=S,n=d.time,a=l,o=null===(e=d.choices)||void 0===e?void 0:e.length,s=r;return!(t===i&&n===a&&o===s)}return!0})();return a.a.createElement(pu,null,a.a.createElement(hu,{onClick:N,variant:e?"disabled":"filled",isEducator:!0},H.l.UPDATE_POLL),a.a.createElement(hu,{onClick:D,variant:"hollow",isEducator:!0,action:"destructive"},H.l.DELETE_POLL))}return a.a.createElement(hu,{onClick:R,variant:Object(f.pb)(S)||O?"disabled":"filled",isEducator:!0},H.Cb.CREATE_POLL)})(),(()=>{if(t)return a.a.createElement(uu,{variant:"hollow",onClick:o},a.a.createElement(zp.a,null),a.a.createElement(ee.j,{color:i.BLUE,lineHeight:P.d.LINE_HEIGHT,fontWeight:P.d.BOLD,margin:"0 0 0 ".concat(P.c.SPACING_2B)},H.Cb.SHARE_LEADERBOARD))})())});mu.propTypes={setOptions:U.a.func.isRequired,noOfOptions:U.a.number.isRequired,onPollCreated:U.a.func.isRequired,pollTime:U.a.number.isRequired,onPollTimeChange:U.a.func.isRequired};var gu=Object(S.f)(mu);i("CZkf");const fu=S.d.div.withConfig({displayName:"PollPredictionCard__Wrapper",componentId:"sc-1ss97hv-0"})(["display:flex;align-items:center;justify-content:center;flex-direction:row;padding:",";background:",";border-radius:",";"],P.c.SPACING_4B,e=>e.theme.BODY_BG,P.c.SPACING_2B),Eu=S.d.div.withConfig({displayName:"PollPredictionCard__PredictionTextWrapper",componentId:"sc-1ss97hv-1"})(["display:flex;align-items:flex-start;justify-content:center;flex-direction:column;"]),bu=Object(S.d)(ee.b).withConfig({displayName:"PollPredictionCard__StartPollButton",componentId:"sc-1ss97hv-2"})(["height:24px;width:84px;margin-left:",";"],P.c.SPACING_7B),Cu=S.d.div.withConfig({displayName:"PollPredictionCard__CloseButton",componentId:"sc-1ss97hv-3"})(["margin-left:",";height:24px;width:24px;cursor:pointer;"],P.c.SPACING_2B),vu=a.a.memo(({onClose:e,onStartPoll:t,theme:i})=>a.a.createElement(fu,null,a.a.createElement(Eu,null,a.a.createElement(ee.j,null,H.Cb.POLL_DETECTED),a.a.createElement(ee.k,{fontWeight:P.d.REGULAR,color:i.TEXT_TERTIARY},H.Cb.WANT_TO_START_POLL)),a.a.createElement(bu,{isEducator:!0,fontSize:P.d.EXTRA_SMALL,onClick:t},H.Cb.START_POLL),a.a.createElement(Cu,{onClick:e},a.a.createElement(Ve.wb,null))));vu.propTypes={},vu.defaultProps={};var Su=Object(S.f)(vu),Iu=i("EcEN"),yu=i.n(Iu),_u=i("K7FW");let Ou=[{answer:"A",order:0},{answer:"B",order:1},{answer:"C",order:2},{answer:"D",order:3},{answer:"E",order:4}],wu=[{answer:"True",order:0},{answer:"False",order:1}];const Tu=S.d.div.withConfig({displayName:"CreatePoll__Wrapper",componentId:"sf96is-0"})(["margin-right:",";"],P.c.SPACING_2B),Au=({socketManager:e,onSendPollData:t,savePdfEditorData:i,onSendCloudPollData:o})=>{const r=Object(C.d)(),s=Object(n.useRef)(null),l=Object(n.useState)(4),c=m()(l,2),d=c[0],p=c[1],u=Object(n.useState)(H.Db.INITIAL),h=m()(u,2),g=h[0],E=h[1],b=Object(n.useState)(!1),v=m()(b,2),S=v[0],I=v[1],y=Object(n.useState)(!1),_=m()(y,2),O=_[0],w=_[1],T=Object(n.useState)(!1),A=m()(T,2),P=A[0],R=A[1],D=Object(C.e)(e=>e.getIn(["poll","isCreatePollPopoverOpen"])),N=Object(C.e)(e=>e.getIn(["app","isSocketManagerInit"])),k=Object(C.e)(e=>e.getIn(["app","socketSubscribed"])),L=Object(C.e)(e=>e.getIn(["poll","globalLeaderboard"])),B=Object(C.e)(e=>e.getIn(["app","classId"])),M=Object(C.e)(e=>e.getIn(["canvas","activeSlide"])),G=Object(C.e)(e=>e.getIn(["poll","isPollActive"])),U=Object(C.e)(e=>e.getIn(["poll","isCloudPollIconClicked"])),V=Object(C.e)(e=>e.getIn(["app","jwt"])),F=Object(C.e)(e=>e.getIn(["poll","pollPredictionIndex"])),W=Object(C.e)(e=>e.getIn(["drawingBoardControls","isEducatorSlideViewActive"])),z=Object(C.e)(e=>e.getIn(["app","classConfig"])),q=Object(C.e)(e=>e.getIn(["pdfEditor","isPdfEditor"])),Y=Object(C.e)(e=>e.getIn(["app","classState"])),X=Object(C.e)(e=>e.getIn(["poll","isCloudPollCardStartClicked"])),K=(Object(_u.a)(),x.b.main.slides),Z=K.getItem(M),J=Object(n.useRef)(null),Q=Object(n.useRef)(null);Object(n.useEffect)(()=>()=>{Q.current&&clearTimeout(Q.current)},[]);const $=()=>{Z&&(J.current=Z.poll,Z.poll&&(p(Z.poll.choices.length),E(Z.poll.time)))};Object(n.useEffect)(()=>{$()},[M,Z,Y,G]),Object(n.useEffect)(()=>{D&&$()},[D]),Object(n.useEffect)(()=>{U&&(r(Object(He.i)(!0)),r(Object(He.d)(!1)))},[U]),Object(n.useEffect)(()=>{var e;X&&(de(null===(e=J.current)||void 0===e?void 0:e.answer),r(Object(He.h)(!1)),he(!0))},[X]);const ee=G||!q&&!k||!q&&W,te=Object(n.useRef)(null);Object(n.useEffect)(()=>{G&&I(!1)},[G]),Object(n.useEffect)(()=>{null!==z&&void 0!==z&&z.pollStartTime&&E(z.pollStartTime),null!==z&&void 0!==z&&z.noOfOptions&&p(z.noOfOptions)},[z]),Object(n.useEffect)(()=>{let e;return S?q?I(!1):e=setTimeout(()=>{I(!1)},5e3):re(),()=>{clearTimeout(e)}},[S,q]),Object(n.useEffect)(()=>{!Object(f.ob)(F)||F!=M||ee||D||J.current?D&&re(!0):(w(!0),ne(!0))},[F,M]),Object(n.useEffect)(()=>{let e;return L&&L.size>=H.lb&&(e=setTimeout(()=>{R(!0)},100)),()=>clearTimeout(e)},[L]),Object(n.useEffect)(()=>{let e;return te.current&&(e=setTimeout(()=>{te.current.updatePosition()},200)),()=>clearTimeout(e)},[P]);const ie=Object(n.useCallback)(()=>{w(!1),O&&F&&r(Object(He.b)(F,B,V))},[O,F,V]),ne=()=>{r(Object(He.i)(!0)),Ee()},ae=Object(n.useCallback)(()=>{re()},[S,O]),oe=Object(n.useCallback)(()=>{re()},[S,O]),re=(e=!1)=>{S||e&&!O||(r(Object(He.i)(!1)),R(!1),ce())},se=Object(n.useCallback)(e=>{p(e)},[]),le=Object(n.useCallback)(e=>{E(e)},[]),ce=Object(n.useCallback)(()=>{setTimeout(()=>{w(!1)},300)},[]),de=Object(n.useCallback)(e=>{me(e),pe(),I(!0)},[e,N,d,t,g,M,K]),pe=()=>{q||e.updateEducatorConfig(H.Bb.CONFIG_TYPE,{[H.Bb.POLL_DURATION]:g,[H.Bb.CHOICES_COUNT]:d})},ue=()=>{let e;return e=d>2?Ou.slice(0,d):wu,e},he=(e=!1)=>{Q.current&&clearTimeout(Q.current),r(Object(He.i)(!1)),Q.current=setTimeout(()=>{const t=Object(f.B)(M),i=K.getItem(M).updatePollData(null);J.current=i.poll,o(t),e||r(Object(ye.N)(H.Z.CLOUD_POLL_DELETED,!0))},250)},me=(e,t="")=>{q?ge(e,t):fe(e)},ge=(e,t)=>{r(Object(He.i)(!1)),Q.current&&clearTimeout(Q.current),Q.current=setTimeout(()=>{const i=yu()(),n=Object(f.w)(i,ue(),e,g,M,t),a=K.getItem(M).updatePollData({id:i,data:ue(),answer:e,time:g,mode:t===H.l.UPDATE_POLL?H.m.UPDATE:H.m.CREATE,slideIndex:M});J.current=a.poll,o(n),r(Object(ye.N)(t===H.l.UPDATE_POLL?H.Z.CLOUD_POLL_UPDATED:H.Z.CLOUD_POLL_CREATED,!0))},250)},fe=i=>{e.openPoll("Poll",ue(),i,g);const n=4==d?j.b.POLL_4_CHOICES:5==d?j.b.POLL_5_CHOICES:j.b.POLL_TRUE_FALSE;j.f.sendData(j.c.POLL_INIT,n);const a=yu()(),o={e:H.L.OPEN_POLL,data:{id:a,data:ue(),a:i,t:g}};t(o),J.current&&he(!0)},Ee=()=>{q||e.getLeaderBoard()},be=Object(n.useCallback)(()=>{e.shareLeaderBoard(),re()},[e,N]),Ce=e=>{me(e,H.l.UPDATE_POLL)};return a.a.createElement(Tu,{ref:s},a.a.createElement(kp.a,{type:"poll",text:H.u.POLL,onClick:ne,disabled:ee,varWidth:!0}),a.a.createElement(Uo,{width:O?330:360,action:te,anchorEl:s.current,open:D,onClose:oe,elevation:0,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},positionProperties:["bottom","right"]},(()=>{if(O)return a.a.createElement(Su,{onClose:ae,onStartPoll:ie})})(),(()=>{if(!O)return a.a.createElement(gu,{setOptions:se,showShareLeaderboard:P,onShareLeaderboard:be,noOfOptions:d,onPollCreated:de,pollTime:g,onPollTimeChange:le,runningSlidePollData:J.current,isPdfEditor:q,updatePoll:Ce,deletePoll:he,activeSlide:M,popoverOpen:D,isCloudPollIconClicked:U})})()))};Au.propTypes={savePdfEditorData:U.a.func.isRequired},Au.defaultProps={savePdfEditorData:()=>{}};var Pu=Au,xu=S.d.div.withConfig({displayName:"ZoomTool__Wrapper",componentId:"wlqu2t-0"})(["margin-right:",";"],P.c.SPACING_2B),Ru=a.a.memo((function(e){var t=e.handleZoomIn,i=Object(C.e)((function(e){return e.getIn(["drawingBoardControls","isEducatorSlideViewActive"])}));return a.a.createElement(xu,null,a.a.createElement(kp.a,{type:"zoomIn",text:H.u.ZOOM,onClick:function(){t()},varWidth:!0,disabled:i}))}));Ru.propTypes={handleZoomIn:U.a.func.isRequired};var Du=Ru,Nu=i("XRQK");function ju(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=va()(e);if(t){var a=va()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ba()(this,i)}}var ku=S.d.div.withConfig({displayName:"ZoomSlider__ZoomSliderContainer",componentId:"sc-1s4kb19-0"})(["display:flex;margin-left:",";@media only screen and (max-width:1150px){margin-left:",";}max-width:220px !important;"],P.c.SPACING_3B,P.c.SPACING_1B),Lu=Object(S.d)(Nu.a).withConfig({displayName:"ZoomSlider__ZoomResetButton",componentId:"sc-1s4kb19-1"})(["margin-left:",";@media only screen and (max-width:1150px){margin-left:",";}height:24px;width:48px;padding:"," ",";"],P.c.SPACING_3B,P.c.SPACING_1B,P.c.SPACING_6,P.c.SPACING_3B),Bu=S.d.div.withConfig({displayName:"ZoomSlider__SliderContainer",componentId:"sc-1s4kb19-2"})(["display:flex;justify-content:space-between;align-items:center;width:148px;@media only screen and (max-width:1150px){width:100px;}"]),Mu=(S.d.img.withConfig({displayName:"ZoomSlider__ZoomButtonImg",componentId:"sc-1s4kb19-3"})(["width:20px;height:20px;"]),S.d.div.withConfig({displayName:"ZoomSlider__ZoomButton",componentId:"sc-1s4kb19-4"})(["cursor:pointer;",""],(function(e){if(e.isDisabled)return Object(S.c)(["opacity:0.5;pointer-events:none;"])}))),Gu=S.d.div.withConfig({displayName:"ZoomSlider__SliderStepContainer",componentId:"sc-1s4kb19-5"})(["position:relative;width:84px;height:20px;display:flex;align-items:center;justify-content:center;"]),Uu=Object(Bn.a)((function(){return{root:{color:function(e){return e.theme.TEXT_PRIMARY},height:4,width:84,opacity:1,transition:"all 0.2s ease-in",transitionDelay:"0.2s","@media (max-width: 1150px)":{width:60}},thumb:{height:12,width:12,backgroundColor:function(e){return e.theme.TEXT_PRIMARY},boxShadow:function(e){var t=e.theme;return"0px 0px 0px 3px ".concat(t.SLIDER_OPACITY)},marginTop:-4,marginLeft:-4,"&:hover":{boxShadow:function(e){var t=e.theme;return"0px 0px 0px 3px ".concat(t.SLIDER_OPACITY)}}},mark:{background:function(e){return e.theme.TEXT_PRIMARY},opacity:.2,borderRadius:4,height:4,width:4,marginLeft:-4},active:{"&:hover":{boxShadow:function(e){var t=e.theme;return"0px 0px 0px 3px ".concat(t.SLIDER_OPACITY)}}},track:{height:4,borderRadius:4},rail:{height:4,borderRadius:4}}}))(ro.a),Hu=function(e){fa()(i,e);var t=ju(i);function i(){var e;da()(this,i);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),b()(ma()(e),"handleZoomResetClick",(function(){e.props.setCanvasZoomUtil(H.jc.INIT),e.props.resetCanvasTranslation()})),b()(ma()(e),"handleZoomChange",(function(t,i){var n=i;n=Math.max(n,H.jc.MIN),(n=Math.min(n,H.jc.MAX))!==e.props.canvasZoom&&(e.props.setCanvasZoomUtil(n),n===H.jc.INIT&&e.props.resetCanvasTranslation())})),e}return ua()(i,[{key:"renderZoomOutButton",value:function(){var e=this.props.canvasZoom<=H.jc.MIN;return a.a.createElement(Mu,{isDisabled:e,onClick:this.props.handleZoomOut},a.a.createElement(Ve.gc,{width:"20",height:"20"}))}},{key:"renderZoomSliderSteps",value:function(){return a.a.createElement(Gu,null,a.a.createElement(Uu,{min:H.jc.INIT,max:H.jc.MAX,step:H.jc.STEP,value:this.props.canvasZoom,onChange:this.handleZoomChange,defaultValue:H.jc.MIN,track:!1,marks:[{value:1.5},{value:2},{value:2.5}],theme:this.props.theme}))}},{key:"renderZoomInButton",value:function(){var e=this.props.canvasZoom>=H.jc.MAX;return a.a.createElement(Mu,{isDisabled:e,onClick:this.props.handleZoomIn},a.a.createElement(Ve.fc,{width:"20",height:"20"}))}},{key:"renderZoomSlider",value:function(){return a.a.createElement(Bu,null,this.renderZoomOutButton(),this.renderZoomSliderSteps(),this.renderZoomInButton())}},{key:"renderZoomResetButton",value:function(){return a.a.createElement(Lu,{variant:"hollow",action:"destructive",fontSize:P.d.SMALL,onClick:this.handleZoomResetClick},H.ic.EXIT)}},{key:"renderDisabledView",value:function(){if(this.props.isEducatorSlideViewActive)return a.a.createElement(ee.e,{isClickable:!0})}},{key:"render",value:function(){return a.a.createElement(ku,null,this.renderZoomSlider(),this.renderZoomResetButton(),this.renderDisabledView())}}]),i}(a.a.PureComponent),Vu=Object(C.c)((function(e){return{canvasZoom:e.getIn(["drawingBoardControls","canvasZoom"]),isEducatorSlideViewActive:e.getIn(["drawingBoardControls","isEducatorSlideViewActive"])}}))(Object(S.f)(Hu)),Fu=i("Clpk"),Wu=i("VYBE");const zu=S.d.div.withConfig({displayName:"MoreExpandedGrid__Wrapper",componentId:"xakew8-0"})(["padding:",";width:200px;box-sizing:border-box;border-radius:8px;"],P.c.SPACING_4B),qu=a.a.memo(({onToolHandler:e,onAddSlide:t,onSendData:i,hidePopover:o,onFullScreen:r,theme:s})=>{const l=Object(C.d)(),c=Object(C.e)(e=>e.getIn(["app","useGreenScreen"])),d=Object(C.e)(e=>e.getIn(["app","isDarkMode"])),p=Object(C.e)(e=>e.getIn(["app","useRoundVideo"])),u=Object(C.e)(e=>e.getIn(["app","isScreenShared"])),h=Object(C.e)(e=>e.getIn(["app","screenSharingAllowed"])),m=Object(C.e)(e=>e.getIn(["app","classState"])),g=Object(C.e)(e=>e.getIn(["app","isEducatorVideoResizable"])),E=Object(C.e)(e=>e.getIn(["app","accessToken"])),b=Object(C.e)(e=>e.getIn(["app","classId"])),v=Object(C.e)(e=>e.getIn(["app","apiHost"])),S=Object(C.e)(e=>e.getIn(["app","isLiveSupportTouchpointDisabled"])),I="https://unacademy.com/educator/live/".concat(b),y=Object(f.m)(c,p),_=Object(n.useCallback)(()=>{e("videoPosition")},[]),O=Object(n.useCallback)(()=>{e("themeSlide")},[]),w=Object(n.useCallback)(()=>{l(Object(ye.x)(!d,{onUserAction:!0}))},[d]),T=Object(n.useCallback)(()=>{const e=document.getElementById("screenvideo");u?Fu.a.stop():(e&&Wu.a.enterPIP(e),Fu.a.start()),o()},[u]),A=Object(n.useCallback)(()=>{e("videoSize")},[]),P=Object(n.useCallback)(()=>{l(Object(ye.Q)(!0)),o()},[]);return a.a.createElement(zu,null,a.a.createElement(ee.g,null,a.a.createElement(Fc.e,{type:"upload",text:H.nb.UPLOAD_FILE,onClick:P}),(()=>{if(h)return a.a.createElement(Fc.e,{type:u?"stopScreenSharing":"startScreenSharing",isSelected:u,text:u?H.nb.STOP_SCREEN_SHARE:H.nb.START_SCREEN_SHARE,onClick:T,disabled:0===m,selectedColor:s.RED})})(),(()=>{if(y>0)return a.a.createElement(Fc.e,{type:"videoPosition",text:H.nb.VIDEO_POSITION,onClick:_})})(),(()=>{if((p||c)&&g)return a.a.createElement(Fc.e,{type:"videoSize",text:H.nb.VIDEO_SIZE,onClick:A})})(),a.a.createElement(Fc.e,{type:"themeSlide",text:H.nb.SLIDE_THEME,onClick:O}),a.a.createElement(Fc.e,{type:"appTheme",text:d?H.nb.LIGHT_THEME:H.nb.DARK_THEME,onClick:w}),a.a.createElement(Fc.e,{type:"fullscreen",text:H.nb.FULL_SCREEN,onClick:r,shortcutText:"F"}),a.a.createElement(Fc.e,{type:"liveSupport",text:H.nb.LIVE_SUPPORT,onClick:()=>{l(Object(ye.a)(v,E,I))},textColor:s.BLUE,disabled:S})))});qu.propTypes={};var Yu=Object(S.f)(qu),Xu=S.d.div.withConfig({displayName:"SelectedTool__ToolWrapper",componentId:"sc-87xv0h-0"})([""]),Ku=S.d.div.withConfig({displayName:"SelectedTool__Wrapper",componentId:"sc-87xv0h-1"})(["padding:",";width:200px;display:flex;flex-direction:column;box-sizing:border-box;"],P.c.SPACING_4B),Zu=a.a.memo((function(e){var t=e.activeTool,i=e.onBackClick,o=e.resetData,r=e.educatorBoxAlign,s=e.videoSizeChangeHandler,l=Object(C.d)(),c=Object(C.e)((function(e){return e.getIn(["app","useGreenScreen"])})),d=Object(C.e)((function(e){return e.getIn(["app","useRoundVideo"])})),p=Object(f.m)(c,d),u=Object(C.e)((function(e){return e.getIn(["drawingBoardControls","theme"])})),h=Object(C.e)((function(e){return e.getIn(["drawingBoardControls","slideBgImage"])})),m=Object(C.e)((function(e){return e.getIn(["app","cameraRatio"])})),g=Object(n.useRef)(),E=Object(n.useRef)([]);Object(n.useEffect)((function(){g.current=Object(f.H)(m),E.current=[{type:g.current.LEFT_BOTTOM,imageType:"bottomLeftAlign",text:H.G.BOTTOM_LEFT},{type:g.current.RIGHT_BOTTOM,imageType:"bottomRightAlign",text:H.G.BOTTOM_RIGHT},{type:g.current.LEFT_TOP,imageType:"topLeftAlign",text:H.G.TOP_LEFT},{type:g.current.RIGHT_TOP,imageType:"topRightAlign",text:H.G.TOP_RIGHT}]}),[m]);var b=function(e,t){l(Object(ye.B)(e,t)),c&&(e===g.current.LEFT_BOTTOM.left&&t===g.current.LEFT_BOTTOM.top?j.f.sendData(j.c.VIDEO_POSITION_LEFT):e===g.current.RIGHT_BOTTOM.left&&t===g.current.RIGHT_BOTTOM.top&&j.f.sendData(j.c.VIDEO_POSITION_RIGHT)),o()},v=function(){j.f.sendData(j.c.SLIDE_THEME_TOGGLE,"LIGHT"),l(Object(L.k)(H.ac.LIGHT)),l(Object(L.j)(""))},S=function(){j.f.sendData(j.c.SLIDE_THEME_TOGGLE,"DARK"),l(Object(L.k)(H.ac.DARK)),l(Object(L.j)(""))},I=function(){j.f.sendData(j.c.SLIDE_THEME_TOGGLE,"RULED_LIGHT",{[j.e.Card]:1,[j.e.Measure1]:0}),l(Object(L.k)(H.ac.LIGHT)),l(Object(L.j)(H.ac.RULED_LIGHT))},y=function(){j.f.sendData(j.c.SLIDE_THEME_TOGGLE,"RULED_DARK",{[j.e.Card]:1,[j.e.Measure1]:0}),l(Object(L.k)(H.ac.DARK)),l(Object(L.j)(H.ac.RULED_DARK))},_=Object(n.useCallback)((function(e){return function(){m!==e&&s(e)}}),[m]),O=function(){return a.a.createElement(ee.g,null,E.current.map((function(e,t){if(t<p)return a.a.createElement(Xu,{onClick:b.bind(null,e.type.left,e.type.top)},a.a.createElement(Fc.e,{type:e.imageType,text:e.text,isSelected:r.equals(e.type)}))})))};return a.a.createElement(Ku,{show:t},a.a.createElement(_o,{heading:"videoPosition"==t?H.nb.VIDEO_POSITION:"themeSlide"==t?H.nb.SLIDE_THEME:"videoSize"==t?H.nb.VIDEO_SIZE:void 0,onBackClick:i}),a.a.createElement(ee.f,{margin:"".concat(P.c.SPACING_4B," 0")}),"videoPosition"==t?O():"themeSlide"==t?a.a.createElement(ee.g,null,a.a.createElement(Xu,{onClick:v},a.a.createElement(Fc.e,{type:"lightSlideTheme",text:H.bc.LIGHT,isSelected:!h&&u==H.ac.LIGHT})),a.a.createElement(Xu,{onClick:I},a.a.createElement(Fc.e,{type:"lightRuledSlideTheme",text:H.bc.RULED_LIGHT,isSelected:h==H.ac.RULED_LIGHT})),a.a.createElement(Xu,{onClick:S},a.a.createElement(Fc.e,{type:"darkSlideTheme",text:H.bc.DARK,isSelected:!h&&u==H.ac.DARK})),a.a.createElement(Xu,{onClick:y},a.a.createElement(Fc.e,{type:"darkRuledSlideTheme",text:H.bc.RULED_DARK,isSelected:h==H.ac.RULED_DARK}))):"videoSize"==t?a.a.createElement(ee.g,null,H.fc.map((function(e){return a.a.createElement(Xu,{key:e.size+"size",onClick:_(e.size)},a.a.createElement(Fc.e,{type:"videoSizeSolid",size:40*e.size,text:e.label,isSelected:m===e.size,shortcutText:e.shortcutText}))}))):void 0)}));Zu.propTypes={};var Ju=Zu,Qu=S.d.div.withConfig({displayName:"More__Wrapper",componentId:"sc-1s16abc-0"})([""]),$u=a.a.memo((function(e){var t=e.onAddSlide,i=e.onSendData,o=e.onFullScreen,r=e.videoSizeChangeHandler,s=Object(C.e)((function(e){return e.getIn(["app","educatorBoxAlign"])})),l=Object(C.e)((function(e){return e.getIn(["app","server"])})),c=Object(C.e)((function(e){return e.getIn(["drawingBoardControls","isEducatorSlideViewActive"])})),d=Object(n.useRef)(null),p=Object(n.useState)(!1),u=m()(p,2),h=u[0],g=u[1],f=Object(n.useState)(""),E=m()(f,2),b=E[0],v=E[1],S=function(){g(!1)},I=function(e){v(e)},y=function(){v("")},_=function(){return a.a.createElement(Yu,{onToolHandler:I,server:l,hidePopover:S,onAddSlide:t,onSendData:i,onFullScreen:o})},O=function(){S(),v("")},w=function(){return a.a.createElement(Ju,{activeTool:b,onBackClick:y,resetData:O,educatorBoxAlign:s,videoSizeChangeHandler:r})};return a.a.createElement(Qu,{ref:d},a.a.createElement(kp.a,{type:"more",text:H.u.MORE,onClick:function(){g(!0)},varWidth:!0,disabled:c}),a.a.createElement(Uo,{anchorEl:d.current,open:h,onClose:S,elevation:0,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},positionProperties:["bottom","right"]},a.a.createElement(Wo,{open:!!b,mainMenu:_,optionsMenu:w})))}));$u.propTypes={};var eh=$u,th=i("EMv4");const ih=S.d.div.withConfig({displayName:"DrawingBoardTools__ToolsWrapper",componentId:"sc-6mfj5i-0"})(["width:100%;height:80px;top:0px;display:flex;flex-direction:row;justify-content:space-between;align-items:center;position:absolute;opacity:",";visibility:",";transition:opacity 0.3s ease-in,visibility 0.3s ease-in;>:first-child{justify-content:flex-start;}>:last-child{justify-content:flex-end;}"],({isHidden:e})=>e?0:1,({isHidden:e})=>e?"hidden":"visible"),nh=S.d.div.withConfig({displayName:"DrawingBoardTools__FlexWrapper",componentId:"sc-6mfj5i-1"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;flex:1;"]),ah=S.d.div.withConfig({displayName:"DrawingBoardTools__FlexWrapperSide",componentId:"sc-6mfj5i-2"})(["position:relative;display:flex;flex-direction:row;justify-content:center;align-items:center;flex-grow:1;min-width:0px;> *{flex-shrink:1;flex:1;max-width:80px;}"]),oh=({onSendData:e,onChangeDrawingState:t,onAddSlide:i,socketManager:o,resetCanvasTranslation:r,setCanvasZoomUtil:s,onChangeSlide:l,isHidden:c,onSendPollData:d,fullScreenHandler:p,onReceiveControlWrapperData:u,savePdfEditorData:h,onSendCloudPollData:m})=>{const g=Object(C.d)(),E=Object(C.e)(e=>e.getIn(["drawingBoardControls","drawingMode"])),b=Object(C.e)(e=>e.getIn(["drawingBoardControls","canvasZoom"])),v=Object(C.e)(e=>e.getIn(["canvas","activeSlide"])),S=x.b.main.slides,I=Object(C.e)(e=>e.getIn(["drawingBoardControls","isEducatorSlideViewActive"])),y=Object(C.e)(e=>e.getIn(["app","userId"])),_=Object(C.e)(e=>e.getIn(["app","classId"])),O=Object(C.e)(e=>e.getIn(["app","isZoomEnabled"])),w=b>=H.jc.MIN,T=Object(C.e)(e=>e.getIn(["chat","areEmojisEnabled"])),A=Object(C.e)(e=>e.getIn(["chat","isChatDisabledByEducator"])),P=Object(C.e)(e=>e.getIn(["chat","isQuestionEnabled"])),R=Object(C.e)(e=>e.getIn(["app","classState"])),D=Object(C.e)(e=>e.getIn(["app","isEducatorVideoResizable"])),N=Object(C.e)(e=>e.getIn(["app","useGreenScreen"])),k=Object(C.e)(e=>e.getIn(["app","useRoundVideo"])),B=Object(C.e)(e=>e.getIn(["pdfEditor","isPdfEditor"])),M=Object(C.e)(e=>e.getIn(["pdfEditor","canEditPdf"])),G=Object(ii.a)()||I||B&&!M,U=Object(n.useCallback)(i=>{g(Object(L.e)(i)),j.f.sendData(j.c.WB_TOOL_SELECTION,i);let n=Object(f.D)(i);e(n);let a=new bi.a(n);t(a)},[]),V=Object(n.useCallback)(()=>{let i=Object(f.eb)(v);e(i);let n=new bi.a(i);t(n)},[v]),F=Object(n.useCallback)(()=>{let e=Math.min(b+H.jc.STEP,H.jc.MAX);e!==b&&(Object(f.yb)("Plus Educator Zoom",{"Educator Id":y,"Lesson Id":_,"Zoom Value":e}),s(e))},[v,b]),W=Object(n.useCallback)(()=>{let e=Math.max(b-H.jc.STEP,H.jc.INIT);e!==b&&(s(e),e===H.jc.INIT&&r())},[v,b]);Object(n.useEffect)(()=>(document.addEventListener("keydown",z),()=>{document.removeEventListener("keydown",z)}),[E,G,v,b,A,T,P,R,B]);const z=e=>{if(!e.ctrlKey&&!e.metaKey||G||"z"!=e.key&&"Z"!=e.key||V(),!e.ctrlKey&&!e.metaKey&&!G)switch(e.key){case"p":case"P":E===H.v.MARKER||e.shiftKey||U(H.v.MARKER);break;case"h":case"H":E===H.v.HIGHLIGHTER||e.shiftKey||B||U(H.v.HIGHLIGHTER);break;case"e":case"E":E===H.v.ERASER||e.shiftKey?e.shiftKey&&o.setClassConfiguration({emojisEnabled:!T}):U(H.v.ERASER);break;case"l":case"L":E===H.v.LINE||e.shiftKey||U(H.v.LINE);break;case"n":case"N":e.shiftKey&&i();break;case"f":case"F":q();break;case"+":e.shiftKey&&F();break;case"_":e.shiftKey&&W();break;case"m":case"M":e.shiftKey&&o.setClassConfiguration({chatEnabled:!!A});break;case"q":case"Q":e.shiftKey&&10===R&&o.setClassConfiguration({questionsEnabled:!P});break;case"i":case"I":e.shiftKey&&Y(H.y.SMALL);break;case"u":case"U":e.shiftKey&&Y(H.y.DEFAULT);break;case"y":case"Y":e.shiftKey&&Y(H.y.LARGE)}},q=Object(n.useCallback)(()=>{p()},[]),Y=Object(n.useCallback)(t=>{if(D&&(N||k)){const i=Object(f.q)(t);e(i);const n=new bi.a(i);u(n)}},[D,N,k]),X=()=>w?a.a.createElement(Vu,{handleZoomIn:F,handleZoomOut:W,setCanvasZoomUtil:s,resetCanvasTranslation:r}):a.a.createElement(n.Fragment,null,(()=>{if(O)return a.a.createElement(Du,{handleZoomIn:F})})(),a.a.createElement(eh,{onAddSlide:i,onSendData:e,videoSizeChangeHandler:Y,onFullScreen:q}));return a.a.createElement(ih,{isHidden:c},a.a.createElement(ah,null,(()=>{if(!B||M)return a.a.createElement(n.Fragment,null,a.a.createElement(Np.a,{setDrawingMode:U,shortcutText:"P"}),(()=>{if(!B)return a.a.createElement(Wp,{setDrawingMode:U,shortcutText:"H"})})(),a.a.createElement(jp.a,{setDrawingMode:U,shortcutText:"E"}),a.a.createElement(Mp,{setDrawingMode:U,shortcutText:"L"}))})()),a.a.createElement(nh,null,a.a.createElement(th.a,{onChangeSlide:l,activeSlide:v,totalSlides:S.length,isEducatorSlideViewActive:I,disableCenterClick:B})),a.a.createElement(ah,null,(()=>{if(!B||M)return a.a.createElement(n.Fragment,null,a.a.createElement(Hp,{onAddSlide:i}),a.a.createElement(Pu,{socketManager:o,onSendPollData:d,savePdfEditorData:h,onSendCloudPollData:m}),X())})()))};oh.propTypes={},oh.defaultProps={};var rh=oh,sh=i("RG42"),lh=i.n(sh),ch=i("g7+r");function dh(e,t){var i;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"===typeof e)return ph(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ph(e,t)}(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return r=e.done,e},e:function(e){s=!0,o=e},f:function(){try{r||null==i.return||i.return()}finally{if(s)throw o}}}}function ph(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}const uh=1,hh=2,mh=Object(_.e)(),gh=mh.getOrCreate("BUFFER_TIME"),fh=mh.getOrCreate("VIDEO_RUNNING_TIME"),Eh=mh.getOrCreate("VIDEO_BUFFERING_ON_SEEK"),bh=mh.getOrCreate("VIDEO_URL_SWITCH_PROFILE"),Ch=mh.getOrCreate("SLIDE_RENDER_PROFILE"),vh=mh.getOrCreate("VIDEO_PLAY_PAUSE_PROFILE"),Sh=(e,t)=>e+t,Ih=(e,t)=>t,yh=new _.a((e,t)=>{const i={[uh]:[],[hh]:[]};var n,a=dh(t.bufferInfo);try{for(a.s();!(n=a.n()).done;){const e=n.value;i[e.bufferType].push(e.bufferTime)}}catch(u){a.e(u)}finally{a.f()}const o=Math.min(Math.ceil(i[uh].reduce((e,t)=>e+t,0)/1e3),32),r=Math.min(Math.ceil(i[hh].reduce((e,t)=>e+t,0)/1e3),32),s=i[uh].length/(i[uh].length+i[hh].length),l=1-s,c=Math.round(100*(1-.85/(1+Math.pow(.35*o/(14-.6*o),-3)))),d=Math.round(100*(1-1/(1+200*Math.exp(.5*(1-r))))),p=Math.max(c,0)*s+Math.max(d,0)*l;j.f.sendData(j.c.Q_CLASS_SMOOTHNESS,"ScoreDueToSeek=".concat(Math.max(c,0),",For=").concat(o,";ScoreDueToOther=").concat(Math.max(d,0),",For=").concat(r,";Fequency=").concat(e),{[j.e.Measure1]:p}),yh.resetRelayData(),t.shouldStopRecursiveCall||t.host.logBufferForClassQuality(0,uh,t.shouldStopRecursiveCall)});yh.POST_INTERVAL=6e4;const _h=new _.a((e,t,i)=>{const n=e/1e3|0;n>=15&&j.f.sendData(j.c.TOO_MUCH_BUFFER_TIME,"NoOfTimeBuffered=".concat(i.cardinality),{[j.e.Measure1]:n})}),Oh=new _.a(e=>{j.f.sendData(j.c.SEEK_BUFFER_TIME,{isRecorded:!0,isWeb:!0},{[j.e.Measure1]:e/1e3})}),wh=new _.a(e=>{j.f.sendData(j.c.LAG_RATIO,{isRecorded:!0,isWeb:!0},{[j.e.Measure1]:e})}),Th=new _.a(e=>{j.f.sendData(j.c.GROWING_LAG_RATIO,{isRecorded:!0,isWeb:!0},{[j.e.Measure1]:e})}),Ah=S.d.div.withConfig({displayName:"ReplayVideo__CameraContainer",componentId:"sc-145l2f2-0"})(["position:absolute;top:0;left:0;height:100%;width:100%;background-color:",";align-items:center;justify-content:center;"],({theme:e})=>e.BLACK),Ph=S.d.video.withConfig({displayName:"ReplayVideo__ReplayVideoElement",componentId:"sc-145l2f2-1"})(["height:100%;"]);class xh extends a.a.PureComponent{constructor(...e){super(...e),b()(this,"setUpVideoStreamsForWebm",()=>{this.props.videoStreamManager.setWebmAvailableStreams(),this.props.videoStreamManager.switchStream=this.switchWebmStream}),b()(this,"switchWebmStream",e=>{const t=this.videoCdn.getURLDomain(),i=Object(f.hb)(e.quality),n=Object(f.cb)(t,this.props.videoId,i);this.props.setVideoStreamUrlAndQuality(n,e.quality)}),b()(this,"seekToCurrentTime",e=>{this.replayVideo.currentTime=e}),b()(this,"onVideoEnd",()=>{this.resetEventData(),this.props.setHasReplayEnded(!0),j.f.sendData(j.c.VIDEO_ENDED,bh.getStrDataFromContext(),{[j.e.Measure1]:fh.peek().dts})}),b()(this,"handlePlayPause",e=>{!e.isVideoPaused&&this.props.isVideoPaused&&this.replayVideo&&!this.replayVideo.paused?this.playVideoRequested?this.pauseVideoRequested=!0:(this.pauseVideo(),j.f.sendData(j.c.VIDEO_PAUSED,bh.getStrDataFromContext(),{[j.e.Measure1]:vh.timeSinceLastCall().dts/1e3|0})):e.isVideoPaused&&!this.props.isVideoPaused&&this.replayVideo&&this.replayVideo.paused&&(this.pauseVideoRequested=!1,this.playVideoRequested||(this.playVideo(),j.f.sendData(j.c.VIDEO_PLAYED,bh.getStrDataFromContext(),{[j.e.Measure1]:vh.timeSinceLastCall().dts/1e3|0})))}),b()(this,"playVideo",()=>{let e;this.playVideoRequested=!0,this.replayVideo&&(e=this.replayVideo.play()),void 0!==e?e.then(()=>{this.playVideoRequested=!1,this.pauseVideoRequested&&this.props.isVideoPaused&&this.pauseVideo(),this.props.setShowPlayButton(!1),this.props.sendEvent(he.a.PLAY)}).catch(e=>{this.playVideoRequested=!1,this.props.sendEvent(he.a.PAUSE),this.props.setShowPlayButton(!0),this.props.setIsVideoPaused(!0)}):this.playVideoRequested=!1}),b()(this,"pauseVideo",()=>{this.props.sendEvent(he.a.PAUSE),this.replayVideo&&this.replayVideo.pause()}),b()(this,"switchStream",e=>{this.player&&(e.streamId?(this.player.configure("abr.enabled",!1),this.player.selectVariantTrack({id:e.streamId},!1)):this.player.configure("abr.enabled",!0))}),b()(this,"onErrorEvent",e=>{this.onError(e.detail)}),b()(this,"onError",e=>{this.replayVideo&&this.props.switchtoMp4(this.replayVideo.currentTime),console.error("Error code",e.code,"object",e)}),b()(this,"setVolume",e=>{this.replayVideo&&Number.isFinite(e)&&!Number.isNaN(e)&&(this.replayVideo.volume=e/100)}),b()(this,"handleOnCanPlay",()=>{!this.props.shouldAutoplay&&!this.props.shouldPlay||this.playVideoRequested||this.props.isVideoPaused||this.playVideo()}),b()(this,"handleTimeUpdate",()=>{isFinite(this.replayVideo.duration)&&isFinite(this.replayVideo.currentTime)&&this.props.setVideoPlayTiming(this.replayVideo.duration,this.replayVideo.currentTime)}),b()(this,"setReference",e=>{e&&(this.replayVideo=e,this.replayVideo.muted=this.props.showSplashScreen,this.props.setReferenceForVideoElement(this.replayVideo),this.startVideo(e),this.replayVideo.addEventListener("waiting",this.handleOnWaiting))}),b()(this,"onLoad",e=>{if(this.replayVideo){if(bh.isProfileRunning()){const e=bh.end();j.f.sendData(j.c.VIDEO_LOADED,bh.getStrDataFromContext(),{[j.e.Measure1]:e.dts})}Ch.isProfileComplete()||Ch.isProfileRunning()||Ch.start(),this.videoStartTime=+new Date,fh.start(),vh.isProfileRunning()||vh.start(),this.isFirstTimeLoad?(this.isFirstTimeLoad=!1,this.props.setVideoPlayTiming(this.replayVideo.duration,0)):(this.setPlaybackSpeed(this.props.activePlayBackRate),this.seekToCurrentTime(this.props.videoCurrentTime)),this.replayVideo.duration>14400&&j.f.sendData(j.c.VIDEO_DURATION_EXCEED,{uid:this.props.uid}),this.props.isReplayDataProcessed?this.props.errorStatus===H.K.CONNECTION_STATE&&this.props.unSetErrorStatus():this.setLoadingSlides()}}),b()(this,"handleOnWaiting",()=>{if(!this.props.isVideoPaused){if(!this.isBufferring){gh.start();gh.ttl(5e3).then(()=>{j.f.sendData(j.c.BUFFER_FAILURE,bh.getStrDataFromContext())})}this.isBufferring=!0,this.props.setIsVideoLoading(!0)}}),b()(this,"handleOnplaying",()=>{if(fh.resume(),this.isBufferring){const e=gh.end();this.totalBufferringTime+=e.dts;const t=fh.peek();j.f.sendData(j.c.BUFFER_TIME,"VideoRunningTimeSoFarInSec=".concat(t.dts/1e3|0,";TotalBufferTimeSoFarInMilli=").concat(this.totalBufferringTime),{[j.e.Measure1]:e.dts,[j.e.Measure2]:this.replayVideo.duration});let i=!1,n=0;if(Eh.isProfileRunning()){n=Eh.end().dts,Oh.push(n,Sh),i=!0}const a=i?uh:hh,o=i?n:Math.max(e.dts,300);this.logBufferForClassQuality(o,a,!1),_h.push(e.dts,Sh),wh.push(this.totalBufferringTime/1e3*100/this.replayVideo.duration,Ih),Th.push(this.totalBufferringTime/1e3*100/(t.dts/1e3),Ih)}this.isBufferring=!1,this.props.onReplayVideoPlaying(),this.props.setIsVideoLoading(!1),this.props.isVideoPaused&&(this.isFirstTimePlay?this.props.setIsVideoPaused(!1):this.pauseVideo()),this.isFirstTimePlay&&(this.isFirstTimePlay=!1)}),b()(this,"handleOnPause",()=>{fh.pause(),this.props.isVideoPaused||this.props.setIsVideoPaused(!0)}),b()(this,"onAudioError",e=>{if(this.audioCdn&&!this.audioCdn.isLast()){this.audioCdn.next();const e=this.audioCdn.getURLDomain(),t=Object(f.cb)(e,this.props.videoId,this.props.audioFileName);this.props.setAudioUrl(t)}}),b()(this,"onVideoError",e=>{if(this.videoCdn&&!this.videoCdn.isLast()){this.videoCdn.next();const e=this.videoCdn.getURLDomain(),t=this.props.isWebmSupported?Object(f.hb)(this.props.videoQuality):Object(f.Q)(this.props.videoQuality),i=Object(f.cb)(e,this.props.videoId,t);this.props.setVideoStreamUrlAndQuality(i,this.props.videoQuality)}else{const t="ErrorType=".concat(e.type,";").concat(bh.getStrDataFromContext(),";CurrentTime=").concat(this.props.videoCurrentTime);j.f.sendData(j.c.VIDEO_ERROR,t)}}),b()(this,"handleOnError",e=>{this.props.isCameraTurnedOff&&this.props.audioUrl?this.onAudioError(e):this.onVideoError(e)}),this.resetEventData(),this.isFirstTimeLoad=!0,this.isFirstTimePlay=!0,this.videoCdn=null,this.audioCdn=null}componentDidMount(){this.logBufferForClassQuality(0,uh,!1)}resetEventData(){this.videoStartTime=0,this.isBufferring=!1,this.totalBufferringTime=0,gh.reset(),fh.reset(),Ch.reset()}initCDN(){const e=k.a.getURLs(),t=e.DATA_URL,i=e.MEDIA_URL;this.audioCdn=ch.a.getCDN(t),this.videoCdn=ch.a.getCDN(i)}resetUnknownEventState(e,t,i){e.isProfileRunning()&&(e.end(),j.f.sendData(j.c.UNKNOWN_STATE,{fqsource:t,reason:i}))}UNSAFE_componentWillReceiveProps(e){!this.props.isWebmSupported&&e.isWebmSupported&&this.setUpVideoStreamsForWebm(),e.volume!=this.props.volume&&this.setVolume(e.volume),!this.props.videoUrl&&e.videoUrl&&this.initCDN()}onVideoUrlChange(){j.f.sendData(j.c.VIDEO_URL_CHANGED,"VideoUrl=".concat(this.props.videoUrl,";")),this.resetUnknownEventState(bh,"videoUrlSwitchProfile","Video url switch profile is already running. There is a chance that the old video url is not yet load and user changed the source"),bh.start(),bh.setDataInContext("VideoUrl",this.props.videoUrl),bh.setDataInContext("VideoId",this.props.videoId);bh.ttl(6e3).then(()=>{j.f.sendData(j.c.VIDEO_NOT_LOADED_AFTER_URL_CHANGE,bh.getStrDataFromContext())})}componentDidUpdate(e){e.activePlayBackRate!=this.props.activePlayBackRate&&this.setPlaybackSpeed(this.props.activePlayBackRate),e.videoUrl!=this.props.videoUrl&&(this.seekToCurrentTime(this.props.videoCurrentTime),this.setPlaybackSpeed(this.props.activePlayBackRate),this.onVideoUrlChange()),this.handlePlayPause(e),e.isMuted!=this.props.isMuted&&this.replayVideo&&(this.replayVideo.muted=this.props.isMuted)}componentWillUnmount(){this.replayVideo&&(this.replayVideo.removeEventListener("waiting",this.handleOnWaiting),this.replayVideo.pause(),this.replayVideo.removeAttribute("src"),this.replayVideo.load(),this.replayVideo=null,vh.end(),fh.end()),this.logBufferForClassQuality(0,uh,!0)}setPlaybackSpeed(e){this.replayVideo.playbackRate=e}startVideo(e){e&&this.isM3u8()&&(lh.a.polyfill.installAll(),lh.a.Player.isBrowserSupported()?(this.player=new lh.a.Player(this.replayVideo),this.player.addEventListener("error",this.onErrorEvent),this.player.load(this.props.videoUrl).then(()=>{this.getStreams(),this.props.videoStreamManager.switchStream=this.switchStream}).catch(this.onError)):console.log("Browser not supported"))}getStreams(){if(this.player){let e=this.player.getVariantTracks();this.props.videoStreamManager.setStreamsFromVariants(e)}}getUrl(){if(this.props.isCameraTurnedOff&&this.props.audioUrl)return this.props.audioUrl;{const e=this.props.videoUrl;return e&&e.indexOf(".m3u8")<0?e:null}}isM3u8(){const e=this.props.videoUrl;return e&&e.indexOf(".m3u8")>0}setLoadingSlides(){this.props.setErrorStatus(H.K.LOADING_SLIDES)}logBufferForClassQuality(e,t,i){let n;yh.push(1,Sh),(n=yh.getRelayData())?(n.bufferInfo.push({bufferTime:e,bufferType:t}),yh.setRelayData(n)):yh.setRelayData({shouldStopRecursiveCall:i,bufferInfo:[{bufferTime:e,bufferType:t}],host:this})}renderVideo(){if(this.props.videoUrl)return a.a.createElement(Ph,{ref:this.setReference,id:"replayVideo",src:this.getUrl(),onCanPlay:this.handleOnCanPlay,onTimeUpdate:this.handleTimeUpdate,onPlaying:this.handleOnplaying,onPause:this.handleOnPause,onError:this.handleOnError,crossOrigin:"anonymous",onLoadedData:this.onLoad,onEnded:this.onVideoEnd,disablePictureInPicture:!0,autoPlay:!0})}render(){return a.a.createElement(n.Fragment,null,a.a.createElement(Ah,null,this.renderVideo()))}}const Rh={setIsVideoLoading:B.o,setVideoPlayTiming:B.y,setVideoStreamUrlAndQuality:ye.zb,setIsVideoPaused:B.p,setShowPlayButton:ye.lb,setHasReplayEnded:ye.M,setErrorStatus:ye.I,unSetErrorStatus:ye.Bb,setAudioUrl:ye.m};var Dh=Object(C.c)(e=>({volume:e.getIn(["videoPlayControls","volume"]),activePlayBackRate:e.getIn(["videoPlayControls","activePlayBackRate"]),isMuted:e.getIn(["videoPlayControls","isMuted"]),userId:e.getIn(["app","userId"]),videoUrl:e.getIn(["app","videoUrl"]),videoQuality:e.getIn(["app","videoQuality"]),isWebmSupported:e.getIn(["app","isWebmSupported"]),shouldAutoplay:e.getIn(["app","shouldAutoplay"]),useGreenScreen:e.getIn(["app","useGreenScreen"]),videoId:e.getIn(["app","videoId"]),videoCurrentTime:e.getIn(["videoPlayControls","videoCurrentTime"]),shouldPlay:e.getIn(["app","shouldPlayReplay"]),audioUrl:e.getIn(["app","audioUrl"]),audioFileName:e.getIn(["app","audioFileName"]),isCameraTurnedOff:e.getIn(["app","isCameraTurnedOff"]),isReplayDataProcessed:e.getIn(["app","isReplayDataProcessed"]),errorStatus:e.getIn(["app","errorStatus"]),showSplashScreen:e.getIn(["app","showSplashScreen"])}),Rh)(Object(S.f)(xh));function Nh(){var e=w()(["\n    @import('video.js/dist/video-js.min.css');\n"]);return Nh=function(){return e},e}var jh=Object(S.b)(Nh()),kh=i("PTN7"),Lh=i.n(kh);window.videojs=Lh.a,i("XG87");var Bh=i("ulZh");const Mh=i("fQLD"),Gh=S.d.video.withConfig({displayName:"LiveHlsPlayer__LiveHlsVideo",componentId:"sc-1rbgtyp-0"})(["flex:1;width:100%;"]),Uh=S.d.video.withConfig({displayName:"LiveHlsPlayer__LiveHlsVideoSmall",componentId:"sc-1rbgtyp-1"})(["height:100%;width:100%;"]),Hh=S.d.div.withConfig({displayName:"LiveHlsPlayer__PlayButtonContainer",componentId:"sc-1rbgtyp-2"})(["position:absolute;width:100%;height:100%;z-index:9;display:flex;justify-content:center;align-items:center;background:linear-gradient(360deg,rgba(0,0,0,0.29) 0%,rgba(0,0,0,0) 100%);"]),Vh=S.d.button.withConfig({displayName:"LiveHlsPlayer__PlayButton",componentId:"sc-1rbgtyp-3"})(["width:100px;height:100px;background-color:rgba(250,244,244,0);border-width:0;outline-style:none;cursor:pointer;"]),Fh=S.d.div.withConfig({displayName:"LiveHlsPlayer__CameraContainer",componentId:"sc-1rbgtyp-4"})(["position:absolute;top:0;left:0;height:100%;width:100%;background-color:",";align-items:center;justify-content:center;"],({theme:e})=>e.BLACK);class Wh extends a.a.PureComponent{constructor(e){super(e),b()(this,"setVolume",e=>{var t;this.liveHlsVideo&&null!==(t=this.hls)&&void 0!==t&&t.media&&isFinite(e)&&(this.liveHlsVideo.volume=e/100)}),b()(this,"handlePlayPause",e=>{e.isVideoPaused&&this.hls.media&&!this.liveHlsVideo.paused?this.playVideoRequested?this.pauseVideoRequested=!0:this.pauseVideo():!e.isVideoPaused&&this.hls.media&&this.liveHlsVideo.paused&&(this.pauseVideoRequested=!1,this.playVideoRequested||this.playVideo())}),b()(this,"playVideoFromClick",()=>{this.props.setIsVideoPaused(!1),this.playVideo()}),b()(this,"playVideo",()=>{if(this.props.hlsUrl){let e;this.playVideoRequested=!0,this.liveHlsVideo&&(e=this.liveHlsVideo.play()),void 0!==e?e.catch(e=>{this.playVideoRequested=!1,this.props.setIsVideoPaused(!0)}).then(()=>{this.playVideoRequested=!1,this.pauseVideoRequested&&this.pauseVideo()}):this.playVideoRequested=!1}}),b()(this,"pauseVideo",()=>{this.liveHlsVideo&&this.liveHlsVideo.pause()}),b()(this,"handleTimeUpdate",()=>{const e=this.liveHlsVideo.currentTime-(this.liveHlsVideo.duration-this.duration);this.duration&&isFinite(e)&&this.props.setVideoPlayTiming(this.duration,e)}),b()(this,"switchStream",e=>{this.hls.nextLevel=e.streamId}),b()(this,"retryLiveStream",(e,t)=>{if(this.props.classState>10)return console.log("Class end"),void this.props.endClass();console.log("retryLiveStream"),this.retrying=!0,this.isplaying=!1,e.detachMedia(),e.loadSource(t),e.attachMedia(this.liveHlsVideo)}),b()(this,"setReference",e=>{this.liveHlsVideo=e,this.props.setReferenceForVideoElement(e),this.liveHlsVideo&&(this.liveHlsVideo.addEventListener("waiting",this.handleOnWaiting),this.liveHlsVideo.addEventListener("playing",this.handleOnplaying))}),b()(this,"handleOnWaiting",()=>{this.props.setIsVideoLoading(!0)}),b()(this,"handleOnplaying",()=>{this.props.setIsVideoLoading(!1)}),this.retrying=!1,this.isplaying=!0,this.timechecker=void 0,this.currentTime=0,this.lastChekedAt=0,this.duration=0,this.firstMediaError=!1,this.state={showPlayButton:!1}}UNSAFE_componentWillReceiveProps(e){this.handlePlayPause(e),e.volume!=this.props.volume&&this.setVolume(e.volume)}componentDidMount(){this.startVideo(),this.setVolume(this.props.volume)}componentWillUnmount(){this.hls&&this.hls.destroy(),this.retry&&(clearTimeout(this.retry),clearTimeout(this.timechecker)),this.liveHlsVideo.removeEventListener("playing",this.handleOnplaying),this.liveHlsVideo.removeEventListener("waiting",this.handleOnWaiting)}checkForPlayError(){if(this.lastChekedAt>0){if(this.hls.media&&this.isplaying)if(this.hls.media.currentTime!=this.currentTime)this.lastChekedAt=(new Date).getTime(),this.currentTime=this.hls.media.currentTime;else if((new Date).getTime()-this.lastChekedAt>1e4)return}else this.lastChekedAt=(new Date).getTime();this.timechecker=setTimeout(()=>{this.checkForPlayError()},1e3)}startVideo(){let e=this.props.hlsUrl;if(Bh.isSupported()){const t={autoStartLoad:!0,maxBufferSize:1e6,manifestLoadingMaxRetry:3e5,manifestLoadingMaxRetryTimeout:1e3,levelLoadingMaxRetry:3e5,levelLoadingMaxRetryTimeout:1e3,fragLoadingMaxRetry:3e5,fragLoadingMaxRetryTimeout:1e3};this.hls=new Bh(t),this.liveHlsVideo.onloadeddata=()=>{this.props.onLoadHlsVideo&&this.props.onLoadHlsVideo()},this.liveHlsVideo.onplaying=()=>{this.handlePlayPause(this.props),clearInterval(this.timechecker),this.lastChekedAt=(new Date).getTime(),this.isplaying=!0,this.checkForPlayError()},this.liveHlsVideo.onseeked=()=>{this.props.isLiveDVR&&this.liveHlsVideo&&this.props.seek(this.liveHlsVideo.currentTime)},this.hls.on(Bh.Events.LEVEL_LOADED,(e,t)=>{let i=t.details.fragments,n=0;i.forEach(e=>{n+=e.duration}),this.duration=n,window.fragments=t.details.fragments}),this.hls.on(Bh.Events.MANIFEST_PARSED,()=>{console.log("MANIFEST_PARSED"),this.playVideo(),this.setAvailableStreams(this.hls.levels)}),this.hls.on(Bh.Events.FRAG_CHANGED,(e,t)=>{window.currentPlayerTime=t.frag.endPTS-t.frag.duration;let i=t.frag._url.split("/");window.chunkTime=parseInt(parseInt(i[i.length-1].split("-").pop().replace(".ts","")))}),this.hls.on(Bh.Events.ERROR,(t,i)=>{if(i.fatal)switch(i.type){case Bh.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover"),this.retry=setTimeout(()=>this.retryLiveStream(this.hls,e),3e3);break;case Bh.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),this.firstMediaError?(this.firstMediaError=!1,this.hls.recoverMediaError()):(this.hls.swapAudioCodec(),this.hls.recoverMediaError())}}),this.hls.loadSource(e),this.hls.attachMedia(this.liveHlsVideo)}}setAvailableStreams(e){this.props.videoStreamManager&&(this.props.videoStreamManager.setStreamsFromLevels(e),this.props.videoStreamManager.switchStream=this.switchStream)}renderPlayButton(){if(this.state.showPlayButton&&!this.state.isLiveDVR)return a.a.createElement(Hh,null,a.a.createElement(Vh,{onClick:this.playVideoFromClick},a.a.createElement("img",{src:Mh})))}renderVideo(){return this.props.isJanusClass?a.a.createElement(Uh,{ref:this.setReference,id:"liveHlsVideo",onTimeUpdate:this.handleTimeUpdate,crossOrigin:"anonymous",muted:this.props.isMuted,disablePictureInPicture:!0,autoPlay:!0}):a.a.createElement(Gh,{ref:this.setReference,id:"liveHlsVideo",onTimeUpdate:this.handleTimeUpdate,crossOrigin:"anonymous",muted:this.props.isMuted,disablePictureInPicture:!0,autoPlay:!0})}render(){return a.a.createElement(n.Fragment,null,a.a.createElement(Fh,null,this.renderPlayButton(),this.renderVideo()),a.a.createElement(jh,null))}}const zh={setIsVideoLoading:B.o,setVideoPlayTiming:B.y,setIsVideoPaused:B.p};var qh=Object(C.c)(e=>({volume:e.getIn(["videoPlayControls","volume"]),isMuted:e.getIn(["videoPlayControls","isMuted"])}),zh)(Object(S.f)(Wh)),Yh=i("FKhi"),Xh=S.d.div.withConfig({displayName:"EducatorTimer__Wrapper",componentId:"sc-1n2w4uo-0"})(["display:flex;height:24px;align-items:center;flex-direction:row;justify-content:space-between;background-color:",";box-sizing:border-box;border:"," solid ",";border-radius:8px;overflow:hidden;cursor:pointer;"],(function(e){return e.theme.BG_MAIN}),P.c.SPACING_1,(function(e){return e.theme.BORDER})),Kh=(S.d.img.withConfig({displayName:"EducatorTimer__PlusImage",componentId:"sc-1n2w4uo-1"})(["height:16px;width:16px;margin:"," ",";"],P.c.SPACING_0B,P.c.SPACING_1B),S.d.div.withConfig({displayName:"EducatorTimer__TimeWrapper",componentId:"sc-1n2w4uo-2"})(["min-width:52px;height:24px;font-size:",";font-weight:",";background-color:",";border:"," solid ",";border-radius:8px;display:flex;flex-direction:row;align-items:center;justify-content:flex-end;padding-right:",";box-sizing:border-box;"],P.d.SMALL,P.d.SEMIBOLD,(function(e){return e.theme.BG_MAIN}),P.c.SPACING_1,(function(e){return e.theme.BORDER}),P.c.SPACING_2B)),Zh=S.d.div.withConfig({displayName:"EducatorTimer__Time",componentId:"sc-1n2w4uo-3"})(["width:","ch;color:",";"],(function(e){var t=e.time;return String(t).length}),(function(e){return e.theme.TEXT_PRIMARY})),Jh=S.d.div.withConfig({displayName:"EducatorTimer__Sec",componentId:"sc-1n2w4uo-4"})(["width:3ch;color:",";white-space:pre-wrap;"],(function(e){return e.theme.TEXT_TERTIARY})),Qh=function(e){var t=e.time,i=e.onIncreaseTimer;return a.a.createElement(Xh,{onClick:i},a.a.createElement(Ve.ub,null),a.a.createElement(Kh,null,a.a.createElement(Zh,{time:t},t),a.a.createElement(Jh,null," ".concat(H.Cb.TIME_SEC))))};Qh.propTypes={time:U.a.number.isRequired,onIncreaseTimer:U.a.func.isRequired};var $h=Qh,em=S.d.div.withConfig({displayName:"EducatorPollHeader__Wrapper",componentId:"sc-7iejke-0"})(["display:flex;height:48px;width:100%;align-items:center;flex-direction:row;justify-content:space-between;box-sizing:border-box;"]),tm=S.d.div.withConfig({displayName:"EducatorPollHeader__FlexWrapper",componentId:"sc-7iejke-1"})(["display:flex;align-items:center;flex-direction:row;justify-content:center;box-sizing:border-box;"]),im=Object(S.d)(ee.b).withConfig({displayName:"EducatorPollHeader__EndPollButton",componentId:"sc-7iejke-2"})(["height:24px;margin-left:",";width:unset;"],P.c.SPACING_3B),nm=S.d.div.withConfig({displayName:"EducatorPollHeader__ImageButtonWrapper",componentId:"sc-7iejke-3"})(["height:24px;width:24px;box-sizing:border-box;border:"," solid ",";border-radius:8px;display:flex;align-items:center;justify-content:center;margin-left:",";cursor:pointer;"],P.c.SPACING_1,(function(e){return e.theme.BORDER}),P.c.SPACING_2B),am=(S.d.img.withConfig({displayName:"EducatorPollHeader__ImageButton",componentId:"sc-7iejke-4"})(["height:16px;width:16px;"]),function(e){var t=e.timeRemaining,i=e.isExpanded,n=e.onEndPoll,o=e.onClosePoll,r=e.onIncreaseTimer,s=e.onSizeChange;return a.a.createElement(em,null,a.a.createElement(tm,null,a.a.createElement(ee.j,null,H.Cb.POLL_HEADER),function(){if(t>0)return a.a.createElement(im,{variant:"hollow",action:"destructive",fontSize:P.d.EXTRA_SMALL,onClick:n},H.Cb.END_POLL)}()),a.a.createElement(tm,null,function(){if(t>0)return a.a.createElement($h,{time:t,onIncreaseTimer:r})}(),t>0?a.a.createElement(nm,{onClick:s},a.a.createElement(Ve.p,{orientation:i?"down":"up"})):a.a.createElement(nm,{onClick:o},a.a.createElement(Ve.u,null))))});am.propTypes={timeRemaining:U.a.number.isRequired,isExpanded:U.a.bool.isRequired,onEndPoll:U.a.func.isRequired,onIncreaseTimer:U.a.func.isRequired,onSizeChange:U.a.func.isRequired,onClosePoll:U.a.func.isRequired};var om=am,rm=i("7G9T"),sm=i("H6ri"),lm={streakFire:i("MJbV")},cm=S.d.div.withConfig({displayName:"LearnerStreakCard__Wrapper",componentId:"sc-4ubxbw-0"})(["height:56px;width:100%;display:flex;flex-direction:row;justify-content:flex-start;align-content:flex-start;"]),dm=S.d.div.withConfig({displayName:"LearnerStreakCard__AvatarWrapper",componentId:"sc-4ubxbw-1"})(["height:40px;width:40px;border-radius:",";"],P.c.SPACING_2B),pm=S.d.div.withConfig({displayName:"LearnerStreakCard__FlexWrapper",componentId:"sc-4ubxbw-2"})(["display:flex;flex-direction:column;justify-content:flex-start;align-content:flex-start;margin-left:",";"],P.c.SPACING_4B),um=S.d.div.withConfig({displayName:"LearnerStreakCard__SubTextWrapper",componentId:"sc-4ubxbw-3"})(["display:flex;flex-direction:row;justify-content:flex-start;align-content:flex-start;white-space:pre-wrap;"]),hm=Object(S.d)(ee.j).withConfig({displayName:"LearnerStreakCard__Name",componentId:"sc-4ubxbw-4"})(["text-transform:capitalize;"]),mm=S.d.div.withConfig({displayName:"LearnerStreakCard__StreakFireImageContainer",componentId:"sc-4ubxbw-5"})(["display:flex;height:18px;padding:4px 0px;"]),gm=function(e){var t=e.learnerStreak,i=e.style,n=e.theme,o=t.avatar,r=t.name,s=t.timeTaken,l=t.streak;return a.a.createElement(cm,{style:i},a.a.createElement(dm,null,a.a.createElement($.a,{size:40,avatar:o})),a.a.createElement(pm,null,a.a.createElement(hm,null,r),a.a.createElement(um,null,a.a.createElement(ee.k,{color:n.TEXT_TERTIARY,fontWeight:P.d.REGULAR},"".concat(s,"s")),a.a.createElement(ee.k,{color:n.TEXT_TERTIARY,fontWeight:P.d.REGULAR}," \u2022 "),a.a.createElement(ee.k,{color:n.TEXT_TERTIARY,fontWeight:P.d.REGULAR},l),a.a.createElement(mm,null,a.a.createElement("img",{src:lm.streakFire})))))};gm.propTypes={streak:U.a.object.isRequired,style:U.a.object.isRequired};var fm=Object(S.f)(gm),Em=S.d.div.withConfig({displayName:"LearnerStreak__Wrapper",componentId:"sc-156cvnu-0"})(["height:100%;width:100%;"]),bm=function(e){var t=e.learnerStreak,i=Object(n.useCallback)((function(e){var i=e.index,n=e.key,o=e.style,r=t.get(i);return a.a.createElement(fm,{key:n,learnerStreak:r,style:o})}),[t.size]),o=Object(n.useCallback)((function(e){var n=e.width,o=e.height;return a.a.createElement(sm.a,{className:"virtualChatList",width:n,height:o,rowHeight:56,rowRenderer:i,rowCount:t.size,overscanRowCount:3})}),[t.size]);return a.a.createElement(Em,null,a.a.createElement(rm.a,{children:o}))};bm.propTypes={learnerStreak:U.a.object.isRequired};var Cm=bm,vm=S.d.div.withConfig({displayName:"ShareLeaderboard__Wrapper",componentId:"an83fy-0"})(["position:absolute;bottom:",";left:",";right:",";height:80px;padding:",";background-color:",";box-shadow:0px 16px 32px ",";border-radius:",";box-sizing:border-box;"],P.c.SPACING_4B,P.c.SPACING_4B,P.c.SPACING_4B,P.c.SPACING_4B,(function(e){return e.theme.BG_MAIN}),(function(e){return e.theme.SHADOW}),P.c.SPACING_2B),Sm=a.a.memo((function(e){var t=e.onShareLeaderboard;return a.a.createElement(vm,null,a.a.createElement(ee.b,{variant:"filled",isEducator:!0,fontWeight:P.d.BOLD,fontSize:P.d.LARGE,onClick:function(){t()}},H.Cb.SHARE_LEADERBOARD))}));Sm.propTypes={onShareLeaderboard:U.a.func.isRequired};var Im=Sm;const ym=S.d.div.withConfig({displayName:"EducatorPoll__Wrapper",componentId:"sy8zyr-0"})(["position:absolute;width:100%;height:",";top:",";left:0;display:flex;align-items:center;flex-direction:column;justify-content:stretch;background-color:",";box-sizing:border-box;z-index:1;transition-property:top,height;transition-duration:0.3s;transition-timing-function:ease-in-out;"],({isExpanded:e,isPollActive:t})=>t?e?"360px":"104px":"0px",({isExpanded:e,isPollActive:t})=>t?e?"-256px":"0px":"104px",({theme:e})=>e.BG_MAIN),_m=S.d.div.withConfig({displayName:"EducatorPoll__FlexWrapper",componentId:"sy8zyr-1"})(["height:104px;width:100%;padding:"," ",";box-sizing:border-box;background-color:",";"],P.c.SPACING_0B,P.c.SPACING_4B,({theme:e})=>e.BODY_BG),Om=S.d.div.withConfig({displayName:"EducatorPoll__LearnerStreakWrapper",componentId:"sy8zyr-2"})(["flex:1;width:100%;padding:"," "," "," ",";box-sizing:border-box;background-color:",";display:flex;"],P.c.SPACING_4B,P.c.SPACING_4B,P.c.SPACING_0B,P.c.SPACING_4B,({theme:e})=>e.BG_MAIN),wm=S.d.div.withConfig({displayName:"EducatorPoll__ChoiceWrapper",componentId:"sy8zyr-3"})(["height:55px;width:100%;display:flex;flex-direction:row;align-items:center;"]),Tm=S.d.div.withConfig({displayName:"EducatorPoll__ChoiceContainer",componentId:"sy8zyr-4"})(["height:32px;flex:1;min-width:0;display:flex;align-items:center;flex-direction:row;justify-content:space-between;> *{margin-right:",";}> *:last-child{margin-right:",";}"],P.c.SPACING_2B,P.c.SPACING_0B),Am=S.d.div.withConfig({displayName:"EducatorPoll__StreakPlaceholderWrapper",componentId:"sy8zyr-5"})(["flex:1;display:flex;align-items:center;justify-content:center;flex-direction:column;"]),Pm=Object(S.d)(ee.j).withConfig({displayName:"EducatorPoll__StreakPlaceholderText",componentId:"sy8zyr-6"})(["white-space:pre-wrap;margin-top:",";color:",";"],P.c.SPACING_4B,({theme:e})=>e.TEXT_TERTIARY),xm=({socketManager:e,onSendPollData:t})=>{const i=Object(C.e)(e=>e.getIn(["poll","poll"])),o=Object(C.e)(e=>e.getIn(["poll","isPollActive"])),r=Object(C.e)(e=>e.getIn(["app","isSocketManagerInit"])),s=Object(Zi.a)(i.timeRemaining,0),l=Object(n.useState)(!0),c=m()(l,2),d=c[0],p=c[1],u=Object(n.useState)(!1),h=m()(u,2),g=h[0],E=h[1],b=Object(C.e)(e=>e.getIn(["poll","globalLeaderboard"])),v=Object(C.d)();Object(n.useEffect)(()=>{s<=0&&(v(Object(He.j)(!1)),w(),T())},[s]),Object(n.useEffect)(()=>{let e;return o&&(e=setInterval(()=>{S(),I()},2e3)),()=>clearInterval(e)},[o,i.id]),Object(n.useEffect)(()=>{b&&b.size>=H.lb&&s<=0&&(E(!0),p(!0))},[b]);const S=()=>{e.getPoll(i.id)},I=()=>{e.getLearnersStreak(i.id)},y=Object(n.useCallback)(()=>{e.shareLeaderBoard(),A()},[e,r]),_=Object(n.useCallback)(()=>{p(e=>!e)},[]),O=Object(n.useCallback)(()=>{w(),A(),j.f.sendData(j.c.POLL_ENDED)},[e,r,i.id,i.choices]),w=()=>{e.closePoll(i.id);let n=Object(f.db)();if(n&&i.id){const e={e:H.L.CLOSE_POLL,data:{id:n,pid:i.id,data:i.jsChoices}};t(e)}},T=()=>{e.getLeaderBoard()},A=()=>{v(Object(He.c)()),E(!1)},x=Object(n.useCallback)(()=>{e.incrementTimePoll(i.id,H.Db.STEP);let n=Object(f.db)();const a={e:H.L.INCREMENT_TIMER,data:{id:n,t:H.Db.STEP}};t(a)},[e,r,i.id]);return a.a.createElement(ym,{isExpanded:d,isPollActive:o},a.a.createElement(_m,null,a.a.createElement(om,{timeRemaining:s,isExpanded:d,onEndPoll:O,onIncreaseTimer:x,onSizeChange:_,onClosePoll:A}),a.a.createElement(ee.f,null),a.a.createElement(wm,null,a.a.createElement(Tm,null,(()=>{const e=i.choices.size<=2?187:84;return i.choices.map((t,i)=>a.a.createElement(Yh.a,{key:i,choice:t,canChoose:!1,isSelected:!1,maxWidth:e}))})()))),a.a.createElement(Om,null,i.learnerStreak.size>0?a.a.createElement(Cm,{learnerStreak:i.learnerStreak}):g?void 0:a.a.createElement(Am,null,a.a.createElement(Ve.m,null),a.a.createElement(Pm,{fontWeight:P.d.REGULAR},H.Cb.LEARNER_STREAK_PLACEHOLDER_TEXT))),(()=>{if(g)return a.a.createElement(Im,{onShareLeaderboard:y})})())};xm.propTypes={socketManager:U.a.object.isRequired};var Rm=xm,Dm=S.d.div.withConfig({displayName:"EducatorPollWrapper__Wrapper",componentId:"sc-1fjk6n3-0"})(["position:relative;height:",";width:100%;transition:height 0.3s ease-in-out;"],(function(e){return e.hide?"0px":"104px"})),Nm=function(e){var t=e.socketManager,i=e.onSendPollData,n=Object(C.e)((function(e){return e.getIn(["poll","poll"])})),o=Object(C.e)((function(e){return e.getIn(["poll","isPollActive"])}));return a.a.createElement(Dm,{hide:!o},function(){if(n)return a.a.createElement(Rm,{socketManager:t,onSendPollData:i})}())};Nm.propTypes={socketManager:U.a.object,onSendPollData:U.a.func};var jm=Nm;const km=S.d.div.withConfig({displayName:"WebCam__CameraContainer",componentId:"sc-1g7njrf-0"})(["position:absolute;top:0;left:0;height:100%;width:100%;background-color:",";align-items:center;justify-content:center;"],({theme:e})=>e.BLACK),Lm=S.d.video.withConfig({displayName:"WebCam__MainVideo",componentId:"sc-1g7njrf-1"})(["",""],e=>e.showFull?Object(S.c)(["width:100%;height:100%;"]):Object(S.c)(["position:absolute;top:8.33%;left:50.78125%;width:46.875%;height:83.34%;border-radius:2.67%;overflow:hidden;"])),Bm=S.d.video.withConfig({displayName:"WebCam__ScreenVideo",componentId:"sc-1g7njrf-2"})(["",""],e=>e.showSquare?Object(S.c)(["position:absolute;top:0;left:0;width:300px;height:300px;"]):Object(S.c)(["width:100%;height:100%;"])),Mm=S.d.canvas.withConfig({displayName:"WebCam__MultiEducatorMainCanvas",componentId:"sc-1g7njrf-3"})(["position:absolute;top:0;left:0;width:100%;height:100%;"]),Gm=S.d.canvas.withConfig({displayName:"WebCam__ClassPauseCanvas",componentId:"sc-1g7njrf-4"})(["position:absolute;top:0;left:0;"]),Um={classPause:i("ChkN")};class Hm extends a.a.PureComponent{constructor(e){super(e),b()(this,"addStreamListeners",()=>{this.props.janusWrapper.addLocalStreamListener(()=>{this.startPaintingVideo(),this.hasLocalStream=!0}),this.props.janusWrapper.addRemoteStreamListener(()=>{this.startPaintingVideo(),this.hasRemoteStream=!0})}),b()(this,"startPaintingVideo",()=>{this.paintRoundCornersCanvas(),this.paintingInterval&&clearTimeout(this.paintingInterval),this.paintAnimationId&&clearTimeout(this.paintAnimationId),this.paintingInterval=setTimeout(()=>{requestAnimationFrame(this.paintVideoOnTempCanvas)},1),this.paintAnimationId=setTimeout(()=>{requestAnimationFrame(this.paintVideoOnMainCanvas)},1)}),b()(this,"paintRoundCorners",(e,t,i,n,a,o)=>{e.beginPath(),e.moveTo(t+o,i),e.lineTo(t+n-o,i),e.quadraticCurveTo(t+n,i,t+n,i+o),e.lineTo(t+n,i+a-o),e.quadraticCurveTo(t+n,i+a,t+n-o,i+a),e.lineTo(t+o,i+a),e.quadraticCurveTo(t,i+a,t,i+a-o),e.lineTo(t,i+o),e.quadraticCurveTo(t,i,t+o,i),e.fill(),e.closePath()}),b()(this,"paintRoundCornersCanvas",()=>{let e=document.getElementById("roundBorderCanvas"),t=e.getContext("2d");t&&(t.clearRect(0,0,e.width,e.height),t.fillStyle="#000",t.lineWidth=1,t.strokeStyle="FF0000",t.globalCompositeOperation="xor",t.fillRect(0,0,e.width,e.height),this.hasLocalStream&&this.hasRemoteStream?(this.paintRoundCorners(t,15,30,300,300,8),this.paintRoundCorners(t,325,30,300,300,8)):this.paintRoundCorners(t,140,0,360,360,8))}),b()(this,"paintVideoOnTempCanvas",()=>{let e=document.getElementById("mainVideo"),t=document.getElementById("screenvideo"),i=document.getElementById("multiEducatorTempCanvas"),n=document.getElementById("roundBorderCanvas");if(e&&t&&i&&n){let a=i.getContext("2d");a.clearRect(0,0,i.width,i.height),a.fillStyle="#000000",a.lineWidth=1,a.strokeStyle="FF0000",a.fillRect(0,0,i.width,i.height),this.hasLocalStream&&this.hasRemoteStream?(a.drawImage(e,0,0,e.videoWidth,e.videoHeight,15,30,300,300),a.drawImage(t,0,0,t.videoWidth,t.videoHeight,325,30,300,300)):a.drawImage(e,140,0,360,360),a.drawImage(n,0,0)}this.paintingInterval&&clearTimeout(this.paintingInterval),this.paintingInterval=setTimeout(()=>{requestAnimationFrame(this.paintVideoOnTempCanvas)},40)}),b()(this,"paintVideoOnMainCanvas",()=>{let e=document.getElementById("multiEducatorMainCanvas"),t=document.getElementById("multiEducatorTempCanvas");if(e&&t){let i=e.getContext("2d");i.clearRect(0,0,e.width,e.height),this.props.isCameraTurnedOff||i.drawImage(t,0,0,t.width,t.height,0,0,e.width,e.height)}this.paintAnimationId&&clearTimeout(this.paintAnimationId),this.paintAnimationId=setTimeout(()=>{requestAnimationFrame(this.paintVideoOnMainCanvas)},40)}),b()(this,"toggleCamera",()=>{this.props.toggleCamera(!1)}),b()(this,"toggleCameraStream",()=>{this.setState((e,t)=>({isCameraConnected:!e.isCameraConnected}),()=>{let e={plugin:H.Ab.Control,data:{e:H.L.CAMERA_SWITCH,v:this.state.isCameraConnected}};this.props.onSendData(e)}),this.props.toggleCameraStream()}),b()(this,"setReference",e=>{this.props.setReferenceForVideoElement(e),this.liveVideo=e}),b()(this,"setVolume",e=>{this.liveVideo&&isFinite(e)&&(this.liveVideo.volume=e/100)}),b()(this,"handleTimeUpdate",()=>{if(!this.props.isEducator){const e=this.liveVideo.currentTime+this.props.hlsLiveVideoDuration;this.props.setVideoPlayTiming(e,e)}}),b()(this,"setUpClassPauseImage",()=>{this.classPauseImageNotDrawn=!0,this.classPauseImage=new Image,this.classPauseImage.onload=()=>{this.drawClassPauseImage(this.classPauseImage)},this.classPauseImage.src=Um.classPause}),b()(this,"startDrawingClassPauseImage",e=>{this.drawClassPauseImage(e),this.drawClassPauseImageInterval=setInterval(()=>{this.drawClassPauseImage(e)},500)}),b()(this,"stopDrawingClassPauseImage",()=>{this.drawClassPauseImageInterval&&clearInterval(this.drawClassPauseImageInterval)}),b()(this,"drawClassPauseImage",e=>{if(this.classPauseCanvas&&e){const t=this.classPauseCanvas.getContext("2d");this.props.useRoundVideo?t.drawImage(e,0,0,360,360):t.drawImage(e,0,0,640,360)}}),b()(this,"renderMultiEducatiorMainCanvas",()=>{if(this.props.isEducator&&this.props.isMultiEduClass)return a.a.createElement(Mm,{id:"multiEducatorMainCanvas"})}),b()(this,"renderMultiEducatiorTempCanvas",()=>{if(this.props.isEducator&&this.props.isMultiEduClass)return a.a.createElement("canvas",{id:"multiEducatorTempCanvas",height:360,width:640,hidden:!0})}),b()(this,"renderRoundBorderCanvas",()=>{if(this.props.isEducator&&this.props.isMultiEduClass)return a.a.createElement("canvas",{id:"roundBorderCanvas",height:360,width:640,hidden:!0})}),b()(this,"renderScreenVideo",()=>{const e=this.props.isMultiEduClass&&this.props.isEducator||0===this.props.classState||this.props.isModerator&&!this.props.wasGoLiveClickedbyGuest,t=this.props.isMultiEduClass&&this.props.isEducator;let i=this.props.isMuted;return!this.props.isMultiEduClass&&this.props.isEducator&&(i=!0),a.a.createElement(Bm,{id:"screenvideo",playsInline:!0,ref:this.setReference,onTimeUpdate:this.handleTimeUpdate,muted:i,hidden:e,showSquare:t,autoPlay:!0,disablePictureInPicture:!this.props.isEducator})}),this.state={isCameraConnected:!this.props.isCameraEnabled},this.streamCount=0,this.classPauseImageNotDrawn=!1,this.classPauseImage=null,this.drawClassPauseImageInterval=null}componentDidMount(){this.liveVideo.srcObject=this.props.getStream(),this.setVolume(this.props.volume)}UNSAFE_componentWillReceiveProps(e){e.isCameraEnabled!==this.props.isCameraEnabled&&this.setState({isCameraConnected:!e.isCameraEnabled}),e.volume==this.props.volume||e.isEducator||this.setVolume(e.volume),10==this.props.classState&&!this.classPauseImageNotDrawn&&this.props.isEducator&&this.setUpClassPauseImage(),this.props.isClassPaused!==e.isClassPaused&&this.props.isEducator&&(e.isClassPaused?this.startDrawingClassPauseImage(this.classPauseImage):this.stopDrawingClassPauseImage())}componentWillUnmount(){this.stopDrawingClassPauseImage()}componentDidUpdate(e,t){!e.janusWrapper&&this.props.janusWrapper&&this.props.isEducator&&this.props.isMultiEduClass&&this.addStreamListeners()}componentWillUnmount(){this.paintingInterval&&clearTimeout(this.paintingInterval),this.paintAnimationId&&clearTimeout(this.paintAnimationId)}renderMainVideo(){const e=this.props.useGreenScreen||0===this.props.classState||this.props.isMultiEduClass,t=!(0===this.props.classState||this.props.isModerator),i=0===this.props.classState||this.props.isModerator&&!this.props.wasGoLiveClickedbyGuest;if(e)return a.a.createElement(Lm,{id:"mainVideo",hidden:this.props.useGreenScreen,hidden:t,showFull:i,autoPlay:!0,disablePictureInPicture:!0})}renderClassPauseCanvas(){if(this.props.isEducator&&10===this.props.classState)return a.a.createElement(Gm,{ref:e=>{this.classPauseCanvas=e},id:"classPauseCanvas",width:this.props.useRoundVideo?360:640,height:360,hidden:!0})}render(){return a.a.createElement(n.Fragment,null,a.a.createElement(km,null,this.renderScreenVideo(),this.renderMainVideo(),this.renderMultiEducatiorTempCanvas(),this.renderMultiEducatiorMainCanvas(),this.renderRoundBorderCanvas(),this.renderClassPauseCanvas()))}}const Vm={setVideoPlayTiming:B.y};var Fm=Object(C.c)(e=>({volume:e.getIn(["videoPlayControls","volume"]),isMuted:e.getIn(["videoPlayControls","isMuted"]),isMultiEduClass:e.getIn(["app","isMultiEduClass"]),isModerator:e.getIn(["app","isModerator"]),isEducator:e.getIn(["app","isEducator"]),isScreenShared:e.getIn(["app","isScreenShared"]),isClassPaused:e.getIn(["app","isClassPaused"]),wasGoLiveClickedbyGuest:e.getIn(["app","wasGoLiveClickedbyGuest"]),useRoundVideo:e.getIn(["app","useRoundVideo"])}),Vm)(Object(S.f)(Hm)),Wm=i("UtX9"),zm=i("0m7i"),qm=i("b5IN"),Ym=i("kkPo"),Xm=S.d.div.withConfig({displayName:"ReasonForReport__ReasonWrapper",componentId:"sc-1m36ati-0"})(["display:flex;flex-direction:column;margin-bottom:",";align-items:flex-start;"],P.c.SPACING_3B),Km=a.a.memo((function(e){var t=e.heading;return a.a.createElement(Xm,null,a.a.createElement(ee.j,null,t))})),Zm=Km;Km.propTypes={heading:U.a.string.isRequired},Km.defaultProps={heading:""};var Jm=S.d.div.withConfig({displayName:"ReportBlockOption__OptionWrapper",componentId:"sc-1j920tx-0"})(["display:flex;cursor:pointer;background:",";border:",";color:",";box-sizing:border-box;border-radius:",";padding:",";margin:"," 0;align-items:center;font-size:",";width:100%;:hover{font-weight:",";}"],(function(e){return e.theme.BG_MAIN}),(function(e){var t=e.showSelectedBorder,i=e.theme;return"1px solid ".concat(t?i.TEXT_PRIMARY:i.BORDER)}),(function(e){var t=e.showSelectedBorder,i=e.theme;return t?i.TEXT_PRIMARY:i.TEXT_TERTIARY}),P.c.SPACING_2B,P.c.SPACING_3B,P.c.SPACING_1B,P.d.SMALL,P.d.SEMIBOLD),Qm=a.a.memo((function(e){var t=e.option,i=e.isSelected,n=e.onSelectOption;return a.a.createElement(Jm,{showSelectedBorder:i,onClick:function(){n(t)}},t)}));Qm.propTypes={option:U.a.string.isRequired,isSelected:U.a.bool.isRequired,onSelectOption:U.a.func.isRequired},Qm.defaultProps={};var $m=Qm,eg=i("WQoh"),tg={chatGuidelinesIcon:i("FCfd")},ig=S.d.div.withConfig({displayName:"BlockConfirm__DialogContainer",componentId:"namjk7-0"})(["position:absolute;display:flex;flex-direction:column;background:",";box-shadow:0px 16px 32px ",";border-radius:",";padding:",";bottom:",";transition:bottom 0.2s ease-in;"],(function(e){return e.theme.BG_MAIN}),(function(e){return e.theme.BORDER}),P.c.SPACING_2B,P.c.SPACING_4B,(function(e){return e.isOpen?P.c.SPACING_4B:"-180px"})),ng=S.d.div.withConfig({displayName:"BlockConfirm__IconContainer",componentId:"namjk7-1"})(["display:flex;justify-content:center;align-items:center;width:24px;height:24px;background:",";border-radius:8px;"],(function(e){return e.theme.BG_MAIN})),ag=Object(S.d)(ng).withConfig({displayName:"BlockConfirm__ExitButtonContainer",componentId:"namjk7-2"})(["align-self:right;cursor:pointer;"]),og=S.d.div.withConfig({displayName:"BlockConfirm__TitleContainer",componentId:"namjk7-3"})(["text-align:left;font-size:",";line-height:",";font-weight:",";color:",";margin-left:",";"],P.d.MEDIUM,P.d.LINE_HEIGHT_MAX,P.d.SEMIBOLD,(function(e){return e.theme.TEXT_PRIMARY}),P.c.SPACING_2B),rg=S.d.div.withConfig({displayName:"BlockConfirm__BodyContainer",componentId:"namjk7-4"})(["margin:"," "," 0 0;text-align:left;font-size:",";line-height:",";color:",";"],P.c.SPACING_4B,P.c.SPACING_4B,P.d.SMALL,P.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_PRIMARY})),sg=Object(S.d)(ee.b).withConfig({displayName:"BlockConfirm__SubmitButton",componentId:"namjk7-5"})(["height:40px;width:80px;"]),lg=a.a.memo((function(e){var t=e.isOpen,i=e.onSubmit,n=e.onClose;return a.a.createElement(ig,{isOpen:t,onClick:function(e){e.stopPropagation()}},a.a.createElement(br.a,{justifyContent:"space-between",alignItems:"center"},a.a.createElement(br.a,null,a.a.createElement(ng,null,a.a.createElement("img",{src:tg.chatGuidelinesIcon})),a.a.createElement(og,null,H.h.BLOCK_CONFIRM_TITLE)),a.a.createElement(br.a,null,a.a.createElement(ag,{onClick:n},a.a.createElement(Ve.u,null)))),a.a.createElement(br.a,{justifyContent:"space-between",alignItems:"flex-end"},a.a.createElement(rg,null,H.h.BLOCK_CONFIRM_MESSAGE),a.a.createElement(sg,{onClick:i,action:"destructive"},H.h.BLOCK_CONFIRM_BUTTON_TEXT)))}));lg.propTypes={isOpen:U.a.bool,onSubmit:U.a.func.isRequired,onClose:U.a.func.isRequired,onClick:U.a.func},lg.defaultProps={isOpen:!1};var cg=lg,dg=S.d.div.withConfig({displayName:"ReportBlockCurtain__UserAvatarContainer",componentId:"ds3bss-0"})(["display:flex;padding-top:",";width:28px;@media only screen and (max-width:850px){width:0px;}"],P.c.SPACING_2B),pg=S.d.div.withConfig({displayName:"ReportBlockCurtain__TextMessageWrapper",componentId:"ds3bss-1"})(["display:flex;margin:"," ",";@media only screen and (max-width:850px){margin-bottom:",";padding-right:",";}width:100%;"],P.c.SPACING_4B,P.c.SPACING_0B,P.c.SPACING_1,P.c.SPACING_2),ug=Object(S.d)(pg).withConfig({displayName:"ReportBlockCurtain__QuestionMessageWrapper",componentId:"ds3bss-2"})(["height:fit-content;width:100%;"]),hg=S.d.div.withConfig({displayName:"ReportBlockCurtain__MessageBox",componentId:"ds3bss-3"})(["display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;text-align:left;width:228px;padding:"," ",";border-radius:",";background:",";border:1px solid ",";box-sizing:border-box;word-break:break-word;@media only screen and (max-width:850px){width:100%;border:none;margin-bottom:",";margin-top:",";}"],P.c.SPACING_2B,P.c.SPACING_3B,P.c.SPACING_2B,(function(e){return e.theme.BG_MAIN}),(function(e){return e.theme.BORDER}),P.c.SPACING_1,P.c.SPACING_0B),mg=S.d.span.withConfig({displayName:"ReportBlockCurtain__MessageHeader",componentId:"ds3bss-4"})(["display:inline-block;font-size:",";color:",";margin-right:",";line-height:",";text-transform:capitalize;@media only screen and (max-width:850px){font-size:",";line-height:",";margin-right:",";&:after{content:':';}}"],P.d.SMALL,(function(e){return e.theme.TEXT_TERTIARY}),P.c.SPACING_2B,P.d.LINE_HEIGHT_MAX,P.d.SMALL,P.d.LINE_HEIGHT_MEDIUM,P.c.SPACING_1B),gg=Object(S.d)(ee.b).withConfig({displayName:"ReportBlockCurtain__ReportButton",componentId:"ds3bss-5"})(["width:80px;height:40px;"]),fg=S.d.div.withConfig({displayName:"ReportBlockCurtain__BlockLearnerWrapper",componentId:"ds3bss-6"})(["width:87px;height:40px;font-size:",";color:",";display:flex;align-items:center;cursor:",";pointer-events:",";"],P.d.MEDIUM,(function(e){var t=e.disabled,i=e.theme;return t?i.TEXT_TERTIARY:i.RED}),(function(e){return e.disabled?"none":"pointer"}),(function(e){return e.disabled?"none":"auto"})),Eg=S.d.div.withConfig({displayName:"ReportBlockCurtain__ActionButtonsContainer",componentId:"ds3bss-7"})(["display:flex;flex-direction:row-reverse;margin-top:",";width:100%;justify-content:space-between;"],P.c.SPACING_4B),bg=Object(S.d)(zm.a).withConfig({displayName:"ReportBlockCurtain__ReportWrapper",componentId:"ds3bss-8"})(["position:relative;display:flex;box-sizing:border-box;align-items:center;justify-content:center;"]),Cg=S.d.div.withConfig({displayName:"ReportBlockCurtain__ReportContentWrapper",componentId:"ds3bss-9"})(["display:flex;flex-direction:column;align-items:flex-start;height:100%;width:100%;"]),vg=S.d.div.withConfig({displayName:"ReportBlockCurtain__BackHeaderWrapper",componentId:"ds3bss-10"})(["width:100%;"]),Sg=S.d.div.withConfig({displayName:"ReportBlockCurtain__ScrollableContent",componentId:"ds3bss-11"})(["padding:0 ",";overflow-y:auto;width:100%;"],P.c.SPACING_4B),Ig=S.d.div.withConfig({displayName:"ReportBlockCurtain__BlockConfirmDialogContainer",componentId:"ds3bss-12"})(["right:",";left:",";bottom:",";position:absolute;"],P.c.SPACING_4B,P.c.SPACING_4B,P.c.SPACING_0B),yg=function(e){var t=e.socketManager,i=Object(C.d)(),o=Object(C.e)((function(e){return e.getIn(["app","userId"])})),r=Object(C.e)((function(e){return e.getIn(["app","classId"])})),s=Object(C.e)((function(e){return e.getIn(["app","accessToken"])})),l=Object(C.e)((function(e){return e.getIn(["app","isReplay"])})),c=Object(C.e)((function(e){return e.getIn(["app","isEducator"])})),d=Object(C.e)((function(e){return e.getIn(["app","isUnacademyUser"])})),p=Object(C.e)((function(e){return e.getIn(["chat","isReportBlockCurtainOpen"])})),u=Object(C.e)((function(e){return e.getIn(["chat","reportedMessage"])})),h=Object(C.e)((function(e){return e.getIn(["videoPlayControls","isChatHidden"])})),g=Object(n.useState)(""),E=m()(g,2),b=E[0],v=E[1],S=Object(n.useState)(""),I=m()(S,2),y=I[0],_=I[1],O=Object(n.useState)(!1),w=m()(O,2),T=w[0],A=w[1];Object(n.useEffect)((function(){A(!1)}),[p]);var P=function(){i(Object(Oe.g)()),v(""),_("")},x=Object(n.useCallback)((function(e){_(e)}),[]),R=function(e){v(e.target.value)},D=function(){i(Object(Oe.t)(!0))},N=function(){i(Object(Oe.t)(!1))},j=function(){var e=y.concat(b),n=u.sender.uid;i(Object(Oe.n)(o,r,n,u,e,s)),u.type===H.jb.QUESTION&&(i(Object(Oe.G)(u.id)),t.skipQuestion(u.id)),P()},k=function(){A(!1)},L=function(){A(!0)},B=function(){if(c||d){var e=u.sender.uid;j(),t.blockThisUser(e),t.deleteMessagesFromUser(e),P()}},M=function(){if(u&&u.type===H.jb.MESSAGE)return a.a.createElement(pg,null,a.a.createElement(dg,null,a.a.createElement($.a,{avatar:Object(f.a)(u.sender.image),name:u.sender.name,size:20})),a.a.createElement(hg,null,function(){if(l)return a.a.createElement(mg,null,u.sender.name);var e=u&&u.timetoken?new Date(Number(u.timetoken)):new Date;return a.a.createElement(mg,null,u.sender.name+" \u2022 "+Object(f.R)(e))}(),a.a.createElement(qm.a,{messageId:u.id,msgText:u.text})))},G=function(){return a.a.createElement(Eg,null,a.a.createElement(gg,{variant:y||b?"filled":"disabled",onClick:j,isEducator:c},H.h.REPORT_BUTTON_TEXT),function(){if(c||d)return a.a.createElement(fg,{disabled:!y&&!b,onClick:L},H.h.BLOCK_LEARNER_TEXT)}())};return a.a.createElement(zm.b,{isOpen:p,isOverlayVisible:!h,zIndex:300,onClick:P},a.a.createElement(bg,{isOverlayVisible:!h,isOpen:p},a.a.createElement(Cg,null,function(){var e=u&&u.type===H.jb.MESSAGE?H.h.REPORT_BACK_HEADING_COMMENT:H.h.REPORT_BACK_HEADING_QUESTION;return a.a.createElement(vg,null,a.a.createElement(Ym.a,{heading:e,onBackClick:P}))}(),a.a.createElement(Sg,null,M(),function(){if(u&&u.type===H.jb.QUESTION)return a.a.createElement(ug,null,a.a.createElement(eg.a,{message:u,index:0}))}(),a.a.createElement(Zm,{heading:H.h.REASON_FOR_REPORT_HEADING}),H.g.map((function(e,t){return a.a.createElement($m,{key:t,option:e,onSelectOption:x,isSelected:e===y})})),a.a.createElement(Gi.a,{placeHolderText:H.h.OTHER_REASONS_PLACEHOLDER,rows:3,handleOnChange:R,suggestion:b,multiline:!0,onFocusHandler:D,onBlurHandler:N}),G()))),a.a.createElement(Ig,null,a.a.createElement(cg,{isOpen:T,onSubmit:B,onClose:k})))};yg.propTypes={},yg.defaultProps={};var _g=yg,Og=S.d.div.withConfig({displayName:"ConnectingLoader__Wrapper",componentId:"igqeh6-0"})(["display:flex;flex-direction:column;align-items:center;"]),wg=S.d.div.withConfig({displayName:"ConnectingLoader__ConnectingText",componentId:"igqeh6-1"})(["font-size:",";color:",";margin-top:",";text-transform:uppercase;"],P.d.SMALL,(function(e){return e.theme.TEXT_TERTIARY}),P.c.SPACING_10B),Tg=S.d.div.withConfig({displayName:"ConnectingLoader__EducatorAvatarWrapper",componentId:"igqeh6-2"})(["height:80px;width:80px;position:relative;"]),Ag=S.d.img.withConfig({displayName:"ConnectingLoader__EducatorAvatar",componentId:"igqeh6-3"})(["height:100%;width:100%;top:",";left:",";border-radius:50%;object-fit:cover;position:absolute;"],P.c.SPACING_0B,P.c.SPACING_0B),Pg=S.d.div.withConfig({displayName:"ConnectingLoader__AuthorName",componentId:"igqeh6-4"})(["color:",";display:inline;text-transform:uppercase;"],(function(e){return e.theme.TEXT_PRIMARY})),xg=Object(S.e)(["0%{transform:scale(1);opacity:0.2;}50%{transform:scale(1.2);opacity:0.1;}75%{transform:scale(1.4);opacity:0;}100%{transform:scale(1.4);opacity:0;}"]),Rg=S.d.div.withConfig({displayName:"ConnectingLoader__RippleEffect",componentId:"igqeh6-5"})(["height:100%;width:100%;top:",";left:",";background-color:",";opacity:0.1;animation:"," 1s ease-out infinite;border-radius:50%;"],P.c.SPACING_0B,P.c.SPACING_0B,(function(e){return e.theme.TEXT_PRIMARY}),xg),Dg=a.a.memo((function(e){var t=e.author,i=e.isEducator,n=e.isMultiEduClass,o=e.isModerator;return a.a.createElement(Og,null,a.a.createElement(Tg,null,a.a.createElement(Rg,null),a.a.createElement(Ag,{src:t.avatar})),i||n&&o?a.a.createElement(wg,null,H.Ob.SETTING_UP_CLASS):a.a.createElement(wg,null,"CONNECTING TO ",a.a.createElement(Pg,null," ","".concat(t.fullName,"'s")," ")," CLASS"))}));const Ng=S.d.div.withConfig({displayName:"SliderItem__Wrapper",componentId:"q8hxy2-0"})(["display:flex;width:460px;background:",";border:1px solid ",";box-sizing:border-box;border-radius:",";height:64px;float:left;justify-content:flex-start;padding:",";margin:0px 6px;"],({theme:e})=>e.BG_MAIN,({theme:e})=>e.BORDER,P.c.SPACING_2B,P.c.SPACING_3B),jg=S.d.div.withConfig({displayName:"SliderItem__InfoTextWrapper",componentId:"q8hxy2-1"})(["display:flex;flex-direction:column;justify-content:center;margin-left:",";"],P.c.SPACING_3B),kg=S.d.img.withConfig({displayName:"SliderItem__SliderTipsImage",componentId:"q8hxy2-2"})(["height:40px;width:40px;"]);var Lg=a.a.memo(e=>{const t=e.item;return a.a.createElement(Ng,{id:"slide"},a.a.createElement(kg,{src:t.img}),a.a.createElement(jg,null,a.a.createElement(ee.j,null,t.heading),a.a.createElement(ee.n,null,t.subHeading)))});const Bg=S.d.div.withConfig({displayName:"InfoSlider__Wrapper",componentId:"sc-1tsdwt8-0"})(["overflow:hidden;position:relative;height:64px;margin:0 ",";opacity:",";"],P.c.SPACING_4B,e=>e.isHidden?0:1),Mg=S.d.div.withConfig({displayName:"InfoSlider__SliderWrapper",componentId:"sc-1tsdwt8-1"})(["position:relative;text-align:left;height:100%;transition:0.3s ease-out all;transform:translateX(80px);width:",";"],e=>e.sliderContainerWidth),Gg=S.d.div.withConfig({displayName:"InfoSlider__GradientView",componentId:"sc-1tsdwt8-2"})(["width:100%;height:100%;position:absolute;left:0;"," top:0;"],e=>e.isDarkMode?Object(S.c)(["background:linear-gradient( to left,rgba(19,20,23,1),rgba(255,255,255,0) 20%,rgba(255,255,255,0) 80%,rgba(19,20,23,1) 100% );"]):Object(S.c)(["background:linear-gradient(to left,rgba(255,255,255,1),rgba(0,0,0,0) 20%,rgba(0,0,0,0) 80%,rgba(255,255,255,1) 100%);"]));var Ug=a.a.memo(({stopMovement:e,isHidden:t,specialEvents:i})=>{const o=Object(C.e)(e=>e.getIn(["app","isDarkMode"])),r=Object(n.useState)(0),s=m()(r,2),l=s[0],c=s[1];let d;const p=i?i.size:0;return Object(n.useEffect)(()=>{const t=document.getElementById("sliderContainer"),i=document.getElementById("slide"),n=i?i.getBoundingClientRect().width:0;t&&c(n*p+24*p+100+"px");let a=1;if(p>1)return d=setInterval(()=>{if(a<p&&e){let e=400;a>1&&(e+=460*(a-1)),t.style.transform="translateX(".concat(-e,"px)"),a++}},3e3),()=>{clearInterval(d)}},[e]),a.a.createElement(Bg,{isHidden:t},a.a.createElement(Mg,{id:"sliderContainer",sliderContainerWidth:l},i.map((e,t)=>a.a.createElement(Lg,{key:t,item:e}))),a.a.createElement(Gg,{isDarkMode:o}))});const Hg=S.d.div.withConfig({displayName:"SplashScreen__Wrapper",componentId:"sc-1pcfcid-0"})(["position:absolute;background:#ffffff;height:100%;width:100%;top:",";left:",";transition:all 0.5s ease-in-out;transition-delay:0.8s;opacity:1;display:flex;justify-content:center;background-color:",";",";"],P.c.SPACING_0B,P.c.SPACING_0B,({theme:e})=>e.BODY_BG,e=>{if(!e.show)return Object(S.c)(["opacity:0;top:-100vh;pointer-events:none;background-color:",";"],({theme:e})=>e.BG_MAIN)}),Vg=S.d.div.withConfig({displayName:"SplashScreen__Content",componentId:"sc-1pcfcid-1"})(["display:flex;flex-direction:column;justify-content:center;align-items:stretch;width:100%;padding:"," ",";"],P.c.SPACING_0B,P.c.SPACING_4B),Fg=S.d.div.withConfig({displayName:"SplashScreen__InfoSliderWrapper",componentId:"sc-1pcfcid-2"})(["display:flex;justify-content:center;"]),Wg=S.d.div.withConfig({displayName:"SplashScreen__InfoSliderContainer",componentId:"sc-1pcfcid-3"})(["width:700px;"]),zg=S.d.div.withConfig({displayName:"SplashScreen__Wrap",componentId:"sc-1pcfcid-4"})(["display:flex;flex-direction:column;height:240px;justify-content:space-between;"]);var qg=a.a.memo(({show:e})=>{const t=Object(C.e)(e=>e.getIn(["app","isEducator"])),i=Object(C.e)(e=>e.getIn(["app","lessonData"])),n=Object(C.e)(e=>e.getIn(["app","isMultiEduClass"])),o=Object(C.e)(e=>e.getIn(["app","isModerator"])),r=Object(C.e)(e=>e.getIn(["app","specialEvents"]));return a.a.createElement(Hg,{show:e},a.a.createElement(Vg,null,a.a.createElement(zg,null,a.a.createElement(Dg,{author:i.author,isEducator:t,isMultiEduClass:n,isModerator:o}),(()=>{if(r&&r.size>0&&(!n||!o))return a.a.createElement(Fg,null,a.a.createElement(Wg,null,a.a.createElement(Ug,{stopMovement:e,specialEvents:r})))})())))}),Yg={logo:i("40cp")},Xg=S.d.div.withConfig({displayName:"CanvasOverlay__Wrapper",componentId:"sc-17bbev-0"})(["width:100%;pointer-events:none;position:absolute;top:",";left:",";display:flex;justify-content:",";background-color:",";z-index:",";opacity:",";transition:opacity 0.2s ease-in;"],P.c.SPACING_4B,P.c.SPACING_0B,(function(e){return e.isLogoPresent?"space-between":"flex-end"}),(function(e){return e.theme.TRANSPARENT}),(function(e){return e.isScreenShared?3:"initial"}),(function(e){return e.opacityValue})),Kg=S.d.div.withConfig({displayName:"CanvasOverlay__LogoWrapper",componentId:"sc-17bbev-1"})(["padding:"," ",";border-radius:",";background-color:",";display:flex;margin-left:",";"],P.c.SPACING_6,P.c.SPACING_2B,P.c.SPACING_1B,(function(e){return e.removeBackground?"initial":"".concat(e.theme.WHITE)}),P.c.SPACING_4B),Zg=S.d.div.withConfig({displayName:"CanvasOverlay__RightWrapper",componentId:"sc-17bbev-2"})(["display:flex;margin-right:",";"],P.c.SPACING_4B),Jg=S.d.img.withConfig({displayName:"CanvasOverlay__Logo",componentId:"sc-17bbev-3"})(["width:100px;"]),Qg=S.d.div.withConfig({displayName:"CanvasOverlay__LiveLabel",componentId:"sc-17bbev-4"})(["font-weight:",";background-color:",";color:",";font-size:",";padding:"," ",";border-radius:2px;display:flex;align-items:center;"],P.d.SEMIBOLD,(function(e){return e.theme.RED}),(function(e){return e.theme.WHITE}),P.d.SMALL,P.c.SPACING_1B,P.c.SPACING_2B),$g=a.a.memo((function(e){var t=Object(C.e)((function(e){return e.getIn(["app","isReplay"])})),i=Object(C.e)((function(e){return e.getIn(["app","classState"])})),n=Object(C.e)((function(e){return e.getIn(["app","showSplashScreen"])})),o=Object(C.e)((function(e){return e.getIn(["videoPlayControls","isLiveDVR"])})),r=Object(C.e)((function(e){return e.getIn(["app","isScreenShared"])})),s=Object(C.e)((function(e){return e.getIn(["app","liveLearnersCount"])})),l=Object(C.e)((function(e){return e.getIn(["app","isEducator"])})),c=Object(C.e)((function(e){return e.getIn(["app","isCanvasHovered"])})),d=Object(C.e)((function(e){return e.getIn(["videoPlayControls","isMouseHoverActive"])})),p=Object(C.e)((function(e){return e.getIn(["app","hasReplayEnded"])})),u=c&&d||l||n||!t&&20==i||!!p?1:.2;return a.a.createElement(Xg,{isScreenShared:r,opacityValue:u,isLogoPresent:!l},function(){if(!l)return a.a.createElement(Kg,{removeBackground:n},a.a.createElement(Jg,{src:Yg.logo,showSplashScreen:e.showSplashScreen}))}(),a.a.createElement(Zg,null,function(){if(!l&&!n&&s>0&&!o&&!t)return a.a.createElement(Fc.c,null)}(),function(){if(!t&&10==i&&!n&&!o&&!l)return a.a.createElement(Qg,null,"LIVE")}()))})),ef=i("01jY"),tf=i.n(ef);function nf(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=va()(e);if(t){var a=va()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ba()(this,i)}}var af=S.d.div.withConfig({displayName:"ZoomPanToolbar__ZoomPanToolbarContainer",componentId:"wmcdr-0"})(["position:absolute;background:",";border-radius:",";border:2px solid ",";display:flex;justify-content:center;align-items:center;pointer-events:all;overflow:hidden;width:",";height:",";bottom:",";right:",";"],(function(e){return e.theme.BG_MAIN}),P.c.SPACING_2B,(function(e){return e.theme.BLUE}),(function(e){var t=e.ratio;return"".concat(100*t,"%")}),(function(e){var t=e.ratio;return"".concat(100*t,"%")}),P.c.SPACING_4B,P.c.SPACING_4B),of=S.d.div.withConfig({displayName:"ZoomPanToolbar__PanToolbar",componentId:"wmcdr-1"})(["height:",";width:",";border:2px solid ",";box-sizing:border-box;z-index:2;cursor:move;-webkit-box-shadow:60px -60px 0px 220px rgba(240,244,247,0.4);-moz-box-shadow:60px -60px 0px 220px rgba(240,244,247,0.4);box-shadow:60px -60px 0px 220px rgba(240,244,247,0.4);"],(function(e){var t=e.zoom;return"".concat(100/t,"%")}),(function(e){var t=e.zoom;return"".concat(100/t,"%")}),(function(e){return e.theme.BLUE})),rf=S.d.div.withConfig({displayName:"ZoomPanToolbar__ZoomPanToolbarCanvasContainer",componentId:"wmcdr-2"})(["position:absolute;left:0;top:0;display:flex;height:100%;width:100%;border-radius:4px;"]),sf=function(e){fa()(i,e);var t=nf(i);function i(e){var n;return da()(this,i),n=t.call(this,e),b()(ma()(n),"handleMouseDown",(function(e){n.isDragging=!0,e.stopPropagation()})),b()(ma()(n),"handleDragStart",(function(e,t){})),b()(ma()(n),"handleDragMove",(function(e,t){var i={x:Object(f.h)(t.x/n.getContainerWidth(),6),y:Object(f.h)(t.y/n.getContainerHeight(),6)};n.canvasTranslation&&n.canvasTranslation.x===i.x&&n.canvasTranslation.y===i.y||(n.canvasTranslation=i,n.lastCanvasTranslation=n.canvasTranslation,n.props.setCanvasTranslation({x:-n.canvasTranslation.x,y:-n.canvasTranslation.y}))})),b()(ma()(n),"handleDragStop",(function(e,t){n.lastCanvasTranslation&&(n.props.setCanvasTranslation({x:-n.lastCanvasTranslation.x,y:-n.lastCanvasTranslation.y,u:1}),n.lastCanvasTranslation=null)})),b()(ma()(n),"handleOuterContainerClick",(function(e){if(!n.isDragging&&e&&e.nativeEvent){var t=e.nativeEvent,i=t.offsetX,a=t.offsetY,o=n.getTranslationLimits(Object(f.h)(i/n.getContainerWidth()-.5,6),Object(f.h)(a/n.getContainerHeight()-.5,6),n.props.canvasZoom);n.canvasTranslation&&n.canvasTranslation.x===o.x&&n.canvasTranslation.y===o.y||(n.canvasTranslation=o,n.lastCanvasTranslation=n.canvasTranslation,n.props.setCanvasTranslation({x:-n.canvasTranslation.x,y:-n.canvasTranslation.y,u:1}),n.keyForDraggable++)}n.isDragging=!1,e.persist(),e.stopPropagation()})),n.canvasTranslation=e.canvasTranslation?{x:-e.canvasTranslation.get("x"),y:-e.canvasTranslation.get("y")}:null,n.isDragging=!1,n.keyForDraggable=0,n.containerRef=a.a.createRef(),n}return ua()(i,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.canvasTranslation&&!this.canvasTranslation&&(this.canvasTranslation={x:-e.canvasTranslation.get("x"),y:-e.canvasTranslation.get("y")}),this.canvasTranslation&&e.canvasTranslation&&e.canvasTranslation.get("u")&&(this.canvasTranslation.x===-e.canvasTranslation.get("x")&&this.canvasTranslation.y===-e.canvasTranslation.get("y")||(this.canvasTranslation=this.getTranslationLimits(-e.canvasTranslation.get("x"),-e.canvasTranslation.get("y"),e.canvasZoom),this.keyForDraggable++)),this.canvasTranslation&&e.canvasZoom!=this.props.canvasZoom&&(this.canvasTranslation=this.getTranslationLimits(this.canvasTranslation.x,this.canvasTranslation.y,e.canvasZoom))}},{key:"getContainerWidth",value:function(){return this.containerRef.current?this.containerRef.current.clientWidth:0}},{key:"getContainerHeight",value:function(){return this.containerRef.current?this.containerRef.current.clientHeight:0}},{key:"getTranslationLimits",value:function(e,t,i){var n=.5*(1-1/i),a=.5*(1-1/i);return(e>n||e<-n)&&(e=e>=0?n:-n),(t>a||t<-a)&&(t=t>=0?a:-a),{x:e,y:t}}},{key:"renderCanvasWrapper",value:function(){return a.a.createElement(rf,null,a.a.createElement(Re.a,{isEducator:!0,slides:x.b.main.slides,isVolumeEnabled:!1,isSlideMode:!0,isReplay:!1,role:H.p.TYPE_PUBLISHER,canWrite:!1,activeSlide:this.props.activeSlide,shouldRedraw:!0}))}},{key:"renderDraggableWrapper",value:function(){return a.a.createElement(tf.a,{key:this.getContainerHeight()+this.getContainerWidth()+this.props.canvasZoom+this.keyForDraggable,disabled:this.props.canvasZoom<=H.jc.INIT,allowAnyClick:!0,bounds:"parent",onStart:this.handleDragStart,onDrag:this.handleDragMove,onStop:this.handleDragStop,onMouseDown:this.handleMouseDown,defaultPosition:{x:this.canvasTranslation?this.canvasTranslation.x*this.getContainerWidth():0,y:this.canvasTranslation?this.canvasTranslation.y*this.getContainerHeight():0}},a.a.createElement(of,{zoom:this.props.canvasZoom}))}},{key:"render",value:function(){return this.props.isEducator&&this.props.canvasZoom>=H.jc.MIN?a.a.createElement(af,{ref:this.containerRef,ratio:H.hc,id:"panToolContainer",onClick:this.handleOuterContainerClick},this.renderCanvasWrapper(),this.renderDraggableWrapper()):null}}]),i}(a.a.PureComponent),lf=Object(C.c)((function(e){return{isEducator:e.getIn(["app","isEducator"]),activeSlide:e.getIn(["canvas","activeSlide"]),slides:e.getIn(["canvas","slides"]),canvasZoom:e.getIn(["drawingBoardControls","canvasZoom"]),canvasTranslation:e.getIn(["drawingBoardControls","canvasTranslation"]),isPdfEditor:e.getIn(["pdfEditor","isPdfEditor"])}}))(sf),cf={playButton:i("7YYm")},df=S.d.div.withConfig({displayName:"PlayButton__Wrapper",componentId:"qvi4qj-0"})(["background:rgba(255,255,255,0.8);width:100%;height:100%;display:flex;justify-content:center;align-items:center;position:absolute;cursor:pointer;pointer-events:auto;z-index:",";"],(function(e){return e.isScreenShared?3:"initial"})),pf=function(e){var t=e.onClickHandler,i=Object(C.e)((function(e){return e.getIn(["app","isScreenShared"])}));return a.a.createElement(df,{isScreenShared:i},a.a.createElement("img",{src:cf.playButton,onClick:t}))};pf.propTypes={onClickHandler:U.a.func.isRequired},pf.defaultProps={onClickHandler:function(){}};var uf=pf;const hf=Object(S.e)(["from{opacity:0;pointer-events:none;}to{opacity:1;}"]),mf=Object(S.e)(["from{opacity:1;}to{opacity:0;pointer-events:none;}"]),gf=(Object(S.e)(["from{opacity:1;}to{opacity:0.2;}"]),S.d.div.withConfig({displayName:"CameraTurnedOffButton__CameraOffContainer",componentId:"ebj309-0"})(["position:absolute;width:40px;height:40px;border-radius:",";background:",";display:flex;align-items:center;justify-content:center;opacity:0;cursor:pointer;",";",";",";",";"],P.c.SPACING_2B,({theme:e})=>e.BORDER,e=>e.enter?Object(S.c)(["animation:"," 0.3s ease-in;animation-fill-mode:forwards;"],hf):e.enter?void 0:Object(S.c)(["animation:"," 0.3s ease-in;animation-fill-mode:forwards;"],mf),({educatorBoxAlign:e,educatorAlignments:t})=>e.left===t.LEFT_BOTTOM.left?Object(S.c)(["left:16px;"]):Object(S.c)(["right:16px;"]),({educatorBoxAlign:e,educatorAlignments:t})=>e.top===t.LEFT_BOTTOM.top?Object(S.c)(["bottom:16px;"]):Object(S.c)(["top:16px;"]),({useRoundVideo:e})=>{if(e)return Object(S.c)(["left:16px;bottom:16px;"])})),ff=S.d.div.withConfig({displayName:"CameraTurnedOffButton__Wrap",componentId:"ebj309-1"})(["opacity:",";transition:opacity 0.2s ease-in;"],({isMouseHoverActive:e})=>e?"1":"0.2"),Ef=S.d.div.withConfig({displayName:"CameraTurnedOffButton__CameraOffIcon",componentId:"ebj309-2"})(["-webkit-user-drag:none;user-select:none;height:24px;"]),bf=a.a.memo(({toggleCameraStream:e,enter:t})=>{const i=Object(C.e)(e=>e.getIn(["app","educatorBoxAlign"])),o=Object(C.e)(e=>e.getIn(["app","useRoundVideo"])),r=Object(C.e)(e=>e.getIn(["app","cameraRatio"])),s=Object(C.e)(e=>e.getIn(["videoPlayControls","isMouseHoverActive"])),l=Object(C.e)(e=>e.getIn(["app","isCanvasHovered"])),c=Object(n.useRef)(Object(f.H)(r));Object(n.useEffect)(()=>{c.current=Object(f.H)(r)},[r]);const d=Object(n.useCallback)(()=>{e()});return a.a.createElement(ff,{isMouseHoverActive:t&&l&&s},a.a.createElement(gf,{onClick:d,educatorBoxAlign:i,educatorAlignments:c.current,useRoundVideo:o,enter:t},a.a.createElement(Ef,null,a.a.createElement(Ve.bc,null))))});bf.propTypes={toggleCameraStream:U.a.func},bf.defaultProps={};var Cf=bf;const vf=S.d.div.withConfig({displayName:"InfoBanner__Wrapper",componentId:"sc-1xrxhhb-0"})(["position:relative;top:",";border-radius:",";padding:"," ",";text-transform:uppercase;color:",";background-color:",";font-size:",";font-weight:",";transition:top 0.2s ease-in;"],e=>e.show?P.c.SPACING_4B:"-".concat(P.c.SPACING_12B),P.c.SPACING_2B,P.c.SPACING_2B,P.c.SPACING_4B,e=>e.textColor?e.textColor:e.theme.TEXT_PRIMARY,e=>e.backgroundColor?e.backgroundColor:e.theme.TEXT_PRIMARY,P.d.SMALL,P.d.SEMIBOLD),Sf=a.a.memo(e=>{const t=Object(C.e)(e=>e.getIn(["app","isInfoBannerActive"])),i=Object(C.e)(e=>e.getIn(["app","infoBannerStatus"])),n=Object(C.e)(e=>e.getIn(["app","increasedDuration"])),o=(()=>{switch(i){case H.Z.POOR_CONNECTION:return{infoText:H.Zb.SLOW_INTERNET,infoColor:e.theme.TEXT_PRIMARY,backgroundColor:e.theme.SHADOW};case H.Z.QUESTIONS_ENABLED:return{infoText:H.Zb.EDUCATOR_ENABLED_QUESTIONS,infoColor:e.theme.BG_MAIN,backgroundColor:e.theme.ORANGE};case H.Z.QUESTIONS_DISABLED:return{infoText:H.Zb.EDUCATOR_DISABLED_QUESTIONS,infoColor:e.theme.BG_MAIN,backgroundColor:e.theme.ORANGE};case H.Z.WRONG_IMAGE_TYPE:return{infoText:H.Zb.WRONG_IMAGE_TYPE_UPLOADED,infoColor:e.theme.TEXT_PRIMARY,backgroundColor:e.theme.SHADOW};case H.Z.IMAGE_UPLOAD:return{infoText:H.Zb.IMAGE_UPLOAD_FAILED,infoColor:e.theme.BG_MAIN,backgroundColor:e.theme.RED};case H.Z.FIRST_SLIDE_ERROR:return{infoText:H.Zb.FIRST_SLIDE_NOT_SET,infoColor:e.theme.TEXT_PRIMARY,backgroundColor:e.theme.SHADOW};case H.Z.REPORT_SUBMITTED_SUCCESSFULLY:return{infoText:H.Zb.REPORT_SUBMITTED,infoColor:e.theme.BG_MAIN,backgroundColor:e.theme.GREEN};case H.Z.CAMERA_STREAM_AUTO_CLOSE:return{infoText:H.Zb.CAMERA_STREAM_AUTO_CLOSE,infoColor:e.theme.TEXT_PRIMARY,backgroundColor:e.theme.SHADOW};case H.Z.GUEST_EDUCATOR_GO_LIVE_WARNING:return{infoText:H.Zb.GUEST_EDUCATOR_GO_LIVE_WARNING_MSG,infoColor:e.theme.TEXT_PRIMARY,backgroundColor:e.theme.SHADOW};case H.Z.EXTEND_CLASS_WARNING:return{infoText:H.Zb.EXTEND_CLASS_WARNING_TEXT,infoColor:e.theme.BG_MAIN,backgroundColor:e.theme.ORANGE};case H.Z.TIME_IS_UP:return{infoText:H.Zb.TIME_IS_UP_WARNING,infoColor:e.theme.BG_MAIN,backgroundColor:e.theme.ORANGE};case H.Z.CLASS_EXTENDED_SUCCESSFULLY:return{infoText:"".concat(H.Zb.CLASS_EXTENDED_SUCCESSFULLY_MESSAGE," ").concat(n," mins"),infoColor:e.theme.TEXT_PRIMARY,backgroundColor:e.theme.GREEN};case H.Z.SAVE_TO_DRIVE_SUCCESS:return{infoText:H.Zb.SAVE_TO_DRIVE_SUCCESS,infoColor:e.theme.WHITE,backgroundColor:e.theme.GREEN};case H.Z.SAVE_TO_DRIVE_FAILURE:return{infoText:H.Zb.SAVE_TO_DRIVE_FAILURE,infoColor:e.theme.WHITE,backgroundColor:e.theme.RED};case H.Z.REPORT_SUBMISSION_FAILED:return{infoText:H.Zb.REPORT_SUBMISSION_FAILED_MESSAGE,infoColor:e.theme.WHITE,backgroundColor:e.theme.RED};case H.Z.CLOUD_POLL_CREATED:return{infoText:H.Zb.CLOUD_POLL_CREATED_SUCCESSFULLY,infoColor:e.theme.WHITE,backgroundColor:e.theme.GREEN};case H.Z.CLOUD_POLL_UPDATED:return{infoText:H.Zb.CLOUD_POLL_UPDATED_SUCCESSFULLY,infoColor:e.theme.WHITE,backgroundColor:e.theme.GREEN};case H.Z.CLOUD_POLL_DELETED:return{infoText:H.Zb.CLOUD_POLL_DELETED_SUCCESSFULLY,infoColor:e.theme.WHITE,backgroundColor:e.theme.GREEN};case"":return{infoText:"",infoColor:e.theme.TEXT_PRIMARY,backgroundColor:e.theme.SHADOW}}})(),r=o.infoText,s=o.infoColor,l=o.backgroundColor;return a.a.createElement(vf,{textColor:s,backgroundColor:l,show:t},r)});var If=Object(S.f)(Sf),yf=i("7Ugn"),_f=i("hk5L"),Of=i("4UjD");const wf=i("X5ph"),Tf=Object(S.d)(zm.a).withConfig({displayName:"ReportAnIssue__ReportWrapper",componentId:"sc-6nxlqz-0"})(["position:relative;display:flex;flex-direction:column;"]),Af=S.d.div.withConfig({displayName:"ReportAnIssue__Content",componentId:"sc-6nxlqz-1"})(["display:flex;flex-direction:column;padding:12px 16px;"]),Pf=Object(S.d)(ee.b).withConfig({displayName:"ReportAnIssue__ReportButon",componentId:"sc-6nxlqz-2"})(["width:80px;height:40px;align-self:flex-end;margin-top:16px;"]),xf=S.d.div.withConfig({displayName:"ReportAnIssue__AttachImageContainer",componentId:"sc-6nxlqz-3"})(["display:flex;"]),Rf=S.d.label.withConfig({displayName:"ReportAnIssue__AttachImageLabel",componentId:"sc-6nxlqz-4"})(["color:",";text-align:left;padding:"," 0;font-size:",";height:",";line-height:",";background:url(",");background-position:left center;background-repeat:no-repeat;background-size:",";padding-left:",";cursor:pointer;flex-basis:90%;&.no-cursor{cursor:auto;}"],({theme:e})=>e.TEXT_PRIMARY,yf.SPACING_4B,_f.SMALL,_f.MEDIUM,_f.MEDIUM,wf,_f.MEDIUM,yf.SPACING_4B),Df=S.d.div.withConfig({displayName:"ReportAnIssue__RemoveImage",componentId:"sc-6nxlqz-5"})(["flex-basis:10%;padding:"," 0;cursor:pointer;"],_f.MEDIUM),Nf=S.d.div.attrs({for:"report-issue-image"}).withConfig({displayName:"ReportAnIssue__LoaderWrapper",componentId:"sc-6nxlqz-6"})(["display:flex;align-items:center;justify-content:center;width:100%;height:100%;position:absolute;"]),jf=S.d.input.attrs({type:"file",id:"report-issue-image"}).withConfig({displayName:"ReportAnIssue__ImageInput",componentId:"sc-6nxlqz-7"})(["display:none;"]);let kf={s3Uploader:null};var Lf=a.a.memo(Object(S.f)(({theme:e})=>{const t=Object(C.d)(),i=Object(n.useState)([]),o=m()(i,2),r=o[0],s=o[1],l=Object(n.useState)(""),c=m()(l,2),d=c[0],p=c[1],u=Object(n.useState)(null),h=m()(u,2),g=h[0],f=h[1],E=Object(n.useState)(null),b=m()(E,2),v=b[0],S=b[1],I=Object(n.useState)(null),y=m()(I,2),_=y[0],O=y[1],w=Object(n.useState)(!1),T=m()(w,2),A=T[0],P=T[1],x=Object(C.e)(e=>e.getIn(["videoPlayControls","isReportCurtainOpened"])),R=Object(C.e)(e=>e.getIn(["videoPlayControls","feedbackOptions"])),D=Object(C.e)(e=>e.getIn(["videoPlayControls","isReportOptionsFetched"])),N=Object(C.e)(e=>e.getIn(["videoPlayControls","isChatHidden"])),k=Object(C.e)(e=>e.getIn(["app","accessToken"])),L=Object(C.e)(e=>e.getIn(["app","apiHost"])),M=Object(C.e)(e=>e.getIn(["app","classId"])),G=Object(C.e)(e=>e.getIn(["app","isEducator"])),U=Object(C.e)(e=>e.getIn(["app","isInfoBannerActive"])),V=Object(C.e)(e=>e.getIn(["app","isReplay"])),F=R.choicesArr,W=R.uid;Object(n.useEffect)(()=>{0==R.size&&t(Object(B.a)(L,k))},[]),Object(n.useEffect)(()=>{U||t(Object(B.x)(!1))},[U]),Object(n.useEffect)(()=>{kf.s3Uploader&&(kf.s3Uploader.cancel(H.Q.CANCELLED_BY_USER),kf.s3Uploader=null)},[x]),Object(n.useEffect)(()=>{x||Y()},[x]);const z=e=>{let t=[...r];t.includes(e)?t=t.filter(t=>t!=e):t.push(e),s(t)},q=()=>{const e={choice_id:F.get(0).id,object_id:"".concat(M),others:"".concat(d.trim()),options:r.map(e=>({id:e.get("id"),value:0}))};if(r.length>0||d){t(Object(B.B)(e,L,W,k,!0)),t(Object(B.u)(!1));const i=r.map(({id:e,name:t})=>"".concat(e,": ").concat(t)).join(" | "),n=i&&d?"".concat(i," | ").concat(d):i||d;(e=>{g&&t(Object(B.C)({text:e,imageLink:g,issue_type:V?"ReplayClass":"LiveClass"},L,k,!0))})(n),d&&(e=>{t(Object(ji.c)(L,k,{description:e,image:_}))})(n),G||j.f.sendData(j.c.ISSUE_REPORT)}Y()},Y=()=>{p(""),s([]),X()},X=()=>{f(null),S(null),O(null)},K=e=>{let t=e.target.value;"function"===typeof t.trimStart&&(t=t.trimStart()),p(t)},Z=()=>{t(Object(B.u)(!1)),(r.length>0||d||g)&&Y()},J=()=>{t(Object(B.k)())},Q=()=>{t(Object(B.k)())},$=e=>{const i=e.target.files||[],n=m()(i,1)[0],a=e=>(...t)=>{kf.s3Uploader?e(...t):(P(!1),X())};((e="")=>{const t=e.split("/"),i=m()(t,2),n=i[0],a=i[1];return!/^image$/.test(n)||![/^jpeg$/,/^jpg$/,/^png$/].some(e=>e.test(a))})(n.type)?t(Object(ye.N)(H.Z.WRONG_IMAGE_TYPE,!0)):(kf.s3Uploader=new jd.c(n,jd.a.FILE),Nd.a.shared.startUploading(kf.s3Uploader,a(e=>{P(!0),S("Uploading ".concat(null===e||void 0===e?void 0:e.toFixed(2),"%"))})).then(a(({publicUrl:e,file:t})=>{P(!1),S("Uploaded ".concat((null===t||void 0===t?void 0:t.name)||"file"," successfully.")),f(e)})).catch(a(()=>{P(!1),S("Failed to upload image!"),f(null)})),ee(n).then(O).catch(console.log))},ee=e=>new Promise((t,i)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(n.result),n.onerror=e=>i(e)}),te=()=>{X()};return a.a.createElement(zm.b,{isOpen:x,isOverlayVisible:!N,zIndex:310,onClick:Z},a.a.createElement(Tf,{isOverlayVisible:!N,isOpen:x},a.a.createElement(Ym.a,{heading:H.Ib.REPORT_BACK_HEADING,resetData:Y,onBackClick:Z}),D?a.a.createElement(Af,null,a.a.createElement(Zm,{heading:H.Ib.REASON_FOR_REPORT_HEADING}),(()=>{if(F&&F.get(0).options)return F.get(0).options.map((e,t)=>a.a.createElement(Mi,{key:t,option:e,onSelectOption:z,isReportCurtainOpened:x,fullWidth:!0}))})(),a.a.createElement(Gi.a,{placeHolderText:H.Ib.OTHER_REASONS_PLACEHOLDER,rows:3,handleOnChange:K,suggestion:d,multiline:!0,onFocusHandler:J,onBlurHandler:Q}),(()=>{const e=g;return a.a.createElement(xf,null,a.a.createElement(Rf,{className:v?"no-cursor":""},v||a.a.createElement("div",null,"Attach an image",a.a.createElement(jf,{onChange:$}))),e?a.a.createElement(Df,{onClick:te},a.a.createElement(Of.a,{width:_f.SMALL,height:_f.SMALL})):null)})(),a.a.createElement(Pf,{label:"Report",variant:A||0===r.length&&!d.trim()?"disabled":"filled",onClick:q,isEducator:G,disabled:A},"Report")):a.a.createElement(Nf,null,a.a.createElement(Fc.d,{color:e.GREEN}))))})),Bf=i("QKh7"),Mf=i("xRQt"),Gf=i("0VYU"),Uf=i("dm8e"),Hf=i("nu1Y"),Vf=i("hco6");const Ff=S.d.div.withConfig({displayName:"RoundCamera__RoundCameraContainer",componentId:"embope-0"})(["position:absolute;left:0;top:0;width:100%;height:100%;overflow:hidden;border-left:0;border-top:0;display:flex;align-items:center;justify-content:center;flex:1;pointer-events:none;opacity:",";transition:opacity ease-in 0.3s;visibility:",";"],({isCameraTurnedOff:e})=>e?0:1,({isCameraTurnedOff:e})=>e?"hidden":"visible");var Wf=Object(n.memo)(({canvasDim:e,children:t})=>{const i=Object(n.useState)(),o=m()(i,2),r=o[0],s=o[1],l=Object(n.useState)({}),c=m()(l,2),d=c[0],p=c[1],u=Object(n.useState)({}),h=m()(u,2),g=h[0],E=h[1],b=Object(C.e)(e=>e.getIn(["app","cameraRatio"])),v=Object(C.e)(e=>e.getIn(["app","isScreenShared"])),S=Object(C.e)(e=>e.getIn(["app","isCameraTurnedOff"]));Object(n.useEffect)(()=>{E(I()),v?s({x:0,y:0}):y()},[v,e,b]),Object(n.useEffect)(()=>{y()},[d]),Object(n.useEffect)(()=>{const t=b*e.height,i=d.roundVideoPositionX,n=d.roundVideoPositionY;if(Object(f.ob)(i)&&Object(f.ob)(n)){const a=i*e.width,o=n*e.height,r=a+t>e.width,s=o+t>e.height;p({roundVideoPositionX:r?(e.width-1.05*t)/e.width:i,roundVideoPositionY:s?(e.height-1.05*t)/e.height:n})}},[b]);const I=()=>{const t=e.height*b;return v?{width:e.width,height:e.height}:{width:t,height:t}},y=()=>{const t=e.height,i=e.width,n=d.roundVideoPositionX,a=d.roundVideoPositionY;if(Object(f.ob)(n)&&Object(f.ob)(a))s({x:n*i,y:a*t});else{const e=t*b,i=.05*e;s({x:i,y:t-e-i})}},_=Object(n.useCallback)((t,i)=>{p({roundVideoPositionX:i.x/e.width,roundVideoPositionY:i.y/e.height})},[e]);return a.a.createElement(Ff,{id:"roundCameraContainer",isCameraTurnedOff:S},a.a.createElement(Vf.a,{id:"roundCamera",className:v?"roundCameraWrapperScreenShared":"roundCameraWrapper",bounds:"parent",enableResizing:!1,disableDragging:v||S,size:g,position:r,onDragStop:_},t))}),zf=i("hKI/"),qf=i.n(zf);function Yf(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Xf(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=va()(e);if(t){var a=va()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ba()(this,i)}}var Kf=S.d.div.withConfig({displayName:"RectangleCamera__CameraContainer",componentId:"sc-1wv4rws-0"})(["background:",";height:100%;width:100%;transition:all 0.2s ease-out;"],(function(e){return e.theme.BLACK})),Zf=Object(S.d)(Vf.a).withConfig({displayName:"RectangleCamera__RectangleDraggableContainer",componentId:"sc-1wv4rws-1"})(["border-radius:","px;overflow:hidden;z-index:",";opacity:",";transition:",";pointer-events:",";"],(function(e){return e.isCameraDraggable?8:0}),(function(e){return e.isCameraHidden?-1:2}),(function(e){return e.isCameraHidden?0:1}),(function(e){return e.disableTransition?"none":"all 0.5s ease-in-out"}),(function(e){return e.isScreenShared?"none":"auto"})),Jf=function(e){fa()(i,e);var t=Xf(i);function i(e){var n;return da()(this,i),n=t.call(this,e),b()(ma()(n),"handleResize",qf()((function(){n.isRectangleModeClass()&&n.updateRectangleCameraPosition(n.rectangleCameraPosition.x,n.rectangleCameraPosition.y,!1)}),200)),b()(ma()(n),"getRectangleCameraInitialPosition",(function(){if(n.props.isScreenShared&&!n.props.isEducator){var e=n.props.getAspectRatioDimensions();if(e){var t=e.top;return{x:e.left,y:t}}return null}var i=n.getRectangleCameraDimensions().width;return{x:n.getWindowWidth()-i,y:0}})),b()(ma()(n),"setRectangleCameraRef",(function(e){n.rectCameraRef=e})),b()(ma()(n),"onRectangleCameraDragStop",(function(e,t){n.rectangleCameraPosition={x:t.x/n.getWindowWidth(),y:t.y/n.getWindowHeight()},n.shouldBringRectCameraBack=!1,n.setState({isRectangleCameraDragging:!1})})),b()(ma()(n),"enableCameraPlaceholderClick",(function(){n.disablePlaceholderClick=!1})),b()(ma()(n),"disableCameraPlaceholderClick",(function(){n.disablePlaceholderClick=!0})),b()(ma()(n),"onRectangleCameraDrag",(function(){n.state.isRectangleCameraDragging||(n.disableCameraPlaceholderClick(),n.setState({isRectangleCameraDragging:!0}))})),b()(ma()(n),"getIsPlaceholderClickDisabled",(function(){return n.disablePlaceholderClick})),b()(ma()(n),"renderLearnerUID",(function(){if(!n.props.isEducator&&!n.props.isScreenShared&&(n.props.isReplay||10===n.props.classState))return a.a.createElement(Hf.b,null)})),n.rectCameraRef=null,n.rectangleCameraPosition={x:null,y:null},n.rectangleCameraOldPosition={x:null,y:null},n.shouldBringRectCameraBack=!1,n.state={isRectangleCameraDragging:!1},n}return ua()(i,[{key:"componentDidMount",value:function(){this.isRectangleModeClass()&&this.resetRectangleCamera(),window.addEventListener("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(e){e.isChatHidden!==this.props.isChatHidden&&this.isRectangleModeClass()&&(this.props.isScreenShared||this.resetRectangleCamera()),e.isSideCurtainActive!=this.props.isSideCurtainActive&&this.props.isChatHidden&&this.isRectangleModeClass()&&!this.props.isScreenShared&&this.moveRectangleCamera(),e.isScreenShared&&!this.props.isScreenShared&&this.resetRectangleCamera()}},{key:"componentWillUnmount",value:function(){this.handleResize.cancel(),window.removeEventListener("resize",this.handleResize)}},{key:"getWindowWidth",value:function(){return window.innerWidth}},{key:"getWindowHeight",value:function(){return window.innerHeight}},{key:"isRectangleModeClass",value:function(){return!this.props.useGreenScreen&&!this.props.useRoundVideo&&!this.props.isCanvasModeDisabled}},{key:"getRectangleCameraDimensions",value:function(){var e,t,i=this.getWindowWidth(),n=this.props.aspectRatioContainerDim;if(this.props.isEducator)t=9*(e=.25*i)/16;else if(this.props.isScreenShared&&n){var a=n.height;e=n.width,t=a}else t=this.props.isChatHidden?9*(e=i>850?.2*i:.25*i)/16:9*(e=.25*i)/16;return{height:t,width:e}}},{key:"updateRectangleCameraPosition",value:function(e,t){var i,n,a,o,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.rectCameraRef&&(r?(i=e,n=t,a=e/this.getWindowWidth(),o=t/this.getWindowHeight()):(i=e*this.getWindowWidth(),n=t*this.getWindowHeight(),a=e,o=t),this.rectCameraRef.updatePosition({x:i,y:n}),this.rectangleCameraPosition={x:a,y:o})}},{key:"resetRectangleCamera",value:function(){var e=this.getRectangleCameraDimensions().width,t=this.getWindowWidth()-e;this.rectCameraRef&&this.updateRectangleCameraPosition(t,0)}},{key:"moveRectangleCamera",value:function(){if(this.props.isSideCurtainActive){var e=this.rectangleCameraPosition.x*this.getWindowWidth(),t=this.rectangleCameraPosition.y*this.getWindowHeight(),i=.8*this.getWindowWidth(),n=this.getRectangleCameraDimensions().width;e+n>i&&(this.rectangleCameraOldPosition=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Yf(Object(i),!0).forEach((function(t){b()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Yf(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},this.rectangleCameraPosition),this.updateRectangleCameraPosition(.8*this.getWindowWidth()-n-12,t),this.shouldBringRectCameraBack=!0)}else this.shouldBringRectCameraBack&&this.updateRectangleCameraPosition(this.rectangleCameraOldPosition.x,this.rectangleCameraOldPosition.y,!1)}},{key:"render",value:function(){var e=this.props.useGreenScreen||20==this.props.classState||this.props.errorStatus===H.K.LEARNER_KICKED||this.props.errorStatus===H.K.DATA_FAIL||this.props.isFeedbackShownOnBackClick||this.props.showSplashScreen||this.props.isChatHidden&&this.props.isLearnerSlideModeActive;return a.a.createElement(Zf,{ref:this.setRectangleCameraRef,default:this.getRectangleCameraInitialPosition(),position:this.props.isScreenShared?this.getRectangleCameraInitialPosition():null,size:this.getRectangleCameraDimensions(),onDragStop:this.onRectangleCameraDragStop,onDrag:this.onRectangleCameraDrag,bounds:"#drawing-area",enableResizing:!1,disableDragging:this.props.isScreenShared||!this.props.isChatHidden||e,isScreenShared:this.props.isScreenShared,disableTransition:this.state.isRectangleCameraDragging||this.props.isScreenShared,isCameraHidden:e,isCameraDraggable:this.props.isChatHidden},a.a.createElement(Kf,{onClick:this.enableCameraPlaceholderClick},this.props.renderCamera(),a.a.createElement(Mf.a,{toggleCameraStream:this.props.toggleCameraStream,getIsPlaceholderClickDisabled:this.getIsPlaceholderClickDisabled}),this.renderLearnerUID()))}}]),i}(a.a.Component),Qf=Object(C.c)((function(e){return{isCanvasModeDisabled:e.getIn(["app","isCanvasModeDisabled"]),useGreenScreen:e.getIn(["app","useGreenScreen"]),useRoundVideo:e.getIn(["app","useRoundVideo"]),classState:e.getIn(["app","classState"]),errorStatus:e.getIn(["app","errorStatus"]),isChatHidden:e.getIn(["videoPlayControls","isChatHidden"]),isLearnerSlideModeActive:e.getIn(["videoPlayControls","isLearnerSlideModeActive"]),isFeedbackShownOnBackClick:e.getIn(["feedback","isFeedbackShownOnBackClick"]),showSplashScreen:e.getIn(["app","showSplashScreen"]),isScreenShared:e.getIn(["app","isScreenShared"]),isEducator:e.getIn(["app","isEducator"]),isReplay:e.getIn(["app","isReplay"])}}))(Jf),$f=(i("9Zus"),i("ROnF"));const eE=()=>{},tE=S.d.div.withConfig({displayName:"MultiButtonModal__ModalWrapper",componentId:"iy8wug-0"})(["display:flex;flex-direction:column;justify-content:center;align-items:center;padding:40px 0;"]),iE=Object(S.d)(ee.n).withConfig({displayName:"MultiButtonModal__SubtitleText",componentId:"iy8wug-1"})(["margin-top:20px;width:248px;text-align:center;"]),nE=S.d.div.withConfig({displayName:"MultiButtonModal__ButtonsWrapper",componentId:"iy8wug-2"})(["display:flex;justify-content:center;margin-top:26px;"]),aE=Object(S.d)(ee.b).withConfig({displayName:"MultiButtonModal__StyledButton",componentId:"iy8wug-3"})(["padding:16px 0;width:176px;margin:0 8px;"]),oE=S.d.div.withConfig({displayName:"MultiButtonModal__ExitButton",componentId:"iy8wug-4"})(["position:absolute;cursor:pointer;top:24px;right:24px;padding:4px;"]);var rE=a.a.memo(({isOpen:e,fullOverlay:t=!1,modalWidth:i="560px",showSecondaryButton:n,showExitButton:o,modalActions:r,modalConstants:s})=>{const l=r.onClose||eE,c=()=>a.a.createElement(nE,null,(()=>{const e=r.onSecondaryButtonClick,t=void 0===e?eE:e,i=s.secondaryButtonText,o=void 0===i?"":i;if(n)return a.a.createElement(aE,{variant:"hollow",isEducator:!0,onClick:t},o)})(),(()=>{const e=r.onPrimaryButtonClick,t=s.primaryButtonText;return a.a.createElement(aE,{variant:"filled",isEducator:!0,onClick:e},t)})());return a.a.createElement(ee.r,{open:e,paperWidth:i,paperHeight:"fit-content",contentPositionVertical:"flex-end",animation:"slide",onClose:l,width:t?"100%":"75%",disableEnforceFocus:!1,marginBottom:"48px",useDefaultBackDrop:!1},a.a.createElement(tE,null,(()=>{const e=s.title;return a.a.createElement(ee.h,{lineHeight:"120%"},e)})(),(()=>{const e=s.subtitle;if(e)return a.a.createElement(iE,{lineHeight:"150%"},e)})(),c(),(()=>{if(o)return a.a.createElement(oE,{onClick:l},a.a.createElement(Ve.u,{height:"20",width:"20"}))})()))}),sE=i("pND6");class lE extends a.a.PureComponent{constructor(e){super(e),b()(this,"localEventsManager",void 0),b()(this,"shouldExitAfterSave",void 0),b()(this,"saveRequired",void 0),b()(this,"resetDrawingBoardTools",()=>{this.props.resetDrawingBoardTools()}),b()(this,"closeExitModal",()=>{this.setState({isExitModalOpen:!1})}),b()(this,"handleSaveRequired",e=>{const t=new bi.a(e);this.isEventSaveRequired(t)&&this.onSaveRequired()}),b()(this,"isEventSaveRequired",e=>{var t;const i=H.ub.INSIGNIFICANT_PLUGINS,n=H.ub.INSIGNIFICANT_EVENTS;return!i.includes(e.plugin)&&!n.includes(null===(t=e.data)||void 0===t?void 0:t.type)}),b()(this,"saveDataToDrive",()=>{this.props.resetZoomAndTranslation(),this.updateVersionAndUploadFiles()}),b()(this,"exitPdfEditor",(e=!1,t=!1)=>{this.localEventsManager.flushAll(),this.props.setIsBackClicked(!0,{fileSaved:e,success:t,files:[this.props.fileInfo]}),this.closeExitModal()}),b()(this,"onSaveAndExit",()=>{this.closeExitModal(),this.shouldExitAfterSave=!0,this.props.setSaveToDriveButtonClicked(!0)}),b()(this,"onExitButtonClick",()=>{this.exitPdfEditor()}),this.localEventsManager=new $f.a(e.pdfFile.uid,"DRIVE"),this.shouldExitAfterSave=!1,this.saveRequired=!1,this.state={isExitModalOpen:!1}}componentDidMount(){this.props.setLoading(!0),this.props.setAppPropsFromDrive(null),this.getPdfMetaFile(),Nd.a.shared.setAccessTokenAndApiHost(this.props.accessToken,this.props.apiHost),this.setSlideThemeAndBgImage(),this.props.isLocal||window.addEventListener("beforeunload",e=>{e.preventDefault(),e.returnValue=""})}isUploadingDriveFiles(e){return e.isUploadingMetaFileToDrive||e.isUploadingDataFileToDrive}isDriveFileUploadSuccessful(e){return e.isDataFileUploadSuccessful&&e.isMetaFileUploadSuccessful}componentDidUpdate(e){!e.isPdfMetaFileApiDone&&this.props.isPdfMetaFileApiDone&&this.getPdfDataFile(),!e.isPdfDataFileProcessed&&this.props.isPdfDataFileProcessed&&(this.props.setLoading(!1),this.props.canEditPdf&&(this.localEventsManager.setAutoSaveFrequency(1e4),this.localEventsManager.startAutoSave())),!e.backButtonClicked&&this.props.backButtonClicked&&(this.saveRequired?this.showExitModal():this.exitPdfEditor(),this.props.setBackButtonClicked(!1)),this.isUploadingDriveFiles(e)&&!this.isUploadingDriveFiles(this.props)&&(this.isDriveFileUploadSuccessful(this.props)?this.handleDriveUpdateSuccess():this.handleDriveUpdateFailure()),e.isSaveToDriveButtonClicked!==this.props.isSaveToDriveButtonClicked&&(this.props.isSaveToDriveButtonClicked?(this.props.setLoading(!0),this.saveDataToDrive()):(this.props.setLoading(!1),this.shouldExitAfterSave&&this.exitPdfEditor(!0,this.isDriveFileUploadSuccessful(this.props)),this.props.setIsUploadingDataFileToDrive(!1),this.props.setIsUploadingMetaFileToDrive(!1))),this.props.isPdfMetaFileApiDone&&this.props.isPdfDataFileProcessed&&e.contentTaggingData!==this.props.contentTaggingData&&this.onSaveRequired()}componentWillUnmount(){this.localEventsManager.stopAutoSave(),this.localEventsManager.flushAll()}setSlideThemeAndBgImage(){const e=this.props.pdfFile.metaJson,t=null===e||void 0===e?void 0:e.slideTheme;if(t){const e=Object(f.Z)(t),i=e.theme,n=e.slideBgImage;this.props.setTheme(i),this.props.setSlideBgImage(n)}}getPdfMetaFile(){const e=Object(f.G)(this.props.pdfFile.filePath);this.props.getPdfMetaFile(e)}getPdfDataFile(){if(this.props.canEditPdf&&this.localEventsManager.hasLocalData())this.localEventsManager.fetch(e=>{this.props.onReceiveData(e)}),this.props.setPdfDataFileProcessed(),this.showLastSavedTime(),this.setSaveRequired(!0);else{this.props.canEditPdf&&this.localEventsManager.flushAll();const e=Object(f.E)(this.props.pdfFile.filePath);this.props.getPdfDataFile(e,this.localEventsManager.eventsData,x.b.main,this.resetDrawingBoardTools)}}showExitModal(){this.setState({isExitModalOpen:!0})}setSaveRequired(e){this.saveRequired=e}showLastSavedTime(){this.props.shouldShowLastSavedTime||this.props.setShouldShowLastSavedTime(!0)}hideLastSavedTime(){this.props.shouldShowLastSavedTime&&this.props.setShouldShowLastSavedTime(!1)}onSaveRequired(){this.setSaveRequired(!0),this.showLastSavedTime()}saveDataLocally(e){this.localEventsManager.processEventData(e),this.handleSaveRequired(e)}saveDataToLocalStorage(){this.localEventsManager.save()}getFileMeta(){return{image_urls:x.b.main.getSlideImageUrls(4),slideTheme:this.props.slideBgImage||this.props.slideTheme}}handleDriveUpdateFailure(){this.props.setSaveToDriveButtonClicked(!1),this.props.setInfoBannerStatus(H.Z.SAVE_TO_DRIVE_FAILURE,!0)}handleDriveUpdateSuccess(){this.props.setSaveToDriveButtonClicked(!1),this.props.setInfoBannerStatus(H.Z.SAVE_TO_DRIVE_SUCCESS,!0),this.setSaveRequired(!1)}updateDriveFileVersion(){const e=new cd.c({uid:this.props.pdfFile.uid,name:this.props.pdfFile.name,meta:this.getFileMeta(),count:x.b.main.numSlides,isTemplateCreation:this.props.isTemplateCreation});return new Promise((t,i)=>{sE.a.updateFileOnDrive(e,this.props.apiHost,this.props.accessToken).then(e=>{var i,n;this.props.setFileInfo(null===e||void 0===e?void 0:e.data);const a=null!==(i=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.modified_at)&&void 0!==i?i:"",o=this.props.pdfFile.setModifiedAt(a);this.props.setPdfFile(o),this.hideLastSavedTime(),t(e)}).catch(e=>{i(e)})})}uploadDataJsonFile(){this.props.setIsUploadingDataFileToDrive(!0);const e=sE.a.createDataFileFromEvents([this.localEventsManager.eventsData]),t=new jd.c(e,jd.a.DRIVE_DATA_FILE,this.props.pdfFile.uid);Nd.a.shared.startUploading(t).then(()=>{this.props.setIsUploadingDataFileToDrive(!1,!0)}).catch(()=>{this.props.setIsUploadingDataFileToDrive(!1,!1)})}uploadMetaJsonFile(){this.props.setIsUploadingMetaFileToDrive(!0);const e={allowContentTagging:!0,contentTaggingData:this.props.contentTaggingData.toJS()},t=sE.a.createMetaFile(e),i=new jd.c(t,jd.a.DRIVE_DATA_FILE,this.props.pdfFile.uid);Nd.a.shared.startUploading(i).then(()=>{this.props.setIsUploadingMetaFileToDrive(!1,!0)}).catch(()=>{this.props.setIsUploadingMetaFileToDrive(!1,!1)})}updateVersionAndUploadFiles(){this.updateDriveFileVersion().then(()=>{this.uploadMetaJsonFile(),this.uploadDataJsonFile()}).catch(()=>{this.handleDriveUpdateFailure()})}renderExitModal(){if(this.state.isExitModalOpen){const e={onPrimaryButtonClick:this.onSaveAndExit,onSecondaryButtonClick:this.onExitButtonClick,onClose:this.closeExitModal},t={title:H.ub.EXIT_MODAL.TITLE,subtitle:H.ub.EXIT_MODAL.SUBTITLE,primaryButtonText:H.ub.EXIT_MODAL.PRIMARY_BUTTON_TEXT,secondaryButtonText:H.ub.EXIT_MODAL.SECONDARY_BUTTON_TEXT};return a.a.createElement(rE,{fullOverlay:!0,isOpen:!0,showSecondaryButton:!0,showExitButton:!0,modalActions:e,modalConstants:t})}return null}render(){return this.renderExitModal()}}const cE={getPdfMetaFile:Te.b,getPdfDataFile:Te.a,setLoading:ye.X,setBackButtonClicked:Te.d,setIsBackClicked:B.e,setIsUploadingDataFileToDrive:Te.j,setIsUploadingMetaFileToDrive:Te.k,setSaveToDriveButtonClicked:Te.n,setPdfDataFileProcessed:Te.l,setInfoBannerStatus:ye.N,setAppPropsFromDrive:ye.l,setTheme:L.k,setSlideBgImage:L.j,setShouldShowLastSavedTime:Te.o,setPdfFile:Te.m,setFileInfo:Te.f};var dE=Object(C.c)(e=>({isLocal:e.getIn(["app","isLocal"]),isPdfMetaFileApiDone:e.getIn(["pdfEditor","isPdfMetaFileApiDone"]),isPdfDataFileProcessed:e.getIn(["pdfEditor","isPdfDataFileProcessed"]),pdfFile:e.getIn(["pdfEditor","pdfFile"]),accessToken:e.getIn(["pdfEditor","accessToken"]),apiHost:e.getIn(["pdfEditor","apiHost"]),backButtonClicked:e.getIn(["pdfEditor","backButtonClicked"]),isSaveToDriveButtonClicked:e.getIn(["pdfEditor","isSaveToDriveButtonClicked"]),isUploadingMetaFileToDrive:e.getIn(["pdfEditor","isUploadingMetaFileToDrive"]),isMetaFileUploadSuccessful:e.getIn(["pdfEditor","isMetaFileUploadSuccessful"]),isUploadingDataFileToDrive:e.getIn(["pdfEditor","isUploadingDataFileToDrive"]),isDataFileUploadSuccessful:e.getIn(["pdfEditor","isDataFileUploadSuccessful"]),isLoading:e.getIn(["app","isLoading"]),isUploadSuccessful:e.getIn(["pdfEditor","isUploadSuccessful"]),slideTheme:e.getIn(["drawingBoardControls","theme"]),slideBgImage:e.getIn(["drawingBoardControls","slideBgImage"]),activeSlide:e.getIn(["canvas","activeSlide"]),shouldShowLastSavedTime:e.getIn(["pdfEditor","shouldShowLastSavedTime"]),canEditPdf:e.getIn(["pdfEditor","canEditPdf"]),fileInfo:e.getIn(["pdfEditor","fileInfo"]),isTemplateCreation:e.getIn(["pdfEditor","isTemplateCreation"]),contentTaggingData:e.getIn(["pdfEditor","contentTaggingData"])}),cE,null,{forwardRef:!0})(lE);const pE=()=>{};var uE=a.a.memo(({onSendData:e,onChangeSlide:t,resetDrawingBoardTools:i})=>{const o=Object(C.d)(),r=Object(C.e)(e=>e.getIn(["app","isFileUploaderModalVisible"])),s=Object(C.e)(e=>e.getIn(["videoPlayControls","isChatHidden"])),l=Object(C.e)(e=>e.getIn(["pdfEditor","isPdfEditor"])),c=Object(C.e)(e=>e.getIn(["app","isDriveEnabled"])),d=Object(n.useCallback)(()=>{o(Object(ye.Q)(!1))},[]),p=l||!c,u=p?"500px":"676px";return a.a.createElement(ee.r,{open:r,onClose:pE,width:l?"75%":s?"100%":"75%",paperWidth:u,paperHeight:"545px"},a.a.createElement(Pp,{onSendData:e,onChangeSlide:t,onPrimaryButtonClick:d,primaryButtonText:H.d.DONE,disableSelectFromDrive:p,resetDrawingBoardTools:i,lastPath:H.R.MORE_OPTIONS}))});const hE=S.d.div.withConfig({displayName:"CloudPollCard__Wrapper",componentId:"sc-1kojm02-0"})(["position:absolute;bottom:",";right:",";background:",";box-shadow:"," "," "," ",";border-radius:",";display:flex;padding:",";width:329px;justify-content:space-between;",""],P.c.SPACING_4B,P.c.SPACING_4B,e=>e.theme.BG_MAIN,P.c.SPACING_0B,P.c.SPACING_4B,P.c.SPACING_8B,e=>e.theme.SHADOW,P.c.SPACING_2B,P.c.SPACING_4B,({hidden:e})=>{if(e)return Object(S.c)(["opacity:0;pointer-events:none;"])}),mE=S.d.div.withConfig({displayName:"CloudPollCard__TextWrapper",componentId:"sc-1kojm02-1"})(["display:flex;flex-direction:column;align-items:flex-start;"]),gE=S.d.div.withConfig({displayName:"CloudPollCard__ActionButtonWrapper",componentId:"sc-1kojm02-2"})(["display:flex;align-items:center;"]),fE=Object(S.d)(ee.b).withConfig({displayName:"CloudPollCard__StartButton",componentId:"sc-1kojm02-3"})(["height:83px;height:24px;text-transform:uppercase;margin-right:",";margin-bottom:",";font-weight:bold;font-size:",";line-height:100%;pointer-events:inherit;"],P.c.SPACING_2B,P.c.SPACING_1B,P.d.EXTRA_SMALL),EE=S.d.div.withConfig({displayName:"CloudPollCard__CloseIconWrapper",componentId:"sc-1kojm02-4"})(["cursor:pointer;"]);var bE=Object(S.f)(({theme:e,activeSlide:t})=>{const i=fE,o=Object(C.d)(),r=Object(C.e)(e=>e.getIn(["poll","isPollActive"])),s=Object(C.e)(e=>e.getIn(["poll","isCreatePollPopoverOpen"])),l=Object(C.e)(e=>e.getIn(["app","isLiveDataProcessed"])),c=Object(C.e)(e=>e.getIn(["app","educatorFilesUploading"])),d=Object(C.e)(e=>e.getIn(["drawingBoardControls","canvasZoom"])),p=Object(n.useState)(!1),u=m()(p,2),h=u[0],g=u[1],f=Object(n.useState)(!1),E=m()(f,2),b=E[0],v=E[1],S=(Object(_u.a)(),Object(n.useRef)(null)),I=x.b.main.slides.getItem(t),y=I.pollData,_=d>=H.jc.MIN,O=!l||c||r||_||s||!h||!b;Object(n.useEffect)(()=>(S.current=setTimeout(()=>{g(!0)},1500),()=>{S.current&&clearTimeout(S.current)}),[]),Object(n.useEffect)(()=>{I&&v(!!y)},[t,y]);return a.a.createElement(hE,{hidden:O},a.a.createElement(mE,null,a.a.createElement(ee.j,null,"Poll for ",null===y||void 0===y?void 0:y.time," secs"),a.a.createElement(ee.k,{fontWeight:P.d.REGULAR,color:e.TEXT_TERTIARY},null!==y&&void 0!==y&&y.answer?"Correct Answer: ".concat(y.answer):"No correct answer")),a.a.createElement(gE,null,a.a.createElement(i,{onClick:()=>{o(Object(He.h)(!0))},variant:"filled",isEducator:!0},H.l.START_POLL),a.a.createElement(EE,{onClick:()=>{v(!1)}},a.a.createElement(Ve.wb,null))))});const CE=Object(_.e)().getOrCreate("FULL_SCREEN_TOGGLE"),vE=Object(_.e)().getOrCreate("LIVE_DVR_SWITCH"),SE=Object(_.e)().getOrCreate("VIDEO_BUFFERING_ON_SEEK"),IE=Object(Gf.b)(()=>Promise.all([i.e(29),i.e(1)]).then(i.bind(null,"RM/v"))),yE=Object(Gf.b)(()=>i.e(15).then(i.bind(null,"18Ax"))),_E=Object(Gf.b)(()=>Promise.all([i.e(22),i.e(30),i.e(6)]).then(i.bind(null,"A00c"))),OE=Object(Gf.b)(()=>i.e(10).then(i.bind(null,"Tx6k"))),wE=Object(Gf.b)(()=>i.e(3).then(i.bind(null,"ZU8p"))),TE=Object(Gf.b)(()=>i.e(4).then(i.bind(null,"JhgA"))),AE=Object(Gf.b)(()=>i.e(5).then(i.bind(null,"rCVy"))),PE=Object(Gf.b)(()=>i.e(18).then(i.bind(null,"1L1H"))),xE=Object(Gf.b)(()=>Promise.resolve().then(i.bind(null,"9Zus")));var RE=i("10ky");new v.a;const DE=S.d.div.withConfig({displayName:"App__AppContainer",componentId:"sc-9vd987-0"})(["text-align:center;width:100vw;height:100vh;flex-direction:column;"]),NE=S.d.div.withConfig({displayName:"App__Wrapper",componentId:"sc-9vd987-1"})(["background:",";flex:1;height:100%;"],({theme:e})=>e.BODY_BG),jE=S.d.div.withConfig({displayName:"App__DrawingArea",componentId:"sc-9vd987-2"})(["background-color:",";display:flex;position:absolute;height:100%;flex-direction:column;justify-content:center;width:",";top:",";left:",";transition:width 0.5s ease-in-out,background-color 0.1s ease-in-out;cursor:",";"],({theme:e})=>e.BODY_BG,({drawingAreaWidth:e})=>e||"100%",P.c.SPACING_0B,P.c.SPACING_0B,({hideCursor:e})=>e?"none":"initial"),kE=S.d.div.withConfig({displayName:"App__HorizontalDrawingAreaContainer",componentId:"sc-9vd987-3"})(["position:absolute;display:flex;flex-direction:row;align-items:center;justify-content:space-between;",""],e=>e.isPdfEditor?Object(S.c)(["top:",";bottom:",";left:",";right:",";"],P.c.SPACING_0B,P.c.SPACING_0B,({canEditPdf:e})=>e?P.c.SPACING_0B:P.c.SPACING_4B,P.c.SPACING_4B):e.isEducator?Object(S.c)(["top:",";bottom:",";left:",";right:",";"],P.c.SPACING_0B,P.c.SPACING_0B,P.c.SPACING_0B,P.c.SPACING_4B):e.isGuestEducator?Object(S.c)(["top:",";bottom:",";left:",";right:",";"],P.c.SPACING_0B,P.c.SPACING_0B,P.c.SPACING_6B,P.c.SPACING_6B):Object(S.c)(["top:",";bottom:",";left:",";right:",";"],P.c.SPACING_6B,P.c.SPACING_0B,P.c.SPACING_6B,P.c.SPACING_6B)),LE=S.d.div.withConfig({displayName:"App__VerticalDrawingAreaContainer",componentId:"sc-9vd987-4"})(["position:relative;display:flex;flex:1;height:100%;flex-direction:column;align-items:center;overflow:visible;justify-content:space-between;min-width:0;min-height:0;"]),BE=S.d.div.withConfig({displayName:"App__Sidebar",componentId:"sc-9vd987-5"})(["position:absolute;background:",";width:25vw;height:100vh;display:flex;flex-direction:column;box-shadow:",";left:",";transition:left 0.5s ease-in-out;"],({theme:e})=>e.BG_MAIN,e=>"".concat(P.c.SPACING_0B," ").concat(P.c.SPACING_4B," ").concat(P.c.SPACING_8B," ").concat(e.theme.SHADOW),({hidden:e})=>e?"100vw":"75vw"),ME=S.d.div.withConfig({displayName:"App__AspectRatioWrapper",componentId:"sc-9vd987-6"})(["position:relative;transition:width 0.5s ease-in-out;display:flex;flex:1;width:100%;flex-direction:column;align-items:center;justify-content:center;min-width:0;min-height:0;"]),GE=S.d.div.withConfig({displayName:"App__CanvasWrapperContainer",componentId:"sc-9vd987-7"})(["position:relative;overflow:hidden;"," width:100%;height:100%;"],({shadow:e,theme:t})=>{if(e)return Object(S.c)(["box-shadow:0 16px 32px ",";"],t.SHADOW)}),UE=S.d.div.withConfig({displayName:"App__DummyCameraView",componentId:"sc-9vd987-8"})(["height:14.0625vw;background:",";position:relative;top:0;transition:all 0.2s ease-out;"],({theme:e})=>e.BG_MAIN),HE=S.d.div.withConfig({displayName:"App__DrawingAreaBottomWrapper",componentId:"sc-9vd987-9"})(["position:relative;height:",";width:",";"],e=>e.reducedHeight?"80px !important":"88px !important",e=>"".concat(e.styleWidth,"px")),VE=S.d.div.withConfig({displayName:"App__DrawingAreaTopWrapper",componentId:"sc-9vd987-10"})(["position:relative;height:48px;width:",";opacity:",";transition:opacity 0.3s ease-in;"],e=>"".concat(e.styleWidth,"px"),e=>e.isHidden?0:1),FE=S.d.div.withConfig({displayName:"App__DrawingAreaLeftWrapper",componentId:"sc-9vd987-11"})(["position:relative;width:64px;height:100%;display:flex;justify-content:center;align-items:center;height:",";margin-top:48px;margin-bottom:80px;opacity:",";transition:opacity 0.3s ease-in;"],e=>"".concat(e.styleHeight,"px"),e=>e.isHidden?0:1),WE=S.d.div.withConfig({displayName:"App__InfoBannerWrapper",componentId:"sc-9vd987-12"})(["position:absolute;top:0px;width:100%;height:50px;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;overflow:hidden;pointer-events:none;"]);class zE extends a.a.PureComponent{constructor(e){super(e),b()(this,"focusIframe",()=>{window&&window.focus()}),b()(this,"initialiseEventsUtils",()=>{var e,t,i,n,a,o,r,s,l,c,d,p,u,h,m,g,f;this.props.isPdfEditor&&this.props.isEducator||(this.successFullWatchTimeCalculator=new N.a(this.sendSuccessFullWatchEvents),this.successFullWatchTimeCalculator.start(),Sn.a.shared.initialize({lessonLength:null!==(e=null===(t=this.props.lessonData)||void 0===t?void 0:t.lessonDuration)&&void 0!==e?e:0,isLive:this.props.isLive,lessonUid:null!==(i=null===(n=this.props.lessonData)||void 0===n?void 0:n.uid)&&void 0!==i?i:"",lessonTitle:null!==(a=null===(o=this.props.lessonData)||void 0===o?void 0:o.name)&&void 0!==a?a:"",educatorUid:null!==(r=null===(s=this.props.lessonData)||void 0===s||null===(l=s.author)||void 0===l?void 0:l.uid)&&void 0!==r?r:"",educatorUsername:null!==(c=null===(d=this.props.lessonData)||void 0===d||null===(p=d.author)||void 0===p?void 0:p.userName)&&void 0!==c?c:"",classLiveTime:null!==(u=this.props.lessonData)&&void 0!==u&&u.startedAt?null===(h=this.props.lessonData)||void 0===h?void 0:h.startedAt:null===(m=this.props.lessonData)||void 0===m?void 0:m.liveAt,isSaved:null!==(g=null===(f=this.props.lessonData)||void 0===f?void 0:f.isSaved)&&void 0!==g?g:H.Kb.DEFAULTS.NA}),Sn.a.shared.sendEvents(H.Kb.LESSON_VIEW))}),b()(this,"startProfile",e=>{e&&!e.isProfileRunning()&&e.start()}),b()(this,"sendSuccessFullWatchEvents",e=>{e===H.Wb.SUCESSFULL_WATCH_FIVE_MINUTES?Sn.a.shared.sendEvents(H.Kb.SUCESSFULL_VIEW_FIVE_MINUTES):e===H.Wb.SUCESSFULL_WATCH_FIFTEEN_MINUTES&&Sn.a.shared.sendEvents(H.Kb.SUCESSFULL_VIEW_FIFTEEN_MINUTES)}),b()(this,"endProfile",e=>{e&&e.isProfileRunning()&&e.end()}),b()(this,"clearAllTimers",()=>{clearTimeout(this.slowLinkResetTimer),clearTimeout(this.poorConnectionTimer),clearTimeout(this.hlsDurationTimer),clearTimeout(this.unMountSplashScreenTimeout),clearTimeout(this.forceUpdateTimeout),clearTimeout(this.paintAnimationId),clearTimeout(this.paintStreamingCanvasId),clearTimeout(this.within10SecondsTimeout),clearTimeout(this.setErrorTimeout),clearTimeout(this.playPauseTimeout),clearTimeout(this.areVideoControlsVisibilityTimeout),clearTimeout(this.cameraDraggableTimeout),clearTimeout(this.poorConnectionResetTimer),clearTimeout(this.openClassSettingsModalTimeout),clearTimeout(this.boxAlignAnimTimeout),clearTimeout(this.onSplashScreenRemovalTimeout),clearTimeout(this.mouseInactivityTimer),clearTimeout(this.videoPlayTimer)}),b()(this,"handleVisibilityChange",(e,t)=>{!e&&t>H.mb&&this.props.isReplay&&this.recordedVideo&&this.seekReplay(this.recordedVideo.currentTime)}),b()(this,"addFullScreenListener",()=>{document.addEventListener("fullscreenchange",this.handleFullScreenChange),document.addEventListener("webkitfullscreenchange",this.handleFullScreenChange),document.addEventListener("mozfullscreenchange",this.handleFullScreenChange)}),b()(this,"removeFullScreenListener",()=>{document.removeEventListener("fullscreenchange",this.handleFullScreenChange),document.removeEventListener("webkitfullscreenchange",this.handleFullScreenChange),document.removeEventListener("mozfullscreenchange",this.handleFullScreenChange)}),b()(this,"handleFullScreenChange",()=>{this.fullscreen.isFullScreen()?this.props.setFullScreen(!0):this.props.setFullScreen(!1)}),b()(this,"sendEventData",(e,t,i)=>{const n=e.peek();j.f.sendData(t,i,{[j.e.Measure1]:n.dts/1e3}),e.end(),e.start()}),b()(this,"fullScreenHandler",()=>{this.fullscreen.isFullScreen()?this.fullscreen.isFullScreen()&&(this.fullscreen.cancelFullScreen(),this.sendEvent(he.a.FULLSCREEN_REQUEST),this.sendEventData(CE,j.c.FULL_SCREEN_TOGGLE,"DISABLED")):(this.fullscreen.requestFullScreen(),this.sendEvent(he.a.FULLSCREEN_REQUEST),this.sendEventData(CE,j.c.FULL_SCREEN_TOGGLE,"ENABLED"))}),b()(this,"disconnectClass",()=>{this.props.isReplay?this.props.setIsVideoPaused(!0):this.janusWrapper&&this.janusWrapper.disconectJanus(),this.socketManager&&(this.socketManager.unSubscribe(),this.socketManager.close())}),b()(this,"setUpFullStory",()=>{this.props.isEducator&&i.e(36).then(i.bind(null,"lqx3")).then(e=>{const t=this.props.lessonData.author.fullName;e.init({orgId:"S6B40",recordOnlyThisIFrame:!0}),e.identify(this.props.userId,{Platform:"Desktop",isEducator:!0,classId:this.props.classId,isLiveClass:!0,educatorName:t})})}),b()(this,"initPreProcessor",(e,t,i,n)=>{x.b.getOrCreate({isLive:e,version:t,skipEmptySlide:i,defaultMarkerColor:n})}),b()(this,"setDefaultStartEvents",()=>{let e=Object(f.s)(H.vb.LIGHT_DEFAULT);this.startEvents.push(e);let t=Object(f.S)(H.wb.DEFAULT);this.startEvents.push(t);let i=Object(f.J)(H.J.DEFAULT);this.startEvents.push(i);let n=Object(f.D)(H.v.MARKER);this.startEvents.push(n)}),b()(this,"shouldShowSplashScreen",()=>{let e=!1;return this.props.isLive?10==this.props.classState&&(e=!this.props.isLiveHistoryFetched):e=!this.props.isReplayDataProcessed,e||!this.splashScreenMinTimeoutCompleted}),b()(this,"getCanvasWidth",()=>this.state.aspectRatioContainerDim.width),b()(this,"getCanvasHeight",()=>this.state.aspectRatioContainerDim.height),b()(this,"checkForUnacademyDomain",()=>!!(window.location!=window.parent.location?document.referrer:document.location.href).includes("unacademy.com")),b()(this,"isOldPenVersion",()=>this.props.version&&this.props.version<=645),b()(this,"setDefaultPenStrokeSize",()=>{this.props.setPenStrokeSize(this.isOldPenVersion()?1:.5)}),b()(this,"sendStartEvents",e=>{if(this.startEvents.length>0){const t=this.startEvents;this.startEvents=[],t.forEach(e=>{this.sendToJanus(e)}),e()}}),b()(this,"onLessonData",()=>{this.props.lessonData.secondsBeforeLive&&this.props.lessonData.secondsBeforeLive>900&&(this.props.setErrorStatus(H.K.CLASS_CANT_BE_STARTED),clearTimeout(this.forceUpdateTimeout),this.forceUpdateTimeout=setTimeout(()=>{this.forceUpdate()},1e3*(this.props.lessonData.secondsBeforeLive+5-600)))}),b()(this,"initialiseJoinClassTimeout",()=>{clearTimeout(this.within10SecondsTimeout),this.within10SecondsTimeout=setTimeout(()=>{this.props.showSplashScreen&&this.props.setShowSplashScreen(!1)},1e4)}),b()(this,"initialiseReplay",(e,t)=>{let i=this.props.chatId;i||(i=e),this.setState({uid:e,chatId:i,playbackSpeed:t,cid:e},()=>{this.initialiseHeaderControlsVisibilityTimeout()})}),b()(this,"stopScreenShareHandler",()=>Fu.a.stop()),b()(this,"screenSharingHandler",e=>{const t=Object(f.W)(e);this.onSendData(t),this.props.setScreenSharing(e,this.props.isEducator)}),b()(this,"initialiseJanusWrapper",e=>{this.janusWrapper=e,this.props.setIsJanusWrapperInit(!0),this.videoStreamManager.switchStream=e=>{this.janusWrapper.switchStream(e.streamId)},Fu.a.onStart=e=>{e&&this.janusWrapper.startScreenSharing(e),this.screenSharingHandler(!0)},Fu.a.onStop=()=>{this.janusWrapper&&this.janusWrapper.stopScreenSharing();const e=document.getElementById("screenvideo");e&&Wu.a.exitPIP(e),this.screenSharingHandler(!1)}}),b()(this,"stopPaintingVideoOnCanvas",()=>{this.paintAnimationId&&clearTimeout(this.paintAnimationId),this.paintStreamingCanvasId&&clearTimeout(this.paintStreamingCanvasId),this.seriously&&(this.seriously.stop(),this.seriously.destroy())}),b()(this,"startPaintingVideoOnCanvas",()=>{this.props.isEducator&&(this.paintStreamingCanvasId&&clearTimeout(this.paintStreamingCanvasId),this.paintStreamingCanvasId=setTimeout(()=>{requestAnimationFrame(this.paintOnStreamingCanvas)},1)),this.paintVideoOnTempCanvas(),this.paintAnimationId&&clearTimeout(this.paintAnimationId),this.paintAnimationId=setTimeout(()=>{requestAnimationFrame(this.paintVideoOnMainCanvas)},1)}),b()(this,"paintOnStreamingCanvas",()=>{let e=document.getElementById("greenScreenTempCanvas"),t=document.getElementById("streamingCanvas");if(e&&t){let i=t.getContext("2d");i.clearRect(0,0,t.width,t.height),i.fillStyle="#00FF00",i.fillRect(0,0,t.width,t.height),this.props.isCameraTurnedOff||i.drawImage(e,0,0,t.width,t.height,0,0,e.width,e.height)}this.paintStreamingCanvasId&&clearTimeout(this.paintStreamingCanvasId),this.paintStreamingCanvasId=setTimeout(()=>{requestAnimationFrame(this.paintOnStreamingCanvas)},40)}),b()(this,"paintVideoOnTempCanvas",()=>{if(!this.props.selectedGreenColor&&this.props.isEducator)return;this.seriously&&(this.seriously.stop(),this.seriously.destroy()),this.seriously=new window.Seriously;let e="#replayVideo",t=[0,1,0,1];this.props.isReplay||(this.props.isEducator?(e="#mainVideo",t=Object(f.t)(this.props.selectedGreenColor)):e="#screenvideo"),!this.props.isReplay&&this.props.isLiveDVR&&(e="#liveHlsVideo");let i=this.seriously.source(e),n=this.seriously.target("#greenScreenTempCanvas");var a=this.seriously.effect("throttle");a.frameRate=20,a.source=i;var o=this.seriously.effect("chroma");o.screen=t,o.source=a;var r=this.seriously.transform("reformat");r.source=o,r.height=360,r.width=640,r.mode="cover",n.source=r,this.seriously.go()}),b()(this,"paintVideoOnMainCanvas",()=>{let e=document.getElementById("greenScreenMainCanvas"),t=document.getElementById("greenScreenTempCanvas");if(e&&t){let i=e.getContext("2d");i.clearRect(0,0,e.width,e.height),this.props.isCameraTurnedOff||i.drawImage(t,0,0,t.width,t.height,0,0,e.width,e.height)}this.paintAnimationId&&clearTimeout(this.paintAnimationId),this.paintAnimationId=setTimeout(()=>{requestAnimationFrame(this.paintVideoOnMainCanvas)},40)}),b()(this,"setAspectRatioContainerDimension",(e,t)=>{this.setState({aspectRatioContainerDim:{height:e,width:t}},()=>{this.canvasWrapper&&this.canvasWrapper.resizeCanvas(),this.slideModeCanvasWrapper&&this.slideModeCanvasWrapper.resizeCanvas()})}),b()(this,"switchCameraStream",e=>{this.janusWrapper&&(e?this.janusWrapper.disableCamera():this.janusWrapper.enableCamera())}),b()(this,"setStateFromChildren",(e,t)=>{this.setState(e,t)}),b()(this,"setVersion",()=>{window.location.href.split("/").forEach(e=>{/v\d+/.test(e)&&this.props.setClassVersion(Number(e.slice(1)))})}),b()(this,"switchtoMp4",e=>{this.setState((e,t)=>({videoUrl:Object(f.gb)(e.uid,"144")}),()=>{this.videoStreamManager.reset(),this.recordedVideo.currentTime=e})}),b()(this,"reset",()=>{this.lastEventTime=0,(!this.startEvents||0==this.startEvents.length&&this.mounted)&&(this.props.isReplay||this.props.isLiveDVR||x.b.main.reset(),this.props.resetSeekData(),this.canvasWrapper&&this.canvasWrapper.reset())}),b()(this,"resetCanvas",()=>{this.canvasWrapper&&this.canvasWrapper.reset()}),b()(this,"onReceiveData",e=>{let t=new bi.a(e,this.props.isReplay?e.p_time:e.ct);this.props.isReplay?this.processDataEvent(t):(this.dataJson.push(t),x.b.main.processEvent(t),this.props.isEducator?this.props.isDataRestoring||this.processDataEvent(t):this.props.isLiveDVR||this.props.isLivePaused||this.props.isDataRestoring||this.processDataEvent(t))}),b()(this,"processDataEvent",e=>{switch(e.plugin){case H.Ab.DrawingBoardControls:this.onReceiveDrawingBoardControlData(e),this.onChangeDrawingState(e);break;case H.Ab.CanvasWrapper:this.onReceiveCanvasWrapperData(e);break;case H.Ab.Control:this.onReceiveControlWrapperData(e);break;case H.Ab.Chat:this.onReceiveChatEventData(e);break;case H.Ab.Poll:this.props.isReplay&&this.onReceivePollData(e)}}),b()(this,"setDataJsonFromReplay",e=>{this.dataJson=e}),b()(this,"onSeekLive",e=>{if(cancelAnimationFrame(this.animationRequestId),this.onSeekStart(),this.props.isLiveDVR){let t=e+(this.recordedVideo.duration-this.props.videoDuration);isFinite(t)&&(this.recordedVideo.currentTime=t)}else this.props.setIsVideoPaused(this.props.isLivePaused),this.enableHLS()}),b()(this,"getSeekPosition",(e,t=!1)=>{let i=this.props.isReplay||t?e:Object(f.O)(e);const n=x.b.main.getSeekPosition(i,this.dataJson);return n.isScreenShared&&!this.props.isScreenShared&&this.props.isEducator&&(this.screenSharingHandler(!1),n.isScreenShared=!1),n}),b()(this,"getStream",()=>this.janusWrapper&&this.janusWrapper.stream),b()(this,"getActiveSlideAtSeekPosition",(e,t=!1)=>{let i=this.props.isReplay||t?e:Object(f.O)(e);return x.b.main.getSeekedActiveSlide(i)}),b()(this,"onHLSSeek",e=>{this.seekLive(e)}),b()(this,"onGoLive",()=>{this.sendDVRSwitchEvent(!1),this.dataJson.length>0&&this.seekToLastEventTime(),this.janusWrapper.enableCameraAndAudio(!0),this.janusWrapper.disableDVR(),this.props.useGreenScreen&&(this.stopPaintingVideoOnCanvas(),this.startPaintingVideoOnCanvas()),this.props.setIsLivePaused(!1),this.props.setIsVideoPaused(!1)}),b()(this,"seekReplay",e=>{if(!isFinite(e)||!this.recordedVideo)return;this.pollRef&&this.pollRef.closePoll(),this.resetCanvas(),cancelAnimationFrame(this.animationRequestId),this.recordedVideo.currentTime=e,this.animationRequestId&&cancelAnimationFrame(this.animationRequestId),this.playIndex=0;let t=this.getSeekPosition(e),i=t.playIndex,n=t.activeSlide,a=t.isScreenShared;t.activeSlide=Object(f.g)(n,1e6*e);const o=!a&&this.props.isCameraTurnedOff;o!==this.props.isCameraTurnedOff&&this.props.setVideoPlayTiming(this.props.videoDuration,e),t.isCameraTurnedOff=o,this.playIndex=i,this.setPinnedMessageOnSeek(t),this.props.setSeekedData(t)}),b()(this,"setPinnedMessageOnSeek",e=>{let t=e.pinnedMsg;e.havePinnedMsg&&t?this.props.setPinnedMsg(t,!0):this.props.setPinnedMsg(null,!1)}),b()(this,"afterReplaySeeked",()=>{this.animationRequestId=requestAnimationFrame(this.frameLoop),this.props.setHasDataSeeked(!1),this.props.useGreenScreen&&this.startPaintingVideoOnCanvas(),this.props.setCurrentCanvasZoom(this.props.activeSlide)}),b()(this,"seekToLastEventTime",()=>{let e=this.dataJson[this.dataJson.length-1].time;this.onSeekStart(),this.seekLive(e,!0)}),b()(this,"seekToCurrentTime",()=>{this.dataJson.length>0&&this.seekToLastEventTime(),(this.props.isEducator||this.props.isPdfEditor)&&x.b.main.getCurrentDrawingEvents().forEach(e=>{this.processDataEvent(e)})}),b()(this,"resetDrawingBoardTools",e=>{(null!==e&&void 0!==e?e:Object(f.l)()).forEach(e=>{this.onReceiveData(e),this.onSendData(e,!0),this.savePdfEditorData(e)})}),b()(this,"seekLive",(e,t=!1)=>{this.animationRequestId&&cancelAnimationFrame(this.animationRequestId),this.resetCanvas();let i=this.getSeekPosition(e,t),n=i.playIndex,a=i.activeSlide;this.playIndex=n,i.activeSlide=Object(f.g)(a,t?e:Object(f.O)(e)),this.props.setSeekedData(i)}),b()(this,"afterLiveSeeked",()=>{this.sendEvent(he.a.UPDATE_CLASS_START_TIME,{currentTime:this.props.classStartTime,isLiveDvr:this.props.isLiveDVR,isReplay:this.props.isReplay}),this.animationRequestId=requestAnimationFrame(this.frameLoop),this.props.setHasDataSeeked(!1),this.props.useGreenScreen&&this.startPaintingVideoOnCanvas(),this.props.setCurrentCanvasZoom(this.props.activeSlide)}),b()(this,"frameLoop",()=>{let e=0;if(this.props.isReplay){if(!this.recordedVideo)return void(this.animationRequestId=requestAnimationFrame(this.frameLoop));this.recordedVideo&&(e=this.recordedVideo.currentTime)}else{if(!this.props.isLiveDVR||!window.chunkTime)return this.props.isDataRestoring||this.props.bulkUpdate&&this.changeBulkStateToNormal(),void(this.props.isEducator||(this.animationRequestId=requestAnimationFrame(this.frameLoop)));this.recordedVideo&&(e=Object(f.P)(this.recordedVideo.currentTime))}if(this.recordedVideo&&this.recordedVideo.ended)return void(this.animationRequestId=requestAnimationFrame(this.frameLoop));this.animationRequestId&&cancelAnimationFrame(this.animationRequestId),this.playIndex>=this.dataJson.length&&this.props.bulkUpdate&&this.changeBulkStateToNormal();let t=0;for(;this.playIndex<this.dataJson.length;this.playIndex++){let i=this.dataJson[this.playIndex];if(!i)return void(this.animationRequestId=requestAnimationFrame(this.frameLoop));if(this.props.isReplay){if(i.time/1e3>1e3*e)return this.props.bulkUpdate&&this.changeBulkStateToNormal(),void(this.animationRequestId=requestAnimationFrame(this.frameLoop))}else if(i.time>e)return this.props.bulkUpdate&&this.changeBulkStateToNormal(),void(this.animationRequestId=requestAnimationFrame(this.frameLoop));if(this.processDataEvent(i),t++,t>250)break}this.animationRequestId=requestAnimationFrame(this.frameLoop)}),b()(this,"startMainVideo",(e=this.props,t=!1)=>{let i=e.cameraDeviceId;if(!i){let t=e.devices&&e.devices.find(e=>"videoinput"===e.kind);if(!t)return;i=t.deviceId}let n=document.getElementById("mainVideo");n&&(this.localVideoStreamBeforeStart&&Object(f.Db)(this.localVideoStreamBeforeStart),Object(f.o)(!e.isCanvasModeDisabled,i,e.useRoundVideo||e.isMultiEduClass,t).then(a=>{const o={video:{deviceId:i?{exact:i}:void 0,width:{exact:a.width},height:{exact:a.height}}};navigator.mediaDevices.getUserMedia(o).then(e=>{this.localVideoStreamBeforeStart=e,Object(f.d)(n,e),n.muted=!0,n.play()}).catch(i=>{t||this.startMainVideo(e,!0),console.log("Main video camera error",i)})}).catch(e=>{console.log("Main video camera error",e)}),this.stopPaintingVideoOnCanvas(),this.props.useGreenScreen&&this.startPaintingVideoOnCanvas())}),b()(this,"setClassEndState",()=>{if(this.props.markLessonAsCompleted(),this.janusWrapper&&this.janusWrapper.disconectJanus(!0),!this.props.isHlsClass){this.props.setEndClass();let e=document.getElementById("screenvideo");e&&(e.style.display="none")}}),b()(this,"setHlsEndClass",()=>{this.props.setEndClass()}),b()(this,"onReceiveControlWrapperData",e=>{const t=e.data;if((null===t||void 0===t?void 0:t.type)==H.L.CLASS_END&&(this.props.isReplay||this.setClassEndState(),this.sendEvent(he.a.PAUSE)),(null===t||void 0===t?void 0:t.type)===H.L.CLASS_PING)if(this.props.isReplay)if(this.props.classStartTime){let e=this.props.classStartTime+t.pTime/1e3,i=t.ct-e;this.props.setChatOffsetTime(i)}else this.props.setClassStartTime(t.ct-t.pTime/1e3,0);else this.props.classStartTime||(this.sendEvent(he.a.UPDATE_CLASS_START_TIME,{currentTime:t.ct}),this.props.setClassStartTime(t.ct,0));if((null===t||void 0===t?void 0:t.type)===H.L.CAMERA_SWITCH&&(t.value?(this.props.setIsCameraTurnedOff(!1),this.props.isEducator&&this.janusWrapper&&this.janusWrapper.enableCamera()):(this.props.setIsCameraTurnedOff(!0),this.props.isEducator&&this.janusWrapper&&this.janusWrapper.disableCamera())),(null===t||void 0===t?void 0:t.type)==H.L.CAMERA_RATIO&&this.props.cameraRatio!=t.value&&this.props.setCameraRatio(t.value),(null===t||void 0===t?void 0:t.type)==H.L.EDUCATOR_ALIGN&&(this.props.educatorBoxAlign.left==t.alignment.left&&this.props.educatorBoxAlign.top==t.alignment.top||this.props.setEducatorBoxAlign(t.alignment.left,t.alignment.top)),(null===t||void 0===t?void 0:t.type)===H.L.GREEN_SCREEN){const e=t.value;e!==this.props.useGreenScreen&&this.props.setUseGreenScreen(e)}if((null===t||void 0===t?void 0:t.type)===H.L.SHARE_SCREEN){if(this.props.isScreenShared===t.value)return;this.props.setScreenSharing(t.value,this.props.isEducator)}if((null===t||void 0===t?void 0:t.type)==H.L.CLASS_CONFIG){const e=t.value,i=e[H.n.VIDEO_MODES.CONFIG_KEY];i&&(i===H.n.VIDEO_MODES.GREEN_SCREEN?(this.props.useGreenScreen||this.props.setUseGreenScreen(!0),this.props.setCameraRatio(e[H.n.CAMERA_RATIO])):i===H.n.VIDEO_MODES.ROUND_VIDEO&&(this.props.useRoundVideo||this.props.setRoundVideoScreen(!0)))}}),b()(this,"onReceiveDrawingBoardControlData",e=>{const t=e.data,i=e.time;switch(t.type){case H.L.ADD_SLIDE:this.props.isReplay||this.addSlideOnEventReceive(t.index,t.url);break;case H.L.MODE_CHANGE:this.props.setDrawingModeInStore(t.mode);break;case H.L.SLIDE_CHANGE:this.slideChangeUtil(t.index,i);break;case H.L.CHANGE_COLOR:this.props.setColorChange(t.color);break;case H.L.PEN_STROKE_CHANGE:this.props.setPenStrokeSize(t.size);break;case H.L.ERASER_STROKE_CHANGE:this.props.setEraserStrokeSize(t.size)}}),b()(this,"onReceiveCanvasWrapperData",e=>{this.canvasWrapper&&this.canvasWrapper.onReceiveData(e)}),b()(this,"onReceiveChatEventData",e=>{this.props.isReplay&&this.chatComp&&this.chatComp.updateChatEvent(e)}),b()(this,"onReceivePollData",e=>{this.pollRef&&this.pollRef.onReceiveEvent(e)}),b()(this,"onChangeDrawingState",e=>{this.canvasWrapper&&this.canvasWrapper.onDrawingChangeData(e.data)}),b()(this,"addSlideOnEventReceive",(e,t)=>{}),b()(this,"addSlideUtil",(e,t,i=!1)=>{if(!this.canSendData())return;this.resetZoomAndTranslation();let n=this.props.activeSlide+1,a=e?i?t.publicUrl:Object(f.c)(t):null,o=null;a&&Object(f.lb)(a)&&(o=a,a=Object(f.K)(a));const r=this.props.theme?this.props.theme:H.ac.DARK;let s=Object(f.k)(a,n,r,this.props.slideBgImage,o);this.onSendData(s);let l=Object(f.X)(n);this.onSendData(l),this.props.setActiveSlide(n),this.props.setCurrentCanvasZoom(n)}),b()(this,"resetCanvasZoom",()=>{this.setCanvasZoomUtil(H.jc.INIT)}),b()(this,"canZoom",()=>this.canSendData()&&(this.props.isZoomEnabled||this.props.isPdfEditor)),b()(this,"setCanvasZoomUtil",e=>{if(this.canZoom()){this.props.setCanvasZoom(e);let t=Object(f.ib)(this.props.activeSlide,e);this.onSendData(t);let i=new bi.a(t);this.onChangeDrawingState(i)}}),b()(this,"resetCanvasTranslation",()=>{this.setCanvasTranslation({x:0,y:0,u:1})}),b()(this,"setCanvasTranslation",e=>{if(this.canZoom()){let t=Object(f.r)(this.props.activeSlide,e);this.onSendData(t);let i=new bi.a(t);this.onChangeDrawingState(i)}}),b()(this,"slideChangeUtil",(e,t)=>{let i=this.props.isReplay||this.props.isLiveDVR?Object(f.g)(e,t):e;i=i<x.b.main.slides.length?i:0,this.props.setActiveSlide(i)}),b()(this,"getSecondsBeforeLive",()=>{if(!this.props.lessonData||!this.props.lessonData.secondsBeforeLive)return;let e=this.props.lessonData.secondsBeforeLive-((new Date).getTime()-this.props.lessonData.dataAt)/1e3;return e>0?e:0}),b()(this,"savePdfEditorData",e=>{this.props.isPdfEditor&&this.pdfEditor&&this.pdfEditor.saveDataLocally(e)}),b()(this,"savePdfEditorDataToLocalStorage",()=>{this.props.isPdfEditor&&this.pdfEditor&&this.pdfEditor.saveDataToLocalStorage()}),b()(this,"onSendData",(e,t=!1,i=0,n=null)=>{if(!this.props.isEducator||this.props.isPdfEditor&&!this.props.canEditPdf)return;const a=Object(f.Fb)(e,{slideIndexOffset:i},n);if(!t){let t=new bi.a(a,e.ct);x.b.main.processEvent(t),this.savePdfEditorData(a)}this.sendToJanus(a)}),b()(this,"sendToJanus",e=>{10===this.props.classState?(e[H.L.CURRENT_TIME]=(new Date).getTime(),this.janusWrapper&&this.janusWrapper.sendData(e)):this.startEvents.push(e)}),b()(this,"canWrite",()=>{let e=this.getSecondsBeforeLive();const t=!this.props.isPdfEditor&&this.props.isEducator&&!this.props.isReplay&&(10==this.props.classState||0==this.props.classState&&(!e||e<=this.canDoThingsBeforeSeconds)),i=this.props.isPdfEditor&&this.props.canEditPdf;return t||i}),b()(this,"getFullStatus",()=>({CURRENT_TIME:parseInt(this.time),TOTAL_RUN_TIME:parseInt(this.totalRunTime)})),b()(this,"sendEvent",(e,t)=>{const i=this.getFullStatus();e===he.a.PLAY&&this.successFullWatchTimeCalculator?this.successFullWatchTimeCalculator.onLessonPlay():e===he.a.PAUSE&&this.successFullWatchTimeCalculator&&this.successFullWatchTimeCalculator.onLessonPause(),t&&"object"===typeof t&&Object.entries(t).forEach((e,t)=>{i[e]=t}),he.b.dispatchEvent(e,{status:i})}),b()(this,"sendVideoPlayEvent",e=>{e?this.sendEvent(he.a.PAUSE):this.sendEvent(he.a.PLAY)}),b()(this,"addAnimationClassForBoxAlign",()=>{let e=document.getElementById("greenContainer");e&&e.classList.add("greenScreenCanvasContainerAnimated");let t=document.getElementById("roundCamera");t&&t.classList.add("roundCameraWrapperAnimated")}),b()(this,"removeAnimationClassForBoxAlign",()=>{let e=document.getElementById("greenContainer");e&&e.classList.remove("greenScreenCanvasContainerAnimated");let t=document.getElementById("roundCamera");t&&t.classList.remove("roundCameraWrapperAnimated")}),b()(this,"handleEducatorAlignChange",e=>{if(this.addAnimationClassForBoxAlign(),clearTimeout(this.boxAlignAnimTimeout),this.boxAlignAnimTimeout=setTimeout(this.removeAnimationClassForBoxAlign,250),this.canSendData()){const t=this.getEducatorAlignEvent(e.left,e.top);this.onSendData(t)}}),b()(this,"initialiseHeaderControlsVisibilityTimeout",()=>{this.props.isEducator||(clearTimeout(this.areVideoControlsVisibilityTimeout),this.isControlsVisibilityTimeoutEnabled&&(this.areVideoControlsVisibilityTimeout=setTimeout(()=>{this.props.isSeeking||this.props.isLivePaused||this.setState({areVideoControlsHidden:!0})},1e3)))}),b()(this,"handleMouseActivityOnVideoPause",e=>{e?this.setMouseActivity(null,!1):this.startMouseInactivityTimer()}),b()(this,"setMouseActivity",(e,t=!0)=>{this.props.isEducator||this.props.isMouseHoverActive||(this.props.setIsMouseHoverActive(!0),this.clearMouseInactivityTimer(),!t||this.props.showSplashScreen||this.props.isLearnerSlideModeActive||this.startMouseInactivityTimer())}),b()(this,"unSetMouseActivity",()=>{this.props.isEducator||(this.clearMouseInactivityTimer(),this.props.isMouseHoverActive&&this.props.setIsMouseHoverActive(!1))}),b()(this,"startMouseInactivityTimer",()=>{this.clearMouseInactivityTimer(),this.mouseInactivityTimer=setTimeout(()=>{this.unSetMouseActivity()},H.ob)}),b()(this,"clearMouseInactivityTimer",()=>{this.mouseInactivityTimer&&clearTimeout(this.mouseInactivityTimer)}),b()(this,"enableHLS",()=>{this.janusWrapper&&(this.janusWrapper.disableCameraAndAudio(),this.janusWrapper.enableDVR()),this.props.setLiveDVR(!0,!0,this.getLiveDvrUrl()),this.sendDVRSwitchEvent(!0)}),b()(this,"onEnableHls",()=>{this.props.useGreenScreen&&(this.stopPaintingVideoOnCanvas(),this.startPaintingVideoOnCanvas())}),b()(this,"onLoadHlsVideo",()=>{this.props.isLiveDVR&&this.recordedVideo&&isFinite(this.props.seekTime)&&(this.recordedVideo.currentTime=this.props.seekTime)}),b()(this,"getHlsLiveDuration",(e=null)=>{this.fetchingHlsFile||(this.fetchingHlsFile=!0,this.parseHlsFile(this.getLiveDvrUrl(e),e=>{this.setState({hlsLiveVideoDuration:e},()=>{this.fetchingHlsFile=!1})}))}),b()(this,"onSlowLink",()=>{if(this.sendSlowLinkEvent(),this.poorConnectionCounter>=4&&(this.setPoorConnectionState(),this.poorConnectionCounter=0),0===this.poorConnectionCounter&&(clearTimeout(this.poorConnectionResetTimer),this.poorConnectionResetTimer=setTimeout(()=>{this.poorConnectionCounter=0},2e4)),this.poorConnectionCounter+=1,!this.isSlowLinkNotified&&!this.props.isCameraTurnedOff&&!this.props.isEducator&&!this.props.isCanvasModeDisabled&&!this.props.isHlsClass){if(this.slowLinkCounter>=55)return this.props.isScreenShared||this.toggleCameraStream(!0),clearTimeout(this.slowLinkResetTimer),this.isSlowLinkNotified=!0,void this.props.setInfoBannerStatus(H.Z.CAMERA_STREAM_AUTO_CLOSE,!0);0==this.slowLinkCounter&&(clearTimeout(this.slowLinkResetTimer),this.slowLinkResetTimer=setTimeout(()=>{this.slowLinkCounter=0},6e4)),this.slowLinkCounter+=1}}),b()(this,"toggleCameraStream",(e=!1)=>{this.props.isReplay||(this.sendCameraToggleEvent(this.props.isCameraTurnedOff,e),this.janusWrapper&&this.janusWrapper.toggleCamera()),this.props.setIsCameraTurnedOff(!this.props.isCameraTurnedOff,e)}),b()(this,"sendSlowLinkEvent",y()(()=>{if(window.webRTCEvents){let e={slowLink:!0,type:"SUBSCRIBER",platform:"web"};this.setState({addWebRTCEventData:e})}},5e3)),b()(this,"setReferenceForCanvasWrapper",e=>{e&&(this.canvasWrapper=e)}),b()(this,"setAspectRatioRef",e=>{e&&(this.aspectRatioRef=e)}),b()(this,"setReferenceForVideoElement",e=>{this.recordedVideo=e,!this.props.shouldAutoplay&&this.props.isReplay&&(this.recordedVideo.muted=!0)}),b()(this,"setReferenceForRoundVideoDraggable",e=>{this.roundVideoDraggable=e}),b()(this,"setChatRef",e=>{this.chatComp=e}),b()(this,"setSlideModeCanvasRef",e=>{this.slideModeCanvasWrapper=e}),b()(this,"setPollRef",e=>{this.pollRef=e}),b()(this,"setLiveRef",e=>{this.liveComp=e}),b()(this,"setPdfEditorRef",e=>{this.pdfEditor=e}),b()(this,"setHlsUrl",e=>{}),b()(this,"resetHlsUrl",()=>{this.props.setLiveDVR(!1)}),b()(this,"onReplayVideoPlaying",()=>{this.props.isReplayDataProcessed||this.props.isVideoPaused||this.props.setIsVideoPaused(!0)}),b()(this,"displayScreenModeSelector",()=>{this.state.showScreenModeSelector||this.setState({showScreenModeSelector:!0})}),b()(this,"hideScreenModeSelector",e=>{this.state.showScreenModeSelector&&this.setState({showScreenModeSelector:!1},()=>{this.setUseGreenScreen(e)})}),b()(this,"onCameraChange",e=>{(this.janusWrapper&&this.props.isEducator||this.props.isMultiEduClass&&this.props.isModerator)&&(this.janusWrapper.setCameraDeviceId(e),this.props.isEducator?10===this.props.classState&&this.janusWrapper.reconnect("ON_CAMERA_CHANGE",null,!0):this.props.isModerator&&this.props.wasGoLiveClickedbyGuest&&this.janusWrapper.reconnect("ON_CAMERA_CHANGE",null,!0))}),b()(this,"onMicrophoneChange",e=>{(this.janusWrapper&&this.props.isEducator||this.props.isMultiEduClass&&this.props.isModerator)&&(this.janusWrapper.setMicrophoneDeviceId(e),this.props.isEducator?10===this.props.classState&&this.janusWrapper.reconnect("ON_MICROPHONE_CHANGE",null,!0):this.props.isModerator&&this.props.wasGoLiveClickedbyGuest&&this.janusWrapper.reconnect("ON_MICROPHONE_CHANGE",null,!0))}),b()(this,"renderCamera",()=>{if(!this.props.isReplay)return!this.props.isEducator&&this.props.hlsLiveUrl&&(this.props.isHlsClass||this.props.isLiveDVR)?a.a.createElement(qh,{hlsUrl:this.props.hlsLiveUrl,classState:this.props.classState,endClass:this.setHlsEndClass,videoStreamManager:this.videoStreamManager,setReferenceForVideoElement:this.setReferenceForVideoElement,seek:this.onHLSSeek,isLiveDVR:this.props.isLiveDVR,storeVideoTimeInApp:this.storeVideoTimeInApp,isVideoPaused:this.props.isVideoPaused,isJanusClass:this.props.isJanusClass,isCameraDraggable:this.props.isChatHidden,useGreenScreen:this.props.useGreenScreen,onLoadHlsVideo:this.onLoadHlsVideo}):a.a.createElement(Fm,{role:this.props.role,isConnected:this.props.connectionState===H.Pb.CONNECTED,toggleCameraStream:this.toggleCameraStream,isCameraToggleAllowed:this.props.isEducator,isCameraEnabled:this.janusWrapper&&this.janusWrapper.getIsCameraEnabled(),onSendData:this.onSendData,isCameraTurnedOff:this.props.isCameraTurnedOff,isEducator:this.props.isEducator,isCanvasModeDisabled:this.props.isCanvasModeDisabled,isError:this.props.isError,toggleCamera:this.toggleCameraStream,setReferenceForVideoElement:this.setReferenceForVideoElement,hlsLiveVideoDuration:this.state.hlsLiveVideoDuration,storeVideoTimeInApp:this.storeVideoTimeInApp,isCameraDraggable:this.props.isChatHidden,useGreenScreen:this.props.useGreenScreen,showPlayButton:this.props.showPlayButton,classState:this.props.classState,getStream:this.getStream,janusWrapper:this.janusWrapper});if(!(this.props.isError&&this.props.errorStatus===H.K.DATA_FAIL))return a.a.createElement(Dh,{isLocal:this.props.isLocal,setReferenceForVideoElement:this.setReferenceForVideoElement,isVideoPaused:this.props.isVideoPaused,storeVideoTimeInApp:this.storeVideoTimeInApp,videoStreamManager:this.videoStreamManager,switchtoMp4:this.switchtoMp4,onReplayVideoPlaying:this.onReplayVideoPlaying,isCameraDraggable:this.props.isChatHidden,seek:this.seekReplay,setStateFromChildren:this.setStateFromChildren,sendEvent:this.sendEvent,closeIfameOnVideoEnd:this.props.handleBackIcon})}),b()(this,"shouldHideCameraPlaceholder",()=>!!this.props.isEducator||this.props.connectionState===H.Pb.CONNECTED&&!this.props.showPlayButton),b()(this,"renderRoundCameraContainer",()=>{if(this.props.useRoundVideo)return a.a.createElement(Wf,{canvasDim:this.state.aspectRatioContainerDim},a.a.createElement(a.a.Fragment,null,this.renderCamera(),a.a.createElement(Mf.a,null),this.renderLearnerUID()))}),b()(this,"getAspectRatioDimensions",()=>{if(this.aspectRatioRef)return this.aspectRatioRef.getBoundingClientRect()}),b()(this,"renderCameraContainer",()=>{if(!this.props.isPdfEditor&&!this.props.useRoundVideo)return a.a.createElement(Qf,{toggleCameraStream:this.toggleCameraStream,renderCamera:()=>this.renderCamera(),aspectRatioContainerDim:this.state.aspectRatioContainerDim,isSideCurtainActive:this.isSideCurtainActive(this.props),getAspectRatioDimensions:this.getAspectRatioDimensions})}),b()(this,"renderDummyCameraView",()=>{if(!this.props.useGreenScreen&&!this.props.useRoundVideo&&(this.props.isEducator||!this.props.isScreenShared)&&20!==this.props.classState&&!this.props.isFeedbackShownOnBackClick&&this.props.errorStatus!==H.K.LEARNER_KICKED&&this.props.errorStatus!==H.K.DATA_FAIL)return a.a.createElement(UE,null)}),b()(this,"onSendPollData",e=>{const t={plugin:H.Ab.Poll,data:e};this.onSendData(t)}),b()(this,"onSendCloudPollData",e=>{const t={plugin:H.Ab.Cloud,data:e};this.onSendData(t)}),b()(this,"renderInfoBanner",()=>a.a.createElement(WE,null,a.a.createElement(If,null))),b()(this,"renderCanvasOverlay",()=>{if(!this.props.isPdfEditor&&!this.props.isEducatorSlideViewActive)return a.a.createElement($g,null)}),b()(this,"renderGlobalLeaderboard",()=>{if(this.props.showGlobalLeaderboard)return a.a.createElement(Je,{socketManager:this.socketManager})}),b()(this,"renderPostClassFeedback",()=>{if(this.props.isLive&&20==this.props.classState&&!this.props.showSplashScreen||this.props.isReplay&&this.props.hasReplayEnded||this.props.isFeedbackShownOnBackClick)return a.a.createElement(Dn,{enter:!0,socketManager:this.socketManager})}),b()(this,"renderDrawingAreaLeft",()=>{if(this.props.isPdfEditor&&this.props.canEditPdf||this.props.isEducator&&this.props.classState<20)return a.a.createElement(FE,{isHidden:this.props.showSplashScreen,styleHeight:this.state.aspectRatioContainerDim.height},this.renderDrawingBoardAdditionalTools())}),b()(this,"renderDrawingAreaTop",()=>{if(this.props.isEducator||this.props.isMultiEduClass&&this.props.isModerator||this.props.isPdfEditor)return a.a.createElement(VE,{isHidden:this.props.showSplashScreen||20==this.props.classState,styleWidth:this.state.aspectRatioContainerDim.width},a.a.createElement(Ic,{secondsBeforeLive:this.props.lessonData&&this.props.lessonData.secondsBeforeLive,janusWrapper:this.janusWrapper,socketManager:this.socketManager}))}),b()(this,"renderDrawingAreaBottom",()=>a.a.createElement(HE,{reducedHeight:this.props.isEducator,styleWidth:this.state.aspectRatioContainerDim.width},this.renderPlayerControls(),this.renderSubscriptionCTADetails(),this.renderPoll(),this.renderLessonCardEducator(),this.renderDrawingBoardTools())),b()(this,"renderSlideModeCanvas",()=>{if(this.props.isLearnerSlideModeActive)return a.a.createElement(Re.a,{ref:this.setSlideModeCanvasRef,slides:x.b.main.slides,isSlideMode:!0,role:H.p.TYPE_LEARNER,canWrite:!1,baseWidth:360,isReplay:!0,activeSlide:this.props.learnerSlideModeActiveSlide,areAnnotationsOff:this.props.areAnnotationsOff})}),b()(this,"resetZoomAndTranslation",()=>{this.resetCanvasZoom(),this.resetCanvasTranslation()}),b()(this,"onChangeSlide",e=>{if(!this.canSendData())return;this.resetZoomAndTranslation();const t=Object(f.X)(e);this.onSendData(t),this.props.setActiveSlide(e)}),b()(this,"renderEducatorSlideView",()=>{if(!this.props.isPdfEditor&&this.props.isEducator)return a.a.createElement(Gf.a,{fallback:null},a.a.createElement(wE,{slides:x.b.main.slides,activeSlide:this.props.activeSlide,onChangeSlide:this.onChangeSlide}))}),b()(this,"renderZoomPanContainer",()=>a.a.createElement(lf,{setCanvasTranslation:this.setCanvasTranslation})),b()(this,"onMouseEnterCanvas",()=>{this.props.isEducator||this.props.showSplashScreen||this.props.hasReplayEnded||this.props.setIsCanvasHovered(!0)}),b()(this,"onMouseLeaveCanvas",()=>{this.props.isEducator||this.props.setIsCanvasHovered(!1)}),b()(this,"renderLearnerDetailsOnCanvas",()=>{if(!this.props.isEducator&&!this.props.showSplashScreen)return a.a.createElement(Hf.a,null)}),b()(this,"renderLearnerUID",()=>{if(!this.props.isEducator&&!this.props.isScreenShared&&(this.props.isReplay||10===this.props.classState))return a.a.createElement(Hf.b,null)}),b()(this,"renderMicroInteraction",()=>{if(!this.props.showSplashScreen&&!this.props.isEducator&&!this.props.errorStatus)return a.a.createElement(Gf.a,{fallback:null},a.a.createElement(xE,null))}),b()(this,"renderCanvasWrapper",()=>a.a.createElement(GE,{shadow:!this.props.showSplashScreen,onMouseEnter:this.onMouseEnterCanvas,onMouseLeave:this.onMouseLeaveCanvas},a.a.createElement(Re.a,{isEducator:this.props.isEducator,recordedVideo:this.recordedVideo,shouldUseVideoCurrentTime:!0,userId:this.props.userId,onSendData:this.onSendCanvasData,ref:this.setReferenceForCanvasWrapper,startedAt:this.props.lessonData&&this.props.lessonData.startedAt,slides:x.b.main.slides,activeSlide:this.props.activeSlide,imagesUploaded:this.state.imagesUploaded,bulkUpdate:this.props.bulkUpdate,role:this.props.role,isReplay:this.props.isReplay,canWrite:this.canWrite(),lessonTitle:this.props.lessonData&&this.props.lessonData.name,author:this.props.lessonData&&this.props.lessonData.author,baseWidth:this.baseWidth,secondsBeforeLive:this.props.lessonData&&this.props.lessonData.secondsBeforeLive,showVideoQuality:this.props.isHlsClass,videoStreamManager:this.videoStreamManager,isHlsClass:this.props.isHlsClass,isLiveDVR:this.props.isLiveDVR,useGreenScreen:this.props.useGreenScreen,classState:this.props.classState,showPlayButton:this.props.showPlayButton,showSplashScreen:this.props.showSplashScreen,savePdfEditorDataToLocalStorage:this.savePdfEditorDataToLocalStorage}),this.renderRoundCameraContainer(),this.renderLearnerDetailsOnCanvas(),this.renderStatus(),this.renderPostClassFeedback(),this.renderCameraTurnedOffButton(),this.renderPlayButton(),this.renderSplashScreen(),this.renderCanvasOverlay(),this.renderInfoBanner(),this.renderSlideModeCanvas(),this.renderEducatorSlideView(),this.renderZoomPanContainer(),this.renderMicroInteraction(),this.renderCloudPollCard())),b()(this,"renderMainCanvas",()=>{const e=this.props.isEducator||this.props.isPdfEditor?8:0;return a.a.createElement(ME,null,a.a.createElement(Bf.a,{setAspectRatioRef:this.setAspectRatioRef,horizontalMargin:e,onResize:this.setAspectRatioContainerDimension},this.renderCanvasWrapper()))}),b()(this,"canSendData",()=>{const e=!this.props.isPdfEditor&&(10!==this.props.classState||this.janusWrapper&&this.janusWrapper.canSendData())&&this.props.isEducator,t=this.props.isPdfEditor;return e||t}),b()(this,"sendAnswerOnSocket",e=>{e&&this.socketManager.answerQuestion(e)}),b()(this,"handleAnswerQuestion",(e,t)=>{let i;t&&(i={publicUrl:t},this.addSlideUtil(!0,i,!0)),this.sendAnswerOnSocket(e.questionId);let n={plugin:H.Ab.Chat,data:{e:H.L.ANSWER_QUESTION,data:{data:e.description,l:e.image,id:e.id}}};this.onSendData(n)}),b()(this,"setUseGreenScreen",e=>{this.props.useGreenScreen&&e==H.Jb.TYPE_DEFAULT?this.disableUseGreenScreen():this.props.useGreenScreen||e!=H.Jb.TYPE_GREEN_SCREEN||this.enableUseGreenScreen()}),b()(this,"enableUseGreenScreen",()=>{this.props.useGreenScreen||this.props.setUseGreenScreen(!0)}),b()(this,"disableUseGreenScreen",()=>{this.props.useGreenScreen&&this.props.setUseGreenScreen(!1)}),b()(this,"onSeekStart",()=>{this.props.setIsSeekStarted(!0)}),b()(this,"setHasSeekedToWatchTime",()=>{this.hasSeekedToWatchTime=!0}),b()(this,"onLoadReplayVideo",()=>{this.shouldSeekToWatchTime()&&(this.setHasSeekedToWatchTime(),this.onSeekStart(),this.seekReplay(this.props.watchTime))}),b()(this,"shouldSeekToWatchTime",()=>this.props.watchTime&&this.props.videoDuration&&this.props.watchTime>0&&this.props.watchTime<this.props.videoDuration-60&&!this.hasSeekedToWatchTime&&this.props.isReplayDataProcessed),b()(this,"playLiveVideoAutoplayFail",()=>{if(this.sendEvent(he.a.PLAY),this.props.isReplay)this.props.setIsVideoPaused(!1);else{const e=document.getElementById("screenvideo");e&&e.play()}this.props.setShowPlayButton(!1),this.props.isLivePaused&&this.props.setIsLivePaused(!1)}),b()(this,"onSendCanvasData",e=>{let t={plugin:H.Ab.CanvasWrapper,data:e};this.onSendData(t)}),b()(this,"onLivePause",()=>{this.sendEvent(he.a.PAUSE),this.janusWrapper&&this.janusWrapper.disableCameraAndAudio()}),b()(this,"onLiveResume",()=>{this.sendEvent(he.a.PLAY),this.dataJson.length>0&&(this.seekToLastEventTime(),this.janusWrapper.enableCameraAndAudio())}),b()(this,"getFixedSlidesOnLiveResume",()=>x.b.main.slides.map(e=>(e.image&&(e.publicUrl=e.image),e))),b()(this,"handleSplashScreenChange",e=>{this.props.isEducator||(e?this.props.isReplay?(this.props.setIsVideoPaused(!0),this.props.setMute(!0)):this.props.setMute(!0):this.onSplashScreenRemovalTimeout=setTimeout(()=>{this.props.isReplay?(this.props.setMute(!1),this.videoPlayTimer=setTimeout(()=>{this.props.setIsVideoPaused(!1)},100)):this.props.setMute(!1)},500)),!this.props.useGreenScreen||e||10!=this.props.classState||this.props.selectedGreenColor||!this.props.isEducator||this.props.isMultiEduClass||(this.openClassSettingsModalTimeout&&clearTimeout(this.openClassSettingsModalTimeout),this.openClassSettingsModalTimeout=setTimeout(()=>{this.props.setClassSettingsModalOpen(!0,H.Xb.VIDEO_MODE)},1500))}),b()(this,"renderSplashScreen",()=>{if(!this.props.isPdfEditor&&this.props.shouldAutoplay)return a.a.createElement(qg,{show:this.props.showSplashScreen})}),b()(this,"renderPlayerControls",()=>{const e=this.props.showSplashScreen||this.props.isLive&&(0==this.props.classState||20==this.props.classState)||this.props.isLearnerSlideModeActive||this.props.isFeedbackShownOnBackClick||this.props.hasReplayEnded||this.props.errorStatus===H.K.LEARNER_KICKED||this.props.isMultiEduClass&&this.props.isModerator;if((this.props.isTokenApiDone||this.props.isLocal)&&!this.props.isEducator)return a.a.createElement(Er,{isCanvasModeDisabled:this.props.isCanvasModeDisabled,isLoading:this.props.isLoading||this.fetchingHlsFile,getActiveSlideAtSeekPosition:this.getActiveSlideAtSeekPosition,isReplay:this.props.isReplay,isJanusClass:this.props.isJanusClass,isHlsClass:this.props.isHlsClass,recordedVideo:this.recordedVideo,isEducator:this.props.isEducator,showPlayButton:this.props.showPlayButton,playLiveVideoAutoplayFail:this.playLiveVideoAutoplayFail,lessonData:this.props.lessonData,showOnlyLessonCard:e,videoStreamManager:this.videoStreamManager,showCameraToggle:!this.props.isHlsClass&&!this.props.isCanvasModeDisabled&&!this.props.isEducator&&!this.props.isLiveDVR,onMouseEnterControls:this.clearMouseInactivityTimer,onMouseLeaveControls:this.startMouseInactivityTimer,setMouseActivity:this.setMouseActivity,fullScreenHandler:this.fullScreenHandler})}),b()(this,"renderReportAnIssue",()=>a.a.createElement(Lf,null)),b()(this,"renderOnboardingModal",()=>{if(!this.props.isPdfEditor&&0===this.props.classState&&(this.props.isEducator||this.props.isMultiEduClass&&this.props.isModerator))return a.a.createElement(Dp,{onSendData:this.onSendData,onChangeSlide:this.onChangeSlide,resetDrawingBoardTools:this.resetDrawingBoardTools})}),b()(this,"renderFileUploaderModal",()=>a.a.createElement(uE,{onSendData:this.onSendData,onChangeSlide:this.onChangeSlide,resetDrawingBoardTools:this.resetDrawingBoardTools})),b()(this,"renderFullScreenLoader",()=>{if(!this.props.showSplashScreen&&this.props.isLoading)return a.a.createElement(Wm.a,null)}),b()(this,"renderSubscriptionCTADetails",()=>{if(!this.props.isEducator&&this.props.subscribedUserDetails)return a.a.createElement(Ie,null)}),b()(this,"renderInactivityComponent",()=>{if(!this.props.isPdfEditor&&this.props.isEducator&&!this.props.isScreenShared&&!this.props.showSplashScreen&&10===this.props.classState&&!this.props.isMultiEduClass)return a.a.createElement(Gf.a,{fallback:null},a.a.createElement(TE,null))}),b()(this,"renderSidebar",()=>{if(!this.props.isPdfEditor)return a.a.createElement(BE,{hidden:this.props.isChatHidden||this.props.showSplashScreen||this.props.isEducator&&20==this.props.classState},this.renderDummyCameraView(),this.renderChat(),this.renderEducatorPoll())}),b()(this,"renderPdfEditor",()=>{if(this.props.isPdfEditor)return a.a.createElement(Gf.a,{fallback:null},a.a.createElement(dE,{ref:this.setPdfEditorRef,resetZoomAndTranslation:this.resetZoomAndTranslation,onReceiveData:this.onReceiveData,resetDrawingBoardTools:this.resetDrawingBoardTools}))}),b()(this,"renderReplay",()=>{if(this.props.isReplay)return a.a.createElement(Gf.a,{fallback:null},a.a.createElement(yE,{setDataJsonFromReplay:this.setDataJsonFromReplay,frameLoop:this.frameLoop,seek:this.seekReplay,onSeekStart:this.onSeekStart,startPaintingVideoOnCanvas:this.startPaintingVideoOnCanvas,shouldSeekToWatchTime:this.shouldSeekToWatchTime,setHasSeekedToWatchTime:this.setHasSeekedToWatchTime,shouldShowSplashScreen:this.shouldShowSplashScreen}))}),b()(this,"renderLive",()=>{if(this.props.isLive)return a.a.createElement(Gf.a,{fallback:null},a.a.createElement(_E,{ref:this.setLiveRef,janusWrapper:this.janusWrapper,onReceiveCanvasWrapperData:this.onReceiveCanvasWrapperData,setStateFromChildren:this.setStateFromChildren,initialiseHeaderControlsVisibilityTimeout:this.initialiseHeaderControlsVisibilityTimeout,initialiseJanusWrapper:this.initialiseJanusWrapper,startPaintingVideoOnCanvas:this.startPaintingVideoOnCanvas,sendEvent:this.sendEvent,reset:this.reset,onReceiveData:this.onReceiveData,sendStartEvents:this.sendStartEvents,onSendData:this.onSendData,setClassEndState:this.setClassEndState,onSlowLink:this.onSlowLink,addWebRTCEventData:this.state.addWebRTCEventData,getHlsLiveDuration:this.getHlsLiveDuration,playLiveVideoAutoplayFail:this.playLiveVideoAutoplayFail,onApplyTheme:this.onApplyTheme,videoStreamManager:this.videoStreamManager,socketManager:this.socketManager,onAddSlide:this.addSlideUtil,resetCanvasZoom:this.resetCanvasZoom,resetCanvasTranslation:this.resetCanvasTranslation,isEducatorSlideViewActive:this.props.isEducatorSlideViewActive,shouldShowSplashScreen:this.shouldShowSplashScreen,fullScreenHandler:this.fullScreenHandler,setDefaultStartEvents:this.setDefaultStartEvents,stopScreenShareHandler:this.stopScreenShareHandler,isScreenShared:this.props.isScreenShared}))}),this.baseWidth=360,this.canvasWidth=this.baseWidth,this.canvasHeight=720,this.canDoThingsBeforeSeconds=600,this.animationRequestId=null,this.state={elapsedTime:0,timeElapsed:0,isJanusClass:!0,isWebmSupported:!1,isSideBarOnlyDisabled:!1,showScreenModeSelector:!1,canvasContainerDim:{width:0,height:0},aspectRatioContainerDim:{width:0,height:0}},this.startEvents=[],this.sideBarProportion=.25,this.setUpVideoAnalytics(),this.fullscreen=Object(f.i)(),this.isSlowLinkNotified=!1,this.videoStreamManager=new R.a,this.storeEventsInTempArr=!0,this.tempDataJson=[],this.slowLinkCounter=0,this.poorConnectionCounter=0,this.slowLinkResetTimer=void 0,this.poorConnectionTimer=void 0,this.hlsDurationTimer=void 0,this.fetchingHlsFile=!1,window.app=this,this.randomCountCount=0,window.webRTCEvents=[],window.webRTCTemp={},window.dataEvents=[],window.fragments=[],window.keepAliveTime=30,this.splashScreenMinTimeoutCompleted=!1,this.dataJson=[],this.playIndex=0,this.streamCanvas=null,this.streamCanvasContext=null,this.cameraCanvasContext=null,this.mainVideo=null,this.cam_height=320,this.cam_width=320,this.isControlsVisibilityTimeoutEnabled=!0,this.hasSeekedToWatchTime=!1,this.lastTabHiddenTime=null,this.openClassSettingsModalTimeout=null,this.onSplashScreenRemovalTimeout=null,this.mouseInactivityTimer=null,this.videoPlayTimer=null,this.aspectRatioRef=null,this.localVideoStreamBeforeStart=null,this.pdfEditor=null}UNSAFE_componentWillMount(){this.focusIframe(),this.initPreProcessor(this.props.isLive||this.props.isPdfEditor,this.props.version,this.props.isPdfEditor,this.props.isPdfEditor?H.vb.LIGHT_DEFAULT:H.vb.DARK_DEFAULT);let e=this.props.playbackSpeed;if(this.props.setShowSplashScreen(!this.props.isPdfEditor&&this.props.shouldAutoplay),this.props.setShouldPlayReplay(this.props.shouldAutoplay),!this.props.isLocal&&!this.checkForUnacademyDomain())return;let t=this.props.userId;this.setVersion(),this.setDefaultPenStrokeSize(),this.props.isReplay&&this.initialiseReplay(t,e)}componentDidMount(){this.timeUserJoined=(new Date).getTime(),this.unMountSplashScreen(),this.setConnectingToClassStatus(),this.props.isPdfEditor||Nd.a.shared.setAccessTokenAndApiHost(this.props.accessToken,this.props.apiHost),this.handleSplashScreenChange(!0),this.mounted=!0,Object(f.e)(),this.initialiseJoinClassTimeout(),this.addFullScreenListener(),Uf.a.addListener(this.handleVisibilityChange),this.startProfile(CE),this.initialiseEventsUtils(),this.startProfile(vE)}setConnectingToClassStatus(){this.props.isEducator&&this.props.isModerator||this.props.isPdfEditor||(this.props.setErrorStatus(H.K.CONNECTION_STATE),this.props.setConnectionState(H.Pb.CONNECTING))}UNSAFE_componentWillReceiveProps(e){e.lessonData!=this.props.lessonData&&this.onLessonData()}componentDidUpdate(e){e.educatorFilesUploading!==this.props.educatorFilesUploading&&(this.props.educatorFilesUploading?this.props.setLoading(!0):this.props.setLoading(!1)),!this.props.isDataRestoring&&e.isDataRestoring&&this.seekToCurrentTime(),this.props.selectedGreenColor!=e.selectedGreenColor&&this.props.useGreenScreen&&this.startPaintingVideoOnCanvas(),this.props.useGreenScreen!=e.useGreenScreen&&(10==this.props.classState&&(this.props.isEducator&&this.janusWrapper&&(this.janusWrapper.setGreenScreen(this.props.useGreenScreen),this.janusWrapper.reconnect("GREEN_SCREEN_SWITCH",null,!0,!1)),this.stopPaintingVideoOnCanvas(),this.props.useGreenScreen&&this.startPaintingVideoOnCanvas()),this.props.isReplay&&this.recordedVideo&&(this.stopPaintingVideoOnCanvas(),this.props.useGreenScreen&&this.startPaintingVideoOnCanvas())),(this.props.wasGoLiveClickedbyGuest&&this.props.isModerator||10===this.props.classState&&this.props.isEducator&&this.localVideoStreamBeforeStart)&&(Object(f.Db)(this.localVideoStreamBeforeStart),this.localVideoStreamBeforeStart=null),this.props.useRoundVideo==e.useRoundVideo&&this.props.useGreenScreen==e.useGreenScreen||(0===this.props.classState||this.props.isModerator&&this.props.isMultiEduClass&&!this.props.wasGoLiveClickedbyGuest)&&this.startMainVideo(),this.props.educatorBoxAlign!=e.educatorBoxAlign&&this.handleEducatorAlignChange(this.props.educatorBoxAlign),this.props.cameraDeviceId!==e.cameraDeviceId&&this.props.cameraDeviceId&&(0===this.props.classState||this.props.isModerator&&this.props.isMultiEduClass&&!this.props.wasGoLiveClickedbyGuest)&&this.startMainVideo(),this.props.jwt&&!this.socketManager&&(this.setUpSocket(this.props.jwt,this.props.classId,this.props.userId,this.props.isEducator,this.props.isLocal),this.props.setIsSocketManagerInit(!0)),this.props.devices.length>0&&0==e.devices.length&&this.props.setDevicesFromCookies(this.props.devices),this.props.isLiveDVR!=e.isLiveDVR&&(this.props.isLiveDVR?this.onEnableHls():this.onGoLive(),this.sendEventData(vE,j.c.LIVE_DVR_SWITCH,this.props.isLiveDVR)),e.isCameraTurnedOff===this.props.isCameraTurnedOff||this.props.isReplay||this.props.isLivePaused||this.switchCameraStream(this.props.isCameraTurnedOff),e.cameraDeviceId!=this.props.cameraDeviceId&&e.cameraDeviceId&&this.onCameraChange(this.props.cameraDeviceId),e.microphoneDeviceId!=this.props.microphoneDeviceId&&e.microphoneDeviceId&&this.onMicrophoneChange(this.props.microphoneDeviceId),e.hasDataSeeked!=this.props.hasDataSeeked&&this.props.hasDataSeeked&&(this.props.isReplay?(SE.start(),this.afterReplaySeeked()):this.afterLiveSeeked()),e.seekTime!=this.props.seekTime&&(this.props.isReplay?(j.f.sendData(j.c.USER_SEEK,"From=".concat(0|e.seekTime,";To=").concat(0|this.props.seekTime,";").concat(0|this.props.videoDuration)),this.seekReplay(this.props.seekTime)):this.onSeekLive(this.props.seekTime)),this.props.isLiveHistoryFetched&&this.canvasWrapper&&this.canvasWrapper.setDataProcessed(!0),e.isVideoPaused!=this.props.isVideoPaused&&(this.sendVideoPlayEvent(this.props.isVideoPaused),this.handleMouseActivityOnVideoPause(this.props.isVideoPaused)),e.isLivePaused==this.props.isLivePaused||this.props.isLiveDVR||(this.props.isLivePaused?this.onLivePause():this.onLiveResume(),this.handleMouseActivityOnVideoPause(this.props.isLivePaused)),e.showSplashScreen!=this.props.showSplashScreen&&this.handleSplashScreenChange(this.props.showSplashScreen),this.props.isReplay&&this.props.videoDuration&&!e.videoDuration&&this.onLoadReplayVideo(),!e.isFirstSlideApiDone&&this.props.isFirstSlideApiDone&&this.addSlideUtil(!0,this.props.firstSlideData,!0),!e.isTokenApiDone&&this.props.isTokenApiDone&&this.setUpFullStory(),e.isClassPaused!==this.props.isClassPaused&&this.props.isEducator&&(this.props.isClassPaused?this.janusWrapper&&this.janusWrapper.pauseVideoAndAudio(!0,!0,!0):this.janusWrapper&&this.janusWrapper.pauseVideoAndAudio(!1,!1,this.props.isEducatorOnMute)),e.errorStatus!=this.props.errorStatus&&this.props.errorStatus==H.K.LEARNER_KICKED&&this.disconnectClass()}componentWillUnmount(){this.mounted=!1,this.clearAllTimers(),this.sendEvent(he.a.PAUSE),this.sendSlowLinkEvent&&this.sendSlowLinkEvent.cancel(),this.janusWrapper&&(this.janusWrapper.disconectJanus(),this.janusWrapper.removeAllListeners(),this.janusWrapper.dispose()),this.socketManager&&(this.socketManager.unSubscribe(),this.socketManager.close()),this.removeFullScreenListener(),this.props.resetStore(),j.f.dispose(),this.recordedVideo&&(this.recordedVideo=null),Uf.a.removeListener(this.handleVisibilityChange),this.localVideoStreamBeforeStart&&Object(f.Db)(this.localVideoStreamBeforeStart),this.endProfile(CE),this.endProfile(vE),Sn.a.shared.cleanup(),this.successFullWatchTimeCalculator&&this.successFullWatchTimeCalculator.cleanUp()}unMountSplashScreen(){const e=this.props.isEducator?3e3:5e3;clearTimeout(this.unMountSplashScreenTimeout),this.splashScreenMinTimeoutCompleted=!1,this.unMountSplashScreenTimeout=setTimeout(()=>{this.splashScreenMinTimeoutCompleted=!0;this.shouldShowSplashScreen()||this.props.setShowSplashScreen(!1)},e)}setUpSocket(e,t,i,n,a){this.socketManager=new D.a(e,t,i,n,a)}setUpVideoAnalytics(){this.localClassStartTime=0,this.time=0,this.totalRunTime=0}changeBulkStateToNormal(){this.props.unSetBulkUpdate()}getEducatorAlignEvent(e,t){return{plugin:H.Ab.Control,data:{e:H.L.EDUCATOR_ALIGN,v:{l:e,t:t}}}}isSideCurtainActive(e){return e.isReportBlockCurtainOpen||e.isReportCurtainOpened||e.isLearnerSlideModeActive||this.props.isPdfEditor}getDrawingAreaWidth(){return!this.props.isPdfEditor&&(this.props.isChatHidden||this.props.showSplashScreen||this.props.isEducator&&20===this.props.classState)?this.isSideCurtainActive(this.props)?"80%":"100%":"75%"}getLiveDvrUrl(e=null){e||(e="".concat(this.props.room,".m3u8"));const t=k.a.getURLs().PROXY_URL;return"".concat(t,"/").concat(this.props.server,"/hls/").concat(e)}parseHlsFile(e,t){fetch(e).then(e=>e.status>=400?Promise.reject():e.text()).then(e=>{var i=new RE.Parser;i.push(e),i.end();let n=0;this.hlsDurationTimer&&clearTimeout(this.hlsDurationTimer),i.manifest.segments.length>0?(i.manifest.segments.map(e=>{n+=e.duration}),t(n)):i.manifest.playlists.length>0&&(this.fetchingHlsFile=!1,this.getHlsLiveDuration(i.manifest.playlists[0].uri))}).catch(e=>{this.hlsDurationTimer=setTimeout(()=>{this.fetchingHlsFile=!1,this.getHlsLiveDuration()},5e3)})}setPoorConnectionState(){clearTimeout(this.poorConnectionTimer),this.poorConnectionTimer=setTimeout(()=>{this.props.unsetInfoBannerStatus()},1e4),this.props.setInfoBannerStatus(H.Z.POOR_CONNECTION,!1)}sendCameraToggleEvent(e,t){if(window.webRTCEvents){let i={cameraToggle:e,type:"SUBSCRIBER",automatically:t,platform:"web"};this.setState({addWebRTCEventData:i})}}sendDVRSwitchEvent(e,t=!1){if(window.webRTCEvents){let i={isLiveDVR:e,type:"SUBSCRIBER",automatically:t,platform:"web"};this.setState({addWebRTCEventData:i})}}renderCameraTurnedOffButton(){if(this.props.useRoundVideo||this.props.useGreenScreen)return a.a.createElement(Cf,{toggleCameraStream:this.toggleCameraStream,enter:this.props.isCameraTurnedOff})}renderEducatorPoll(){if(this.props.isEducator)return a.a.createElement(jm,{socketManager:this.socketManager,onSendPollData:this.onSendPollData})}renderChat(){return a.a.createElement(Gf.a,{fallback:null},a.a.createElement(IE,{ref:this.setChatRef,recordedVideo:this.recordedVideo,hasSeeked:this.state.hasSeeked,shouldSync:this.props.isReplay&&this.props.shouldSyncChat,educatorId:this.props.lessonData&&this.props.lessonData.author.uid,lessonId:this.props.lessonData&&this.props.lessonData.uid,onSendData:this.onSendData,bulkUpdate:this.props.bulkUpdate,handleAnswerQuestion:this.handleAnswerQuestion,shouldAutoplay:this.props.shouldAutoplay,showSplashScreen:this.props.showSplashScreen,socketManager:this.socketManager,setClassEndState:this.setClassEndState}))}renderStatus(){const e={name:this.props.userName,avatar:this.props.avatar,userId:this.props.userId};return a.a.createElement(ei,{onReset:this.reset,status:this.props.errorStatus,connectionState:this.props.connectionState,secondsBeforeLive:this.props.lessonData&&this.props.lessonData.secondsBeforeLive,role:this.props.role,lessonData:this.props.lessonData,showSplashScreen:this.props.showSplashScreen,user:e,socketManager:this.socketManager,show:this.props.isError&&!this.props.showSplashScreen,handleStopSharing:this.stopScreenShareHandler})}renderCloudPollCard(){if(!this.props.isPdfEditor&&this.props.isEducator&&10===this.props.classState&&!this.props.showSplashScreen)return a.a.createElement(bE,{activeSlide:this.props.activeSlide})}renderPoll(){return a.a.createElement(Gf.a,{fallback:null},a.a.createElement(OE,{ref:this.setPollRef,socketManager:this.socketManager}))}renderDrawingBoardTools(){if(this.props.isEducator)return a.a.createElement(rh,{onChangeDrawingState:this.onChangeDrawingState,onAddSlide:this.addSlideUtil,onSendData:this.onSendData,onReceiveControlWrapperData:this.onReceiveControlWrapperData,resetCanvasTranslation:this.resetCanvasTranslation,socketManager:this.socketManager,setCanvasZoomUtil:this.setCanvasZoomUtil,onChangeSlide:this.onChangeSlide,isHidden:this.props.showSplashScreen||20==this.props.classState,onSendPollData:this.onSendPollData,fullScreenHandler:this.fullScreenHandler,savePdfEditorData:this.savePdfEditorData,onSendCloudPollData:this.onSendCloudPollData})}renderLessonCardEducator(){if(!this.props.isPdfEditor&&this.props.isEducator)return a.a.createElement($n,{lessonData:this.props.lessonData,isHidden:!this.props.showSplashScreen&&20!=this.props.classState})}renderDrawingBoardAdditionalTools(){return a.a.createElement(vi,{onReceiveCanvasWrapperData:this.onReceiveCanvasWrapperData,onChangeDrawingState:this.onChangeDrawingState,onSendData:this.onSendData})}renderReportBlockCurtain(){return a.a.createElement(_g,{socketManager:this.socketManager})}renderLearnerSlideModeControls(){if(this.props.isReplay&&this.props.isLearnerSlideModeActive||this.props.isPdfEditor)return a.a.createElement(Gf.a,{fallback:null},a.a.createElement(AE,{onChangeSlide:this.onChangeSlide}))}renderSlideEditView(){if(this.props.isPdfEditor&&this.props.canEditPdf)return a.a.createElement(Gf.a,{fallback:null},a.a.createElement(PE,null))}renderPlayButton(){if(this.props.showPlayButton&&!this.props.isLearnerSlideModeActive)return a.a.createElement(uf,{onClickHandler:this.playLiveVideoAutoplayFail})}render(){return a.a.createElement(n.Fragment,null,a.a.createElement(DE,{tabIndex:"0"},a.a.createElement(NE,null,this.renderFullScreenLoader(),a.a.createElement(jE,{id:"drawing-area",drawingAreaWidth:this.getDrawingAreaWidth(),hideCursor:!this.props.isMouseHoverActive&&!this.props.isEducator,isEducator:this.props.isEducator,onMouseEnter:this.setMouseActivity,onMouseLeave:this.unSetMouseActivity,onMouseMove:this.setMouseActivity,onTouchStart:this.setMouseActivity},a.a.createElement(kE,{isEducator:this.props.isEducator,isPdfEditor:this.props.isPdfEditor,canEditPdf:this.props.canEditPdf,isGuestEducator:!this.props.isEducator&&this.props.isMultiEduClass&&this.props.isModerator},this.renderDrawingAreaLeft(),a.a.createElement(LE,null,this.renderDrawingAreaTop(),this.renderMainCanvas(),this.renderDrawingAreaBottom()),this.renderPdfEditor(),this.renderReplay(),this.renderLive())),this.renderOnboardingModal(),this.renderFileUploaderModal(),this.renderGlobalLeaderboard(),this.renderCameraContainer(),this.renderSidebar(),this.renderReportBlockCurtain(),this.renderReportAnIssue(),this.renderLearnerSlideModeControls(),this.renderSlideEditView(),this.renderInactivityComponent(),a.a.createElement(xe,null))),a.a.createElement(A,null))}}const qE={setDrawingModeInStore:L.e,setPenStrokeSize:L.i,setColorChange:L.c,setEraserStrokeSize:L.h,setIsMouseHoverActive:B.j,markLessonAsCompleted:ye.h,setErrorStatus:ye.I,setClassVersion:ye.v,setCameraDeviceId:ye.n,setMicrophoneDeviceId:ye.Y,setShouldPlayReplay:ye.hb,setShowSplashScreen:ye.nb,setEndClass:ye.E,setActiveSlide:we.a,setSeekedData:_e.d,resetSeekData:_e.a,unSetBulkUpdate:we.f,setClassStartTime:ye.t,setChatOffsetTime:ye.q,setCameraRatio:ye.o,setUseGreenScreen:ye.xb,setEducatorBoxAlign:ye.B,setIsCameraTurnedOff:ye.O,setIsSocketManagerInit:ye.V,setShowPlayButton:ye.lb,setLiveDVR:_e.c,setInfoBannerStatus:ye.N,unsetInfoBannerStatus:ye.Cb,setDevicesFromCookies:ye.z,setIsChatHidden:B.f,setCanvasZoom:L.b,setCurrentCanvasZoom:L.d,setIsJanusWrapperInit:ye.S,setMute:B.s,setIsVideoPaused:B.p,setIsLivePaused:B.i,setIsSeekStarted:B.n,setHasDataSeeked:we.c,setPinnedMsg:Oe.y,resetStore:_e.b,setClassSettingsModalOpen:ye.s,setFullScreen:B.d,setScreenSharing:ye.eb,setRoundVideoScreen:ye.db,setIsCanvasHovered:ye.P,setVideoPlayTiming:B.y,setConnectionState:ye.w,setLoading:ye.X,getTopologyLevelData:Te.c};var YE=Object(C.c)(e=>({isLivePaused:e.getIn(["videoPlayControls","isLivePaused"]),isVideoPaused:e.getIn(["videoPlayControls","isVideoPaused"]),isChatHidden:e.getIn(["videoPlayControls","isChatHidden"]),isMouseHoverActive:e.getIn(["videoPlayControls","isMouseHoverActive"]),seekTime:e.getIn(["videoPlayControls","seekTime"]),isSeeking:e.getIn(["videoPlayControls","isSeeking"]),lessonData:e.getIn(["app","lessonData"]),jwt:e.getIn(["app","jwt"]),shouldAutoplay:e.getIn(["app","shouldAutoplay"]),isLocal:e.getIn(["app","isLocal"]),isReplay:e.getIn(["app","isReplay"]),isLive:e.getIn(["app","isLive"]),isPdfEditor:e.getIn(["pdfEditor","isPdfEditor"]),canEditPdf:e.getIn(["pdfEditor","canEditPdf"]),version:e.getIn(["app","version"]),classId:e.getIn(["app","classId"]),chatId:e.getIn(["app","chatId"]),userId:e.getIn(["app","userId"]),isLoading:e.getIn(["app","isLoading"]),role:e.getIn(["app","role"]),devices:e.getIn(["app","devices"]),isEducator:e.getIn(["app","isEducator"]),room:e.getIn(["app","room"]),server:e.getIn(["app","server"]),avatar:e.getIn(["app","avatar"]),userName:e.getIn(["app","userName"]),isJanusClass:e.getIn(["app","isJanusClass"]),isHlsClass:e.getIn(["app","isHlsClass"]),isCanvasModeDisabled:e.getIn(["app","isCanvasModeDisabled"]),useGreenScreen:e.getIn(["app","useGreenScreen"]),useRoundVideo:e.getIn(["app","useRoundVideo"]),isError:e.getIn(["app","isError"]),showPlayButton:e.getIn(["app","showPlayButton"]),cameraDeviceId:e.getIn(["app","cameraDeviceId"]),showSplashScreen:e.getIn(["app","showSplashScreen"]),isTokenApiDone:e.getIn(["app","isTokenApiDone"]),classState:e.getIn(["app","classState"]),errorStatus:e.getIn(["app","errorStatus"]),connectionState:e.getIn(["app","connectionState"]),selectedGreenColor:e.getIn(["app","selectedGreenColor"]),cameraRatio:e.getIn(["app","cameraRatio"]),educatorBoxAlign:e.getIn(["app","educatorBoxAlign"]),classStartTime:e.getIn(["app","classStartTime"]),slides:e.getIn(["canvas","slides"]),activeSlide:e.getIn(["canvas","activeSlide"]),isDataRestoring:e.getIn(["canvas","isDataRestoring"]),bulkUpdate:e.getIn(["canvas","bulkUpdate"]),hasDataSeeked:e.getIn(["canvas","hasDataSeeked"]),videoDuration:e.getIn(["videoPlayControls","videoDuration"]),isLearnerSlideModeActive:e.getIn(["videoPlayControls","isLearnerSlideModeActive"]),isCameraTurnedOff:e.getIn(["app","isCameraTurnedOff"]),isReplayDataProcessed:e.getIn(["app","isReplayDataProcessed"]),isLiveHistoryFetched:e.getIn(["app","isLiveHistoryFetched"]),watchTime:e.getIn(["app","watchTime"]),isLiveDVR:e.getIn(["videoPlayControls","isLiveDVR"]),theme:e.getIn(["drawingBoardControls","theme"]),areAnnotationsOff:e.getIn(["videoPlayControls","areAnnotationsOffSlideMode"]),learnerSlideModeActiveSlide:e.getIn(["canvas","learnerSlideModeActiveSlide"]),isEducatorSlideViewActive:e.getIn(["drawingBoardControls","isEducatorSlideViewActive"]),showGlobalLeaderboard:e.getIn(["poll","showGlobalLeaderboard"]),isZoomEnabled:e.getIn(["app","isZoomEnabled"]),microphoneDeviceId:e.getIn(["app","microphoneDeviceId"]),isJanusWrapperInit:e.getIn(["app","isJanusWrapperInit"]),classStartTime:e.getIn(["app","classStartTime"]),hlsLiveUrl:e.getIn(["app","hlsLiveUrl"]),cameraTurnedOffAutomatically:e.getIn(["app","cameraTurnedOffAutomatically"]),isMultiEduClass:e.getIn(["app","isMultiEduClass"]),isFirstSlideApiDone:e.getIn(["app","isFirstSlideApiDone"]),firstSlideData:e.getIn(["app","firstSlideData"]),isScreenShared:e.getIn(["app","isScreenShared"]),subscribedUserDetails:e.getIn(["subscription","subscribedUserDetails"]),isClassPaused:e.getIn(["app","isClassPaused"]),hasReplayEnded:e.getIn(["app","hasReplayEnded"]),isFeedbackShownOnBackClick:e.getIn(["feedback","isFeedbackShownOnBackClick"]),isEducatorOnMute:e.getIn(["app","isEducatorOnMute"]),isModerator:e.getIn(["app","isModerator"]),wasGoLiveClickedbyGuest:e.getIn(["app","wasGoLiveClickedbyGuest"]),isReportBlockCurtainOpen:e.getIn(["chat","isReportBlockCurtainOpen"]),isReportCurtainOpened:e.getIn(["videoPlayControls","isReportCurtainOpened"]),slideBgImage:e.getIn(["drawingBoardControls","slideBgImage"]),educatorFilesUploading:e.getIn(["app","educatorFilesUploading"]),accessToken:e.getIn(["app","accessToken"]),apiHost:e.getIn(["app","apiHost"]),isFileUploaderModalVisible:e.getIn(["app","isFileUploaderModalVisible"])}),qE)(zE),XE={firefox:i("ddCN"),safari:i("PXPW"),chrome:i("PfG6"),errorInfo:i("xj7l")},KE=S.d.div.withConfig({displayName:"BrowserCompatibilty__Section",componentId:"sc-1nvu92o-0"})([""]),ZE=S.d.div.withConfig({displayName:"BrowserCompatibilty__BrowserDetails",componentId:"sc-1nvu92o-1"})([""]),JE=S.d.div.withConfig({displayName:"BrowserCompatibilty__Borwser",componentId:"sc-1nvu92o-2"})(["display:flex;align-items:center;justify-content:space-between;margin-bottom:",";"],P.c.SPACING_4B),QE=S.d.div.withConfig({displayName:"BrowserCompatibilty__BrowserImageWrapper",componentId:"sc-1nvu92o-3"})(["display:flex;align-items:center;"]),$E=S.d.div.withConfig({displayName:"BrowserCompatibilty__DisclaimerWrapper",componentId:"sc-1nvu92o-4"})(["display:flex;margin-top:",";"],P.c.SPACING_4B),eb=S.d.div.withConfig({displayName:"BrowserCompatibilty__DisclaimerText",componentId:"sc-1nvu92o-5"})(["color:",";margin-left:",";"],(function(e){return e.theme.TEXT_PRIMARY}),P.c.SPACING_2B),tb=S.d.b.withConfig({displayName:"BrowserCompatibilty__B",componentId:"sc-1nvu92o-6"})(["color:",";"],(function(e){return e.theme.TEXT_PRIMARY})),ib=S.d.a.withConfig({displayName:"BrowserCompatibilty__Link",componentId:"sc-1nvu92o-7"})(["color:",";"],(function(e){return e.theme.BLUE})),nb=S.d.div.withConfig({displayName:"BrowserCompatibilty__Wrapper",componentId:"sc-1nvu92o-8"})(["padding:30px;"]),ab=S.d.div.withConfig({displayName:"BrowserCompatibilty__IncompatibleTextWrapper",componentId:"sc-1nvu92o-9"})(["margin-top:",";margin-left:",";"],P.c.SPACING_4B,P.c.SPACING_4B),ob=S.d.img.withConfig({displayName:"BrowserCompatibilty__StyledImage",componentId:"sc-1nvu92o-10"})(["margin-right:10px;width:36px;height:36px;"]),rb=a.a.memo((function(e){var t=e.isOpen,i=(e.onCancel,e.theme),n=Object(f.p)(),o=n.version,r=n.name;return a.a.createElement(ee.r,{open:t,paperWidth:"545px",width:"100%",paperHeight:"auto",animate:"slide",disableEscapeKeyDown:!1},a.a.createElement(nb,null,a.a.createElement(KE,null,a.a.createElement(ee.i,{margin:"0 0 ".concat(P.c.SPACING_4B," 0")},"Browser"),a.a.createElement(JE,null,a.a.createElement(QE,null,function(){if(XE[r])return a.a.createElement(ob,{src:XE[r]})}(),a.a.createElement(ZE,null,a.a.createElement(ee.j,null,"Version"),a.a.createElement(ee.j,null,r," ",o))),a.a.createElement(ab,null,a.a.createElement(ee.j,{color:i.RED},"Incompatible")))),a.a.createElement(ee.f,null),a.a.createElement(KE,null,a.a.createElement($E,null,a.a.createElement(ob,{src:XE.errorInfo}),a.a.createElement(eb,null,a.a.createElement(tb,null,"Incompatible browser.")," Please use one of"," ",a.a.createElement(ib,{href:"https://www.google.co.in/chrome/",target:"_blank"},a.a.createElement("b",null,"Google Chrome's")," latest versions")," ","(> 75) to continue this class.")))))}));rb.propTypes={isOpen:U.a.bool.isRequired,onCancel:U.a.func.isRequired},rb.defaultProps={isOpen:!1,onCancel:function(){}};var sb=Object(S.f)(rb),lb=i("aV5g"),cb=i("fmzM"),db=i("6YgN");const pb=S.d.div.withConfig({displayName:"DriveUploaderView__Wrapper",componentId:"sc-1s3aan4-0"})(["width:100vw;height:100vh;"]);var ub=({showEmptyUploadState:e=!0})=>{const t=Object(C.e)(e=>e.getIn(["driveUploader","filesToUpload"])),i=Object(C.e)(e=>e.getIn(["driveUploader","apiHost"])),o=Object(C.e)(e=>e.getIn(["driveUploader","accessToken"])),r=Object(C.e)(e=>e.getIn(["driveUploader","parentUid"])),s=Object(n.useRef)(null),l=Object(n.useState)(!1),c=m()(l,2),d=c[0],p=c[1],u=Object(C.d)();Object(n.useEffect)(()=>(Nd.a.shared.setAccessTokenAndApiHost(o,i),p(!0),s.current=[],()=>{p(!1),u(Object(_e.b)())}),[]);const h=Object(n.useCallback)((e,t)=>{var i;t.fileInfo&&(null===(i=s.current)||void 0===i||i.push(t.fileInfo));he.b.dispatchEvent(he.a.UPLOAD_COMPLETE,{isPartial:!0})},[]),g=Object(n.useCallback)(()=>{he.b.dispatchEvent(he.a.CLOSE_IFRAME,{files:s.current})},[]);return d?a.a.createElement(pb,null,a.a.createElement(ee.r,{open:!0,disableEnforceFocus:!0,marginBottom:"48px",paperWidth:"500px",paperHeight:"fit-content",contentPositionVertical:"flex-end",animation:"slide",onClose:()=>{},width:"100%",useDefaultBackDrop:!0},a.a.createElement(ep,{filesToUpload:t,onFileUploadComplete:h,onAllFilesUploadComplete:g,parentUid:r,showEmptyUploadState:e,listMaxHeight:242}))):null};const hb=Object(Gf.b)(()=>Promise.all([i.e(34),i.e(21)]).then(i.bind(null,"Krhw"))),mb=new db.a;var gb=a.a.memo(()=>{const e=Object(n.useState)(!0),t=m()(e,2),i=t[0],o=t[1],r=Object(n.useState)(!1),s=m()(r,2),l=s[0],c=s[1],p=Object(n.useState)(!1),h=m()(p,2),E=h[0],b=h[1],v=Object(n.useState)(!1),I=m()(v,2),y=I[0],_=I[1],O=Object(n.useRef)(),w=Object(C.e)(e=>e.getIn(["app","userId"])),T=Object(C.e)(e=>e.getIn(["app","lessonData"])),A=Object(C.e)(e=>e.getIn(["testEvaluation","evaluationUid"])),R=Object(C.e)(e=>e.getIn(["testEvaluation","isTestEvaluated"])),D=Object(C.e)(e=>e.getIn(["testEvaluation","shouldGeneratePdf"])),N=Object(C.e)(e=>e.getIn(["app","isDarkMode"])),k=Object(C.e)(e=>e.getIn(["app","isEducator"])),L=Object(C.e)(e=>e.getIn(["app","isReplay"])),M=Object(C.e)(e=>e.getIn(["app","version"])),G=Object(C.e)(e=>e.getIn(["app","classId"])),U=Object(C.e)(e=>e.getIn(["videoPlayControls","isBackClicked"])),V=Object(C.e)(e=>e.getIn(["videoPlayControls","backClickEventExtras"])),F=Object(C.e)(e=>e.getIn(["app","jwt"])),W=Object(C.e)(e=>e.getIn(["app","isMultiEduClass"])),z=Object(C.e)(e=>e.getIn(["app","isModerator"])),q=Object(C.e)(e=>e.getIn(["pdfEditor","isPdfEditor"])),Y=Object(C.e)(e=>e.getIn(["driveUploader","isDriveUploader"])),X=Object(C.e)(e=>e.getIn(["app","isUserSubscribedToGoal"])),K=!k&&W&&z,Z=Object(C.d)();Object(n.useEffect)(()=>(Object(f.jb)()||o(!1),Object(f.fb)("local")?Object(f.fb)("testEval")?Z(Object(lb.c)()):Object(f.fb)("pdfEditor")?Z(Object(Te.q)()):Object(f.fb)("driveUploader")?Z(Object(cb.b)()):Object(f.fb)("replay")?Z(Object(ye.vb)()):Z(Object(ye.ub)()):he.b.dispatchEvent(he.a.LIVE_CLASS_READY),Q(),()=>{he.b.remove($),c(!1),b(!1),_(!1),clearTimeout(O.current)}),[]),Object(n.useEffect)(()=>{u()(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J({userId:w,classId:G,isEducator:!!k,playerVersion:isNaN(+M)?-1:+M,deviceType:"Web",classType:L?"Recorded":"Live",plusUser:!!X});case 2:F&&j.f.setToken(F);case 3:case"end":return e.stop()}}),e)})))(),he.b.setUpListener($,{isEducator:k,isReplay:L,classId:G})},[k,L,G,w,M]),Object(n.useEffect)(()=>{F&&j.f.setToken(F)},[F]),Object(n.useEffect)(()=>{T&&(c(!0),Q())},[T]),Object(n.useEffect)(()=>{A&&(b(!0),Z(Object(ye.x)(!1)))},[A,R,D]),Object(n.useEffect)(()=>{q&&c(!0)},[q]),Object(n.useEffect)(()=>{Y&&_(!0)},[Y]);const J=function(){var e=u()(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.f.initialize(t);case 2:if(e.sent){e.next=5;break}console.error("Event Sender initialization failed."),g.b("EVENT_SENDER_INITIALIZATION_FAILED");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=()=>{if(k){const e=mb.getItem("MODE");Z(e?Object(ye.x)(e===H.r):Object(ye.x)(!0))}},$=Object(n.useCallback)(e=>{if(e&&e.data&&(e.data.lessonData&&(c(!1),Z(Object(ye.tb)(e.data))),e.data.evaluationData&&(b(!1),Z(Object(lb.b)(e.data.evaluationData))),e.data&&e.data.isCloud&&(e.data.mode===H.z.UPLOAD&&e.data.files?(_(!1),Z(Object(cb.a)(e.data))):(e.data.mode===H.z.EDIT&&e.data.fileInfo||e.data.mode===H.z.VIEW&&e.data.fileInfo)&&(c(!1),Z(Object(Te.p)(e.data)))),e.data.lessonData&&e.data.isDarkModeOn&&e.data.lessonData.role===H.p.TYPE_LEARNER)){const t=JSON.parse(e.data.isDarkModeOn);Z(Object(ye.x)(t))}e.data&&e.data.iframeClosed&&(O.current=setTimeout(()=>{c(!1),b(!1),_(!1),x.b.cleanup()},300))},[]);Object(n.useEffect)(()=>{U&&ee()},[U]);const ee=Object(n.useCallback)(()=>{!k&&!K||q?he.b.dispatchEvent(he.a.CLOSE_IFRAME,V):window.top.location.href="https://unacademy.com/educator",Z(Object(B.e)(!1,null))},[k,K,q,V]),te=Object(n.useCallback)(e=>{he.b.dispatchEvent(he.a.EVALUATION_DONE,{pdfPublicUrl:e}),b(!1)},[]),ie=()=>{o(!0)};return a.a.createElement(S.a,{theme:N?P.a:P.b},i?l?a.a.createElement(YE,{handleBackIcon:ee}):E?a.a.createElement(n.Suspense,{fallback:null},a.a.createElement(hb,{markEvaluationDone:te})):y?a.a.createElement(n.Suspense,{fallback:null},a.a.createElement(ub,{showEmptyUploadState:!1})):a.a.createElement("div",null):a.a.createElement(sb,{isOpen:!i,shouldCloseOnOverlayClick:!1,onCancel:ie}))}),fb=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Eb(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var bb=i("te6C");i("onF7"),i("h4/o"),i("z1Y/"),i("0mD5");const Cb={release:"3145",integrations:[new l.a({iteratee:e=>(e.filename=e.filename.replace(/^.+?[^\/:](?=[?\/]|$)/,"~/build"),e.filename=e.filename.replace("/liveweb/v".concat("3145"),""),e)})],dsn:"https://29ffa28a08314da792f897f68f7cfdda@errors2.unacademy.com/5",environment:"production"};s.a(Cb);const vb=Object(bb.a)();r.a.render(a.a.createElement(C.a,{store:vb},a.a.createElement(gb,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat(".","/service-worker.js");fb?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Eb(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Eb(e)}))}}()},tn5L:function(e,t,i){"use strict";var n=i("q1tI"),a=i.n(n),o=i("/MKj"),r=i("vOnD"),s=i("WlAH"),l=i("XyO8"),c=i("0dbe"),d=i("ri1g"),p=i("8ezB");const u=r.d.div.withConfig({displayName:"LiveSupportTouchPoint__Wrapper",componentId:"sc-216i37-0"})(["display:flex;background:",";border:1px solid ",";box-sizing:border-box;border-radius:4px;align-items:center;height:24px;cursor:pointer;position:absolute;top:32px;right:24px;width:104px;justify-content:center;align-items:center;opacity:",";pointer-events:",";"],({theme:e})=>e.BG_MAIN,({theme:e})=>e.BORDER,({disabled:e})=>e?"0.5":"1",({disabled:e})=>e?"none":"auto"),h=Object(r.d)(l.l).withConfig({displayName:"LiveSupportTouchPoint__StyledH6",componentId:"sc-216i37-1"})(["color:",";margin-left:4px;text-transform:uppercase;font-weight:",";line-height:",";"],({theme:e})=>e.BLUE,p.d.BOLD,p.d.LINE_HEIGHT),m=a.a.memo(({})=>{const e=Object(o.e)(e=>e.getIn(["app","accessToken"])),t=Object(o.e)(e=>e.getIn(["app","classId"])),i=Object(o.e)(e=>e.getIn(["app","apiHost"])),n=Object(o.e)(e=>e.getIn(["app","isLiveSupportTouchpointDisabled"])),r=Object(o.d)(),l="https://unacademy.com/educator/live/".concat(t);return a.a.createElement(u,{onClick:t=>{r(Object(d.a)(i,e,l))},disabled:n},a.a.createElement(c.V,null),a.a.createElement(h,null,s.db.BUTTON_LABEL))});t.a=m},"uLC+":function(e,t,i){e.exports=i.p+"static/media/eraser-small.8d411332.svg"},vGJw:function(e,t,i){"use strict";var n=i("J4zp"),a=i.n(n),o=i("q1tI"),r=i.n(o),s=i("vOnD"),l=i("XyO8"),c=i("8ezB"),d=i("0dbe");const p=s.d.div.withConfig({displayName:"SlideData__Container",componentId:"sc-18lmg55-0"})(["position:absolute;display:flex;flex-direction:column;justify-content:flex-end;height:100%;width:100%;pointer-events:none;"]),u=s.d.div.withConfig({displayName:"SlideData__DataContainer",componentId:"sc-18lmg55-1"})(["display:flex;justify-content:space-between;width:100%;margin-bottom:",";"],c.c.SPACING_2B),h=s.d.div.withConfig({displayName:"SlideData__DataContainerLeft",componentId:"sc-18lmg55-2"})(["display:flex;overflow:hidden;"]),m=s.d.div.withConfig({displayName:"SlideData__DataContainerRight",componentId:"sc-18lmg55-3"})(["display:flex;margin-left:",";"],c.c.SPACING_2B),g=s.d.div.withConfig({displayName:"SlideData__EditIconContainer",componentId:"sc-18lmg55-4"})(["display:flex;align-items:center;justify-content:center;height:",";width:",";background:",";border:"," solid ",";border-radius:",";margin-right:",";",""],c.c.SPACING_6B,c.c.SPACING_6B,({theme:e})=>e.BG_MAIN,c.c.SPACING_1,({theme:e})=>e.BORDER,c.c.SPACING_1B,c.c.SPACING_2B,({isClickable:e})=>{if(e)return Object(s.c)(["pointer-events:initial;cursor:pointer;"])}),f=s.d.div.withConfig({displayName:"SlideData__PollIconContainer",componentId:"sc-18lmg55-5"})(["display:flex;align-items:center;justify-content:center;height:",";width:",";background:",";border-radius:",";margin-right:",";",""],c.c.SPACING_6B,c.c.SPACING_6B,({theme:e})=>e.BORDER,c.c.SPACING_1B,c.c.SPACING_2B,({isClickable:e})=>{if(e)return Object(s.c)(["pointer-events:initial;cursor:pointer;"])}),E=s.d.div.withConfig({displayName:"SlideData__SlideNumberContainer",componentId:"sc-18lmg55-6"})(["display:flex;align-items:center;justify-content:center;min-height:",";min-width:",";background:",";border:"," solid ",";border-radius:",";margin-left:",";"],c.c.SPACING_6B,c.c.SPACING_6B,({theme:e})=>e.BG_MAIN,c.c.SPACING_1,({theme:e})=>e.BORDER,c.c.SPACING_1B,c.c.SPACING_2B),b=s.d.div.withConfig({displayName:"SlideData__SlideTitleContainer",componentId:"sc-18lmg55-7"})(["display:flex;flex:1;align-items:center;background:",";border-radius:",";margin-left:",";padding:0 ",";pointer-events:initial;min-width:0;max-width:200px;"],({theme:e})=>e.BORDER,c.c.SPACING_1B,c.c.SPACING_2B,c.c.SPACING_2B),C=Object(s.d)(l.o).withConfig({displayName:"SlideData__TitleTextContainer",componentId:"sc-18lmg55-8"})(["color:",";overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"],({theme:e})=>e.TEXT_PRIMARY),v=s.d.div.withConfig({displayName:"SlideData__TooltipContainer",componentId:"sc-18lmg55-9"})(["display:flex;pointer-events:none;width:100%;opacity:",";visibility:",";transition:opacity 0.1s ease-in ",";"],({show:e})=>e?1:0,({show:e})=>e?"visible":"hidden",({enterDelay:e,show:t})=>"".concat(t?e:0,"ms")),S=s.d.div.withConfig({displayName:"SlideData__CustomTooltip",componentId:"sc-18lmg55-10"})(["background-color:",";border:1px solid ",";padding:",";color:",";font-size:",";line-height:",";font-weight:",";border-radius:",";margin:0 "," "," ",";word-wrap:break-word;word-break:break-word;"],({theme:e})=>e.BG_MAIN,({theme:e})=>e.BORDER,c.c.SPACING_1B,({theme:e})=>e.TEXT_PRIMARY,c.d.EXTRA_SMALL,c.d.LINE_HEIGHT,c.d.BOLD,c.c.SPACING_1B,c.c.SPACING_2B,c.c.SPACING_1B,c.c.SPACING_2B),I=()=>{},y=r.a.memo(({slideNumber:e,showSlideNumber:t,slideTitle:i="",showSlideTitle:n,showEditIcon:s,isEditIconClickable:c,onEditIconClick:y=I,showPollIcon:_,isPollIconClickable:O,onPollIconClick:w=I})=>{const T=Object(o.useState)(!1),A=a()(T,2),P=A[0],x=A[1],R=Object(o.useRef)(null),D=()=>{x(!0)},N=()=>{x(!1)},j=e=>{R.current=e};return r.a.createElement(p,null,(()=>{if(n)return r.a.createElement(v,{show:P,enterDelay:1e3},r.a.createElement(S,null,i))})(),r.a.createElement(u,null,r.a.createElement(h,null,(()=>{if(t)return r.a.createElement(E,null,r.a.createElement(l.l,null,e))})(),(()=>{if(n&&i){const e=D,t=N;return r.a.createElement(b,{onMouseOver:e,onMouseOut:t},r.a.createElement(C,{ref:j},i))}})()),r.a.createElement(m,null,(()=>{if(_)return r.a.createElement(f,{isClickable:O,onClick:w},r.a.createElement(d.vb,null))})(),(()=>{if(s)return r.a.createElement(g,{isClickable:c,onClick:y},r.a.createElement(d.Nb,null))})())))});t.a=y},vO6E:function(e,t,i){e.exports=i.p+"static/media/shape-circle.719aa781.svg"},vcXj:function(e,t,i){e.exports=i.p+"static/media/shape-sqaure.c22ba485.svg"},wPU9:function(e,t,i){"use strict";i.d(t,"a",(function(){return G}));var n=i("lwsE"),a=i.n(n),o=i("W8MJ"),r=i.n(o),s=i("PJYZ"),l=i.n(s),c=i("7W2i"),d=i.n(c),p=i("a1gu"),u=i.n(p),h=i("Nsbk"),m=i.n(h),g=i("lSNA"),f=i.n(g),E=i("q1tI"),b=i.n(E),C=i("/MKj"),v=i("vOnD"),S=i("sF4Z"),I=i("WlAH"),y=i("wCkA");function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=m()(e);if(t){var a=m()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return u()(this,i)}}var O=v.d.img.withConfig({displayName:"AsyncImage__AsyncImg",componentId:"uwg3zh-0"})(["width:100%;height:100%;transition:transform 0.25s ease-in-out;",";"],(function(e){var t=e.rotation,i=e.imgScale;if(t&&i)return Object(v.c)(["transform:rotate(","deg) scale(",");"],t,(t+180)%180===90?i:1)})),w=v.d.div.withConfig({displayName:"AsyncImage__AsyncImageContainer",componentId:"uwg3zh-1"})(["width:100%;height:100%;position:absolute;"]),T=v.d.div.withConfig({displayName:"AsyncImage__LoaderContainer",componentId:"uwg3zh-2"})(["position:absolute;display:flex;width:100%;height:100%;align-items:center;justify-content:center;"]),A=function(e){d()(i,e);var t=_(i);function i(e){var n;return a()(this,i),n=t.call(this,e),f()(l()(n),"getStyleFromProps",(function(){return{objectFit:n.props.objectFit}})),f()(l()(n),"onLoad",(function(e){var t,i,a=e.target,o=(null===a||void 0===a?void 0:a.naturalWidth)/(null===a||void 0===a?void 0:a.naturalHeight),r=(null===a||void 0===a||null===(t=a.parentElement)||void 0===t?void 0:t.clientWidth)/(null===a||void 0===a||null===(i=a.parentElement)||void 0===i?void 0:i.clientHeight),s=isNaN(o)?n.state.imgScale:o;r-o>=I.tb.ROTATION_THRESHOLD&&(s=1/s),n.mounted&&n.setState({isLoading:!1,imgScale:s}),n.props.onLoad&&n.props.onLoad()})),f()(l()(n),"onLoadError",(function(e){n.mounted&&(n.retryCount+=1,clearTimeout(n.imageRetryTimeout),n.imageRetryTimeout=setTimeout((function(){n.setState({src:n.getSourceUrl(n.props)})}),1e3*(n.retryCount>4?4:n.retryCount))),n.props.onError&&n.props.onError(e)})),f()(l()(n),"renderLoader",(function(){if(n.props.showLoader&&n.state.isLoading)return b.a.createElement(T,null,b.a.createElement(S.a,{size:n.props.useSmallLoader?20:40,color:"#0597FF"}))})),f()(l()(n),"renderImage",(function(){var e=n.getStyleFromProps();return b.a.createElement(O,{rotation:n.props.rotation,imgScale:n.state.imgScale,src:n.state.src,style:e,onLoad:n.onLoad,onError:n.onLoadError})})),n.retryCount=0,n.state={isLoading:!0,src:n.getSourceUrl(e),imgScale:1},n}return r()(i,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1,clearTimeout(this.imageRetryTimeout)}},{key:"componentDidUpdate",value:function(e){e.src!=this.props.src&&(this.retryCount=0,this.setState({isLoading:!0,src:this.getSourceUrl(this.props)}))}},{key:"getSourceUrl",value:function(e){if(e.useImgixUrl){var t=e.isRecorded?1920:1080;return Object(y.M)(e.src,this.retryCount,t)}return Object(y.b)(e.src,"rcnt",this.retryCount)}},{key:"render",value:function(){return b.a.createElement(w,null,this.renderLoader(),this.renderImage())}}]),i}(b.a.PureComponent);f()(A,"defaultProps",{objectFit:"contain",showLoader:!0,src:"",useImgixUrl:!0});var P=Object(C.c)((function(e){return{isRecorded:e.getIn(["app","isRecorded"])}}),null,null,{forwardRef:!0})(A),x=i("dm8e"),R=i("+UwG");const D=v.d.div.withConfig({displayName:"GifCanvas__Container",componentId:"lp74bk-0"})(["width:100%;height:100%;position:absolute;display:flex;align-items:center;justify-content:center;"]),N=v.d.canvas.withConfig({displayName:"GifCanvas__DrawingCanvas",componentId:"lp74bk-1"})(["padding:0;margin:0;border:0;background:transparent;touch-action:none;"]),j=v.d.div.withConfig({displayName:"GifCanvas__LoaderContainer",componentId:"lp74bk-2"})(["position:absolute;display:flex;width:100%;height:100%;align-items:center;justify-content:center;"]);class k extends b.a.PureComponent{constructor(e){super(e),f()(this,"handleVisibilityChange",e=>{if(!e){(this.props.isLiveDVR||this.props.isReplay?!this.props.isVideoPaused:!this.props.isLivePaused)&&this.resumeGifInLive()}}),f()(this,"handleGifPlayEvent",e=>{this.props.isEducator||e.id!==this.props.activeSlide||(this.lastGifPlayTime=e.time,this.isGifPlayed||!this.gifHandle||this.gifHandle.get_loading()||this.handleGifPlay())}),f()(this,"onGifLoad",()=>{this.mounted&&this.setState({isLoading:!1},this.handleGifPlay),this.resizeGif(),this.props.onLoad&&this.props.onLoad()}),f()(this,"handleGifPlay",()=>{if(this.gifHandle)if(this.props.isEducator)this.gifHandle.play(),this.props.onSendData({e:I.L.PLAY_GIF}),this.lastGifPlayTime=(new Date).getTime(),R.f.sendData(R.c.GIF_LOADED);else if(Object(y.ob)(this.lastGifPlayTime)&&!this.isGifPlayed){(this.props.isLiveDVR||this.props.isReplay?!this.props.isVideoPaused:!this.props.isLivePaused)&&this.seekGifToCurrentTime()}}),f()(this,"pauseGif",()=>{this.gifHandle&&this.gifHandle.pause()}),f()(this,"playGif",()=>{Object(y.ob)(this.lastGifPlayTime)&&this.gifHandle&&!this.gifHandle.get_playing()&&!this.gifHandle.get_loading()&&this.gifHandle.play()}),f()(this,"resumeGifInLive",()=>{this.gifHandle&&(this.gifHandle.get_playing()&&this.gifHandle.pause(),this.gifHandle.get_loading()||this.seekGifToCurrentTime())}),f()(this,"resizeGif",()=>{this.gifHandle&&!this.gifHandle.get_loading()&&this.gifHandle.resizeCanvas(this.props.canvasWidth,this.props.canvasHeight)}),f()(this,"setPlaybackRate",e=>{this.gifHandle&&!this.gifHandle.get_loading()&&this.gifHandle.setPlaybackRate(e)}),f()(this,"seekGifToCurrentTime",()=>{let e=(new Date).getTime()-this.lastGifPlayTime;this.props.recordedVideo&&(this.props.isReplay?e=1e3*this.props.recordedVideo.currentTime-this.lastGifPlayTime/1e3:this.props.isLiveDVR&&(e=Object(y.P)(this.props.recordedVideo.currentTime)-this.lastGifPlayTime));let t=this.gifHandle.get_duration(),i=this.gifHandle.seek(e%t);clearTimeout(this.gifPlayTimeout),this.gifPlayTimeout=setTimeout(()=>{this.gifHandle&&(this.isGifPlayed=!0,this.gifHandle.play())},i)}),f()(this,"onImgLoad",()=>{this.gifHandle=new SuperGif({gif:this.imageInstance,max_width:this.props.canvasWidth,max_height:this.props.canvasHeight,auto_play:0,draw_while_loading:!1,loop_mode:!0,playback_rate:this.props.activePlayBackRate}),this.gifHandle.load(this.onGifLoad)}),f()(this,"onImgLoadError",()=>{this.mounted&&(this.retryCount+=1,clearTimeout(this.imageRetryTimeout),this.imageRetryTimeout=setTimeout(()=>{this.setState({src:this.getSourceUrl(this.props)},this.setImageInstanceSrc)},1e3*(this.retryCount>4?4:this.retryCount))),this.props.onError&&this.props.onError()}),f()(this,"renderLoader",()=>{if(this.props.showLoader&&this.state.isLoading)return b.a.createElement(j,null,b.a.createElement(S.a,{size:this.props.useSmallLoader?20:40,color:"#0597FF"}))}),this.imageInstance=new Image,this.retryCount=0,this.gifPlayTimeout=null,this.lastGifPlayTime=null,this.state={isLoading:!0,src:this.getSourceUrl(e)}}componentDidMount(){this.mounted=!0,this.setImageInstanceSrc(),x.a.addListener(this.handleVisibilityChange)}componentWillUnmount(){this.mounted=!1,clearTimeout(this.imageRetryTimeout),clearTimeout(this.gifPlayTimeout),x.a.removeListener(this.handleVisibilityChange)}componentDidUpdate(e){this.props.isLiveDVR||this.props.isReplay?e.isVideoPaused!=this.props.isVideoPaused&&(this.props.isVideoPaused?this.pauseGif():this.playGif()):e.isLivePaused!=this.props.isLivePaused&&(this.props.isLivePaused?this.pauseGif():this.resumeGifInLive()),e.canvasWidth===this.props.canvasWidth&&e.canvasHeight===this.props.canvasHeight||this.resizeGif(),e.activePlayBackRate!=this.props.activePlayBackRate&&this.setPlaybackRate(this.props.activePlayBackRate)}setImageInstanceSrc(){this.imageInstance.onload=this.onImgLoad,this.imageInstance.onerror=this.onImgLoadError,this.imageInstance.src=this.state.src}getSourceUrl(e){if(e.useImgixUrl){const t=e.isRecorded?1920:1080;return Object(y.M)(e.src,this.retryCount,t)}return Object(y.b)(e.src,"rcnt",this.retryCount)}render(){return b.a.createElement(D,{id:"gifContainer"},this.renderLoader(),b.a.createElement(N,{id:"gifBackCanvas"}),b.a.createElement(N,{id:"gifFrontCanvas",hidden:!0}))}}f()(k,"defaultProps",{showLoader:!0,src:"",useImgixUrl:!0});var L=Object(C.c)(e=>({isEducator:e.getIn(["app","isEducator"]),isReplay:e.getIn(["app","isReplay"]),isLiveDVR:e.getIn(["videoPlayControls","isLiveDVR"]),activeSlide:e.getIn(["canvas","activeSlide"]),isVideoPaused:e.getIn(["videoPlayControls","isVideoPaused"]),isLivePaused:e.getIn(["videoPlayControls","isLivePaused"]),activePlayBackRate:e.getIn(["videoPlayControls","activePlayBackRate"]),isRecorded:e.getIn(["app","isRecorded"])}),null,null,{forwardRef:!0})(k);function B(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=m()(e);if(t){var a=m()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return u()(this,i)}}var M=v.d.div.withConfig({displayName:"Slide__Container",componentId:"sc-147d2dw-0"})(["width:100%;height:100%;background-color:",";"],(function(e){return e.backgroundColor})),G=function(e){d()(i,e);var t=B(i);function i(){var e;a()(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o)),f()(l()(e),"handleGifPlayEvent",(function(t){e.gifCanvas&&e.gifCanvas.handleGifPlayEvent(t)})),e}return r()(i,[{key:"getSlideBackgroundColor",value:function(){return this.props.backgroundColor?this.props.backgroundColor:this.props.useLatestBackground?this.props.slide.latestbgColor:this.props.slide.bgColor}},{key:"renderBackgroundImage",value:function(){if(this.props.slide&&this.props.slide.bgImage)return b.a.createElement(P,{src:this.props.slide.bgImage,useSmallLoader:this.props.useSmallLoader,showLoader:!this.props.slide.image,onLoad:this.props.onLoadImage})}},{key:"renderImage",value:function(){if(this.props.slide&&this.props.slide.image&&!Object(y.lb)(this.props.slide.image))return b.a.createElement(P,{rotation:this.props.slideRotation,src:this.props.slide.image,useSmallLoader:this.props.useSmallLoader,onLoad:this.props.onLoadImage,onError:this.props.onErrorSlideImage})}},{key:"renderGif",value:function(){var e=this;if(this.props.slide&&this.props.slide.image&&Object(y.lb)(this.props.slide.image))return this.props.isSeekHover||this.props.isSlideMode?b.a.createElement(P,{src:this.props.slide.staticImg,useSmallLoader:this.props.useSmallLoader,onLoad:this.props.onLoadImage}):b.a.createElement(L,{key:this.props.activeSlide,ref:function(t){e.gifCanvas=t},src:this.props.slide.image,useSmallLoader:this.props.useSmallLoader,onLoad:this.props.onLoadImage,canvasWidth:this.props.canvasWidth,canvasHeight:this.props.canvasHeight,onSendData:this.props.onSendData,recordedVideo:this.props.recordedVideo})}},{key:"render",value:function(){return b.a.createElement(M,{backgroundColor:this.getSlideBackgroundColor()},this.renderBackgroundImage(),this.renderImage(),this.renderGif())}}]),i}(b.a.PureComponent)},x7qq:function(e,t,i){e.exports=i.p+"static/media/multiple-Tabs.852293f7.svg"},xRQt:function(e,t,i){"use strict";var n=i("q1tI"),a=i.n(n),o=i("/MKj"),r=i("vOnD"),s=i("WlAH"),l=i("XyO8"),c=i("0dbe"),d=i("8ezB"),p=r.d.div.withConfig({displayName:"CameraPlaceholder__CameraPlaceHolder",componentId:"l0f75x-0"})(["width:100%;height:100%;position:absolute;top:0;background-color:",";display:",";align-items:center;justify-content:center;flex-direction:column;color:",";font-size:12px;cursor:",";"],(function(e){return e.theme.BORDER}),(function(e){return e.shouldDisplay?"flex":"none"}),(function(e){return e.theme.TEXT_PRIMARY}),(function(e){return e.clickable?"pointer":"default"})),u=r.d.div.withConfig({displayName:"CameraPlaceholder__IconWrapper",componentId:"l0f75x-1"})([""," -webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;user-drag:none;"],(function(e){return e.isRound?Object(r.c)(["width:100%;height:100%;"]):e.isClassPaused?Object(r.c)(["width:100%;margin-bottom:20px;"]):Object(r.c)(["width:150px;position:absolute;bottom:0;"])})),h=r.d.div.withConfig({displayName:"CameraPlaceholder__CameraTurnedOffCaption",componentId:"l0f75x-2"})(["color:",";margin-top:4px;"],(function(e){return e.theme.TEXT_TERTIARY}));t.a=function(e){var t=e.toggleCameraStream,i=void 0===t?function(){}:t,n=e.getIsPlaceholderClickDisabled,r=void 0===n?function(){}:n,m=Object(o.e)((function(e){return e.getIn(["app","isEducator"])})),g=Object(o.e)((function(e){return e.getIn(["app","isModerator"])})),f=Object(o.e)((function(e){return e.getIn(["app","isReplay"])})),E=Object(o.e)((function(e){return e.getIn(["app","isScreenShared"])})),b=Object(o.e)((function(e){return e.getIn(["app","isClassPaused"])})),C=Object(o.e)((function(e){return e.getIn(["app","useRoundVideo"])})),v=Object(o.e)((function(e){return e.getIn(["app","connectionState"])})),S=Object(o.e)((function(e){return e.getIn(["app","showPlayButton"])})),I=Object(o.e)((function(e){return e.getIn(["videoPlayControls","isLiveDVR"])})),y=Object(o.e)((function(e){return e.getIn(["app","isCameraTurnedOff"])})),_=Object(o.e)((function(e){return e.getIn(["app","cameraTurnedOffAutomatically"])})),O=Object(o.e)((function(e){return e.getIn(["app","audioUrl"])})),w=function(){var e=!(!b&&(m||g||v===s.Pb.CONNECTED&&!S)),t=a.a.createElement(c.b,null);return C&&(t=a.a.createElement(c.Fb,{width:"100%",height:"100%"})),b&&(t=a.a.createElement(c.cc,null)),a.a.createElement(p,{shouldDisplay:e},a.a.createElement(u,{isRound:C,isClassPaused:b},t),function(){if(b&&!C)return a.a.createElement(l.o,{fontSize:d.d.MEDIUM},m?s.e.CLASS_PAUSED_EDUCATOR:s.e.CLASS_PAUSED_LEARNER)}())},T=function(){r()||i()},A=function(){return a.a.createElement(p,{shouldDisplay:!0,clickable:y,onClickCapture:T},a.a.createElement(c.i,null),a.a.createElement(h,null,_?s.e.VIDEO_OFF_CONNECTION_ISSUE:s.e.VIDEO_TURNED_OFF," "))};return f||I||E?f&&O&&y?A():null:b?w():y?A():w()}},xVbC:function(e,t,i){e.exports=i.p+"static/media/lightRuledTheme.002cd57a.svg"},xj7l:function(e,t,i){e.exports=i.p+"static/media/error-info.dd002725.svg"},zpft:function(e,t,i){e.exports=i.p+"static/media/educator-late.ed8475a8.svg"}},[[0,16,27,24,28,25,26,19,12,8,13,11,20,14,2,23,17,31]],[0,32,9,3,5,10,18]]);
//# sourceMappingURL=main.424647320d535398c6cd.chunk.js.map