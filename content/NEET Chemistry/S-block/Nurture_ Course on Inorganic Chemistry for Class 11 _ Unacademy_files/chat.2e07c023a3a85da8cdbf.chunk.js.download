(this["webpackJsonpunacademy-live"]=this["webpackJsonpunacademy-live"]||[]).push([[1],{"/An2":function(e,t,n){e.exports=n.p+"static/media/report-block-flag.c293af48.svg"},"7BOt":function(e,t,n){e.exports=n.p+"static/media/unpinned-button.bfd42f78.svg"},A4gQ:function(e,t,n){e.exports=n.p+"static/media/chat-banned-icon.fe50849d.svg"},AhVe:function(e,t,n){e.exports=n.p+"static/media/pinned-button.fc9a59c2.svg"},J37r:function(e,t,n){e.exports=n.p+"static/media/verify-email-icon.50127693.svg"},MkBD:function(e,t,n){e.exports=n.p+"static/media/chat-not-subscribed-icon.a61f1e70.svg"},"RM/v":function(e,t,n){"use strict";n.r(t);var i=n("lSNA"),s=n.n(i),o=n("q1tI"),a=n.n(o),r=n("/MKj"),c=n("wCkA"),d=n("6HPj"),l=n("17x9"),p=n.n(l),u=n("vOnD"),h=n("8ezB"),m=n("0dbe"),g=n("WlAH"),f={tempBlockedIcon:n("x52R")},I=u.d.div.withConfig({displayName:"Warning__WarningContainer",componentId:"sc-1i836dv-0"})(["display:flex;justify-content:space-between;padding:",";padding-bottom:",";background:",";"],h.c.SPACING_4B,h.c.SPACING_0B,(function(e){return e.theme.BG_MAIN})),E=u.d.div.withConfig({displayName:"Warning__WarningContent",componentId:"sc-1i836dv-1"})(["display:flex;"]),C=u.d.div.withConfig({displayName:"Warning__IconContainer",componentId:"sc-1i836dv-2"})(["width:24px;height:24px;background:",";border-radius:8px;"],(function(e){return e.theme.BG_MAIN})),_=u.d.div.withConfig({displayName:"Warning__TitleBodyContainer",componentId:"sc-1i836dv-3"})(["display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;margin:"," ",";max-width:300px;"],h.c.SPACING_0B,h.c.SPACING_2B),b=u.d.div.withConfig({displayName:"Warning__TitleContainer",componentId:"sc-1i836dv-4"})(["text-align:left;font-size:",";line-height:",";font-weight:",";color:",";"],h.d.MEDIUM,h.d.LINE_HEIGHT_MAX,h.d.SEMIBOLD,(function(e){return e.theme.TEXT_PRIMARY})),y=u.d.div.withConfig({displayName:"Warning__BodyContainer",componentId:"sc-1i836dv-5"})(["margin-top:",";text-align:left;font-size:",";line-height:",";color:",";"],h.c.SPACING_2B,h.d.SMALL,h.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_PRIMARY})),x=u.d.span.withConfig({displayName:"Warning__TimerContainer",componentId:"sc-1i836dv-6"})(["color:",";"],(function(e){return e.theme.BLUE})),S=u.d.div.withConfig({displayName:"Warning__CloseButtonIconContainer",componentId:"sc-1i836dv-7"})(["width:20px;height:20px;cursor:pointer;"]),M=a.a.memo((function(e){var t=e.iconType,n=e.title,i=e.body,s=e.closeAction,o=e.timeRemaining,r=void 0===o?g.i.COOLDOWN_TIME:o;return a.a.createElement(I,null,a.a.createElement(E,null,a.a.createElement(C,null,a.a.createElement("img",{src:function(){switch(t){case"TEMP_BLOCKED":default:return f.tempBlockedIcon}}()})),a.a.createElement(_,null,a.a.createElement(b,null,n),"TEMP_BLOCKED"===t?a.a.createElement(y,null,i,a.a.createElement(x,null,r+(1===r?g.j.TEMP_BLOCKED.TIME_UNIT_SINGULAR:g.j.TEMP_BLOCKED.TIME_UNIT))):a.a.createElement(y,null,i))),a.a.createElement(S,{onClick:s},a.a.createElement(m.u,null)))}));M.propTypes={iconType:p.a.string,title:p.a.string.isRequired,text:p.a.string.isRequired,closeAction:p.a.func.isRequired},M.defaultProps={iconType:"TEMP_BLOCKED"};var N=M,T={chatGuidelinesIcon:n("FCfd")},A=u.d.div.withConfig({displayName:"ChatRules__ChatRulesContainer",componentId:"ift7ov-0"})(["position:absolute;display:flex;flex-direction:column;background:",";box-shadow:0px 16px 32px ",";border-radius:",";left:",";right:",";padding:",";bottom:",";transition:bottom 0.3s ease-in;z-index:3;"],(function(e){return e.theme.BG_MAIN}),(function(e){return e.theme.BORDER}),h.c.SPACING_2B,h.c.SPACING_4B,h.c.SPACING_4B,h.c.SPACING_4B,(function(e){return e.isOpen?h.c.SPACING_4B:"-300px"})),v=u.d.div.withConfig({displayName:"ChatRules__IconContainer",componentId:"ift7ov-1"})(["display:flex;justify-content:center;align-items:center;width:24px;height:24px;background:",";border-radius:8px;"],(function(e){return e.theme.BG_MAIN})),w=u.d.div.withConfig({displayName:"ChatRules__TitleContainer",componentId:"ift7ov-2"})(["text-align:left;font-size:",";line-height:",";font-weight:",";color:",";margin-left:",";"],h.d.MEDIUM,h.d.LINE_HEIGHT_MAX,h.d.SEMIBOLD,(function(e){return e.theme.TEXT_PRIMARY}),h.c.SPACING_2B),B=u.d.div.withConfig({displayName:"ChatRules__BodyContainer",componentId:"ift7ov-3"})(["margin-top:",";text-align:left;font-size:",";line-height:",";color:",";"],h.c.SPACING_4B,h.d.SMALL,h.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_PRIMARY})),P=u.d.div.withConfig({displayName:"ChatRules__GotItButton",componentId:"ift7ov-4"})(["display:flex;height:40px;min-width:80px;justify-content:center;align-items:center;background:",";border-radius:4px;font-weight:",";font-size:",";line-height:",";color:",";cursor:pointer;"],(function(e){return e.theme.GREEN}),h.d.BOLD,h.d.MEDIUM,h.d.LINE_HEIGHT,(function(e){return e.theme.WHITE})),k=a.a.memo((function(e){var t=e.isOpen,n=e.onClose;return a.a.createElement(A,{isOpen:t},a.a.createElement(d.a,{justifyContent:"flex-start",alignItems:"center"},a.a.createElement(v,null,a.a.createElement("img",{src:T.chatGuidelinesIcon})),a.a.createElement(w,null,g.j.CHAT_RULES_INFO.TITLE)),a.a.createElement(d.a,{justifyContent:"space-between",alignItems:"flex-end"},a.a.createElement(B,null,g.j.CHAT_RULES_INFO.BODY),a.a.createElement(P,{onClick:n},g.j.CHAT_RULES_INFO.BUTTON_TEXT)))}));k.propTypes={isOpen:p.a.bool,onClose:p.a.func.isRequired},k.defaultProps={isOpen:!1};var R=k,G=u.d.div.withConfig({displayName:"SmartReply__SingleReplyContainer",componentId:"zoiaew-0"})(["display:flex;align-items:center;justify-content:center;cursor:pointer;background:",";border-radius:",";color:",";font-size:",";line-height:",";padding:"," ",";margin-top:",";word-break:break-word;text-align:left;"],(function(e){return e.theme.TEXT_PRIMARY}),h.c.SPACING_2B,(function(e){return e.theme.BG_MAIN}),h.d.SMALL,h.d.LINE_HEIGHT_MAX,h.c.SPACING_1B,h.c.SPACING_3B,h.c.SPACING_1B),O=a.a.memo((function(e){var t=e.reply,n=e.isChatFocused,i=e.selectReply;return a.a.createElement(G,{isChatFocused:n,onClick:function(e){i(t)}},t)})),j=O;O.defaultProps={reply:"",isChatFocused:!1};var L=u.d.div.withConfig({displayName:"SmartReplies__SmartRepliesContainer",componentId:"ta3ds6-0"})(["display:flex;align-items:flex-start;flex-direction:column;overflow-y:auto;background:",";padding:0 ",";max-height:0px;transition:max-height 0.25s ease-in;",""],(function(e){return e.theme.BG_MAIN}),h.c.SPACING_4B,(function(e){if(e.isChatFocused)return Object(u.c)(["max-height:150px;padding-top:",";padding-bottom:0;"],h.c.SPACING_3B)})),D=a.a.memo((function(e){var t=e.selectReply,n=Object(r.e)((function(e){return e.getIn(["chat","isChatFocused"])})),i=Object(r.e)((function(e){return e.getIn(["chat","smartReplies"])}));return a.a.createElement(L,{isChatFocused:n},i.map((function(e,i){return a.a.createElement(j,{key:i,reply:e.text,isChatFocused:n,selectReply:t})})))}));D.propTypes={selectReply:p.a.func.isRequired},D.defaultProps={};var U=D,Q=n("J4zp"),H=n.n(Q),F=n("5Gel"),z=n("lwsE"),X=n.n(z),q=n("W8MJ"),Y=n.n(q),W=n("PJYZ"),K=n.n(W),V=n("7W2i"),J=n.n(V),Z=n("a1gu"),$=n.n(Z),ee=n("Nsbk"),te=n.n(ee),ne=n("YZDV"),ie=n.n(ne),se=n("F/us"),oe=n.n(se),ae=n("+uQC");function re(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=te()(e);if(t){var s=te()(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return $()(this,n)}}var ce=u.d.img.withConfig({displayName:"SingleEmoji__EmojiIcon",componentId:"sc-11dc5qb-0"})(["height:","px;width:","px;@media only screen and (max-width:1150px){height:","px;width:","px;}@media only screen and (max-width:850px){height:","px;width:","px;}"],(function(e){return e.size}),(function(e){return e.size}),(function(e){return.7*e.size}),(function(e){return.7*e.size}),(function(e){return.5*e.size}),(function(e){return.5*e.size})),de=u.d.div.withConfig({displayName:"SingleEmoji__SingleEmojiContainer",componentId:"sc-11dc5qb-1"})(["display:flex;align-items:center;justify-content:center;cursor:pointer;user-select:none;object-fit:contain;font-size:",";padding:0 ",";line-height:",";height:","px;@media only screen and (max-width:1150px){height:","px;}@media only screen and (max-width:850px){height:","px;}"],h.d.LARGE_HEADING,h.c.SPACING_1B,h.d.LINE_HEIGHT_MAX,(function(e){return e.height}),(function(e){return.7*e.height}),(function(e){return.5*e.height})),le=function(e){J()(n,e);var t=re(n);function n(){var e;X()(this,n);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o)),s()(K()(e),"handleEmojiClick",(function(){e.props.shouldClick&&e.props.handleEmoji&&e.props.handleEmoji(e.props.data)})),s()(K()(e),"renderEmojiImage",(function(){var t=e.props,n=t.data,i=t.emojiIconSize,s=t.size,o=i||s;return n.url?n.pngUrl?a.a.createElement(ce,{src:n.pngUrl,onMouseOver:function(e){return e.currentTarget.src=n.url},onMouseOut:function(e){return e.currentTarget.src=n.pngUrl},size:o}):a.a.createElement(ce,{size:o,src:n.url}):n.text})),e}return Y()(n,[{key:"shouldComponentUpdate",value:function(e,t){return ie()(this,e,t)||!oe.a.isEqual(e.data,this.props.data)}},{key:"render",value:function(){return a.a.createElement(ae.a,{title:this.props.data.name,isEnabled:this.props.enablePopOver,tooltipStyle:{top:"-18px"}},a.a.createElement(de,{onClick:this.handleEmojiClick,height:this.props.size,width:this.props.size},this.renderEmojiImage()))}}]),n}(a.a.Component);function pe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=te()(e);if(t){var s=te()(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return $()(this,n)}}s()(le,"defaultProps",{size:32,enablePopOver:!0});var ue=u.d.div.withConfig({displayName:"Emojis__EmojiPopoverContainer",componentId:"sc-1lclxv2-0"})(["display:flex;flex-direction:column;justify-content:center;align-items:center;background:",";border:1px solid ",";box-sizing:border-box;border-radius:",";padding-bottom:",";width:48px;"],(function(e){return e.theme.BG_MAIN}),(function(e){return e.theme.BORDER}),h.c.SPACING_2B,h.c.SPACING_1B),he=function(e){J()(n,e);var t=pe(n);function n(e){var i;return X()(this,n),i=t.call(this,e),s()(K()(i),"handleEmojiClick",(function(e){if(!i.props.isEducator){if(i.emojisSent>=6)return;0==i.emojisSent&&(clearTimeout(i.limitTimer),i.limitTimer=setTimeout((function(){i.emojisSent=0}),1e4)),i.emojisSent+=1}i.props.emojiClick&&i.props.emojiClick(e)})),s()(K()(i),"renderEmojis",(function(){return i.props.data.map((function(e,t){return a.a.createElement(le,{key:t,data:e,handleEmoji:i.handleEmojiClick,shouldClick:!0,enablePopOver:!1,size:40,emojiIconSize:32})}))})),i.emojisSent=0,i.limitTimer=void 0,i}return Y()(n,[{key:"render",value:function(){return a.a.createElement(ue,null,this.renderEmojis())}}]),n}(a.a.Component),me="https://quark.uacdn.net/emojis/clapping_hands.png",ge=u.d.div.withConfig({displayName:"EmojiPopover__Wrapper",componentId:"umrvuq-0"})(["display:flex;opacity:",";transition:opacity 0.3s;pointer-events:",";"],(function(e){return e.show?"1":"0"}),(function(e){return e.show?"all":"none"})),fe=u.d.div.withConfig({displayName:"EmojiPopover__EmojiButtonContainer",componentId:"umrvuq-1"})(["position:absolute;top:0px;right:",";display:flex;align-items:center;justify-content:center;width:48px;height:48px;background:",";border-radius:",";",""],(function(e){return e.isUserBanned?"16px":"0px"}),(function(e){return e.theme.BG_MAIN}),h.c.SPACING_1B,(function(e){if(e.isChatDisabled)return Object(u.c)(["position:relative;border:1px solid ",";box-sizing:border-box;border-radius:",";"],(function(e){return e.theme.BORDER}),h.c.SPACING_2B)})),Ie=u.d.img.withConfig({displayName:"EmojiPopover__EmojiButtonImg",componentId:"umrvuq-2"})(["height:32px;width:32px;"]),Ee=Object(u.d)(F.a).withConfig({displayName:"EmojiPopover__StyledPopover",componentId:"umrvuq-3"})([".MuiPopover-paper{background:",";}"],(function(e){return e.theme.BG_MAIN})),Ce=a.a.memo((function(e){var t=e.onReceivingEmoji,n=Object(r.e)((function(e){return e.getIn(["chat","isChatDisabledByEducator"])})),i=Object(r.e)((function(e){return e.getIn(["app","emojiArray"])})),s=Object(r.e)((function(e){return e.getIn(["app","canChat"])})),c=Object(r.e)((function(e){return e.getIn(["app","chatDisableText"])})),d=Object(r.e)((function(e){return e.getIn(["chat","areEmojisEnabled"])})),l=!s&&c===g.f.BANNED,p=Object(o.useState)(!1),u=H()(p,2),h=u[0],m=u[1],f=Object(o.useRef)(null),I=Object(o.useState)(0),E=H()(I,2),C=E[0],_=E[1],b=Object(o.useRef)(null),y=Object(o.useRef)(null),x=Object(o.useRef)(!1);Object(o.useEffect)((function(){return function(){b.current&&clearTimeout(b.current),y.current&&clearTimeout(y.current)}}),[]);var S=Object(o.useCallback)((function(e){C>=g.H.MAX_EMOJI_LIMIT||(0===C&&(b.current&&clearTimeout(b.current),b.current=setTimeout((function(){_(0)}),1e3*g.H.MAX_SEND_TIME_LIMIT)),_(C+1),e&&t(e),m(!1))}),[C]),M=function(){m(!1)},N=function(){m(!0)};return a.a.createElement(ge,{show:d},a.a.createElement(fe,{ref:f,onClick:N,onMouseEnter:function(){x.current=!0,y.current&&clearTimeout(y.current),y.current=setTimeout((function(){x.current&&N()}),250)},onMouseLeave:function(){x.current=!1},isUserBanned:l,isChatDisabled:n},a.a.createElement(Ie,{src:me})),function(){if(i)return a.a.createElement(Ee,{open:h,anchorEl:f.current,onClose:M,elevation:0,marginThreshold:0,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"}},a.a.createElement(he,{data:i,emojiClick:S}))}())}));Ce.propTypes={onReceivingEmoji:p.a.func.isRequired},Ce.defaultProps={};var _e=Object(u.f)(Ce),be={getSubscriptionIcon:n("MkBD")},ye=u.d.div.withConfig({displayName:"GetSubscription__GetSubscriptionContainer",componentId:"sc-1m0he0l-0"})(["display:flex;flex:1;flex-direction:column;align-items:flex-start;justify-content:flex-start;background:",";box-shadow:0px 16px 32px ",";border-radius:",";margin:",";margin-top:",";padding:",";z-index:3;"],(function(e){return e.theme.BG_MAIN}),(function(e){return e.theme.BORDER}),h.c.SPACING_2B,h.c.SPACING_4B,h.c.SPACING_0B,h.c.SPACING_4B),xe=u.d.div.withConfig({displayName:"GetSubscription__IconContainer",componentId:"sc-1m0he0l-1"})(["display:flex;justify-content:center;align-items:center;width:24px;height:24px;background:",";border-radius:8px;"],(function(e){return e.theme.BG_MAIN})),Se=u.d.div.withConfig({displayName:"GetSubscription__TitleBodyContainer",componentId:"sc-1m0he0l-2"})(["display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;margin-left:",";"],h.c.SPACING_2B),Me=u.d.div.withConfig({displayName:"GetSubscription__TitleContainer",componentId:"sc-1m0he0l-3"})(["text-align:left;font-size:",";line-height:",";font-weight:",";color:",";"],h.d.MEDIUM,h.d.LINE_HEIGHT_MAX,h.d.SEMIBOLD,(function(e){return e.theme.TEXT_PRIMARY})),Ne=u.d.div.withConfig({displayName:"GetSubscription__BodyContainer",componentId:"sc-1m0he0l-4"})(["margin-top:",";text-align:left;font-size:",";line-height:",";color:",";"],h.c.SPACING_2B,h.d.SMALL,h.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_PRIMARY})),Te=u.d.a.withConfig({displayName:"GetSubscription__GetSubscriptionBtn",componentId:"sc-1m0he0l-5"})(["display:flex;height:40px;min-width:100%;justify-content:center;align-items:center;background:",";border-radius:4px;font-weight:",";font-size:",";line-height:",";color:",";margin-top:",";cursor:pointer;text-decoration:none;"],(function(e){return e.theme.GREEN}),h.d.BOLD,h.d.MEDIUM,h.d.LINE_HEIGHT,(function(e){return e.theme.WHITE}),h.c.SPACING_4B),Ae=function(){var e=Object(r.e)((function(e){return e.getIn(["app","chatDisableCtaUrl"])}));return a.a.createElement(ye,null,a.a.createElement(d.a,{justifyContent:"flex-start",alignItems:"flex-start"},a.a.createElement(xe,null,a.a.createElement("img",{src:be.getSubscriptionIcon})),a.a.createElement(Se,null,a.a.createElement(Me,null,g.j.GET_SUBSCRIPTION_INFO.TITLE),a.a.createElement(Ne,null,g.j.GET_SUBSCRIPTION_INFO.BODY))),a.a.createElement(Te,{href:e,target:"_blank"},g.j.GET_SUBSCRIPTION_INFO.BUTTON_TEXT))},ve={bannedIcon:n("A4gQ")},we=u.d.div.withConfig({displayName:"BannedInfo__BannedInfoContainer",componentId:"sc-12gbrx7-0"})(["position:absolute;display:flex;flex-direction:column;background:",";box-shadow:0px 16px 32px ",";border-radius:",";left:",";right:",";padding:",";bottom:",";transition:bottom 0.2s ease-in;z-index:3;"],(function(e){return e.theme.BG_MAIN}),(function(e){return e.theme.BORDER}),h.c.SPACING_2B,h.c.SPACING_4B,h.c.SPACING_4B,h.c.SPACING_4B,(function(e){return e.isOpen?h.c.SPACING_4B:"-156px"})),Be=u.d.div.withConfig({displayName:"BannedInfo__IconContainer",componentId:"sc-12gbrx7-1"})(["display:flex;justify-content:center;align-items:center;width:24px;height:24px;background:",";border-radius:8px;"],(function(e){return e.theme.BG_MAIN})),Pe=u.d.div.withConfig({displayName:"BannedInfo__TitleContainer",componentId:"sc-12gbrx7-2"})(["text-align:left;font-size:",";line-height:",";font-weight:",";color:",";margin-left:",";"],h.d.MEDIUM,h.d.LINE_HEIGHT_MAX,h.d.SEMIBOLD,(function(e){return e.theme.TEXT_PRIMARY}),h.c.SPACING_2B),ke=u.d.div.withConfig({displayName:"BannedInfo__BodyContainer",componentId:"sc-12gbrx7-3"})(["margin-top:",";text-align:left;font-size:",";line-height:",";color:",";"],h.c.SPACING_4B,h.d.SMALL,h.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_PRIMARY})),Re=u.d.div.withConfig({displayName:"BannedInfo__CloseButton",componentId:"sc-12gbrx7-4"})(["position:absolute;right:",";display:flex;justify-content:center;align-items:center;width:20px;height:20px;cursor:pointer;"],h.c.SPACING_4B),Ge=a.a.memo((function(e){var t=e.isOpen,n=e.onClose;return a.a.createElement(we,{isOpen:t},a.a.createElement(d.a,{justifyContent:"flex-start",alignItems:"center"},a.a.createElement(Be,null,a.a.createElement("img",{src:ve.bannedIcon})),a.a.createElement(Pe,null,g.j.BANNED_INFO.TITLE),a.a.createElement(Re,{onClick:n},a.a.createElement(m.u,{height:16,width:16}))),a.a.createElement(d.a,{flexDirection:"column",alignItems:"flex-start"},a.a.createElement(ke,null,g.j.BANNED_INFO.BODY)))}));Ge.propTypes={isOpen:p.a.bool,onClose:p.a.func.isRequired},Ge.defaultProps={isOpen:!1};var Oe=Ge,je={verifyEmailIcon:n("J37r"),verifyPhoneIcon:n("lwsK")},Le=u.d.div.withConfig({displayName:"VerifyPhoneEmail__VerifyPhoneEmailContainer",componentId:"drdpj3-0"})(["display:flex;flex-direction:column;background:",";box-shadow:0px 16px 32px ",";border-radius:",";margin:",";margin-top:",";padding:",";z-index:3;"],(function(e){return e.theme.BG_MAIN}),(function(e){return e.theme.BORDER}),h.c.SPACING_2B,h.c.SPACING_4B,h.c.SPACING_0B,h.c.SPACING_4B),De=u.d.div.withConfig({displayName:"VerifyPhoneEmail__IconContainer",componentId:"drdpj3-1"})(["display:flex;justify-content:center;align-items:center;width:24px;height:24px;background:",";border-radius:8px;"],(function(e){return e.theme.BG_MAIN})),Ue=u.d.div.withConfig({displayName:"VerifyPhoneEmail__TitleContainer",componentId:"drdpj3-2"})(["text-align:left;font-size:",";line-height:",";font-weight:",";color:",";margin-left:",";"],h.d.MEDIUM,h.d.LINE_HEIGHT_MAX,h.d.SEMIBOLD,(function(e){return e.theme.TEXT_PRIMARY}),h.c.SPACING_2B),Qe=u.d.div.withConfig({displayName:"VerifyPhoneEmail__BodyContainer",componentId:"drdpj3-3"})(["margin-top:",";text-align:left;font-size:",";line-height:",";color:",";"],h.c.SPACING_4B,h.d.SMALL,h.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_PRIMARY})),He=u.d.a.withConfig({displayName:"VerifyPhoneEmail__VerifyButton",componentId:"drdpj3-4"})(["display:flex;height:40px;min-width:80px;justify-content:center;align-items:center;background:",";border-radius:4px;font-weight:",";font-size:",";line-height:",";color:",";margin-top:",";cursor:pointer;text-decoration:none;"],(function(e){return e.theme.GREEN}),h.d.BOLD,h.d.MEDIUM,h.d.LINE_HEIGHT,(function(e){return e.theme.WHITE}),h.c.SPACING_4B),Fe=a.a.memo((function(e){var t=e.type,n=e.ctaUrl;return a.a.createElement(Le,null,a.a.createElement(d.a,{justifyContent:"flex-start",alignItems:"center"},a.a.createElement(De,null,a.a.createElement("img",{src:function(){switch(t){case"email":return je.verifyEmailIcon;case"phone number":default:return je.verifyPhoneIcon}}()})),a.a.createElement(Ue,null,"Verify your "+t)),a.a.createElement(d.a,{justifyContent:"space-between",alignItems:"flex-end"},a.a.createElement(Qe,null,g.j.VERIFY_PHONE_EMAIL.PREFIX+t+g.j.VERIFY_PHONE_EMAIL.SUFFIX),a.a.createElement(He,{href:n,target:"_blank"},"Verify")))}));Fe.propTypes={type:p.a.string.isRequired,ctaUrl:p.a.string.isRequired},Fe.defaultProps={type:"phone number",ctaUrl:""};var ze=Fe,Xe=u.d.div.withConfig({displayName:"ChatDisabledFooter__ChatDisableContainer",componentId:"sc-5d7wbl-0"})(["display:flex;flex:1;justify-content:space-between;align-items:center;font-size:",";line-height:",";color:",";background:",";"],h.d.SMALL,h.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_TERTIARY}),(function(e){return e.theme.BODY_BG})),qe=Object(u.d)(Xe).withConfig({displayName:"ChatDisabledFooter__FooterTextContainer",componentId:"sc-5d7wbl-1"})(["display:flex;flex:1;justify-content:center;align-items:center;padding:",";background:",";"],h.c.SPACING_4B,(function(e){return e.theme.BG_MAIN})),Ye=u.d.div.withConfig({displayName:"ChatDisabledFooter__InfoIcon",componentId:"sc-5d7wbl-2"})(["width:16px;height:16px;margin-left:",";cursor:pointer;"],h.c.SPACING_2B),We=a.a.memo((function(e){e.onReceivingEmoji;var t=Object(r.e)((function(e){return e.getIn(["app","chatDisableText"])})),n=Object(o.useState)(!1),i=H()(n,2),s=i[0],c=i[1],l=function(){c(!0)};return a.a.createElement(Xe,null,function(){switch(t){case g.f.BANNED:return a.a.createElement(qe,null,a.a.createElement(d.a,{justifyContent:"center",alignItems:"center"},t,a.a.createElement(Ye,{onClick:l},a.a.createElement(m.l,null))));case g.f.PHONE_UNVERIFIED:return a.a.createElement(ze,{type:"phone number"});case g.f.EMAIL_UNVERIFIED:return a.a.createElement(ze,{type:"email"});case g.f.REPLAY:return a.a.createElement(qe,null,t);case g.f.GET_SUBSCRIPTION:return a.a.createElement(Ae,null);default:return a.a.createElement(qe,null,g.f.DEFAULT)}}(),a.a.createElement(Oe,{isOpen:s,onClose:function(){c(!1)}}))}));Xe.propTypes={onReceivingEmoji:p.a.func},Xe.defaultProps={};var Ke=We,Ve=n("XRQK"),Je=u.d.div.withConfig({displayName:"EducatorChatDisabledFooter__ChatDisabledFooterContainer",componentId:"sc-5hwlqt-0"})(["display:flex;flex-direction:column;background:",";box-shadow:0px 16px 32px ",";border-radius:",";"," margin-top:",";padding:",";"],(function(e){return e.theme.BG_MAIN}),(function(e){return e.theme.BORDER}),h.c.SPACING_2B,(function(e){if(e.isQuestionFeed)return Object(u.c)(["margin:",";"],h.c.SPACING_4B)}),h.c.SPACING_0B,h.c.SPACING_4B),Ze=u.d.div.withConfig({displayName:"EducatorChatDisabledFooter__IconContainer",componentId:"sc-5hwlqt-1"})(["display:flex;justify-content:center;align-items:center;width:24px;height:24px;background:",";border-radius:8px;"],(function(e){return e.theme.BG_MAIN})),$e=u.d.div.withConfig({displayName:"EducatorChatDisabledFooter__TitleContainer",componentId:"sc-5hwlqt-2"})(["text-align:left;font-size:",";line-height:",";font-weight:",";color:",";margin-left:",";"],h.d.MEDIUM,h.d.LINE_HEIGHT_MAX,h.d.SEMIBOLD,(function(e){return e.theme.TEXT_PRIMARY}),h.c.SPACING_2B),et=u.d.div.withConfig({displayName:"EducatorChatDisabledFooter__BodyContainer",componentId:"sc-5hwlqt-3"})(["margin-top:",";text-align:left;font-size:",";line-height:",";color:",";width:75%;margin-right:",";"],h.c.SPACING_4B,h.d.SMALL,h.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_PRIMARY}),h.c.SPACING_2B),tt=Object(u.d)(Ve.a).withConfig({displayName:"EducatorChatDisabledFooter__EnableButton",componentId:"sc-5hwlqt-4"})(["height:40px;width:80px;justify-content:center;align-items:center;"]),nt=a.a.memo((function(e){var t=e.type,n=e.socketManager,i=Object(r.e)((function(e){return e.getIn(["app","classState"])}));return a.a.createElement(Je,{isQuestionFeed:"questions"==t},a.a.createElement(d.a,{justifyContent:"flex-start",alignItems:"center"},a.a.createElement(Ze,null,function(){switch(t){case"chat":return a.a.createElement(m.k,null);case"questions":return a.a.createElement(m.zb,null);default:return a.a.createElement(m.k,null)}}()),a.a.createElement($e,null,function(){switch(t){case"chat":return g.Fb.CHAT_DISABLED_HEADER;case"questions":return g.Fb.QUESTIONS_DISABLED_HEADER;default:return g.Fb.CHAT_DISABLED_HEADER}}())),a.a.createElement(d.a,{justifyContent:"space-between",alignItems:"flex-end"},a.a.createElement(et,null,function(){switch(t){case"chat":return g.Fb.CHAT_DISABLED_BODY;case"questions":return g.Fb.QUESTIONS_DISABLED_BODY;default:return g.Fb.CHAT_DISABLED_BODY}}()),a.a.createElement(tt,{onClick:function(){switch(t){case"chat":n.setClassConfiguration({chatEnabled:!0});break;case"questions":10===i&&n.setClassConfiguration({questionsEnabled:!0})}},isEducator:!0,variant:"questions"===t&&10!==i?"disabled":"filled"},g.Fb.ENABLE_BUTTON_TEXT)))}));nt.propTypes={type:p.a.string.isRequired},nt.defaultProps={type:"chat"};var it=nt,st=n("ZfJe");const ot=u.d.div.withConfig({displayName:"Send__InputAreaWrapper",componentId:"ym9end-0"})(["display:flex;flex:1;align-items:center;justify-content:center;background:",";padding:",";@media only screen and (max-width:850px){margin-right:20%;}"],({theme:e})=>e.BG_MAIN,h.c.SPACING_4B),at=u.d.div.withConfig({displayName:"Send__TextAreaWrapper",componentId:"ym9end-1"})(["position:relative;display:flex;flex:1;align-items:center;justify-content:center;background:",";border:1px solid ",";border-radius:",";padding:"," ",";cursor:pointer;overflow:auto;outline:none;& > textarea{display:flex;flex:1;justify-content:flex-start;align-items:center;overflow-y:auto;border:none;outline:none;resize:none;word-wrap:break-word;font-family:UN_REGULAR;font-size:",";line-height:32px;height:32px;padding:",";color:",";background:inherit;}& > textarea::-webkit-input-placeholder{color:",";font-family:UN_REGULAR;}& > textarea::-moz-placeholder{color:",";font-family:UN_REGULAR;}"],({theme:e})=>e.BG_MAIN,e=>e.showTempBlockedWarning?e.theme.RED:e.theme.BORDER,h.c.SPACING_2B,h.c.SPACING_2B,h.c.SPACING_4B,h.d.SMALL,h.c.SPACING_0B,({theme:e})=>e.TEXT_PRIMARY,({theme:e})=>e.TEXT_TERTIARY,({theme:e})=>e.TEXT_TERTIARY),rt=u.d.div.withConfig({displayName:"Send__QuestionIconContainer",componentId:"ym9end-2"})(["display:flex;height:20px;width:20px;margin-left:16px;cursor:pointer;"]),ct=u.d.div.withConfig({displayName:"Send__SendButtonContainer",componentId:"ym9end-3"})(["display:flex;align-items:center;justify-content:center;width:24px;height:24px;margin-left:",";background:",";border-radius:",";"],h.c.SPACING_1B,({theme:e})=>e.TEXT_PRIMARY,h.c.SPACING_1B),dt=u.d.div.withConfig({displayName:"Send__SendCompWrapper",componentId:"ym9end-4"})(["display:flex;flex-direction:column;flex:1;position:relative;background:",";",""],({theme:e})=>e.BG_MAIN,e=>e.isVisible?Object(u.c)(["max-height:360px;transition:max-height 0s 0.2s;"]):Object(u.c)(["max-height:0;"])),lt=u.d.div.withConfig({displayName:"Send__ChatDisabledWrapper",componentId:"ym9end-5"})(["position:relative;display:flex;width:100%;height:100%;align-items:center;justify-content:space-between;color:",";font-size:",";line-height:",";"],({theme:e})=>e.TEXT_TERTIARY,h.d.SMALL,h.d.LINE_HEIGHT_MAX);class pt extends a.a.PureComponent{constructor(e){super(e),s()(this,"handleChange",e=>{e&&this.setState({messageContent:e.target.value,showSendButton:e.target.value.length>0})}),s()(this,"handleKeyPress",e=>{e.target.value&&"Enter"===e.key&&(this.sendMessage(e.target.value),e.preventDefault&&e.preventDefault())}),s()(this,"sendMessage",()=>{let e=this.state.messageContent.trim();if(0!==e.length){if(!this.props.isEducator){if(this.messagesSent>=g.i.MAX_MSG_LIMIT)return clearTimeout(this.limitTimer),this.limitTimer=null,this.initTempBlockedTimeRemainingInterval(),void this.showTempBlockedWarning();0==this.messagesSent&&(clearTimeout(this.limitTimer),this.limitTimer=setTimeout(()=>{this.messagesSent=0,this.hideTempBlockedWarning()},1e3*g.i.MAX_SEND_TIME_LIMIT)),this.messagesSent+=1}this.props.onNewMessage(e),this.setState({messageContent:"",showSendButton:!1},this.handleKeyUp)}}),s()(this,"showTempBlockedWarning",()=>{this.state.showTempBlockedWarning||this.setState({showTempBlockedWarning:!0})}),s()(this,"initTempBlockedTimeRemainingInterval",()=>{this.tempBlockedTimeRemainingInterval||(this.tempBlockedTimeRemainingInterval=setInterval(()=>{this.setState(e=>({tempBlockedTimeRemaining:e.tempBlockedTimeRemaining-1}),()=>{0===this.state.tempBlockedTimeRemaining&&this.resetTempBlockedState()})},1e3))}),s()(this,"resetTempBlockedState",()=>{this.messagesSent=0,clearInterval(this.tempBlockedTimeRemainingInterval),this.tempBlockedTimeRemainingInterval=null,this.setState({showTempBlockedWarning:!1,tempBlockedTimeRemaining:g.i.COOLDOWN_TIME})}),s()(this,"hideTempBlockedWarning",()=>{this.state.showTempBlockedWarning&&this.setState({showTempBlockedWarning:!1})}),s()(this,"preventCutCopyPaste",e=>{this.props.isEducator||this.props.isUnacademyUser||e.preventDefault()}),s()(this,"handleKeyUp",e=>{setTimeout(()=>{if(this.textInput){this.textInput.style.height="1px";let e=Math.min(this.textInput.scrollHeight,54);this.textInput.style.lineHeight=e>32?"150%":"32px",this.textInput.style.height=Math.min(this.textInput.scrollHeight,54)+"px",this.textInput.scrollTop=this.textInput.scrollHeight}},0)}),s()(this,"enableQuestionMode",()=>{this.props.setQuestionMode(!0)}),s()(this,"handleChatFocus",()=>{this.props.isEducator||this.props.chatRulesShownBefore||(this.setState({showChatRules:!0},()=>{this.textInput&&this.textInput.blur()}),this.props.setChatRulesShown(!0)),this.props.setChatFocus(!0)}),s()(this,"hideChatRules",()=>{this.setState({showChatRules:!1},()=>{this.textInput&&this.textInput.blur()})}),s()(this,"handleChatBlur",()=>{this.props.setChatFocus(!1)}),this.messagesSent=0,this.limitTimer=null,this.tempBlockedTimeRemainingInterval=null,this.state={messageContent:"",showSendButton:!1,showTempBlockedWarning:!1,showChatRules:!1,tempBlockedTimeRemaining:g.i.COOLDOWN_TIME}}componentDidUpdate(e){e.isLive===this.props.isLive||this.props.isLive||this.props.isQuestionModeEnabled&&this.props.setQuestionMode(!1)}componentWillUnmount(){clearTimeout(this.limitTimer),clearInterval(this.tempBlockedTimeRemainingInterval)}renderChatDisabledFooter(){if(!this.props.canChat)return a.a.createElement(Ke,{onReceivingEmoji:this.props.onReceivingEmoji})}renderAskQuestion(){if(!this.props.isEducator&&this.props.isQuestionEnabled&&this.props.isLive)return a.a.createElement(rt,{onClick:this.enableQuestionMode},a.a.createElement(m.Ab,null))}renderSmartReplies(){if(!this.props.isEducator&&this.props.canChat&&this.props.smartReplies.size>0)return a.a.createElement(U,{selectReply:this.props.selectReply})}renderTempBlockedWarning(){if(this.state.showTempBlockedWarning&&this.props.canChat)return a.a.createElement(N,{timeRemaining:this.state.tempBlockedTimeRemaining,iconType:g.j.TEMP_BLOCKED.ICON_TYPE,title:g.j.TEMP_BLOCKED.TITLE,body:g.j.TEMP_BLOCKED.BODY,closeAction:this.hideTempBlockedWarning})}renderSendButton(){if(this.state.showSendButton)return a.a.createElement(ct,{onClick:this.sendMessage},a.a.createElement(m.Yb,null))}renderEmojiButton(){if(!this.props.isEducator&&!this.state.showSendButton&&this.props.emojiArray)return a.a.createElement(_e,{onReceivingEmoji:this.props.onReceivingEmoji})}renderTextInput(){return a.a.createElement(at,{showTempBlockedWarning:this.state.showTempBlockedWarning},a.a.createElement("textarea",{ref:e=>{this.textInput=e},onKeyPress:this.handleKeyPress,onChange:this.handleChange,value:this.state.messageContent,placeholder:g.Zb.COMMENT_INPUT_PLACEHOLDER,onFocus:this.handleChatFocus,onBlur:this.handleChatBlur,onKeyUp:this.handleKeyUp,maxLength:g.hb,onCut:this.preventCutCopyPaste,onPaste:this.preventCutCopyPaste,onCopy:this.preventCutCopyPaste,rows:1,tabIndex:-1}),this.renderSendButton(),this.renderEmojiButton())}renderChatDisabledByEducatorView(){return this.props.isEducator&&!this.props.isQuestionsTabOpen?a.a.createElement(it,{type:"chat",socketManager:this.props.socketManager}):this.props.isEducator?void 0:a.a.createElement(lt,null,g.f.DISABLED_FOOTER,this.renderEmojiButton())}renderEmojiAndTextInput(){return this.props.isChatDisabledByEducator?this.renderChatDisabledByEducatorView():this.renderTextInput()}renderInputArea(){if(this.props.canChat)return a.a.createElement(ot,null,this.renderEmojiAndTextInput(),this.renderAskQuestion())}renderChatRules(){return a.a.createElement(R,{isOpen:this.state.showChatRules,onClose:this.hideChatRules})}render(){return a.a.createElement(dt,{isVisible:!this.props.isQuestionModeEnabled},a.a.createElement(d.a,{flexDirection:"column"},this.renderSmartReplies(),this.renderTempBlockedWarning(),this.renderChatDisabledFooter()),this.renderInputArea(),this.renderChatRules())}}const ut={setChatRulesShown:st.u,setChatFocus:st.s,setQuestionMode:st.A};var ht=Object(r.c)(e=>({canChat:e.getIn(["app","canChat"]),isReplay:e.getIn(["app","isReplay"]),isChatFocused:e.getIn(["chat","isChatFocused"]),chatRulesShownBefore:e.getIn(["chat","chatRulesShownBefore"]),isEducator:e.getIn(["app","isEducator"]),isUnacademyUser:e.getIn(["app","isUnacademyUser"]),emojiArray:e.getIn(["app","emojiArray"]),smartReplies:e.getIn(["chat","smartReplies"]),isChatDisabledByEducator:e.getIn(["chat","isChatDisabledByEducator"]),isQuestionEnabled:e.getIn(["chat","isQuestionEnabled"]),isLive:10===e.getIn(["app","classState"]),isQuestionModeEnabled:e.getIn(["chat","isQuestionModeEnabled"]),isQuestionsTabOpen:e.getIn(["chat","isQuestionsTabOpen"])}),ut)(pt),mt=u.d.div.withConfig({displayName:"JoinedMessage__JoinedMessageWrapper",componentId:"sc-9izn61-0"})(["display:'flex';align-items:center;justify-content:center;flex:1;margin-bottom:",";@media only screen and (max-width:850px){margin:"," ",";}"],h.c.SPACING_2B,h.c.SPACING_1B,h.c.SPACING_0B),gt=u.d.div.withConfig({displayName:"JoinedMessage__JoinedMessageBox",componentId:"sc-9izn61-1"})(["display:inline-block;padding:",";border:1px solid ",";background:",";font-size:",";line-height:",";word-wrap:break-word;box-sizing:border-box;border-radius:",";font-weight:",";@media only screen and (max-width:850px){padding:",";font-size:",";line-height:",";border:none;}"],h.c.SPACING_2B,(function(e){return e.theme.BORDER}),(function(e){return e.theme.BG_MAIN}),h.d.SMALL,h.d.LINE_HEIGHT_MAX,h.c.SPACING_2B,h.d.REGULAR,h.c.SPACING_1B,h.d.EXTRA_SMALL,h.d.LINE_HEIGHT_MEDIUM),ft=u.d.span.withConfig({displayName:"JoinedMessage__JoinedMessageText",componentId:"sc-9izn61-2"})(["text-transform:capitalize;color:",";",""],(function(e){return e.isEducator?e.theme.BLUE:e.theme.TEXT_PRIMARY}),(function(e){if(e.isJoinedText)return Object(u.c)(["text-transform:none;color:",";"],(function(e){return e.theme.TEXT_TERTIARY}))})),It=a.a.memo((function(e){var t=e.message;return a.a.createElement(mt,null,a.a.createElement(gt,null,a.a.createElement(ft,{isEducator:t.isEducator},t.sender.name," ",a.a.createElement(ft,{isJoinedText:!0},t.text))))}));It.propTypes={message:p.a.object.isRequired},It.defaultProps={};var Et=It,Ct=n("tHIZ"),_t=u.d.div.withConfig({displayName:"GroupMessage__GroupMessageContainer",componentId:"sc-1asq124-0"})(["display:flex;flex:1;justify-content:space-evenly;align-items:center;background:",";border:1px solid ",";border-radius:",";height:48px;margin-bottom:",";@media only screen and (max-width:1150px){height:32px;margin-bottom:",";border:none;}@media only screen and (max-width:850px){height:24px;margin-bottom:",";border:none;}"],(function(e){return e.theme.BG_MAIN}),(function(e){return e.theme.BORDER}),h.c.SPACING_2B,h.c.SPACING_2B,h.c.SPACING_1,h.c.SPACING_1),bt=u.d.div.withConfig({displayName:"GroupMessage__EmojiCountText",componentId:"sc-1asq124-1"})(["font-size:",";line-height:",";@media only screen and (max-width:850px){font-size:",";line-height:",";}",""],h.d.MEDIUM,h.d.LINE_HEIGHT_MAX,h.d.SMALL,h.d.LINE_HEIGHT_MEDIUM,(function(e){return e.isSelf?Object(u.c)(["font-weight:",";color:",";"],h.d.SEMIBOLD,(function(e){return e.theme.GREEN})):Object(u.c)(["color:",";"],(function(e){return e.theme.TEXT_PRIMARY}))})),yt=a.a.memo((function(e){var t=e.message,n=Object(r.e)((function(e){return e.getIn(["app","userId"])})),i=Object(r.e)((function(e){return e.getIn(["app","emojiArray"])}));return function(e){var t=e.size;if(t>0){var n=44-4*(t-1);return a.a.createElement(_t,null,e.map((function(e,t){return a.a.createElement(d.a,{key:t,justifyContent:"center",alignItems:"center"},a.a.createElement(le,{data:e,shouldClick:!1,size:n}),a.a.createElement(bt,{isSelf:e.isSelf},e.count<=999?e.count:"1k+"))})))}return null}(Ct.a.getEmojiDisplayData(t,n,i))}));yt.propTypes={message:p.a.object.isRequired},yt.defaultProps={};var xt=yt,St=n("KUUV"),Mt=n("b5IN"),Nt=n("XyO8");const Tt={pinnedImg:n("AhVe"),unPinnedImg:n("7BOt"),reportBlockFlag:n("/An2")},At=u.d.div.withConfig({displayName:"TextMessage__UserAvatarContainer",componentId:"sc-10lnoz4-0"})(["display:flex;padding-top:",";width:36px;@media only screen and (max-width:850px){width:0px;}"],h.c.SPACING_2B),vt=u.d.div.withConfig({displayName:"TextMessage__TextMessageWrapper",componentId:"sc-10lnoz4-1"})(["display:flex;flex:1;margin-bottom:",";@media only screen and (max-width:850px){margin-bottom:",";padding-right:",";}"],h.c.SPACING_2B,h.c.SPACING_1,h.c.SPACING_2),wt=Object(u.d)(d.a).withConfig({displayName:"TextMessage__TextMessageContent",componentId:"sc-10lnoz4-2"})(["width:100%;"]),Bt=u.d.div.withConfig({displayName:"TextMessage__MessageBox",componentId:"sc-10lnoz4-3"})(["position:relative;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;text-align:left;width:min(248px,75%);padding:"," ",";border-radius:",";background:",";border:1px solid ",";box-sizing:border-box;word-break:break-word;@media only screen and (max-width:850px){width:100%;border:none;margin-bottom:",";margin-top:",";}",";",";"],h.c.SPACING_2B,h.c.SPACING_3B,h.c.SPACING_2B,({theme:e})=>e.BG_MAIN,({theme:e})=>e.BORDER,h.c.SPACING_1,h.c.SPACING_0B,e=>{if(e.isContinued)return Object(u.c)(["@media only screen and (min-width:850px){margin-left:",";margin-top:-",";}"],h.c.SPACING_9B,h.c.SPACING_6)},e=>e.isEducator?Object(u.c)(["background:",";border:none;"],({theme:e})=>e.BLUE):e.isSelf?Object(u.c)(["background:",";border:none;"],({theme:e})=>e.TEXT_PRIMARY):void 0),Pt=u.d.div.withConfig({displayName:"TextMessage__Header",componentId:"sc-10lnoz4-4"})(["display:flex;width:100%;justify-content:space-between;"]),kt=u.d.span.withConfig({displayName:"TextMessage__MessageHeader",componentId:"sc-10lnoz4-5"})(["display:inline-block;font-size:",";color:",";margin-right:",";line-height:",";text-transform:capitalize;@media only screen and (max-width:850px){font-size:",";line-height:",";margin-right:",";&:after{content:':';}}",";"],h.d.SMALL,({theme:e})=>e.TEXT_TERTIARY,h.c.SPACING_2B,h.d.LINE_HEIGHT_MAX,h.d.SMALL,h.d.LINE_HEIGHT_MEDIUM,h.c.SPACING_1B,e=>e.isEducator?Object(u.c)(["color:",";"],({theme:e})=>e.WHITE):e.isSelf?Object(u.c)(["color:",";"],({theme:e})=>e.BG_MAIN):void 0),Rt=u.d.div.withConfig({displayName:"TextMessage__MessagePinButton",componentId:"sc-10lnoz4-6"})(["position:absolute;cursor:pointer;display:flex;align-items:center;justify-content:center;height:24px;width:24px;margin:",";top:0;right:0;"],h.c.SPACING_2),Gt=u.d.img.withConfig({displayName:"TextMessage__MessageUnPinImage",componentId:"sc-10lnoz4-7"})(["width:16px;height:16px;"]),Ot=u.d.img.withConfig({displayName:"TextMessage__MessagePinImage",componentId:"sc-10lnoz4-8"})(["width:16px;height:16px;"]),jt=u.d.div.withConfig({displayName:"TextMessage__ReportBlockBtn",componentId:"sc-10lnoz4-9"})(["display:flex;justify-content:'flex-start';align-items:'flex-start';cursor:pointer;margin:"," ",";",";"],h.c.SPACING_2B,h.c.SPACING_1B,e=>{if(e.isContinued)return Object(u.c)(["@media only screen and (min-width:850px){margin-top:",";}"],h.c.SPACING_1B)}),Lt=Object(u.d)(Nt.l).withConfig({displayName:"TextMessage__IsSubscribedTag",componentId:"sc-10lnoz4-10"})(["text-transform:uppercase;height:18px;width:75px;background:",";color:",";display:flex;justify-content:center;align-items:center;line-height:",";border-radius:4px;"],({theme:e})=>e.BG_DARK,({theme:e})=>e.WHITE,h.d.LINE_HEIGHT),Dt=a.a.memo(({index:e,message:t,isSelf:n,isContinued:i,onPinUnpin:s})=>{const d=Object(r.d)(),l=Object(o.useState)(!1),p=H()(l,2),u=p[0],h=p[1],m=Object(o.useState)(!1),f=H()(m,2),I=f[0],E=f[1],C=t.timetoken?new Date(Number(t.timetoken)):new Date,_=Object(r.e)(e=>e.getIn(["app","isReplay"])),b=Object(r.e)(e=>e.getIn(["app","isEducator"])),y=Object(r.e)(e=>e.getIn(["app","isUnacademyUser"])),x=Object(r.e)(e=>e.getIn(["app","isUnTeachClass"])),S=Object(r.e)(e=>e.getIn(["chat","pinnedMsg"])),M=!!S&&S.id==t.id,N=Object(r.e)(e=>e.getIn(["app","isSpecial"])),T=t.isEducator,A=t.sender.isSubscribed&&!T&&b&&N,v=()=>{s(t,!0)},w=()=>{s(t,!1)},B=()=>{d(Object(st.m)(t))},P=()=>{if(!i)return _?a.a.createElement(kt,{isSelf:n,isEducator:T},t.sender.name):a.a.createElement(kt,{isSelf:n,isEducator:T},(A?Object(c.Eb)(t.sender.name):t.sender.name)+" \u2022 "+Object(c.R)(C))};return a.a.createElement(vt,{onMouseEnter:()=>{_||h(!0)},onMouseLeave:()=>{_||h(!1)}},a.a.createElement(wt,{onMouseEnter:()=>{E(!0)},onMouseLeave:()=>{E(!1)}},(()=>{if(!i)return a.a.createElement(At,null,a.a.createElement(St.a,{key:e,avatar:Object(c.a)(t.sender.image),name:t.sender.name,size:28,borderSize:4}))})(),a.a.createElement(Bt,{isSelf:n,isEducator:T,isContinued:i},a.a.createElement(Pt,null,P(),(()=>{if(!i&&A)return a.a.createElement(Lt,null,g.Sb)})()),a.a.createElement(Mt.a,{isSelf:n,isContinued:i,isEducator:T,messageId:t.id,msgText:t.text}),(()=>{if(I&&b&&T)return M?a.a.createElement(Rt,{onClick:w},a.a.createElement(Gt,{src:Tt.unPinnedImg})):a.a.createElement(Rt,{onClick:v},a.a.createElement(Ot,{src:Tt.pinnedImg}))})()),(()=>{if(!_&&u&&!n&&(!T||!y)&&!x)return a.a.createElement(jt,{onClick:B,isContinued:i},a.a.createElement("img",{src:Tt.reportBlockFlag,style:{height:"16px"}}))})()))});Dt.propTypes={index:p.a.number.isRequired,message:p.a.object.isRequired,isSelf:p.a.bool,isContinued:p.a.bool,onPinUnpin:p.a.func},Dt.defaultProps={isSelf:!1,isContinued:!1};var Ut=Dt,Qt=n("WQoh");function Ht(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=te()(e);if(t){var s=te()(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return $()(this,n)}}var Ft=u.d.div.withConfig({displayName:"MessageView__MessagesContainer",componentId:"sc-1gbrmjr-0"})(["display:flex;margin-right:",";"],h.c.SPACING_4B),zt=function(e){J()(n,e);var t=Ht(n);function n(){var e;X()(this,n);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o)),s()(K()(e),"renderJoinedMessage",(function(){return a.a.createElement(Et,{message:e.props.message})})),s()(K()(e),"renderGroupMessage",(function(){return a.a.createElement(xt,{message:e.props.message})})),s()(K()(e),"renderTextMessage",(function(){return a.a.createElement(Ut,{index:e.props.index,message:e.props.message,isSelf:e.props.isSelf,isContinued:e.props.isContinued,onPinUnpin:e.props.onPinUnpin})})),s()(K()(e),"renderQuestion",(function(){if(!e.props.isEducator&&!e.props.isChatDisabledByEducator)return a.a.createElement(Qt.a,{index:e.props.index,message:e.props.message,isSelf:e.props.isSelf})})),s()(K()(e),"renderMessage",(function(){switch(e.props.message.type){case g.jb.ATTENDANCE:return e.renderJoinedMessage();case g.jb.NEW_GROUP:return e.renderGroupMessage();case g.jb.MESSAGE:return e.renderTextMessage();case g.jb.QUESTION:return e.renderQuestion();default:return null}})),e}return Y()(n,[{key:"render",value:function(){return a.a.createElement(Ft,null,this.renderMessage())}}]),n}(a.a.PureComponent),Xt=Object(r.c)((function(e){return{isEducator:e.getIn(["app","isEducator"]),isChatDisabledByEducator:e.getIn(["chat","isChatDisabledByEducator"])}}))(zt),qt=n("7G9T"),Yt=n("H6ri"),Wt=n("anaU"),Kt=n("Goyy");function Vt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=te()(e);if(t){var s=te()(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return $()(this,n)}}var Jt=u.d.div.withConfig({displayName:"Feed__ScrollMarkerContainer",componentId:"zyvu9k-0"})(["position:absolute;right:14px;height:24px;width:24px;border:1px solid ",";border-radius:",";box-sizing:border-box;background:",";cursor:pointer;bottom:",";will-change:bottom;transition:bottom 0.25s ease-in;"],(function(e){return e.theme.TEXT_PRIMARY}),h.c.SPACING_2B,(function(e){return e.theme.BG_MAIN}),(function(e){return e.isOpen?h.c.SPACING_2B:"-56px"})),Zt=u.d.div.withConfig({displayName:"Feed__NewMessagesMarkerContainer",componentId:"zyvu9k-1"})(["position:absolute;bottom:18px;height:14px;min-width:18px;border-radius:",";background:",";color:",";font-size:",";line-height:",";cursor:pointer;padding:"," ",";left:50%;transform:translateX(-50%);"],h.c.SPACING_1B,(function(e){return e.theme.TEXT_PRIMARY}),(function(e){return e.theme.BG_MAIN}),h.d.EXTRA_SMALL,h.d.LINE_HEIGHT_MAX,h.c.SPACING_0B,h.c.SPACING_1B),$t=u.d.div.withConfig({displayName:"Feed__ChatFeedContainer",componentId:"zyvu9k-2"})(["position:relative;display:flex;flex-direction:column;flex:1;justify-content:flex-end;overflow:hidden;background:",";"],(function(e){return e.theme.BODY_BG})),en=u.d.div.withConfig({displayName:"Feed__VirtualListWrapper",componentId:"zyvu9k-3"})(["position:absolute;top:",";width:100%;height:100%;overflow:hidden;padding-left:",";padding-right:",";padding-top:",";box-sizing:border-box;@media only screen and (max-width:1150px){padding-left:",";padding-right:",";}"],h.c.SPACING_0B,h.c.SPACING_4B,h.c.SPACING_1B,h.c.SPACING_2B,h.c.SPACING_2B,h.c.SPACING_2B),tn=u.d.div.withConfig({displayName:"Feed__EmptyStateContainer",componentId:"zyvu9k-4"})(["display:flex;flex-direction:column;justify-content:flex-start;height:100%;"]),nn=Object(u.d)(tn).withConfig({displayName:"Feed__DisabledStateContainer",componentId:"zyvu9k-5"})(["padding:",";"],h.c.SPACING_0B),sn=u.d.div.withConfig({displayName:"Feed__ChatShimmerContainer",componentId:"zyvu9k-6"})(["display:flex;position:absolute;bottom:",";padding:0 "," "," ",";"],h.c.SPACING_0B,h.c.SPACING_4B,h.c.SPACING_4B,h.c.SPACING_4B),on=u.d.div.withConfig({displayName:"Feed__EmptyStateContentWrapper",componentId:"zyvu9k-7"})(["display:flex;height:100%;flex-direction:column;justify-content:flex-start;align-items:center;z-index:2;background:",";"],(function(e){var t=e.theme;return"linear-gradient(180deg, ".concat(t.BODY_BG," 1%, ").concat(t.BODY_BG," 65%, rgba(0, 0, 0, 0) 99%)")})),an=Object(u.d)(on).withConfig({displayName:"Feed__DisabledStateContentWrapper",componentId:"zyvu9k-8"})(["background:",";"],(function(e){return e.theme.BODY_BG})),rn=u.d.div.withConfig({displayName:"Feed__SmileyContainer",componentId:"zyvu9k-9"})(["margin-top:",";height:88px;width:88px;"],h.c.SPACING_10B),cn=u.d.div.withConfig({displayName:"Feed__SmileyTextContainer",componentId:"zyvu9k-10"})(["margin-top:",";font-size:",";line-height:",";white-space:pre-wrap;color:",";width:50%;padding:16px;"],h.c.SPACING_4B,h.d.MEDIUM,h.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_TERTIARY})),dn=function(e){J()(n,e);var t=Vt(n);function n(e){var i;return X()(this,n),i=t.call(this,e),s()(K()(i),"getKeyMapping",(function(e,t){var n=i.props.messages.getItem(e);return n.id?n.id:"".concat(e)})),s()(K()(i),"havePinnedMessageChanged",(function(e){return e.pinnedMsg!==i.props.pinnedMsg})),s()(K()(i),"handleOnAutosizerResize",(function(e){var t=e.width;i.feedWidth&&t!==i.feedWidth&&(clearTimeout(i.clearCacheTimeout),i.clearCacheTimeout=setTimeout((function(){i.clearAllCache()}),400)),i.feedWidth=t})),s()(K()(i),"clearAllCache",(function(){i.cache.clearAll(),i.virtualChatList&&i.virtualChatList.recomputeGridSize()})),s()(K()(i),"recomputeGridSize",(function(){i.virtualChatList&&i.virtualChatList.recomputeGridSize()})),s()(K()(i),"getOffsetForLastRow",(function(){if(i.virtualChatList)return i.virtualChatList.getOffsetForRow({alignment:"end"})})),s()(K()(i),"scrollToRow",(function(e){i.virtualChatList&&i.virtualChatList.scrollToRow(e)})),s()(K()(i),"scrollToPosition",(function(e){i.virtualChatList&&i.virtualChatList.scrollToPosition(e)})),s()(K()(i),"scrollListToBottom",(function(){i.scrollToPosition(i.getOffsetForLastRow())})),s()(K()(i),"handleScroll",(function(e){var t=e.clientHeight,n=e.scrollHeight,s=e.scrollTop;i.scrollTop=s,i.scrollHeight=n,i.clientHeight=t,0==s&&i.loadMoreMessages(),s+t!==n?i.props.showScrollMarker():i.props.hideScrollMarker()})),s()(K()(i),"scrollToBottom",(function(){i.scrollListToBottom(),i.props.hideScrollMarker()})),s()(K()(i),"loadMoreMessages",(function(){i.props.areItemsLeft&&i.props.fetchMoreItems()})),s()(K()(i),"rowRenderer",(function(e){var t=e.index,n=e.style,s=e.key,o=e.parent,r=i.props.messages.getItem(t),c=Kt.b.isContinued(i.props.messages,t);return a.a.createElement(Wt.a,{key:s,cache:i.cache,parent:o,columnIndex:0,rowIndex:t},a.a.createElement("div",{style:n},a.a.createElement(Xt,{key:r.id,index:t,message:r,isSelf:i.props.userId===r.sender.uid,isContinued:c,onPinUnpin:i.props.onPinUnpin})))})),s()(K()(i),"renderList",(function(e){var t=e.width,n=e.height;return a.a.createElement(Yt.a,{id:"virtualChatList",className:"virtualChatList",ref:function(e){i.virtualChatList=e},onScroll:i.handleScroll,width:t,height:n,deferredMeasurementCache:i.cache,rowHeight:i.cache.rowHeight,rowRenderer:i.rowRenderer,rowCount:i.props.messages.length,overscanRowCount:10})})),s()(K()(i),"renderEmptyState",(function(){if(i.props.messages&&!i.props.messages.length&&!i.props.isChatDisabledByEducator)return a.a.createElement(tn,null,a.a.createElement(sn,null,a.a.createElement(m.o,null)),i.renderEmptyStateContent())})),s()(K()(i),"renderDisabledStateContent",(function(){return a.a.createElement(an,null,a.a.createElement(rn,null,a.a.createElement(m.n,null)),a.a.createElement(cn,null,g.f.DISABLED_FEED))})),s()(K()(i),"renderChatDisabledState",(function(){if(i.props.isChatDisabledByEducator)return a.a.createElement(nn,null,i.renderDisabledStateContent())})),s()(K()(i),"renderNewMessagesMarker",(function(){if(i.props.newMessagesCount>0)return a.a.createElement(Zt,null,i.props.newMessagesCount<99?i.props.newMessagesCount:"99+")})),s()(K()(i),"renderScrolltoBottomMarker",(function(){return a.a.createElement(Jt,{isOpen:i.props.isScrollMarkerActive,onClick:i.scrollToBottom},i.renderNewMessagesMarker(),a.a.createElement(m.Ib,{height:"100%",width:"100%"}))})),i.cache=new Wt.b({fixedWidth:!0,defaultHeight:50,keyMapper:i.getKeyMapping}),i.feedWidth=null,i}return Y()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.messages,n=e.messages;Kt.b.isFirstMessageSame(t,n)&&!Kt.b.areMessagesDeleted(t,n)||this.clearAllCache()}},{key:"componentDidUpdate",value:function(e){var t=e.messages,n=this.props.messages;Kt.b.isHistoryReceived(t,n)&&this.scrollToRow(n.length-t.length),0===t.length&&n.length>0&&this.scrollListToBottom(),Kt.b.haveMessagesChanged(t,n)&&(this.scrollTop+this.clientHeight+g.b>=this.scrollHeight?this.scrollListToBottom():this.props.showScrollMarker())}},{key:"shouldComponentUpdate",value:function(e,t){var n=!0;return Kt.b.haveMessagesChanged(this.props.messsages,e.messages)||e.newMessagesCount!==this.props.newMessagesCount||this.havePinnedMessageChanged(e)||(n=!1),ie()(this,e,t)&&n}},{key:"componentWillUnmount",value:function(){clearTimeout(this.clearCacheTimeout)}},{key:"renderAutoSizer",value:function(){return a.a.createElement(qt.a,{length:this.props.messages.length,children:this.renderList,onResize:this.handleOnAutosizerResize})}},{key:"renderEmptyStateContent",value:function(){return a.a.createElement(on,null,a.a.createElement(rn,null,a.a.createElement(m.m,null)),a.a.createElement(cn,null,g.f.LOADING))}},{key:"render",value:function(){return a.a.createElement($t,null,this.renderEmptyState(),this.renderChatDisabledState(),a.a.createElement(en,null,this.renderAutoSizer()),this.renderScrolltoBottomMarker())}}]),n}(a.a.Component),ln={showScrollMarker:st.F,hideScrollMarker:st.k},pn=Object(r.c)((function(e,t){return{messages:t.shouldSync?e.getIn(["chat","replayMessagesInView"]):e.getIn(["chat","messages"]),userId:e.getIn(["app","userId"]),isEducator:e.getIn(["app","isEducator"]),isUnacademyUser:e.getIn(["app","isUnacademyUser"]),isReplay:e.getIn(["app","isReplay"]),isUnTeachClass:e.getIn(["app","isUnTeachClass"]),isChatDisabledByEducator:e.getIn(["chat","isChatDisabledByEducator"]),newMessagesCount:e.getIn(["chat","newMessagesCount"]),isScrollMarkerActive:e.getIn(["chat","isScrollMarkerActive"])}}),ln,null,{forwardRef:!0})(dn),un=n("V5SF"),hn={attachment:n("X5ph"),overlay:n("dsp9")},mn=u.d.div.withConfig({displayName:"EducatorQuestionMessage__QuestionMessageWrapper",componentId:"sc-1lbm6l2-0"})(["display:flex;flex:1;flex-direction:column;margin-bottom:",";border-radius:",";background:",";border:1px solid ",";box-sizing:border-box;padding:"," ",";margin-right:",";@media only screen and (max-width:850px){margin-bottom:",";padding-right:",";}"],h.c.SPACING_3B,h.c.SPACING_2B,(function(e){var t=e.isOpenOnModal,n=e.theme;return t?n.BG_LIGHT:n.BG_MAIN}),(function(e){return e.theme.BORDER}),h.c.SPACING_4B,h.c.SPACING_3B,h.c.SPACING_3B,h.c.SPACING_1B,h.c.SPACING_2),gn=u.d.span.withConfig({displayName:"EducatorQuestionMessage__MessageHeader",componentId:"sc-1lbm6l2-1"})(["display:inline-block;font-size:",";color:",";margin-right:",";line-height:",";text-transform:capitalize;@media only screen and (max-width:850px){font-size:",";line-height:",";margin-right:",";&:after{content:':';}}"],h.d.SMALL,(function(e){return e.theme.TEXT_TERTIARY}),h.c.SPACING_2B,h.d.LINE_HEIGHT_MAX,h.d.EXTRA_SMALL,h.d.LINE_HEIGHT_MEDIUM,h.c.SPACING_1B),fn=u.d.div.withConfig({displayName:"EducatorQuestionMessage__QuestionMessageHeader",componentId:"sc-1lbm6l2-2"})(["display:flex;"]),In=u.d.div.withConfig({displayName:"EducatorQuestionMessage__QuestionDescriptionContainer",componentId:"sc-1lbm6l2-3"})(["font-size:",";line-height:",";color:",";margin-top:",";text-align:left;overflow:hidden;"],h.d.MEDIUM,h.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_PRIMARY}),h.c.SPACING_2B),En=u.d.div.withConfig({displayName:"EducatorQuestionMessage__QuestionImageContainer",componentId:"sc-1lbm6l2-4"})(["border-radius:2px;box-sizing:border-box;height:152px;overflow:hidden;position:relative;margin-top:",";"],h.c.SPACING_2B),Cn=(u.d.img.withConfig({displayName:"EducatorQuestionMessage__QuestionImg",componentId:"sc-1lbm6l2-5"})(["position:absolute;top:0;left:0;width:100%;height:100%;object-fit:fill;"]),u.d.img.withConfig({displayName:"EducatorQuestionMessage__BlurImgOverlay",componentId:"sc-1lbm6l2-6"})(["position:absolute;top:0;left:0;width:100%;height:100%;object-fit:fill;"])),_n=u.d.div.withConfig({displayName:"EducatorQuestionMessage__AttachmentContainer",componentId:"sc-1lbm6l2-7"})(["display:flex;align-items:center;justify-content:center;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:",";line-height:",";color:",";"],h.d.SMALL,h.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_TERTIARY})),bn=u.d.img.withConfig({displayName:"EducatorQuestionMessage__AttachmentImage",componentId:"sc-1lbm6l2-8"})(["height:24px;width:24px;"]),yn=u.d.div.withConfig({displayName:"EducatorQuestionMessage__ViewQuestionButton",componentId:"sc-1lbm6l2-9"})(["padding:"," ",";margin-top:",";background:",";border:1px solid ",";box-sizing:border-box;border-radius:",";font-weight:",";font-size:",";line-height:",";display:flex;align-items:center;justify-content:center;color:",";cursor:pointer;opacity:",";"],h.c.SPACING_4B,h.c.SPACING_0B,h.c.SPACING_2B,(function(e){return e.theme.BG_MAIN}),(function(e){return e.theme.BORDER}),h.c.SPACING_2B,h.d.BOLD,h.d.MEDIUM,h.d.LINE_HEIGHT,(function(e){return e.theme.TEXT_PRIMARY}),(function(e){return e.isOpenOnModal?.5:1})),xn=a.a.memo((function(e){var t=e.index,n=e.question,i=Object(r.d)(),s=n.timetoken?new Date(Number(n.timetoken)):new Date,o=Object(r.e)((function(e){return e.getIn(["chat","isQuestionModalOpen"])})),d=Object(r.e)((function(e){return e.getIn(["chat","questionIndexInModal"])})),l=o&&t===d,p=function(){l||i(Object(st.l)(t))};return a.a.createElement(mn,{isOpenOnModal:l},a.a.createElement(fn,null,a.a.createElement(St.a,{key:t,avatar:Object(c.a)(n.sender.image),name:n.sender.name,size:20}),a.a.createElement(gn,null,n.sender.name+" \u2022 "+Object(c.R)(s))),function(){if(n.description)return a.a.createElement(In,null,n.description)}(),function(){if(n.image)return a.a.createElement(En,null,a.a.createElement(Cn,{src:hn.overlay}),a.a.createElement(_n,null,a.a.createElement(bn,{src:hn.attachment}),g.Fb.IMAGE_ATTACHMENT_TEXT))}(),a.a.createElement(yn,{isOpenOnModal:l,onClick:p},l?g.Fb.VIEW_QUESTION_BUTTON_TEXT_OPEN:g.Fb.VIEW_QUESTION_BUTTON_TEXT))}));xn.propTypes={index:p.a.number.isRequired,question:p.a.object.isRequired},xn.defaultProps={};var Sn=xn,Mn=n("Q7fd"),Nn=n("kfFl"),Tn=n("eVoo"),An={reportIcon:n("sbVj"),blurImgOverlay:n("dsp9")},vn=Object(u.d)(Nn.a).withConfig({displayName:"QuestionModal__StyledModal",componentId:"tjq7vs-0"})(["&.MuiDialog-root{width:75%;height:100%;background:clear;.MuiBackdrop-root{width:75%;background:clear;}.MuiDialog-container{.MuiPaper-root{width:100%;background:rgba(60,72,82,0.65);height:100%;margin:0;max-width:unset;max-height:unset;box-sizing:border-box;pointer-events:none;}}}"]),wn=u.d.div.withConfig({displayName:"QuestionModal__QuestionModalContainer",componentId:"tjq7vs-1"})(["background:",";display:flex;max-height:100%;width:500px;outline:none;flex-direction:column;border-radius:",";box-sizing:border-box;"],(function(e){return e.theme.BODY_BG}),h.c.SPACING_2B),Bn=u.d.div.withConfig({displayName:"QuestionModal__QuestionModalHeader",componentId:"tjq7vs-2"})(["position:relative;display:flex;flex:1;margin:"," ",";margin-bottom:",";"],h.c.SPACING_6B,h.c.SPACING_6B,h.c.SPACING_2B),Pn=u.d.span.withConfig({displayName:"QuestionModal__MessageHeader",componentId:"tjq7vs-3"})(["display:inline-block;font-size:",";color:",";margin-right:",";line-height:",";text-transform:capitalize;@media only screen and (max-width:850px){font-size:",";line-height:",";margin-right:",";}"],h.d.MEDIUM,(function(e){return e.theme.TEXT_TERTIARY}),h.c.SPACING_2B,h.d.LINE_HEIGHT_MAX,h.d.EXTRA_SMALL,h.d.LINE_HEIGHT_MEDIUM,h.c.SPACING_1B),kn=u.d.div.withConfig({displayName:"QuestionModal__ModalContentContainer",componentId:"tjq7vs-4"})(["display:flex;flex-direction:row;align-items:center;justify-content:center;position:absolute;margin-top:",";margin-bottom:",";top:50%;left:50%;transform:translate(-50%,-50%);pointer-events:all;"],h.c.SPACING_10B,h.c.SPACING_10B),Rn=u.d.div.withConfig({displayName:"QuestionModal__NavigationButtonContainer",componentId:"tjq7vs-5"})(["height:48px;width:48px;margin:0px 64px;background:",";border-radius:50%;display:flex;align-items:center;justify-content:center;"],(function(e){return e.theme.BG_MAIN})),Gn=u.d.div.withConfig({displayName:"QuestionModal__NavigationImg",componentId:"tjq7vs-6"})(["width:24px;height:24px;opacity:",";cursor:",";"],(function(e){return e.isDisabled?.5:1}),(function(e){return e.isDisabled?"auto":"pointer"})),On=u.d.div.withConfig({displayName:"QuestionModal__CloseButtonContainer",componentId:"tjq7vs-7"})(["position:absolute;right:0;top:0;height:16px;width:16px;cursor:pointer;"]),jn=u.d.div.withConfig({displayName:"QuestionModal__QuestionDescriptionContainer",componentId:"tjq7vs-8"})(["margin:"," ",";margin-top:0;font-size:",";line-height:",";color:",";overflow:hidden;"],h.c.SPACING_2B,h.c.SPACING_6B,h.d.LARGE,h.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_PRIMARY})),Ln=u.d.div.withConfig({displayName:"QuestionModal__QuestionImageContainer",componentId:"tjq7vs-9"})(["margin:"," ",";max-height:340px;display:flex;flex-direction:row;align-items:center;justify-content:center;overflow:hidden;position:relative;background:",";"],h.c.SPACING_2B,h.c.SPACING_6B,(function(e){return e.theme.BG_LIGHT})),Dn=u.d.img.withConfig({displayName:"QuestionModal__QuestionImg",componentId:"tjq7vs-10"})(["max-height:340px;object-fit:contain;width:100%;transform:rotate(","deg);transition:transform 0.1s ease-in-out;"],(function(e){return e.rotation})),Un=u.d.div.withConfig({displayName:"QuestionModal__RotateButtonContainer",componentId:"tjq7vs-11"})(["height:36px;width:36px;position:absolute;top:",";right:",";display:flex;align-items:center;justify-content:center;border-radius:50%;background:",";box-shadow:0px 8px 16px ",";cursor:pointer;"],h.c.SPACING_3B,h.c.SPACING_3B,(function(e){return e.theme.BG_MAIN}),(function(e){return e.theme.BORDER})),Qn=u.d.div.withConfig({displayName:"QuestionModal__ModalFooter",componentId:"tjq7vs-12"})(["height:64px;position:relative;margin-top:",";padding:"," ",";background:",";border-bottom-right-radius:",";border-bottom-left-radius:",";display:flex;flex-direction:row;justify-content:flex-end;align-items:center;"],h.c.SPACING_5B,h.c.SPACING_3B,h.c.SPACING_6B,(function(e){return e.theme.BG_MAIN}),h.c.SPACING_2B,h.c.SPACING_2B),Hn=u.d.div.withConfig({displayName:"QuestionModal__ButtonsContainer",componentId:"tjq7vs-13"})(["display:flex;flex-direction:row;justify-content:space-between;align-items:center;height:40px;"]),Fn=Object(u.d)(Ve.a).withConfig({displayName:"QuestionModal__ActionButton",componentId:"tjq7vs-14"})(["width:100px;margin-left:",";opacity:",";"],h.c.SPACING_4B,(function(e){return e.disabled?.5:1})),zn=u.d.div.withConfig({displayName:"QuestionModal__ReportButtonContainer",componentId:"tjq7vs-15"})(["position:absolute;left:",";font-size:",";line-height:",";color:",";display:flex;cursor:pointer;"],h.c.SPACING_6B,h.d.SMALL,h.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_TERTIARY})),Xn=u.d.img.withConfig({displayName:"QuestionModal__ReportIcon",componentId:"tjq7vs-16"})(["margin-right:",";"],h.c.SPACING_1B),qn=u.d.div.withConfig({displayName:"QuestionModal__NudityTrueTextContainer",componentId:"tjq7vs-17"})(["font-size:",";line-height:",";color:",";position:absolute;text-align:center;"],h.d.MEDIUM,h.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_TERTIARY})),Yn=u.d.div.withConfig({displayName:"QuestionModal__LoaderContainer",componentId:"tjq7vs-18"})(["position:absolute;"]),Wn=a.a.memo((function(e){var t=e.skipQuestion,n=e.theme,i=Object(r.d)(),s=Object(r.e)((function(e){return e.getIn(["drawingBoardControls","theme"])})),d=Object(r.e)((function(e){return e.getIn(["chat","isQuestionModalOpen"])})),l=Object(r.e)((function(e){return e.getIn(["chat","questions"])})),p=Object(r.e)((function(e){return e.getIn(["chat","questionIndexInModal"])})),u=un.b.getQuestionAtIndex(l,p),h=Object(r.e)((function(e){return e.getIn(["chat","isReportBlockCurtainOpen"])})),f=Object(o.useCallback)((function(e,t){i(Object(st.e)(e,t))}),[]),I=Object(Mn.a)(f,200);Object(o.useEffect)((function(){d&&u.image&&!u.isNudityChecked&&I(p,u.image)}),[u,d]);var E=function(){Object(r.b)((function(){i(Object(st.f)()),i(Object(st.g)())}))},C=function(){t(u.id),i(Object(st.g)())},_=function(){(!u.image||u.isNudityChecked&&!u.hasNudity)&&i(Object(st.d)(u,s))},b=function(){i(Object(st.q)(p))},y=function(){i(Object(st.m)(u))},x=function(){if(u.image)return a.a.createElement(Ln,null,u.isNudityChecked?u.hasNudity?a.a.createElement(o.Fragment,null,a.a.createElement(Dn,{src:An.blurImgOverlay,rotation:u.imageAngle}),a.a.createElement(qn,null,g.Fb.NUDITY_TRUE_TEXT)):a.a.createElement(o.Fragment,null,a.a.createElement(Dn,{src:u.image,rotation:u.imageAngle}),a.a.createElement(Un,{onClick:b},a.a.createElement(m.Eb,null))):a.a.createElement(o.Fragment,null,a.a.createElement(Dn,{src:An.blurImgOverlay,rotation:u.imageAngle}),a.a.createElement(Yn,null,a.a.createElement(Tn.d,{size:36,color:n.GREEN}))))},S=function(e){return e?p===l.size-1:0===p},M=function(e){return a.a.createElement(Rn,{isRight:e,onClick:function(){!function(e){S(e)||(e?Object(r.b)((function(){i(Object(st.l)(p+1)),i(Object(st.g)())})):Object(r.b)((function(){i(Object(st.l)(p-1)),i(Object(st.g)())})))}(e)}},a.a.createElement(Gn,{isDisabled:S(e)},function(e){return a.a.createElement(m.p,{size:24,orientation:e?"right":"left"})}(e)))};return a.a.createElement(vn,{open:d,onClose:E,disableEnforceFocus:!0},function(){if(d)return a.a.createElement(kn,null,M(!1),a.a.createElement(wn,null,a.a.createElement(Bn,null,a.a.createElement(St.a,{avatar:Object(c.a)(u.sender.image),name:u.sender.name,size:20}),a.a.createElement(Pn,null,u.sender.name),a.a.createElement(On,{onClick:E},a.a.createElement(m.u,null))),function(){if(u.description)return a.a.createElement(jn,null,u.description)}(),x(),a.a.createElement(Qn,null,a.a.createElement(zn,{onClick:y},a.a.createElement(Xn,{src:An.reportIcon}),g.Fb.REPORT_BUTTON_TEXT),a.a.createElement(Hn,null,a.a.createElement(Fn,{variant:"hollow",type:"normal",onClick:C},g.Fb.SKIP_BUTTON_TEXT),a.a.createElement(Fn,{disabled:u.image&&(!u.isNudityChecked||u.hasNudity)||h,isEducator:!0,variant:"filled",type:"normal",onClick:_},g.Fb.ANSWER_BUTTON_TEXT)))),M(!0))}())}));Wn.propTypes={skipQuestion:p.a.func},Wn.defaultProps={};var Kn=Object(u.f)(Wn);function Vn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=te()(e);if(t){var s=te()(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return $()(this,n)}}var Jn=u.d.div.withConfig({displayName:"QuestionsFeed__QuestionsFeedContainer",componentId:"sc-1chqgij-0"})(["width:100%;height:100%;overflow:hidden;padding:"," 0 0 ",";box-sizing:border-box;"],h.c.SPACING_4B,h.c.SPACING_4B),Zn=u.d.div.withConfig({displayName:"QuestionsFeed__EmptyChatContainer",componentId:"sc-1chqgij-1"})(["position:absolute;top:0;left:50%;transform:translateX(-50%);display:flex;flex-direction:column;padding:",";padding-top:",";justify-content:flex-start;height:100%;"],h.c.SPACING_4B,h.c.SPACING_0B),$n=u.d.div.withConfig({displayName:"QuestionsFeed__SmileyAndMessageContainer",componentId:"sc-1chqgij-2"})(["display:flex;height:100%;flex-direction:column;justify-content:flex-start;align-items:center;z-index:2;background:",";"],(function(e){var t=e.theme;return"linear-gradient(180deg,  ".concat(t.BODY_BG," 1%, ").concat(t.BODY_BG," 65%, rgba(0, 0, 0, 0) 99%)")})),ei=u.d.div.withConfig({displayName:"QuestionsFeed__SmileyContainer",componentId:"sc-1chqgij-3"})(["margin-top:",";height:88px;width:88px;"],h.c.SPACING_24B),ti=u.d.div.withConfig({displayName:"QuestionsFeed__SmileyTextContainer",componentId:"sc-1chqgij-4"})(["margin-top:",";font-size:",";line-height:",";color:",";width:80%;"],h.c.SPACING_4B,h.d.MEDIUM,h.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_TERTIARY})),ni=function(e){J()(n,e);var t=Vn(n);function n(e){var i;return X()(this,n),i=t.call(this,e),s()(K()(i),"handleResize",(function(){i.cache.clearAll()})),s()(K()(i),"getKeyMapping",(function(e,t){return un.b.getQuestionKeyForVirtualizedList(i.props.questions,e)})),s()(K()(i),"recomputeCellSize",(function(){i.cache.clearAll(),i.list&&i.list.recomputeGridSize()})),s()(K()(i),"renderQuestion",(function(e){var t=un.b.getQuestionAtIndex(i.props.questions,e);return a.a.createElement(Sn,{index:e,question:t})})),s()(K()(i),"rowRenderer",(function(e){var t=e.index,n=e.style,s=e.key,o=e.parent;return a.a.createElement(Wt.a,{key:s,cache:i.cache,parent:o,columnIndex:0,rowIndex:t},a.a.createElement("div",{style:n},i.renderQuestion(t)))})),s()(K()(i),"renderQuestionList",(function(e){var t=e.width,n=e.height;return a.a.createElement(Yt.a,{ref:function(e){i.list=e},id:"allQuestionList",className:"virtualChatList",width:t,height:n,deferredMeasurementCache:i.cache,rowHeight:i.cache.rowHeight,rowRenderer:i.rowRenderer,rowCount:i.props.questions.size,overscanRowCount:10})})),s()(K()(i),"renderQuestionModal",(function(){return a.a.createElement(Kn,{skipQuestion:i.props.skipQuestion})})),s()(K()(i),"renderDisabledFooter",(function(){if(!i.props.isQuestionEnabled&&i.props.isQuestionsTabOpen)return a.a.createElement(it,{type:"questions",socketManager:i.props.socketManager})})),s()(K()(i),"renderEmptyState",(function(){if(i.props.questions&&0==i.props.questions.size)return a.a.createElement(Zn,null,i.renderErrorContainer(g.f.EMPTY_QUESTIONS))})),i.cache=new Wt.b({fixedWidth:!0,defaultHeight:200,keyMapper:i.getKeyMapping}),i}return Y()(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){un.b.isFirstQuestionSame(this.props.questions,e.questions)||this.recomputeCellSize()}},{key:"componentDidUpdate",value:function(e){e.questionIndexInModal!=this.props.questionIndexInModal&&this.list&&this.list.scrollToRow(this.props.questionIndexInModal)}},{key:"renderErrorContainer",value:function(e){return a.a.createElement($n,null,a.a.createElement(ei,null,a.a.createElement(m.m,null)),a.a.createElement(ti,null,e))}},{key:"render",value:function(){return a.a.createElement(o.Fragment,null,a.a.createElement(Jn,null,this.renderEmptyState(),a.a.createElement(qt.a,{length:this.props.questions.size,children:this.renderQuestionList})),this.renderQuestionModal(),this.renderDisabledFooter())}}]),n}(o.PureComponent);ni.propTypes={};var ii=Object(r.c)((function(e){return{questions:e.getIn(["chat","questions"]),questionIndexInModal:e.getIn(["chat","questionIndexInModal"]),isQuestionEnabled:e.getIn(["chat","isQuestionEnabled"]),isQuestionsTabOpen:e.getIn(["chat","isQuestionsTabOpen"])}}))(ni),si=n("sIYH"),oi=n.n(si);function ai(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=te()(e);if(t){var s=te()(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return $()(this,n)}}var ri=u.d.div.withConfig({displayName:"ExpandableText__MessageText",componentId:"sc-11s7wzb-0"})(["margin-top:",";font-size:",";line-height:",";color:",";overflow:hidden;text-overflow:",";word-wrap:",";white-space:",";width:100%;@media only screen and (max-width:850px){font-size:",";line-height:",";}"," &,*{contain:content;","}"],h.c.SPACING_1B,h.d.MEDIUM,h.d.LINE_HEIGHT_MAX,(function(e){return e.theme.TEXT_PRIMARY}),(function(e){return e.isExpanded?"initial":"ellipsis"}),(function(e){return e.isExpanded?"break-word":"initial"}),(function(e){return e.isExpanded?"normal":"nowrap"}),h.d.SMALL,h.d.LINE_HEIGHT_MEDIUM,(function(e){if(e.isPinned&&!e.isExpanded)return Object(u.c)(["margin-top:",";"],h.c.SPACING_2B)}),(function(e){return e.isSelf||e.isEducator?Object(u.c)(["color:",";"],(function(e){return e.theme.WHITE})):Object(u.c)(["color:",";"],(function(e){return e.theme.TEXT_PRIMARY}))})),ci=function(e){J()(n,e);var t=ai(n);function n(){var e;X()(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o)),s()(K()(e),"formatLink",(function(e,t){if("url"==t){if(e.includes("docs.google.com/forms"))return"Form link";if(e.includes("docs"))return"Doc link";if(e.includes(".ppt")||e.includes(".pptx"))return"Ppt link";if(e.includes("facebook.com/groups"))return"fbGroup link";e.length>50&&(e=e.slice(0,50)+"...")}return e})),e}return Y()(n,[{key:"render",value:function(){return a.a.createElement(ri,{isSelf:this.props.isSelf,isEducator:this.props.isEducator,isPinned:!0,isExpanded:this.props.isExpanded},a.a.createElement(oi.a,{options:{format:this.formatLink}},this.props.text))}}]),n}(a.a.PureComponent);function di(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=te()(e);if(t){var s=te()(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return $()(this,n)}}var li=u.d.div.withConfig({displayName:"PinnedMessage__UserAvatarContainer",componentId:"kyhfky-0"})(["display:flex;padding-top:",";width:28px;@media only screen and (max-width:850px){width:0px;}"],h.c.SPACING_2B),pi=u.d.span.withConfig({displayName:"PinnedMessage__MessageHeader",componentId:"kyhfky-1"})(["display:inline-block;font-size:",";color:",";margin-right:",";line-height:",";text-transform:capitalize;@media only screen and (max-width:850px){font-size:",";line-height:",";margin-right:",";&:after{content:':';}}",";"],h.d.SMALL,(function(e){return e.theme.TEXT_TERTIARY}),h.c.SPACING_2B,h.d.LINE_HEIGHT_MAX,h.d.SMALL,h.d.LINE_HEIGHT_MEDIUM,h.c.SPACING_1B,(function(e){if(e.isSelf||e.isEducator)return Object(u.c)(["color:",";"],(function(e){return e.theme.WHITE}))})),ui=u.d.div.withConfig({displayName:"PinnedMessage__PinnedMessageWrapper",componentId:"kyhfky-2"})(["position:absolute;display:flex;justify-content:space-between;align-items:center;text-align:left;width:95%;margin:",";padding:"," ",";background:",";border:1px solid ",";border-radius:",";box-sizing:border-box;max-height:",";transition:max-height 0.25s ease-in;overflow:hidden;",";"],h.c.SPACING_2B,h.c.SPACING_0B,h.c.SPACING_2B,(function(e){return e.theme.BG_MAIN}),(function(e){return e.theme.BORDER}),h.c.SPACING_2B,(function(e){return e.isExpanded?"400px":"40px"}),(function(e){return e.isEducator?Object(u.c)(["background:",";border:none;"],(function(e){return e.theme.BLUE})):e.isSelf?Object(u.c)(["background:",";border:none;"],(function(e){return e.theme.TEXT_PRIMARY})):void 0})),hi=u.d.div.withConfig({displayName:"PinnedMessage__ExpandableTextContainer",componentId:"kyhfky-3"})(["display:flex;width:95%;flex-direction:column;align-items:flex-start;justify-content:flex-start;",""],(function(e){return e.isExpanded?Object(u.c)(["padding:",";padding-right:",";"],h.c.SPACING_2B,h.c.SPACING_0B):Object(u.c)(["padding:",";padding-top:",";padding-right:",";"],h.c.SPACING_2B,h.c.SPACING_0B,h.c.SPACING_0B)})),mi=u.d.div.withConfig({displayName:"PinnedMessage__PinnedMessageContent",componentId:"kyhfky-4"})(["display:flex;width:90%;max-height:",";transition:max-height 0.25s ease-in;"],(function(e){return e.isExpanded?"400px":"40px"})),gi=u.d.img.withConfig({displayName:"PinnedMessage__MessageUnPinImage",componentId:"kyhfky-5"})(["width:16px;height:16px;",""],(function(e){if(!e.isExpanded)return Object(u.c)(["display:none;"])})),fi=u.d.div.withConfig({displayName:"PinnedMessage__ExpandMarkerContainer",componentId:"kyhfky-6"})(["position:absolute;right:0;height:100%;cursor:pointer;padding:",";display:flex;flex-direction:column;justify-content:space-between;align-items:center;transform:rotate(180deg);",""],h.c.SPACING_2B,(function(e){if(e.isExpanded)return Object(u.c)(["transform:rotate(0deg);"])})),Ii={unPinnedImg:n("7BOt"),expandMarker:n("SsHo")},Ei=function(e){J()(n,e);var t=di(n);function n(e){var i;return X()(this,n),i=t.call(this,e),s()(K()(i),"onClickExpandMarker",(function(){i.state.isExpanded?i.onCollapse():i.onExpand()})),s()(K()(i),"onExpand",(function(){i.setState({isExpanded:!0})})),s()(K()(i),"onCollapse",(function(){i.setState({isExpanded:!1})})),s()(K()(i),"onUnpin",(function(){i.props.isEducator&&i.props.onPinUnpin(i.props.message,!1)})),s()(K()(i),"renderMessageHeader",(function(e,t){if(i.state.isExpanded)return i.props.isReplay?a.a.createElement(pi,{isSelf:i.props.isSelf,isEducator:!0},t):a.a.createElement(pi,{isSelf:i.props.isSelf,isEducator:!0},t+" \u2022 "+Object(c.R)(e))})),s()(K()(i),"renderUserAvatarContainer",(function(e,t){return a.a.createElement(li,null,a.a.createElement(St.a,{key:i.props.index,avatar:Object(c.a)(t),name:e,size:20}))})),s()(K()(i),"renderMessageUnpinImage",(function(){if(i.props.isEducator)return a.a.createElement(gi,{isExpanded:i.state.isExpanded,src:Ii.unPinnedImg,onClick:i.onUnpin})})),i.state={isExpanded:!1},i}return Y()(n,[{key:"render",value:function(){var e,t=this.props.message.sender?this.props.message.sender.image:this.props.message.avatar,n=this.props.message.sender?this.props.message.sender.name:this.props.message.name;return e=this.props.message.timetoken?new Date(Number(this.props.message.timetoken)):new Date,a.a.createElement(ui,{isExpanded:this.state.isExpanded,isSelf:this.props.isSelf,isEducator:!0},a.a.createElement(mi,{isExpanded:this.state.isExpanded},this.renderUserAvatarContainer(n,t),a.a.createElement(hi,{isExpanded:this.state.isExpanded},this.renderMessageHeader(e,n),a.a.createElement(ci,{text:this.props.message.text,isSelf:this.props.isSelf,isExpanded:this.state.isExpanded,isEducator:!0}))),a.a.createElement(fi,{isExpanded:this.state.isExpanded},a.a.createElement("img",{onClick:this.onClickExpandMarker,src:Ii.expandMarker}),this.renderMessageUnpinImage()))}}]),n}(a.a.PureComponent),Ci=n("+MhY"),_i=n("ri1g"),bi=n("+UwG");const yi=u.d.div.withConfig({displayName:"Question__InputAreaWrapper",componentId:"sc-1g7cjcd-0"})(["display:flex;flex:1;align-items:center;justify-content:center;background:",";padding:",";padding-top:",";@media only screen and (max-width:850px){margin-right:20%;}"],({theme:e})=>e.BG_MAIN,h.c.SPACING_4B,h.c.SPACING_3B),xi=u.d.div.withConfig({displayName:"Question__TextAreaWrapper",componentId:"sc-1g7cjcd-1"})(["display:flex;flex:1;align-items:center;justify-content:center;background:",";border:1px solid ",";border-radius:",";padding:"," ",";cursor:pointer;overflow:auto;outline:none;& > textarea{display:flex;flex:1;justify-content:flex-start;align-items:center;overflow-y:auto;border:none;outline:none;resize:none;word-wrap:break-word;font-family:UN_REGULAR;font-size:",";line-height:32px;height:32px;padding:",";color:",";background:inherit;}& > textarea::-webkit-input-placeholder{color:",";font-family:UN_REGULAR;}& > textarea::-moz-placeholder{color:",";font-family:UN_REGULAR;}"],({theme:e})=>e.BG_MAIN,e=>e.showLimit?e.theme.RED:e.theme.BORDER,h.c.SPACING_2B,h.c.SPACING_2B,h.c.SPACING_4B,h.d.SMALL,h.c.SPACING_0B,({theme:e})=>e.TEXT_PRIMARY,({theme:e})=>e.TEXT_TERTIARY,({theme:e})=>e.TEXT_TERTIARY),Si=u.d.div.withConfig({displayName:"Question__QuestionIconContainer",componentId:"sc-1g7cjcd-2"})(["display:flex;height:20px;width:20px;margin-left:16px;cursor:pointer;"]),Mi=u.d.div.withConfig({displayName:"Question__SendButtonContainer",componentId:"sc-1g7cjcd-3"})(["display:flex;align-items:center;justify-content:center;width:24px;height:24px;margin-left:",";background:",";border-radius:",";opacity:",";pointer-events:",";"],h.c.SPACING_1B,({theme:e})=>e.TEXT_PRIMARY,h.c.SPACING_1B,({isDisabled:e})=>e?.5:1,({isDisabled:e})=>e?"none":"all"),Ni=u.d.div.withConfig({displayName:"Question__ImageUploaderContainer",componentId:"sc-1g7cjcd-4"})(["display:flex;flex:1;justify-content:flex-start;align-items:center;background:",";will-change:max-height;overflow:hidden;max-height:",";padding:"," "," 0 ",";transition:max-height 0.2s ease-in;"],({theme:e})=>e.BG_MAIN,e=>e.isOpen?"36px":0,h.c.SPACING_3B,h.c.SPACING_4B,h.c.SPACING_4B),Ti=u.d.label.withConfig({displayName:"Question__ImageUploaderLabel",componentId:"sc-1g7cjcd-5"})(["display:flex;cursor:",";pointer-events:",";align-items:center;justify-content:flex-start;> input{display:none;}"],({isDisabled:e})=>e?"initial":"pointer",({isDisabled:e})=>e?"none":"initial"),Ai=u.d.div.withConfig({displayName:"Question__FileNameContainer",componentId:"sc-1g7cjcd-6"})(["margin-left:",";margin-right:",";font-size:",";line-height:20px;color:",";cursor:pointer;max-width:70%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;"],h.c.SPACING_2B,h.c.SPACING_2B,h.d.SMALL,({theme:e})=>e.TEXT_PRIMARY),vi=u.d.div.withConfig({displayName:"Question__UploadImageContainer",componentId:"sc-1g7cjcd-7"})(["position:relative;height:24px;min-width:44px;max-width:44px;background:",";border-radius:",";cursor:pointer;overflow:hidden;& > div{position:absolute;top:",";left:",";}"],({theme:e})=>e.BORDER,h.c.SPACING_1B,h.c.SPACING_1B,h.c.SPACING_3B),wi=u.d.img.withConfig({displayName:"Question__ThumbnailIcon",componentId:"sc-1g7cjcd-8"})(["width:100%;height:100%;object-fit:contain;"]),Bi=u.d.div.withConfig({displayName:"Question__QuestionWrapper",componentId:"sc-1g7cjcd-9"})(["position:relative;display:flex;flex-direction:column;flex:1;width:100%;z-index:4;",""],e=>e.isOpen?Object(u.c)(["max-height:360px;"]):Object(u.c)(["max-height:0;transition:max-height 0s 0.2s;"])),Pi=u.d.div.withConfig({displayName:"Question__ProgressContainer",componentId:"sc-1g7cjcd-10"})(["display:flex;font-size:",";width:4ch;color:",";"],h.d.SMALL,({theme:e})=>e.TEXT_PRIMARY),ki=u.d.div.withConfig({displayName:"Question__CloseIconContainer",componentId:"sc-1g7cjcd-11"})(["display:flex;cursor:pointer;"]),Ri=["image/png","image/jpeg","image/jpg"];class Gi extends a.a.PureComponent{constructor(e){super(e),s()(this,"handleChange",e=>{e&&this.setState({questionTitle:e.target.value,showCharacterLimitText:!1})}),s()(this,"closeQuestionBlock",()=>{this.props.setQuestionMode(!1)}),s()(this,"handleFile",e=>{if(e){var t=new FileReader;t.onload=e=>{this.handleFileChange(e.target.result)},t.readAsDataURL(e)}}),s()(this,"handleFileChange",e=>{this.setState({thumbnail:e})}),s()(this,"onUploadStart",(e,t)=>{Object(c.mb)(e)?this.setState({isImageUploaded:!1,isImageUploading:!0,uploadProgress:0},()=>{this.handleFile(e),t(e)}):this.props.setInfoBannerStatus(g.Z.WRONG_IMAGE_TYPE,!0)}),s()(this,"onUploadFinish",(e,t)=>{const n=e.publicUrl,i=e.publicUrl;this.setState((e,s)=>({fileUrl:i,file:t,fileKey:e.fileKey+1,imageData:n,isImageUploaded:!0,isImageUploading:!1}))}),s()(this,"onUploadError",e=>{this.setState({file:null,fileUrl:null,isImageUploaded:!1,isImageUploading:!1,thumbnail:""}),console.log("[ERROR]-Question Image Upload Failed",e)}),s()(this,"onUploadProgress",e=>{this.setState({uploadProgress:e})}),s()(this,"publishQuestion",(e,t)=>{this.props.socketManager.askQuestion(e,t),bi.f.sendData(bi.c.ADD_QUESTION)}),s()(this,"sendQuestionOnSocket",()=>{const e=this.state.questionTitle.trim().length;if(!this.state.imageData&&e<30||e>180)this.setState({showCharacterLimitText:!0});else if(!this.state.isImageUploading){this.closeQuestionBlock();const e=this.state.questionTitle.trim(),t=this.state.imageData;this.publishQuestion(e,t),this.setState({questionTitle:"",file:null,showCharacterLimitText:!1,thumbnail:"",imageData:"",isImageUploaded:!1,isImageUploading:!1},()=>{this.handleKeyUp(),this.textInput&&this.textInput.blur()})}}),s()(this,"removeImage",e=>{this.questionUploader&&this.questionUploader.abort(),this.setState((e,t)=>({file:null,imageData:"",isImageUploaded:!1,isImageUploading:!1,thumbnail:"",fileKey:e.fileKey+1})),e&&e.preventDefault()}),s()(this,"handleKeyPress",e=>{"Enter"===e.key&&(this.sendQuestionOnSocket(),e.preventDefault&&e.preventDefault())}),s()(this,"handleKeyUp",e=>{setTimeout(()=>{if(this.textInput){this.textInput.style.height="1px";let e=Math.min(this.textInput.scrollHeight,54);this.textInput.style.lineHeight=e>32?"150%":"32px",this.textInput.style.height=Math.min(this.textInput.scrollHeight,54)+"px",this.textInput.scrollTop=this.textInput.scrollHeight}},0)}),s()(this,"handleChatFocus",()=>{this.props.setChatFocus(!0)}),s()(this,"handleChatBlur",()=>{this.props.setChatFocus(!1)}),s()(this,"hideCharacterLimit",()=>{this.setState({showCharacterLimitText:!1})}),s()(this,"setQuestionUploaderRef",e=>{e&&(this.questionUploader=e)}),s()(this,"renderLoader",()=>{if(this.state.isImageUploading)return a.a.createElement(Tn.d,{size:16,color:this.props.theme.GREEN})}),s()(this,"renderImageIcon",()=>this.state.thumbnail?a.a.createElement(wi,{src:this.state.thumbnail}):a.a.createElement(m.g,{paddingTop:4})),s()(this,"renderSendButton",()=>a.a.createElement(Mi,{isDisabled:this.state.isImageUploading,onClick:this.sendQuestionOnSocket},a.a.createElement(m.Yb,null))),s()(this,"renderCharacterLimitText",()=>{let e=this.state.questionTitle.trim().length>180?g.j.QUESTION_MAX_TEXT_LIMIT:g.j.QUESTION_MIN_TEXT_LIMIT;if(this.state.showCharacterLimitText)return a.a.createElement(N,{iconType:e.ICON_TYPE,title:e.TITLE,body:e.BODY,closeAction:this.hideCharacterLimit})}),s()(this,"renderTextInput",()=>a.a.createElement(xi,{showLimit:this.state.showCharacterLimitText},a.a.createElement("textarea",{ref:e=>{this.textInput=e},onKeyPress:this.handleKeyPress,onKeyUp:this.handleKeyUp,onChange:this.handleChange,value:this.state.questionTitle,className:"textarea",maxLength:180,onFocus:this.handleChatFocus,onBlur:this.handleChatBlur,placeholder:"Ask a question..",rows:1,tabIndex:-1}),this.renderSendButton())),this.state={questionTitle:"",imageData:"",isImageUploaded:!1,isImageUploading:!1,uploadProgress:0,fileKey:0},this.questionUploader=null}componentDidUpdate(e){this.props.server&&!this.state.signedUrl&&this.setState({signedUrl:this.getSigningUrl(this.props.server)}),e.isQuestionEnabled&&!this.props.isQuestionEnabled&&this.props.setQuestionMode(!1)}getSigningUrl(e){return"https://test-upload-class.unacademy.com/s3/sign"}renderUploadedImage(){return a.a.createElement(vi,null,this.renderImageIcon(),this.renderLoader())}renderFileName(){const e=this.state.file?this.state.file.name:null,t=this.state.isImageUploading?g.Fb.SEND_UPLOADING:g.Fb.SEND_UPLOAD;return a.a.createElement(Ai,null,null!==e&&void 0!==e?e:t)}renderRemoveImageBtn(){if(this.state.isImageUploading||this.state.isImageUploaded)return a.a.createElement(ki,{onClick:this.removeImage},a.a.createElement(m.u,null))}renderProgress(){if(this.state.isImageUploading)return a.a.createElement(Pi,null,this.state.uploadProgress,"%")}renderUploadOptions(){return[this.renderUploadedImage(),this.renderFileName()]}renderImageUploader(){return a.a.createElement(Ni,{isOpen:this.props.isQuestionModeEnabled},a.a.createElement(Ti,{isDisabled:this.state.isImageUploading||this.state.isImageUploaded,htmlFor:"questionUploadFile"},a.a.createElement(Ci.a,{id:"questionUploadFile",onUploadStart:this.onUploadStart,onUploadProgress:this.onUploadProgress,onUploadError:this.onUploadError,onUploadFinish:this.onUploadFinish,key:this.state.fileKey,supportedFormats:Ri,setRef:this.setQuestionUploaderRef}),this.renderUploadOptions()),this.renderProgress(),this.renderRemoveImageBtn())}renderCloseQuestion(){return a.a.createElement(Si,{onClick:this.closeQuestionBlock},a.a.createElement(m.yb,null))}render(){return a.a.createElement(Bi,{isOpen:this.props.isQuestionModeEnabled},a.a.createElement(d.a,{flexDirection:"column",overflow:"hidden"},this.renderCharacterLimitText(),this.renderImageUploader()),a.a.createElement(yi,null,this.renderTextInput(),this.renderCloseQuestion()))}}const Oi={setInfoBannerStatus:_i.N,setChatFocus:st.s,setQuestionMode:st.A};var ji=Object(u.f)(Object(r.c)(e=>({isQuestionEnabled:e.getIn(["chat","isQuestionEnabled"]),isQuestionModeEnabled:e.getIn(["chat","isQuestionModeEnabled"]),server:e.getIn(["app","server"])}),Oi)(Gi)),Li=n("9/5/"),Di=n.n(Li);function Ui(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=te()(e);if(t){var s=te()(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return $()(this,n)}}var Qi=u.d.div.withConfig({displayName:"ActiveGroups__GroupMessageContainer",componentId:"pdwc0s-0"})(["display:flex;justify-content:space-evenly;align-items:center;z-index:2;background:",";border-radius:",";height:0px;margin:",";transition:height 0.1s ease-in;"," @media only screen and (max-width:1150px){"," margin-right:20%;border:none;}@media only screen and (max-width:850px){"," margin-right:20%;border:none;}"],(function(e){return e.theme.BG_MAIN}),h.c.SPACING_2B,(function(e){return e.isOpen?e.isQuestionMode?"".concat(h.c.SPACING_2B," ").concat(h.c.SPACING_4B," 0 ").concat(h.c.SPACING_4B):"".concat(h.c.SPACING_2B," ").concat(h.c.SPACING_4B," -").concat(h.c.SPACING_2B," ").concat(h.c.SPACING_4B):0}),(function(e){if(e.isOpen)return Object(u.c)(["height:48px;border:1px solid ",";"],(function(e){return e.theme.BORDER}))}),(function(e){if(e.isOpen)return Object(u.c)(["height:32px;"])}),(function(e){if(e.isOpen)return Object(u.c)(["height:24px;"])})),Hi=u.d.div.withConfig({displayName:"ActiveGroups__EmojiCountText",componentId:"pdwc0s-1"})(["font-size:",";line-height:",";width:",";@media only screen and (max-width:850px){font-size:",";line-height:",";}",""],h.d.MEDIUM,h.d.LINE_HEIGHT_MAX,(function(e){var t=e.length;return"".concat(t,"ch")}),h.d.SMALL,h.d.LINE_HEIGHT_MEDIUM,(function(e){return e.isSelf?Object(u.c)(["color:",";font-weight:",";"],e.theme.GREEN,h.d.SEMIBOLD):Object(u.c)(["color:",";"],e.theme.TEXT_PRIMARY)})),Fi=function(e){J()(n,e);var t=Ui(n);function n(e){var i;return X()(this,n),i=t.call(this,e),s()(K()(i),"handleEmojiClick",(function(e){if(!i.props.isEducator){if(i.emojisSent>=6)return;0===i.emojisSent&&(clearTimeout(i.limitTimer),i.limitTimer=setTimeout((function(){i.emojisSent=0}),1e4)),i.emojisSent+=1,i.props.onEmojiClick(e)}})),s()(K()(i),"removeGroup",(function(){i.props.resetActiveGroups()})),s()(K()(i),"collapseGroup",Di()((function(){i.props.isEducator&&(i.publishGroupMessage(i.props.emojiArray),i.publishGroupMessageForOldPlatform(i.props.emojiArray)),i.removeGroup()}),1e4)),s()(K()(i),"getEmojiCountText",(function(e){if(e<1e3)return e+"";var t=Math.floor(e/1e3),n=Math.floor(e/100)%10,i="".concat(t);return n&&(i="".concat(t,".").concat(n)),i+="k",e%100!==0?"".concat(i,"+"):i})),s()(K()(i),"renderEmojiCountTextContainer",(function(e){var t=i.getEmojiCountText(e.count);return a.a.createElement(Hi,{isSelf:e.isSelf,length:t.length},t)})),i.emojisSent=0,i.limitTimer=void 0,i}return Y()(n,[{key:"componentWillUnmount",value:function(){this.collapseGroup&&this.collapseGroup.cancel()}},{key:"updateMsg",value:function(e){this.collapseGroup(),this.props.updateActiveGroups(e)}},{key:"publishSingleEmojiForOldPlatform",value:function(e){var t=Ct.a.getEmojiHeaderForOldPlatform(e),n={text:e.text,type:g.jb.GROUP,header:t,count:e.count,isEducator:!0};this.props.socketManager.sendMessage(n)}},{key:"publishGroupMessageForOldPlatform",value:function(e){var t=this;e.filter((function(e){return e.count>0})).forEach((function(e){return t.publishSingleEmojiForOldPlatform(e)}))}},{key:"publishGroupMessage",value:function(e){var t={text:e,type:g.jb.NEW_GROUP};this.props.socketManager.sendMessage(t)}},{key:"render",value:function(){var e=this,t=this.props.emojiArray.filter((function(e){return e.count>0})),n=t.size,i=44-4*(n-1);return a.a.createElement(Qi,{isOpen:n>0,isQuestionMode:this.props.isQuestionModeEnabled},t.map((function(t,n){return a.a.createElement(d.a,{key:n,justifyContent:"center",alignItems:"center"},a.a.createElement(le,{data:t,shouldClick:!0,size:i,handleEmoji:e.handleEmojiClick}),e.renderEmojiCountTextContainer(t))})))}}]),n}(a.a.PureComponent),zi={updateActiveGroups:_i.Db,resetActiveGroups:_i.k},Xi=Object(r.c)((function(e){return{userId:e.getIn(["app","userId"]),isEducator:e.getIn(["app","isEducator"]),emojiArray:e.getIn(["app","emojiArray"]),isQuestionModeEnabled:e.getIn(["chat","isQuestionModeEnabled"])}}),zi,null,{forwardRef:!0})(Fi),qi=n("VEaK");const Yi=u.d.div.withConfig({displayName:"MessagesQuestionsSwitch__Wrapper",componentId:"sc-1vjauiw-0"})(["display:flex;height:48px;align-items:flex-start;justify-content:flex-start;border-bottom:2px solid ",";padding:"," ",";padding-bottom:0;box-sizing:border-box;"],({theme:e})=>e.BORDER,h.c.SPACING_3B,h.c.SPACING_4B),Wi=u.d.div.withConfig({displayName:"MessagesQuestionsSwitch__SwitchBlock",componentId:"sc-1vjauiw-1"})(["height:100%;line-height:",";font-size:",";cursor:pointer;box-sizing:border-box;",""],h.d.LINE_HEIGHT_MAX,h.d.MEDIUM,({isActive:e})=>e?Object(u.c)(["font-weight:",";color:",";border-bottom:2px solid ",";"],h.d.SEMIBOLD,({theme:e})=>e.TEXT_PRIMARY,({theme:e})=>e.TEXT_PRIMARY):Object(u.c)(["color:",";"],({theme:e})=>e.TEXT_TERTIARY)),Ki=Object(u.d)(Wi).withConfig({displayName:"MessagesQuestionsSwitch__MessagesSwitch",componentId:"sc-1vjauiw-2"})(["margin-right:",";"],h.c.SPACING_6B),Vi=Object(u.d)(Wi).withConfig({displayName:"MessagesQuestionsSwitch__QuestionsSwitch",componentId:"sc-1vjauiw-3"})(["margin-right:",";"],h.c.SPACING_2B),Ji=u.d.div.withConfig({displayName:"MessagesQuestionsSwitch__NewQuestionsCount",componentId:"sc-1vjauiw-4"})(["background:",";border:1px solid ",";box-sizing:border-box;border-radius:",";font-weight:",";font-size:",";line-height:",";text-transform:uppercase;color:",";height:24px;display:flex;align-items:center;justify-content:center;padding:",";opacity:",";margin-right:",";"],({theme:e})=>e.BG_MAIN,({theme:e})=>e.BORDER,h.c.SPACING_2B,h.d.BOLD,h.d.EXTRA_SMALL,h.d.LINE_HEIGHT,({theme:e})=>e.TEXT_PRIMARY,h.c.SPACING_2B,({isActive:e})=>e?1:.5,h.c.SPACING_1B),Zi=u.d.div.withConfig({displayName:"MessagesQuestionsSwitch__OffLabel",componentId:"sc-1vjauiw-5"})(["background:",";box-sizing:border-box;border-radius:",";padding:"," ",";opacity:",";font-weight:",";font-size:",";line-height:",";text-transform:uppercase;color:",";height:",";width:",";display:flex;align-items:center;justify-content:center;"],({theme:e})=>e.BG_LIGHT,h.c.SPACING_1B,h.c.SPACING_2B,h.c.SPACING_3B,({isActive:e})=>e?1:.5,h.d.BOLD,h.d.EXTRA_SMALL,h.d.LINE_HEIGHT,({theme:e})=>e.TEXT_TERTIARY,h.c.SPACING_6B,h.c.SPACING_11B),$i=()=>{const e=Object(r.d)(),t=Object(r.e)(e=>e.getIn(["chat","isQuestionEnabled"])),n=Object(r.e)(e=>e.getIn(["chat","isQuestionsTabOpen"])),i=Object(r.e)(e=>e.getIn(["chat","newQuestionsCount"])),s=Object(qi.e)().getOrCreate("QUESION_COMMENT_TAB_TOGGLE");Object(o.useEffect)(()=>(s.isProfileRunning()||s.start(),()=>{s.isProfileRunning()&&s.end()}),[]);return a.a.createElement(Yi,null,a.a.createElement(Ki,{onClick:()=>{e(Object(st.B)(!1));const t=s.peek();bi.f.sendData(bi.c.QUESTION_COMMENT_TAB_TOGGLE,"QUESTION-COMMENT",{[bi.e.Measure1]:t.dts}),s.end(),s.start()},isActive:!n},g.Fb.MESSAGES_SWITCH),a.a.createElement(Vi,{onClick:()=>{e(Object(st.B)(!0));const t=s.peek();bi.f.sendData(bi.c.QUESTION_COMMENT_TAB_TOGGLE,"COMMENT-QUESTION",{[bi.e.Measure1]:t.dts}),s.end(),s.start()},isActive:n},g.Fb.QUESTIONS_SWITCH),(()=>{if(i>0)return a.a.createElement(Ji,{isActive:n},i>999?"999+":i)})(),(()=>{if(!t)return a.a.createElement(Zi,{isActive:n},g.Fb.OFF_LABEL)})())};$i.propTypes={},$i.defaultProps={};var es=$i,ts=n("hKI/"),ns=n.n(ts),is=n("oOl7"),ss=n("r/fz"),os=n("9Ekq"),as=n("Gbs5");const rs=u.d.div.withConfig({displayName:"Chat__ChatContainer",componentId:"xaxmkp-0"})(["display:flex;flex-direction:column;justify-content:space-between;overflow-y:hidden;flex:1;height:100%;max-height:100%;z-index:1;position:relative;background:",";border-top:1px solid ",";user-select:text;"],({theme:e})=>e.BODY_BG,({theme:e})=>e.BORDER),cs=u.d.div.withConfig({displayName:"Chat__ChatFeedContainer",componentId:"xaxmkp-1"})(["display:flex;flex:1;position:relative;flex-direction:column;"]),ds=u.d.div.withConfig({displayName:"Chat__MessagesTabContainer",componentId:"xaxmkp-2"})(["opacity:",";pointer-events:",";display:flex;flex-direction:column;height:100%;width:100%;"],({isActive:e})=>e?1:0,({isActive:e})=>e?"auto":"none"),ls=u.d.div.withConfig({displayName:"Chat__FeedContainer",componentId:"xaxmkp-3"})(["height:100%;position:relative;"]),ps=u.d.div.withConfig({displayName:"Chat__ParticipantsContainer",componentId:"xaxmkp-4"})(["display:flex;justify-content:center;align-items:center;height:28px;font-size:",";color:",";border-bottom:1px solid ",";"],h.d.MEDIUM,({theme:e})=>e.TEXT_PRIMARY,({theme:e})=>e.BORDER),us=u.d.div.withConfig({displayName:"Chat__QuestionsFeedContainer",componentId:"xaxmkp-5"})(["opacity:",";pointer-events:",";display:flex;flex-direction:column;background-color:",";flex:1;position:absolute;height:100%;width:100%;top:0;"],({isActive:e})=>e?1:0,({isActive:e})=>e?"auto":"none",({theme:e})=>e.BODY_BG),hs=u.d.div.withConfig({displayName:"Chat__FooterContainer",componentId:"xaxmkp-6"})(["position:relative;display:flex;flex-direction:column;background:",";"],({theme:e})=>e.BG_MAIN);class ms extends a.a.PureComponent{constructor(e){super(e),s()(this,"onSocketOpen",()=>{}),s()(this,"getDataOnSocketSubscription",()=>{this.props.isReplay||this.getHistory(),this.props.isEducator&&(this.getAllQuestions(),this.getEducatorPollConfig()),this.props.isReplay||this.props.isJoinedMessageSent||this.getAttendance()}),s()(this,"shouldGetLiveLearnersCount",()=>!this.props.isEducator&&this.props.isSpecial&&!this.props.isReplay),s()(this,"onSubscription",()=>{this.props.socketSubscribed||this.props.setSocketSubscribed(!0)}),s()(this,"onUserBlocked",e=>{this.props.setUserBlocked(e)}),s()(this,"onMessageDelete",e=>{this.props.deleteSenderMessages(e.id),this.props.deleteSenderQuestions(e.id)}),s()(this,"scrollToPosition",e=>{this.feedWrapperRef&&this.feedWrapperRef.scrollToPosition(e)}),s()(this,"getOffsetForLastRow",()=>{if(this.feedWrapperRef)return this.feedWrapperRef.getOffsetForLastRow()}),s()(this,"onAskQuestion",e=>{this.props.isEducator||this.props.addMessage(e),this.props.addQuestion(e)}),s()(this,"onDisableQuestions",()=>{this.props.isQuestionEnabled&&(this.props.isReplay||this.props.isEducator||this.props.showSplashScreen||this.props.setInfoBannerStatus(g.Z.QUESTIONS_DISABLED,!0),this.props.setQuestionEnabled(!1))}),s()(this,"onEnableQuestions",()=>{this.props.isQuestionEnabled||(this.props.isReplay||this.props.isEducator||this.props.showSplashScreen||!this.showInfoBannerOnEnableQuestion||this.props.setInfoBannerStatus(g.Z.QUESTIONS_ENABLED,!0),this.showInfoBannerOnEnableQuestion||(this.showInfoBannerOnEnableQuestion=!0),this.props.setQuestionEnabled(!0))}),s()(this,"onGetAllQuestions",e=>{let t=JSON.parse(e.text);t&&this.props.addQuestions(t)}),s()(this,"onTypeAutoSuggest",e=>{let t=e||[];this.props.setSmartReplies(t)}),s()(this,"onClassFinish",e=>{10!=this.props.classState||this.props.isEducator||this.props.isFeedbackShownOnBackClick||this.props.setClassEndState();const t=JSON.parse(e.text);this.props.setFeedbackStats(t)}),s()(this,"onTypeQNA",e=>{switch(e.action){case"ASK_QUESTION":this.onAskQuestion(new un.a(e));break;case"GET_QUESTIONS":this.onGetAllQuestions(e)}}),s()(this,"onTypeConfigRoom",e=>{if(!e)return;let t=JSON.parse(e);t.hasOwnProperty("chatEnabled")&&(t.chatEnabled?this.props.setChatDisabledByEducator(!1):this.props.setChatDisabledByEducator(!0)),t.hasOwnProperty("questionsEnabled")&&(t.questionsEnabled?this.onEnableQuestions(!0):this.onDisableQuestions(!1)),t.hasOwnProperty("emojisEnabled")&&(t.emojisEnabled?this.props.setEmojisEnabled(!0):this.props.setEmojisEnabled(!1))}),s()(this,"onParticipantsCount",e=>{if(this.shouldGetLiveLearnersCount()){const t=JSON.parse(e.text);Object(c.ob)(t)&&t.total_live_count>0&&this.props.setLiveLearnersCount(t.total_live_count)}}),s()(this,"onBroadcastDataObj",e=>{if(JSON.parse(e.text).type===g.Rb.EDUCATOR_IS_LIVE)!this.props.isEducator&&this.props.isModerator&&this.props.isMultiEduClass&&this.props.setIsGoLiveEnabled(!0);else if(this.props.isEducator||!this.props.isEducator&&!this.props.isUserSubscribedToGoal){const t=JSON.parse(e.text);this.props.showSubscriptionCTACard(new os.a(t))}}),s()(this,"onUserKicked",()=>{this.props.isEducator||(this.props.setErrorStatus(g.K.LEARNER_KICKED),this.props.setCanChat(!1))}),s()(this,"onSocketMessage",e=>{let t=JSON.parse(e);switch(t.type){case"DATA":const e=JSON.parse(t.text);switch(e.type){case"MESSAGE":this.onMessage(new Kt.a(e,this.props.educatorUid));break;case"HISTORY":this.onHistory(e.text);break;case"PARTICIPANTS":const t=JSON.parse(e.text);this.onParticipants(t);break;case"BLOCKED":this.onUserBlocked(e);break;case"DELETE":this.onMessageDelete(e);break;case"QNA":this.onTypeQNA(e);break;case"CLASS_CONFIGURATION":this.props.isReplay||this.onTypeConfigRoom(e.text);break;case"PIN_MESSAGE":if(!this.props.isReplay&&!this.props.isEducator){const t=new Kt.a(e,this.props.educatorUid);this.onPinMessageData(t)}break;case"CLASS_STATS":case"CLASS_FINISH":this.onClassFinish(e);break;case"PARTICIPANTS_COUNT":this.onParticipantsCount(e);break;case"BROADCAST_TYPE":this.onBroadcastDataObj(e)}break;case"AUTOSUGGEST":let n=JSON.parse(t.text);this.onTypeAutoSuggest(n);break;case"KICKED":this.onUserKicked()}}),s()(this,"updateChatEvent",e=>{this.chatEvent&&this.chatEvent.time==e.time||(this.chatEvent=e,this.onReceiveData(e))}),s()(this,"onPlayback",e=>{let t=(new Date).getTime(),n=e.target?e.target.currentTime:e;if(t-this.lastUpdatedChatAt>1e3)if(this.lastUpdatedChatAt=t,this.props.messages.length){const e=this.props.classStartTime+1e3*n;(Kt.b.getLastMessageTimetoken(this.props.messages)-this.props.chatOffsetTime-e)/1e3<300&&this.getHistory(Kt.b.getLastMessageTimetoken(this.props.messages),!1,!1);const t=this.props.messages.filter(t=>t.timetoken-this.props.chatOffsetTime<e);Kt.b.haveMessagesChanged(this.props.replayMessagesInView,t)&&this.props.setReplayMessagesInView(t)}else if(this.props.classStartTime){const e=this.props.classStartTime+1e3*n;e&&!isNaN(e)&&(this.getHistory(e,!0,!1,100),this.getHistory(e,!1,!1,50))}}),s()(this,"getHistoryDeferred",()=>{if(this.props.messages.length<g.eb){const e=this.props.messages.first,t=e&&e.timetoken?e.timetoken:0;this.isFetchingMessages||this.getHistory(t)}}),s()(this,"delayedHistoryAfterCalls",ns()(this.getHistoryFromSocket,1e4)),s()(this,"delayedHistoryBeforeCalls",ns()(this.getHistoryFromSocket,1e4)),s()(this,"updateMessages",e=>{this.messagesToBeUpdated=this.messagesToBeUpdated.slice(e.length),this.props.updateMessages(e)}),s()(this,"delayUpdateMessages",ns()(this.updateMessages,1e3)),s()(this,"submitChat",e=>{""!==e.trim()&&this.publishSampleMessage(e)}),s()(this,"submitEmojiToSocket",e=>{Object.keys(e).length>0&&this.publishSampleMessage(e.text,g.jb.MESSAGE,e.oldUrl)}),s()(this,"onSendData",e=>{let t={plugin:g.Ab.Chat,data:e};this.props.onSendData(t)}),s()(this,"onPinUnpin",(e,t)=>{const n=t?g.ib.PIN:g.ib.UNPIN;this.props.isEducator&&(this.props.socketManager.sendPinData(e,n),this.sendPinnedEvent(e,t)),this.showHidePinnedMsg(e,t)}),s()(this,"shouldMakeParticipantCall",()=>!this.props.isReplay&&(this.shouldShowCount(this.props.userId)||this.props.isEducator&&this.props.isSpecial)),s()(this,"setActiveGroupsRef",e=>{this.activeGroups=e}),s()(this,"setFeedRef",e=>{this.feedWrapperRef=e}),s()(this,"handleSelectedReply",e=>{e&&this.publishSampleMessage(e)}),s()(this,"renderAskAQuestionBlock",()=>{if(this.props.isLive&&!this.props.isEducator)return a.a.createElement(d.a,null,a.a.createElement(ji,{socketManager:this.props.socketManager}))}),s()(this,"enableQuestion",()=>{this.props.isEducator&&this.props.socketManager.enableQuestion()}),s()(this,"disableQuestion",()=>{this.props.isEducator&&this.props.socketManager.disableQuestion()}),s()(this,"skipQuestion",e=>{this.props.skipQuestion(e),this.props.socketManager.skipQuestion(e)}),s()(this,"shouldDisplayQuestions",()=>this.props.isQuestionsTabOpen),s()(this,"renderMessagesQuestionsSwitch",()=>{if(this.props.isEducator&&this.props.socketSubscribed)return a.a.createElement(es,null)}),this.state={areItemsLeft:!1},this.isFetchingMessages=!1,this.fetchedHistoryForOldReplay=!1,this.showInfoBannerOnEnableQuestion=!1,this.messagesToBeUpdated=new as.a,this.lastUpdatedChatAt=0}UNSAFE_componentWillReceiveProps(e){this.shouldStartSyncingChat(e)&&(e.recordedVideo.ontimeupdate=this.onPlayback),e.hasDataSeeked&&!this.props.hasDataSeeked&&e.recordedVideo&&e.isReplay&&e.shouldSync&&(this.props.resetMessages(),this.getHistory(Math.ceil(e.classStartTime+e.chatOffsetTime+1e3*e.recordedVideo.currentTime),!0,!0,100))}componentDidUpdate(e){this.props.isSocketManagerInit&&this.props.socketManager&&!this.socketManagerInitialized&&(this.socketManagerInitialized=!0,this.setUpSocket(this.props.socketManager),this.props.isSpecial&&this.props.setChatRulesShownBefore(this.props.classId)),!this.props.isJoinedMessageSent&&this.props.shouldSendJoinedMessage&&this.sendUserJoinedMessage(),!e.answerQuestionSuccess&&this.props.answerQuestionSuccess&&(this.props.handleAnswerQuestion(this.props.answeredQuestion,this.props.answeredQuestionSlideImage),this.props.resetAnswerQuestionSuccess()),!e.socketSubscribed&&this.props.socketSubscribed&&(this.getDataOnSocketSubscription(),this.shouldMakeParticipantCall()&&(clearInterval(this.getParticipantsInterval),this.getParticipantsInterval=setInterval(()=>{this.props.socketManager&&this.props.socketManager.getParticipants(!0)},8e3)),this.shouldGetLiveLearnersCount()&&(clearInterval(this.learnersCountInterval),this.getLiveLearnersCount(),this.learnersCountInterval=setInterval(()=>{this.getLiveLearnersCount()},g.ab))),!this.fetchedHistoryForOldReplay&&this.props.socketSubscribed&&this.props.isOldReplay&&(this.fetchedHistoryForOldReplay=!0,this.getHistory())}componentWillUnmount(){clearInterval(this.getParticipantsInterval),clearInterval(this.learnersCountInterval),this.delayUpdateMessages&&this.delayUpdateMessages.cancel(),this.delayedHistoryAfterCalls&&this.delayedHistoryAfterCalls.cancel(),this.delayedHistoryBeforeCalls&&this.delayedHistoryBeforeCalls.cancel(),this.props.socketManager&&(this.props.socketManager.removeOpenListener(this.onSocketOpen),this.props.socketManager.removeMessageListener(this.onSocketMessage),this.props.socketManager.removeSubscriptionListener(this.onSubscription)),this.props.recordedVideo&&(this.props.recordedVideo.ontimeupdate=null)}getAttendance(){this.props.getAttendance(this.props.apiHost,this.props.classId,this.props.accessToken)}getLiveLearnersCount(){this.props.socketManager&&this.props.socketManager.getLearnersCount()}onPinMessageData(e){switch(Kt.b.getPinnedMsgAction(e)){case g.ib.PIN:this.showHidePinnedMsg(e,!0);break;case g.ib.UNPIN:this.showHidePinnedMsg(e,!1)}}onHistory(e){let t=!1,n=JSON.parse(e);if(n){let e=Kt.b.getMessagesArray(n.map(e=>JSON.parse(e.message)),this.props.educatorUid);t=Kt.b.areMessagesFinished(e,50),e=e.filter(e=>!Kt.b.checkForEmojis(e,this.props.emojiArray)&&e.type!==g.jb.GROUP),Kt.b.haveMessagesChanged(this.props.messages,e)&&(this.props.updateMessages(e,!0),this.setState({areItemsLeft:!t},()=>{this.isFetchingMessages=!1,this.props.isEducator||this.props.shouldAutoplay||!this.props.recordedVideo||this.onPlayback(this.props.recordedVideo.currentTime)}))}else t=!0}onParticipants(e){if(e&&e.total_live_count){let t=e.total_live_count;t!==this.props.participantCount&&this.props.setParticipantCount(t)}}sendUserJoinedMessage(){this.props.educatorId&&this.props.socketManager&&this.props.socketSubscribed&&(this.publishSampleMessage("joined",g.jb.ATTENDANCE),Object(c.yb)("Plus Joined",{"Educator Id":this.props.educatorId,"Lesson Id":this.props.lessonId,"Is Live":!!this.props.canChat,"User Id":this.props.userId}),this.props.setShouldSendJoinedMessage(!1))}shouldStartSyncingChat(e){return!(!this.hasStartedSyncing||!e.recordedVideo||e.recordedVideo.ontimeupdate===this.onPlayback)||!(!this.props.shouldSync||!e.recordedVideo||this.hasStartedSyncing)&&(this.hasStartedSyncing=!0,!0)}getHistory(e=0,t=!0,n=!0,i=50){this.props.socketSubscribed&&(n?this.getHistoryFromSocket(e,t,i):t?this.delayedHistoryBeforeCalls(e,t,i):this.delayedHistoryAfterCalls(e,t,i))}getHistoryFromSocket(e,t,n){this.isFetchingMessages=!0,this.props.socketManager.getHistory(parseInt(e),t,n)}getAllQuestions(e=0,t=30){this.props.socketManager.getAllQuestions(e,t)}getEducatorPollConfig(){this.props.socketManager.getEducatorConfig(g.Bb.CONFIG_TYPE)}onMessage(e,t=!1){e.type!==g.jb.GROUP&&(Kt.b.checkForEmojis(e,this.props.emojiArray)?this.activeGroups&&this.activeGroups.updateMsg(e):(this.messagesToBeUpdated=this.messagesToBeUpdated.push(e),this.delayUpdateMessages(this.messagesToBeUpdated)))}publishSampleMessage(e,t,n=""){const i={text:e,type:t||g.jb.MESSAGE,url:n,isEducator:this.props.isEducator};this.props.socketManager.sendMessage(i),Object(c.yb)("Plus Interaction",{"Property Type":"Comment","Lesson Id":this.props.lessonId,"Educator Id":this.props.educatorId,"Is Live":this.props.canChat,"User Id":this.props.userId})}onReceiveData(e){e&&e.data&&e.data.type===g.L.MESSAGE_PINNED&&this.showHidePinnedMsg(e.data.message,e.data.shouldPin)}showHidePinnedMsg(e,t){t?this.props.setPinnedMsg(e,!0):this.props.setPinnedMsg(null,!1)}sendPinnedEvent(e,t){let n={e:g.L.MESSAGE_PINNED,data:t?e.getJS():null,v:t};this.onSendData(n)}renderPinnedMessage(){if(this.props.havePinnedMsg&&this.props.pinnedMsg)return a.a.createElement(Ei,{message:this.props.pinnedMsg,isEducator:this.props.isEducator,onPinUnpin:this.onPinUnpin})}shouldShowCount(e){return"1YQKDTPESZ"===e||"UGATM35P8I"===e}setUpSocket(e){e.addOpenListener(this.onSocketOpen),e.addMessageListener(this.onSocketMessage),e.addSubscriptionListener(this.onSubscription)}renderActiveGroups(){if(this.props.emojiArray&&this.props.areEmojisEnabled)return a.a.createElement(Xi,{ref:this.setActiveGroupsRef,socketManager:this.props.socketManager,onEmojiClick:this.submitEmojiToSocket})}renderChatFooter(){if(this.props.socketSubscribed)return a.a.createElement(d.a,null,a.a.createElement(ht,{onNewMessage:this.submitChat,onReceivingEmoji:this.submitEmojiToSocket,selectReply:this.handleSelectedReply,socketManager:this.props.socketManager}))}renderParticipantsCount(){if(this.shouldShowCount(this.props.userId)&&this.props.participantCount&&!this.props.isReplay)return a.a.createElement(ps,null,"Learners: ",this.props.participantCount)}renderMessagesFeed(){return a.a.createElement(ds,{isActive:!this.shouldDisplayQuestions()},a.a.createElement(cs,null,a.a.createElement(pn,{ref:this.setFeedRef,shouldSync:this.props.shouldSync,fetchMoreItems:this.getHistoryDeferred,areItemsLeft:this.state.areItemsLeft,onSendData:this.onSendData,onPinUnpin:this.onPinUnpin,pinnedMsg:this.props.pinnedMsg}),this.renderPinnedMessage()),a.a.createElement(hs,null,this.renderActiveGroups(),this.renderChatFooter(),this.renderAskAQuestionBlock()))}renderQuestionsFeed(){if(this.props.isEducator)return a.a.createElement(us,{isActive:this.shouldDisplayQuestions()},a.a.createElement(ii,{skipQuestion:this.skipQuestion,socketManager:this.props.socketManager}))}render(){return a.a.createElement(rs,{id:"chatContainer"},this.renderParticipantsCount(),this.renderMessagesQuestionsSwitch(),a.a.createElement(ls,null,this.renderMessagesFeed(),this.renderQuestionsFeed()))}}const gs={addQuestion:st.b,addQuestions:st.c,skipQuestion:st.G,addMessage:st.a,deleteSenderMessages:st.h,deleteSenderQuestions:st.i,resetMessages:st.p,setReplayMessagesInView:st.C,updateMessages:st.H,setSocketSubscribed:_i.ob,setUserBlocked:_i.yb,setChatDisabledByEducator:st.r,setSmartReplies:st.E,setPinnedMsg:st.y,setShouldSendJoinedMessage:st.D,getAttendance:st.j,setParticipantCount:st.x,setInfoBannerStatus:_i.N,resetAnswerQuestionSuccess:st.o,setQuestionEnabled:st.z,setFeedbackStats:ss.d,setEmojisEnabled:st.w,setLiveLearnersCount:_i.W,showSubscriptionCTACard:is.c,setChatRulesShownBefore:st.v,setErrorStatus:_i.I,setCanChat:_i.p,setIsGoLiveEnabled:_i.R};t.default=Object(r.c)(e=>({theme:e.getIn(["drawingBoardControls","theme"]),messages:e.getIn(["chat","messages"]),replayMessagesInView:e.getIn(["chat","replayMessagesInView"]),server:e.getIn(["app","server"]),emojiArray:e.getIn(["app","emojiArray"]),socketSubscribed:e.getIn(["app","socketSubscribed"]),canChat:e.getIn(["app","canChat"]),userId:e.getIn(["app","userId"]),isReplay:e.getIn(["app","isReplay"]),isLive:10===e.getIn(["app","classState"]),isEducator:e.getIn(["app","isEducator"]),isSpecial:e.getIn(["app","isSpecial"]),classStartTime:e.getIn(["app","classStartTime"]),chatOffsetTime:e.getIn(["app","chatOffsetTime"]),isSocketManagerInit:e.getIn(["app","isSocketManagerInit"]),hasDataSeeked:e.getIn(["canvas","hasDataSeeked"]),participantCount:e.getIn(["chat","participantCount"]),isQuestionModeEnabled:e.getIn(["chat","isQuestionModeEnabled"]),pinnedMsg:e.getIn(["chat","pinnedMsg"]),havePinnedMsg:e.getIn(["chat","havePinnedMsg"]),isJoinedMessageSent:e.getIn(["chat","isJoinedMessageSent"]),shouldSendJoinedMessage:e.getIn(["chat","shouldSendJoinedMessage"]),apiHost:e.getIn(["app","apiHost"]),classId:e.getIn(["app","classId"]),accessToken:e.getIn(["app","accessToken"]),isQuestionsTabOpen:e.getIn(["chat","isQuestionsTabOpen"]),answerQuestionSuccess:e.getIn(["chat","answerQuestionSuccess"]),answeredQuestion:e.getIn(["chat","answeredQuestion"]),answeredQuestionSlideImage:e.getIn(["chat","answeredQuestionSlideImage"]),shouldSync:e.getIn(["app","shouldSyncChat"]),isOldReplay:e.getIn(["app","isOldReplay"]),isQuestionEnabled:e.getIn(["chat","isQuestionEnabled"]),classState:e.getIn(["app","classState"]),isUserSubscribedToGoal:e.getIn(["app","isUserSubscribedToGoal"]),isChatDisabledByEducator:e.getIn(["chat","isChatDisabledByEducator"]),isEducator:e.getIn(["app","isEducator"]),areEmojisEnabled:e.getIn(["chat","areEmojisEnabled"]),isFeedbackShownOnBackClick:e.getIn(["feedback","isFeedbackShownOnBackClick"]),isModerator:e.getIn(["app","isModerator"]),isMultiEduClass:e.getIn(["app","isMultiEduClass"]),educatorUid:e.getIn(["app","educatorUid"])}),gs,null,{forwardRef:!0})(ms)},SsHo:function(e,t,n){e.exports=n.p+"static/media/expand-marker.6a1aaf0a.svg"},dsp9:function(e,t,n){e.exports=n.p+"static/media/questions-overlay.7d9b8205.png"},lwsK:function(e,t,n){e.exports=n.p+"static/media/verify-mobile-icon.f2763665.svg"},sbVj:function(e,t,n){e.exports=n.p+"static/media/question-report-icon.3879094b.svg"},x52R:function(e,t,n){e.exports=n.p+"static/media/temp-blocked-icon.9cf92dae.svg"}}]);
//# sourceMappingURL=chat.2e07c023a3a85da8cdbf.chunk.js.map